{"version":3,"file":"tds-ui-core-highlight.mjs","sources":["../../../projects/tds-ui/core/highlight/highlight.pipe.ts","../../../projects/tds-ui/core/highlight/highlight.module.ts","../../../projects/tds-ui/core/highlight/tds-ui-core-highlight.ts"],"sourcesContent":["\r\n\r\nimport { Pipe, PipeTransform } from '@angular/core';\r\n\r\n// Regular Expressions for parsing tags and attributes\r\nconst SURROGATE_PAIR_REGEXP = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\r\n// ! to ~ is the ASCII range.\r\nconst NON_ALPHANUMERIC_REGEXP = /([^\\#-~ |!])/g;\r\n\r\n/**\r\n * Escapes all potentially dangerous characters, so that the\r\n * resulting string can be safely inserted into attribute or\r\n * element text.\r\n */\r\nfunction encodeEntities(value: string): string {\r\n  return value\r\n    .replace(/&/g, '&amp;')\r\n    .replace(SURROGATE_PAIR_REGEXP, (match: string) => {\r\n      const hi = match.charCodeAt(0);\r\n      const low = match.charCodeAt(1);\r\n      return `&#${(hi - 0xd800) * 0x400 + (low - 0xdc00) + 0x10000};`;\r\n    })\r\n    .replace(NON_ALPHANUMERIC_REGEXP, (match: string) => `&#${match.charCodeAt(0)};`)\r\n    .replace(/</g, '&lt;')\r\n    .replace(/>/g, '&gt;');\r\n}\r\n\r\n@Pipe({\r\n  name: 'tdsHighlight',\r\n  pure: true\r\n})\r\nexport class TDSHighlightPipe implements PipeTransform {\r\n  private UNIQUE_WRAPPERS: [string, string] = ['##==-open_tag-==##', '##==-close_tag-==##'];\r\n\r\n  transform(value: string, highlightValue: string, flags?: string, klass?: string): string | null {\r\n    if (!highlightValue) {\r\n      return value;\r\n    }\r\n\r\n    // Escapes regex keyword to interpret these characters literally\r\n    const searchValue = new RegExp(highlightValue.replace(/([.*+?^=!:${}()|[\\]\\/\\\\])/g, '\\\\$&'), flags);\r\n    const wrapValue = value.replace(searchValue, `${this.UNIQUE_WRAPPERS[0]}$&${this.UNIQUE_WRAPPERS[1]}`);\r\n    return encodeEntities(wrapValue)\r\n      .replace(new RegExp(this.UNIQUE_WRAPPERS[0], 'g'), klass ? `<span class=\"${klass}\">` : '<span>')\r\n      .replace(new RegExp(this.UNIQUE_WRAPPERS[1], 'g'), '</span>');\r\n  }\r\n}\r\n","\r\n\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\n\r\nimport { TDSHighlightPipe } from './highlight.pipe';\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  exports: [TDSHighlightPipe],\r\n  declarations: [TDSHighlightPipe]\r\n})\r\nexport class TDSHighlightModule {}\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}