{"version":3,"file":"tds-ui-affix.mjs","sources":["../../../projects/tds-ui/affix/respond-events.ts","../../../projects/tds-ui/affix/utils.ts","../../../projects/tds-ui/affix/affix.component.ts","../../../projects/tds-ui/affix/affix.module.ts","../../../projects/tds-ui/affix/tds-ui-affix.ts"],"sourcesContent":["\r\n\r\nexport enum AffixRespondEvents {\r\n  resize = 'resize',\r\n  scroll = 'scroll',\r\n  touchstart = 'touchstart',\r\n  touchmove = 'touchmove',\r\n  touchend = 'touchend',\r\n  pageshow = 'pageshow',\r\n  load = 'LOAD'\r\n}\r\n","\r\n\r\nexport interface SimpleRect {\r\n  top: number;\r\n  left: number;\r\n  width?: number;\r\n  height?: number;\r\n  bottom?: number;\r\n}\r\n\r\nexport function isTargetWindow(target: Element | Window): target is Window {\r\n  return typeof window !== 'undefined' && target === window;\r\n}\r\n\r\nexport function getTargetRect(target: Element | Window): SimpleRect {\r\n  return !isTargetWindow(target)\r\n    ? target.getBoundingClientRect()\r\n    : {\r\n        top: 0,\r\n        left: 0,\r\n        bottom: 0\r\n      };\r\n}\r\n","\r\n\r\nimport { Platform } from '@angular/cdk/platform';\r\nimport { DOCUMENT } from '@angular/common';\r\nimport {\r\n  AfterViewInit,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Inject,\r\n  Input,\r\n  NgZone,\r\n  OnChanges,\r\n  OnDestroy,\r\n  OnInit,\r\n  Optional,\r\n  Output,\r\n  Renderer2,\r\n  SimpleChanges,\r\n  ViewChild,\r\n  ViewEncapsulation\r\n} from '@angular/core';\r\n\r\nimport { fromEvent, merge, ReplaySubject, Subject, Subscription } from 'rxjs';\r\nimport { auditTime, map, takeUntil } from 'rxjs/operators';\r\n\r\nimport { Direction, Directionality } from '@angular/cdk/bidi';\r\nimport { AffixRespondEvents } from './respond-events';\r\nimport { getTargetRect, SimpleRect } from './utils';\r\nimport { NgStyleInterface, TDSConfigService, WithConfig } from 'tds-ui/core/config';\r\nimport { NumberInput } from '@angular/cdk/coercion';\r\nimport { InputNumber, TDSSafeAny } from 'tds-ui/shared/utility';\r\nimport { TDSScrollService } from 'tds-ui/core/services';\r\nimport { getStyleAsText, shallowEqual } from 'tds-ui/core/util';\r\n\r\n// const TDS_CONFIG_MODULE_NAME: TDSConfigKey = 'affix';\r\nconst TDS_AFFIX_CLS_PREFIX = 'tds-affix';\r\nconst TDS_AFFIX_DEFAULT_SCROLL_TIME = 20;\r\n\r\n@Component({\r\n  selector: 'tds-affix',\r\n  exportAs: 'tdsAffix',\r\n  template: `\r\n    <div #fixedEl>\r\n      <ng-content></ng-content>\r\n    </div>\r\n  `,\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  encapsulation: ViewEncapsulation.None,\r\n  host:{\r\n    class:\"block\"\r\n  }\r\n})\r\nexport class TDSAffixComponent implements AfterViewInit, OnChanges, OnDestroy, OnInit {\r\n  // readonly _nzModuleName: TDSConfigKey = TDS_CONFIG_MODULE_NAME;\r\n  static ngAcceptInputType_offsetTop: NumberInput;\r\n  static ngAcceptInputType_offsetBottom: NumberInput;\r\n\r\n  @ViewChild('fixedEl', { static: true }) private fixedEl!: ElementRef<HTMLDivElement>;\r\n\r\n  @Input() tdsTarget?: string | Element | Window;\r\n\r\n  @Input()\r\n  @WithConfig<number | null>()\r\n  @InputNumber(undefined)\r\n  offsetTop?: null | number;\r\n\r\n  @Input()\r\n  @WithConfig<number | null>()\r\n  @InputNumber(undefined)\r\n  offsetBottom?: null | number;\r\n\r\n  @Output() readonly affixChange = new EventEmitter<boolean>();\r\n\r\n  dir: Direction = 'ltr';\r\n\r\n  private readonly placeholderNode: HTMLElement;\r\n\r\n  private affixStyle?: NgStyleInterface;\r\n  private placeholderStyle?: NgStyleInterface;\r\n  private positionChangeSubscription: Subscription = Subscription.EMPTY;\r\n  private offsetChanged$ = new ReplaySubject(1);\r\n  private destroy$ = new Subject<void>();\r\n  private timeout?: number;\r\n  private document: Document;\r\n\r\n  private get _target(): Element | Window {\r\n    const el = this.tdsTarget;\r\n    return (typeof el === 'string' ? this.document.querySelector(el) : el) || window;\r\n  }\r\n\r\n  constructor(\r\n    el: ElementRef,\r\n    @Inject(DOCUMENT) doc: TDSSafeAny,\r\n    public tdsConfigService: TDSConfigService,\r\n    private scrollSrv: TDSScrollService,\r\n    private ngZone: NgZone,\r\n    private platform: Platform,\r\n    private renderer: Renderer2,\r\n    private cdr: ChangeDetectorRef,\r\n    @Optional() private directionality: Directionality\r\n  ) {\r\n    // The wrapper would stay at the original position as a placeholder.\r\n    this.placeholderNode = el.nativeElement;\r\n    this.document = doc;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.directionality.change?.pipe(takeUntil(this.destroy$)).subscribe((direction: Direction) => {\r\n      this.dir = direction;\r\n      this.registerListeners();\r\n      this.updatePosition({} as Event);\r\n      this.cdr.detectChanges();\r\n    });\r\n\r\n    this.dir = this.directionality.value;\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    const { offsetBottom, offsetTop, target } = changes;\r\n\r\n    if (offsetBottom || offsetTop) {\r\n      \r\n      this.offsetChanged$.next();\r\n    }\r\n    if (target) {\r\n      this.registerListeners();\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.registerListeners();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.removeListeners();\r\n  }\r\n\r\n  private registerListeners(): void {\r\n    if (!this.platform.isBrowser) {\r\n      return;\r\n    }\r\n\r\n    this.removeListeners();\r\n    this.positionChangeSubscription = this.ngZone.runOutsideAngular(() => {\r\n      return merge(\r\n        ...Object.keys(AffixRespondEvents).map(evName => fromEvent(this._target, evName)),\r\n        this.offsetChanged$.pipe(\r\n          takeUntil(this.destroy$),\r\n          map(() => ({}))\r\n        )\r\n      )\r\n        .pipe(auditTime(TDS_AFFIX_DEFAULT_SCROLL_TIME))\r\n        .subscribe(e => this.updatePosition(e as Event));\r\n    });\r\n    this.timeout = setTimeout(() => this.updatePosition({} as Event));\r\n  }\r\n\r\n  private removeListeners(): void {\r\n    clearTimeout(this.timeout);\r\n    this.positionChangeSubscription.unsubscribe();\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  getOffset(element: Element, _target: Element | Window | undefined): SimpleRect {\r\n    const elemRect = element.getBoundingClientRect();\r\n    const targetRect = getTargetRect(_target!);\r\n\r\n    const scrollTop = this.scrollSrv.getScroll(_target, true);\r\n    const scrollLeft = this.scrollSrv.getScroll(_target, false);\r\n\r\n    const docElem = this.document.body;\r\n    const clientTop = docElem.clientTop || 0;\r\n    const clientLeft = docElem.clientLeft || 0;\r\n\r\n    return {\r\n      top: elemRect.top - targetRect.top + scrollTop - clientTop,\r\n      left: elemRect.left - targetRect.left + scrollLeft - clientLeft,\r\n      width: elemRect.width,\r\n      height: elemRect.height\r\n    };\r\n  }\r\n\r\n  private setAffixStyle(e: Event, affixStyle?: NgStyleInterface): void {\r\n    const originalAffixStyle = this.affixStyle;\r\n    const isWindow = this._target === window;\r\n    if (e.type === 'scroll' && originalAffixStyle && affixStyle && isWindow) {\r\n      return;\r\n    }\r\n    if (shallowEqual(originalAffixStyle, affixStyle)) {\r\n      return;\r\n    }\r\n\r\n    const fixed = !!affixStyle;\r\n    const wrapEl = this.fixedEl.nativeElement;\r\n    this.renderer.setStyle(wrapEl, 'cssText', getStyleAsText(affixStyle));\r\n    this.affixStyle = affixStyle;\r\n    if (fixed) {\r\n      wrapEl.classList.add(TDS_AFFIX_CLS_PREFIX);\r\n      wrapEl.classList.add('fixed');\r\n    } else {\r\n      wrapEl.classList.remove(TDS_AFFIX_CLS_PREFIX);\r\n      wrapEl.classList.remove('fixed');\r\n    }\r\n    this.updateRtlClass();\r\n    if ((affixStyle && !originalAffixStyle) || (!affixStyle && originalAffixStyle)) {\r\n      this.affixChange.emit(fixed);\r\n    }\r\n  }\r\n\r\n  private setPlaceholderStyle(placeholderStyle?: NgStyleInterface): void {\r\n    const originalPlaceholderStyle = this.placeholderStyle;\r\n    if (shallowEqual(placeholderStyle, originalPlaceholderStyle)) {\r\n      return;\r\n    }\r\n    this.renderer.setStyle(this.placeholderNode, 'cssText', getStyleAsText(placeholderStyle));\r\n    this.placeholderStyle = placeholderStyle;\r\n  }\r\n\r\n  private syncPlaceholderStyle(e: Event): void {\r\n    if (!this.affixStyle) {\r\n      return;\r\n    }\r\n    this.renderer.setStyle(this.placeholderNode, 'cssText', '');\r\n    this.placeholderStyle = undefined;\r\n    const styleObj = {\r\n      width: this.placeholderNode.offsetWidth,\r\n      height: this.fixedEl.nativeElement.offsetHeight\r\n    };\r\n    this.setAffixStyle(e, {\r\n      ...this.affixStyle,\r\n      ...styleObj\r\n    });\r\n    this.setPlaceholderStyle(styleObj);\r\n  }\r\n\r\n  updatePosition(e: Event): void {\r\n    if (!this.platform.isBrowser) {\r\n      return;\r\n    }\r\n\r\n    const targetNode = this._target;\r\n    let offsetTop = this.offsetTop;\r\n    const scrollTop = this.scrollSrv.getScroll(targetNode, true);\r\n    const elemOffset = this.getOffset(this.placeholderNode, targetNode!);\r\n    const fixedNode = this.fixedEl.nativeElement;\r\n    const elemSize = {\r\n      width: fixedNode.offsetWidth,\r\n      height: fixedNode.offsetHeight\r\n    };\r\n    const offsetMode = {\r\n      top: false,\r\n      bottom: false\r\n    };\r\n    // Default to `offsetTop=0`.\r\n    if (typeof offsetTop !== 'number' && typeof this.offsetBottom !== 'number') {\r\n      offsetMode.top = true;\r\n      offsetTop = 0;\r\n    } else {\r\n      offsetMode.top = typeof offsetTop === 'number';\r\n      offsetMode.bottom = typeof this.offsetBottom === 'number';\r\n    }\r\n    const targetRect = getTargetRect(targetNode as Window);\r\n    const targetInnerHeight = (targetNode as Window).innerHeight || (targetNode as HTMLElement).clientHeight;\r\n    if (scrollTop >= elemOffset.top - (offsetTop as number) && offsetMode.top) {\r\n      const width = elemOffset.width;\r\n      const top = targetRect.top + (offsetTop as number);\r\n      this.setAffixStyle(e, {\r\n        position: 'fixed',\r\n        top,\r\n        left: targetRect.left + elemOffset.left,\r\n        width\r\n      });\r\n      this.setPlaceholderStyle({\r\n        width,\r\n        height: elemSize.height\r\n      });\r\n    } else if (scrollTop <= elemOffset.top + elemSize.height + (this.offsetBottom as number) - targetInnerHeight && offsetMode.bottom) {\r\n      const targetBottomOffset = targetNode === window ? 0 : window.innerHeight - targetRect.bottom!;\r\n      const width = elemOffset.width;\r\n      this.setAffixStyle(e, {\r\n        position: 'fixed',\r\n        bottom: targetBottomOffset + (this.offsetBottom as number),\r\n        left: targetRect.left + elemOffset.left,\r\n        width\r\n      });\r\n      this.setPlaceholderStyle({\r\n        width,\r\n        height: elemOffset.height\r\n      });\r\n    } else {\r\n      if (\r\n        e.type === AffixRespondEvents.resize &&\r\n        this.affixStyle &&\r\n        this.affixStyle.position === 'fixed' &&\r\n        this.placeholderNode.offsetWidth\r\n      ) {\r\n        this.setAffixStyle(e, {\r\n          ...this.affixStyle,\r\n          width: this.placeholderNode.offsetWidth\r\n        });\r\n      } else {\r\n        this.setAffixStyle(e);\r\n      }\r\n      this.setPlaceholderStyle();\r\n    }\r\n\r\n    if (e.type === 'resize') {\r\n      this.syncPlaceholderStyle(e);\r\n    }\r\n  }\r\n\r\n  private updateRtlClass(): void {\r\n    const wrapEl = this.fixedEl.nativeElement;\r\n    if (this.dir === 'rtl') {\r\n      if (wrapEl.classList.contains(TDS_AFFIX_CLS_PREFIX)) {\r\n        wrapEl.classList.add(`${TDS_AFFIX_CLS_PREFIX}-rtl`);\r\n      } else {\r\n        wrapEl.classList.remove(`${TDS_AFFIX_CLS_PREFIX}-rtl`);\r\n      }\r\n    } else {\r\n      wrapEl.classList.remove(`${TDS_AFFIX_CLS_PREFIX}-rtl`);\r\n    }\r\n  }\r\n}\r\n","\r\nimport { BidiModule } from '@angular/cdk/bidi';\r\nimport { PlatformModule } from '@angular/cdk/platform';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\n\r\nimport { TDSAffixComponent } from './affix.component';\r\n\r\n@NgModule({\r\n  declarations: [TDSAffixComponent],\r\n  exports: [TDSAffixComponent],\r\n  imports: [BidiModule, CommonModule, PlatformModule]\r\n})\r\nexport class TDSAffixModule {}\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}