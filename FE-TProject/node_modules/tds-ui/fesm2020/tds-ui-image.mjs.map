{"version":3,"file":"tds-ui-image.mjs","sources":["../../../projects/tds-ui/image/image-config.ts","../../../projects/tds-ui/image/image-preview-options.ts","../../../projects/tds-ui/image/image-preview-ref.ts","../../../projects/tds-ui/image/utils.ts","../../../projects/tds-ui/image/image-preview.component.ts","../../../projects/tds-ui/image/image.service.ts","../../../projects/tds-ui/image/image-group.component.ts","../../../projects/tds-ui/image/image.directive.ts","../../../projects/tds-ui/image/image.module.ts","../../../projects/tds-ui/image/tds-ui-image.ts"],"sourcesContent":["\r\n\r\n\r\nexport const TDS_IMAGE_ZOOM_CLASS_NAME_MAP = {\r\n  enter: 'tds-zoom-enter',\r\n  enterActive: 'tds-zoom-enter-active',\r\n  leave: 'tds-zoom-leave',\r\n  leaveActive: 'tds-zoom-leave-active'\r\n};\r\n\r\nexport const TDS_IMAGE_FADE_CLASS_NAME_MAP = {\r\n  enter: 'tds-fade-enter',\r\n  enterActive: 'tds-fade-enter-active',\r\n  leave: 'tds-fade-leave',\r\n  leaveActive: 'tds-fade-leave-active'\r\n};\r\nexport const TDS_IMAGE_PREVIEW_MASK_CLASS_NAME = 'tds-image-preview-mask';\r\n","\r\n\r\nimport { Direction } from '@angular/cdk/bidi';\r\n\r\nexport class TDSImagePreviewOptions {\r\n  keyboard?: boolean = true;\r\n  noAnimation?: boolean = false;\r\n  maskClosable?: boolean = true;\r\n  closeOnNavigation?: boolean = true;\r\n  zIndex?: number;\r\n  zoom?: number;\r\n  rotate?: number;\r\n  direction?: Direction;\r\n}\r\n\r\nexport interface TDSImage {\r\n  src: string;\r\n  srcset?: string;\r\n  alt?: string;\r\n  width?: string | number;\r\n  height?: string | number;\r\n}\r\n","\r\n\r\nimport { ESCAPE, hasModifierKey } from '@angular/cdk/keycodes';\r\nimport { OverlayRef } from '@angular/cdk/overlay';\r\nimport { filter, take } from 'rxjs/operators';\r\n\r\nimport { TDSImagePreviewOptions } from './image-preview-options';\r\nimport { TDSImagePreviewComponent } from './image-preview.component';\r\n\r\nexport class TDSImagePreviewRef {\r\n  constructor(\r\n    public previewInstance: TDSImagePreviewComponent,\r\n    private config: TDSImagePreviewOptions,\r\n    private overlayRef: OverlayRef\r\n  ) {\r\n    overlayRef\r\n      .keydownEvents()\r\n      .pipe(filter(event => (this.config.keyboard as boolean) && event.keyCode === ESCAPE && !hasModifierKey(event)))\r\n      .subscribe(event => {\r\n        event.preventDefault();\r\n        this.close();\r\n      });\r\n\r\n    overlayRef.detachments().subscribe(() => {\r\n      this.overlayRef.dispose();\r\n    });\r\n\r\n    previewInstance.containerClick.pipe(take(1)).subscribe(() => {\r\n      this.close();\r\n    });\r\n\r\n    previewInstance.closeClick.pipe(take(1)).subscribe(() => {\r\n      this.close();\r\n    });\r\n\r\n    previewInstance.animationStateChanged\r\n      .pipe(\r\n        filter(event => event.phaseName === 'done' && event.toState === 'leave'),\r\n        take(1)\r\n      )\r\n      .subscribe(() => {\r\n        this.dispose();\r\n      });\r\n  }\r\n\r\n  switchTo(index: number): void {\r\n    this.previewInstance.switchTo(index);\r\n  }\r\n\r\n  next(): void {\r\n    this.previewInstance.next();\r\n  }\r\n\r\n  prev(): void {\r\n    this.previewInstance.prev();\r\n  }\r\n\r\n  close(): void {\r\n    this.previewInstance.startLeaveAnimation();\r\n  }\r\n\r\n  private dispose(): void {\r\n    this.overlayRef.dispose();\r\n  }\r\n}\r\n","\r\n\r\n/**\r\n * fit content details: https://github.com/NG-ZORRO/ng-zorro-antd/pull/6154#issuecomment-745025554\r\n *\r\n * calc position x,y point\r\n *\r\n * CASE (width <= clientWidth && height <= clientHeight):\r\n *\r\n * ------------- clientWidth -------------\r\n * |                                     |\r\n * |        ------ width ------          |\r\n * |        |                 |          |\r\n * |        |                 |          |\r\n * client   height            |          |\r\n * Height   |                 |          |\r\n * |        |                 |          |\r\n * |        -------------------          |\r\n * |                                     |\r\n * |                                     |\r\n * ---------------------------------------\r\n * fixedPosition = { x: 0, y: 0 }\r\n *\r\n *\r\n *\r\n * CASE (width > clientWidth || height > clientHeight):\r\n *\r\n * ------------- clientWidth -------------\r\n * |        |                            |\r\n * |        top                          |\r\n * |        |                            |\r\n * |--left--|--------------- width -----------------\r\n * |        |                                      |\r\n * client   |                                      |\r\n * Height   |                                      |\r\n * |        |                                      |\r\n * |        |                                      |\r\n * |        height                                 |\r\n * |        |                                      |\r\n * ---------|                                      |\r\n *          |                                      |\r\n *          |                                      |\r\n *          |                                      |\r\n *          ----------------------------------------\r\n *\r\n *\r\n * - left || top > 0\r\n *   left -> 0 || top -> 0\r\n *\r\n * - (left + width) < clientWidth || (top + height) < clientHeight\r\n * - left | top + width | height < clientWidth | clientHeight -> Back left | top + width | height === clientWidth | clientHeight\r\n *\r\n * DEFAULT:\r\n * - hold position\r\n *\r\n */\r\nexport function getFitContentPosition(params: {\r\n  width: number;\r\n  height: number;\r\n  left: number;\r\n  top: number;\r\n  clientWidth: number;\r\n  clientHeight: number;\r\n}): { x?: number; y?: number } {\r\n  let fixPos = {};\r\n\r\n  if (params.width <= params.clientWidth && params.height <= params.clientHeight) {\r\n    fixPos = {\r\n      x: 0,\r\n      y: 0\r\n    };\r\n  }\r\n\r\n  if (params.width > params.clientWidth || params.height > params.clientHeight) {\r\n    fixPos = {\r\n      x: fitPoint(params.left, params.width, params.clientWidth),\r\n      y: fitPoint(params.top, params.height, params.clientHeight)\r\n    };\r\n  }\r\n\r\n  return fixPos;\r\n}\r\n\r\nexport function getOffset(node: HTMLElement): { left: number; top: number } {\r\n  const box = node.getBoundingClientRect();\r\n  const docElem = document.documentElement;\r\n\r\n  // use docElem.scrollLeft to support IE\r\n  return {\r\n    left: box.left + (window.pageXOffset || docElem.scrollLeft) - (docElem.clientLeft || document.body.clientLeft || 0),\r\n    top: box.top + (window.pageYOffset || docElem.scrollTop) - (docElem.clientTop || document.body.clientTop || 0)\r\n  };\r\n}\r\n\r\nexport function getClientSize(): { width: number; height: number } {\r\n  const width = document.documentElement.clientWidth;\r\n  const height = window.innerHeight || document.documentElement.clientHeight;\r\n  return {\r\n    width,\r\n    height\r\n  };\r\n}\r\n\r\nfunction fitPoint(start: number, size: number, clientSize: number): number | null {\r\n  const startAddSize = start + size;\r\n  const offsetStart = (size - clientSize) / 2;\r\n  let distance: number | null = null;\r\n\r\n  if (size > clientSize) {\r\n    if (start > 0) {\r\n      distance = offsetStart;\r\n    }\r\n    if (start < 0 && startAddSize < clientSize) {\r\n      distance = -offsetStart;\r\n    }\r\n  } else {\r\n    if (start < 0 || startAddSize > clientSize) {\r\n      distance = start < 0 ? offsetStart : -offsetStart;\r\n    }\r\n  }\r\n\r\n  return distance;\r\n}\r\n","\r\n\r\nimport { AnimationEvent } from '@angular/animations';\r\nimport { OverlayRef } from '@angular/cdk/overlay';\r\nimport {\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  OnDestroy,\r\n  ViewChild,\r\n  ViewEncapsulation\r\n} from '@angular/core';\r\nimport { Subject } from 'rxjs';\r\nimport { fadeMotion } from 'tds-ui/core/animation';\r\nimport { TDSConfigKey, TDSConfigService } from 'tds-ui/core/config';\r\nimport { isNotNil } from 'tds-ui/core/util';\r\nimport { TDSSafeAny } from 'tds-ui/shared/utility';\r\nimport { TDS_IMAGE_FADE_CLASS_NAME_MAP } from './image-config';\r\nconst TDS_CONFIG_MODULE_NAME: TDSConfigKey = 'image';\r\n\r\n\r\n\r\nimport { TDSImage, TDSImagePreviewOptions } from './image-preview-options';\r\nimport { TDSImagePreviewRef } from './image-preview-ref';\r\nimport { getClientSize, getFitContentPosition, getOffset } from './utils';\r\n\r\nexport interface NzImageContainerOperation {\r\n  icon: string;\r\n  type: string;\r\n\r\n  onClick(): void;\r\n}\r\n\r\nconst initialPosition = {\r\n  x: 0,\r\n  y: 0\r\n};\r\n\r\n@Component({\r\n  selector: 'tds-image-preview',\r\n  exportAs: 'tdsImagePreview',\r\n  animations: [fadeMotion],\r\n  template: `\r\n    <div class=\"tds-image-preview pointer-events-none h-full\ttext-center m-0 p-0\">\r\n      <div tabindex=\"0\" aria-hidden=\"true\" style=\"width: 0; height: 0; overflow: hidden; outline: none;\"></div>\r\n      <div class=\"tds-image-preview-content m-0 p-0 w-full h-full\">\r\n        <div class=\"tds-image-preview-body absolute inset-0 overflow-hidden\">\r\n          <div class=\"tds-image-preview-operations box-border absolute m-0 p-0 top-6 right-6  pointer-events-auto\" style=\"zIndex:1\">\r\n            <div\r\n              class=\"tds-image-preview-operations-operation flex items-center justify-center cursor-pointer\"             \r\n              (click)=\"onClose()\"\r\n            >\r\n            <button tds-button-close class=\"tds-image-preview-operations-icon text-white dark:text-white\"></button>\r\n             </div>\r\n          </div>\r\n          <div\r\n            class=\"tds-image-preview-img-wrapper absolute inset-0 flex items-center justify-center\"\r\n            cdkDrag\r\n            [style.transform]=\"previewImageWrapperTransform\"\r\n            [cdkDragFreeDragPosition]=\"position\"\r\n            (mousedown)=\"onDragStarted()\"\r\n            (cdkDragReleased)=\"onDragReleased()\"\r\n          >\r\n            <ng-container *ngFor=\"let image of images; index as imageIndex\">\r\n              <img\r\n                cdkDragHandle\r\n                class=\"tds-image-preview-img text-center pointer-events-auto\"\r\n                #imgRef\r\n                *ngIf=\"index === imageIndex\"\r\n                [attr.src]=\"image.src\"\r\n                [attr.srcset]=\"image.srcset\"\r\n                [attr.alt]=\"image.alt\"\r\n                [style.width]=\"image.width\"\r\n                [style.height]=\"image.height\"\r\n                [style.transform]=\"previewImageTransform\"\r\n              />\r\n            </ng-container>\r\n          </div>\r\n          <ul class=\"tds-image-preview-operations pointer-events-auto box-border absolute m-0  cursor-pointer bottom-0 right-0 flex justify-center items-center w-full bg-black bg-opacity-40 py-3\" style=\"zIndex:1\">\r\n            <li\r\n              class=\"tds-image-preview-operations-operation mr-5  cursor-pointer  flex \"\r\n              [ngClass]=\"zoomOutDisabled && option.type === 'zoomOut' ?'text-neutral-1-900':'text-white'\"\r\n              [class.tds-image-preview-operations-operation-disabled]=\"zoomOutDisabled && option.type === 'zoomOut'\"\r\n              (click)=\"option.onClick()\"\r\n              *ngFor=\"let option of operations\"\r\n            >\r\n              <span class=\"tds-image-preview-operations-icon text-xl leading-none \" [ngClass]=\"option.icon\"></span>\r\n            </li>\r\n          </ul>\r\n          <ng-container *ngIf=\"images.length > 1\">\r\n            <div\r\n              class=\"tds-image-preview-switch-left pointer-events-auto -mt-5  cursor-pointer rounded-full bg-black bg-opacity-40  text-white left-5 absolute top-1/2  flex items-censter  z-10 p-5\"\r\n              [class.tds-image-preview-switch-left-disabled]=\"index <= 0\"\r\n              [ngClass]=\"index <= 0 ?'text-neutral-1-900':'text-white'\"\r\n              (click)=\"onSwitchLeft($event)\"\r\n            >\r\n              <span class=\"tdsi-arrow-left-line text-xl leading-none\"></span>\r\n            </div>\r\n            <div\r\n              class=\"tds-image-preview-switch-right rounded-full -mt-5 pointer-events-auto cursor-pointer bg-black bg-opacity-40 text-white absolute top-1/2 right-5 flex items-censter z-10 p-5\"\r\n              [class.tds-image-preview-switch-right-disabled]=\"index >= images.length - 1\"\r\n              [ngClass]=\"index >= (images.length - 1) ?'text-neutral-1-900':'text-white'\"\r\n              (click)=\"onSwitchRight($event)\"\r\n            >\r\n              <span class=\"tdsi-arrow-right-line text-xl leading-none\"></span>\r\n            </div>\r\n          </ng-container>\r\n        </div>\r\n      </div>\r\n      <div tabindex=\"0\" aria-hidden=\"true\" style=\"width: 0; height: 0; overflow: hidden; outline: none;\"></div>\r\n    </div>\r\n  `,\r\n  preserveWhitespaces: false,\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  encapsulation: ViewEncapsulation.None,\r\n  host: {\r\n    '[class.tds-image-preview-moving]': 'isDragging',\r\n    '[style.zIndex]': 'config.zIndex',\r\n    '[class.tds-image-preview-wrap]': 'true',\r\n    '[@.disabled]': 'config.noAnimation',\r\n    '[@fadeMotion]': 'animationState',\r\n    '(@fadeMotion.start)': 'onAnimationStart($event)',\r\n    '(@fadeMotion.done)': 'onAnimationDone($event)',\r\n    '(click)': 'onContainerClick($event)',\r\n    'class': \"fixed inset-0 overflow-auto bg-black bg-opacity-40\",\r\n    tabindex: '-1',\r\n    role: 'document'\r\n  }\r\n})\r\nexport class TDSImagePreviewComponent implements OnDestroy {\r\n  images: TDSImage[] = [];\r\n  index = 0;\r\n  isDragging = false;\r\n  visible = true;\r\n  animationState: 'void' | 'enter' | 'leave' = 'enter';\r\n  animationStateChanged = new EventEmitter<AnimationEvent>();\r\n\r\n  previewImageTransform = '';\r\n  previewImageWrapperTransform = '';\r\n  operations: NzImageContainerOperation[] = [\r\n    {\r\n      icon: 'tdsi-rotate-left-line',\r\n      onClick: () => {\r\n        this.onRotateLeft();\r\n      },\r\n      type: 'rotateLeft'\r\n    },\r\n    {\r\n      icon: 'tdsi-rotate-right-line',\r\n      onClick: () => {\r\n        this.onRotateRight();\r\n      },\r\n      type: 'rotateRight'\r\n    },\r\n\r\n    {\r\n      icon: 'tdsi-zoom-out-line',\r\n      onClick: () => {\r\n        this.onZoomOut();\r\n      },\r\n      type: 'zoomOut'\r\n    },\r\n    {\r\n      icon: 'tdsi-zoom-in-line',\r\n      onClick: () => {\r\n        this.onZoomIn();\r\n      },\r\n      type: 'zoomIn'\r\n    },\r\n\r\n\r\n  ];\r\n\r\n  zoomOutDisabled = false;\r\n  position = { ...initialPosition };\r\n  previewRef!: TDSImagePreviewRef;\r\n  containerClick = new EventEmitter<void>();\r\n  closeClick = new EventEmitter<void>();\r\n\r\n  @ViewChild('imgRef') imageRef!: ElementRef<HTMLImageElement>;\r\n\r\n  private zoom: number;\r\n  private rotate: number;\r\n  private destroy$ = new Subject<void>();\r\n\r\n  get animationDisabled(): boolean {\r\n    return this.config.noAnimation ?? false;\r\n  }\r\n\r\n  get maskClosable(): boolean {\r\n    const defaultConfig: TDSSafeAny = this.tdsConfigService.getConfigForComponent(TDS_CONFIG_MODULE_NAME) || {};\r\n    return this.config.maskClosable ?? defaultConfig.maskClosable ?? true;\r\n  }\r\n\r\n  constructor(\r\n    private cdr: ChangeDetectorRef,\r\n    public tdsConfigService: TDSConfigService,\r\n    public config: TDSImagePreviewOptions,\r\n    private overlayRef: OverlayRef\r\n  ) {\r\n    // TODO: move to host after View Engine deprecation\r\n    this.zoom = this.config.zoom ?? 1;\r\n    this.rotate = this.config.rotate ?? 0;\r\n    this.updateZoomOutDisabled();\r\n    this.updatePreviewImageTransform();\r\n    this.updatePreviewImageWrapperTransform();\r\n  }\r\n\r\n  setImages(images: TDSImage[]): void {\r\n    this.images = images;\r\n    this.cdr.markForCheck();\r\n  }\r\n\r\n  switchTo(index: number): void {\r\n    this.index = index;\r\n    this.cdr.markForCheck();\r\n  }\r\n\r\n  next(): void {\r\n    if (this.index < this.images.length - 1) {\r\n      this.reset();\r\n      this.index++;\r\n      this.updatePreviewImageTransform();\r\n      this.updatePreviewImageWrapperTransform();\r\n      this.updateZoomOutDisabled();\r\n      this.cdr.markForCheck();\r\n    }\r\n  }\r\n\r\n  prev(): void {\r\n    if (this.index > 0) {\r\n      this.reset();\r\n      this.index--;\r\n      this.updatePreviewImageTransform();\r\n      this.updatePreviewImageWrapperTransform();\r\n      this.updateZoomOutDisabled();\r\n      this.cdr.markForCheck();\r\n    }\r\n  }\r\n\r\n  markForCheck(): void {\r\n    this.cdr.markForCheck();\r\n  }\r\n\r\n  onClose(): void {\r\n    this.closeClick.emit();\r\n  }\r\n\r\n  onZoomIn(): void {\r\n    this.zoom += 1;\r\n    this.updatePreviewImageTransform();\r\n    this.updateZoomOutDisabled();\r\n    this.position = { ...initialPosition };\r\n  }\r\n\r\n  onZoomOut(): void {\r\n    if (this.zoom > 1) {\r\n      this.zoom -= 1;\r\n      this.updatePreviewImageTransform();\r\n      this.updateZoomOutDisabled();\r\n      this.position = { ...initialPosition };\r\n    }\r\n  }\r\n\r\n  onRotateRight(): void {\r\n    this.rotate += 90;\r\n    this.updatePreviewImageTransform();\r\n  }\r\n\r\n  onRotateLeft(): void {\r\n    this.rotate -= 90;\r\n    this.updatePreviewImageTransform();\r\n  }\r\n\r\n  onSwitchLeft(event: MouseEvent): void {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    this.prev();\r\n  }\r\n\r\n  onSwitchRight(event: MouseEvent): void {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    this.next();\r\n  }\r\n\r\n  onContainerClick(e: MouseEvent): void {\r\n    if (e.target === e.currentTarget && this.maskClosable) {\r\n      this.containerClick.emit();\r\n    }\r\n  }\r\n\r\n  onAnimationStart(event: AnimationEvent): void {\r\n    if (event.toState === 'enter') {\r\n      this.setEnterAnimationClass();\r\n    } else if (event.toState === 'leave') {\r\n      this.setLeaveAnimationClass();\r\n    }\r\n\r\n    this.animationStateChanged.emit(event);\r\n  }\r\n\r\n  onAnimationDone(event: AnimationEvent): void {\r\n    if (event.toState === 'enter') {\r\n      this.setEnterAnimationClass();\r\n    } else if (event.toState === 'leave') {\r\n      this.setLeaveAnimationClass();\r\n    }\r\n    this.animationStateChanged.emit(event);\r\n  }\r\n\r\n  startLeaveAnimation(): void {\r\n    this.animationState = 'leave';\r\n    this.cdr.markForCheck();\r\n  }\r\n\r\n  onDragStarted(): void {\r\n    this.isDragging = true;\r\n  }\r\n\r\n  onDragReleased(): void {\r\n    this.isDragging = false;\r\n    const width = this.imageRef.nativeElement.offsetWidth * this.zoom;\r\n    const height = this.imageRef.nativeElement.offsetHeight * this.zoom;\r\n    const { left, top } = getOffset(this.imageRef.nativeElement);\r\n    const { width: clientWidth, height: clientHeight } = getClientSize();\r\n    const isRotate = this.rotate % 180 !== 0;\r\n    const fitContentParams = {\r\n      width: isRotate ? height : width,\r\n      height: isRotate ? width : height,\r\n      left,\r\n      top,\r\n      clientWidth,\r\n      clientHeight\r\n    };\r\n    const fitContentPos = getFitContentPosition(fitContentParams);\r\n    if (isNotNil(fitContentPos.x) || isNotNil(fitContentPos.y)) {\r\n      this.position = { ...this.position, ...fitContentPos };\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  private updatePreviewImageTransform(): void {\r\n    this.previewImageTransform = `scale3d(${this.zoom}, ${this.zoom}, 1) rotate(${this.rotate}deg)`;\r\n  }\r\n\r\n  private updatePreviewImageWrapperTransform(): void {\r\n    this.previewImageWrapperTransform = `translate3d(${this.position.x}px, ${this.position.y}px, 0)`;\r\n  }\r\n\r\n  private updateZoomOutDisabled(): void {\r\n    this.zoomOutDisabled = this.zoom <= 1;\r\n  }\r\n\r\n  private setEnterAnimationClass(): void {\r\n    if (this.animationDisabled) {\r\n      return;\r\n    }\r\n    const backdropElement = this.overlayRef.backdropElement;\r\n    if (backdropElement) {\r\n      backdropElement.classList.add(TDS_IMAGE_FADE_CLASS_NAME_MAP.enter);\r\n      backdropElement.classList.add(TDS_IMAGE_FADE_CLASS_NAME_MAP.enterActive);\r\n    }\r\n  }\r\n\r\n  private setLeaveAnimationClass(): void {\r\n    if (this.animationDisabled) {\r\n      return;\r\n    }\r\n    const backdropElement = this.overlayRef.backdropElement;\r\n    if (backdropElement) {\r\n      backdropElement.classList.add(TDS_IMAGE_FADE_CLASS_NAME_MAP.leave);\r\n      backdropElement.classList.add(TDS_IMAGE_FADE_CLASS_NAME_MAP.leaveActive);\r\n    }\r\n  }\r\n\r\n  private reset(): void {\r\n    this.zoom = 1;\r\n    this.rotate = 0;\r\n    this.position = { ...initialPosition };\r\n  }\r\n}\r\n","\r\n\r\nimport { Directionality } from '@angular/cdk/bidi';\r\nimport { Overlay, OverlayConfig, OverlayRef } from '@angular/cdk/overlay';\r\nimport { ComponentPortal } from '@angular/cdk/portal';\r\nimport { Injectable, Injector, Optional } from '@angular/core';\r\nimport { ImageConfig, TDSConfigKey, TDSConfigService } from 'tds-ui/core/config';\r\n\r\nimport { TDS_IMAGE_PREVIEW_MASK_CLASS_NAME } from './image-config';\r\nimport { TDSImage, TDSImagePreviewOptions } from './image-preview-options';\r\nimport { TDSImagePreviewRef } from './image-preview-ref';\r\nimport { TDSImagePreviewComponent } from './image-preview.component';\r\nconst TDS_CONFIG_MODULE_NAME: TDSConfigKey = 'image';\r\nexport interface TDSImageService {\r\n  preview(images: TDSImage[], option?: TDSImagePreviewOptions): TDSImagePreviewRef;\r\n}\r\n\r\n@Injectable()\r\nexport class TDSImageService {\r\n  constructor(\r\n    private overlay: Overlay,\r\n    private injector: Injector,\r\n    private tdsConfigService: TDSConfigService,\r\n    @Optional() private directionality: Directionality\r\n  ) {}\r\n\r\n  preview(images: TDSImage[], options?: TDSImagePreviewOptions): TDSImagePreviewRef {\r\n    return this.display(images, options);\r\n  }\r\n\r\n  private display(images: TDSImage[], config?: TDSImagePreviewOptions): TDSImagePreviewRef {\r\n    const configMerged = { ...new TDSImagePreviewOptions(), ...(config ?? {}) };\r\n    const overlayRef = this.createOverlay(configMerged);\r\n    const previewComponent = this.attachPreviewComponent(overlayRef, configMerged);\r\n    previewComponent.setImages(images);\r\n    const previewRef = new TDSImagePreviewRef(previewComponent, configMerged, overlayRef);\r\n\r\n    previewComponent.previewRef = previewRef;\r\n    return previewRef;\r\n  }\r\n\r\n  private attachPreviewComponent(overlayRef: OverlayRef, config: TDSImagePreviewOptions): TDSImagePreviewComponent {\r\n    const injector = Injector.create({\r\n      parent: this.injector,\r\n      providers: [\r\n        { provide: OverlayRef, useValue: overlayRef },\r\n        { provide: TDSImagePreviewOptions, useValue: config }\r\n      ]\r\n    });\r\n\r\n    const containerPortal = new ComponentPortal(TDSImagePreviewComponent, null, injector);\r\n    const containerRef = overlayRef.attach(containerPortal);\r\n\r\n    return containerRef.instance;\r\n  }\r\n\r\n  private createOverlay(config: TDSImagePreviewOptions): OverlayRef {\r\n    const globalConfig = (this.tdsConfigService.getConfigForComponent(TDS_CONFIG_MODULE_NAME) as ImageConfig) || {};\r\n    const overLayConfig = new OverlayConfig({\r\n      hasBackdrop: true,\r\n      scrollStrategy: this.overlay.scrollStrategies.block(),\r\n      positionStrategy: this.overlay.position().global(),\r\n      disposeOnNavigation: config.closeOnNavigation ?? globalConfig.closeOnNavigation ?? true,\r\n      backdropClass: TDS_IMAGE_PREVIEW_MASK_CLASS_NAME,\r\n      direction: config.direction || globalConfig.direction || this.directionality.value\r\n    });\r\n\r\n    return this.overlay.create(overLayConfig);\r\n  }\r\n}\r\n","\r\n\r\nimport { ChangeDetectionStrategy, Component, ViewEncapsulation } from '@angular/core';\r\n\r\nimport { TDSImageDirective } from './image.directive';\r\n\r\n@Component({\r\n  selector: 'tds-image-group',\r\n  exportAs: 'tdsImageGroup',\r\n  template: '<ng-content></ng-content>',\r\n  preserveWhitespaces: false,\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class TDSImageGroupComponent {\r\n  images: TDSImageDirective[] = [];\r\n\r\n  addImage(image: TDSImageDirective): void {\r\n    this.images.push(image);\r\n  }\r\n}\r\n","\r\n\r\nimport { Direction, Directionality } from '@angular/cdk/bidi';\r\nimport { BooleanInput } from '@angular/cdk/coercion';\r\nimport { DOCUMENT } from '@angular/common';\r\nimport {\r\n  ChangeDetectorRef,\r\n  Directive,\r\n  ElementRef,\r\n  Inject,\r\n  Input,\r\n  OnChanges,\r\n  OnDestroy,\r\n  OnInit,\r\n  Optional,\r\n  SimpleChanges\r\n} from '@angular/core';\r\nimport { Subject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { TDSConfigKey, TDSConfigService, WithConfig } from 'tds-ui/core/config';\r\nimport { InputBoolean, TDSSafeAny } from 'tds-ui/shared/utility';\r\n\r\n\r\nimport { TDSImageGroupComponent } from './image-group.component';\r\nimport { TDSImageService } from './image.service';\r\n\r\nconst TDS_CONFIG_MODULE_NAME: TDSConfigKey = 'image';\r\n\r\nexport type ImageStatusType = 'error' | 'loading' | 'normal';\r\n\r\n@Directive({\r\n  selector: 'img[tds-image]',\r\n  exportAs: 'tdsImage',\r\n  host: {\r\n    '(click)': 'onPreview()'\r\n  }\r\n})\r\nexport class TDSImageDirective implements OnInit, OnChanges, OnDestroy {\r\n  readonly _TDSModuleName: TDSConfigKey = TDS_CONFIG_MODULE_NAME;\r\n\r\n  static ngAcceptInputType_disablePreview: BooleanInput;\r\n\r\n  @Input() tdsSrc = '';\r\n  @Input() srcset = '';\r\n  @Input() @InputBoolean() @WithConfig() disablePreview: boolean = false;\r\n  @Input() @WithConfig() fallback: string | null = null;\r\n  @Input() @WithConfig() placeholder: string | null = null;\r\n\r\n  dir?: Direction;\r\n  backLoadImage!: HTMLImageElement;\r\n  private status: ImageStatusType = 'normal';\r\n  private destroy$: Subject<void> = new Subject();\r\n\r\n  get previewable(): boolean {\r\n    return !this.disablePreview && this.status !== 'error';\r\n  }\r\n\r\n  constructor(\r\n    @Inject(DOCUMENT) private document: TDSSafeAny,\r\n    public tdsConfigService: TDSConfigService,\r\n    private elementRef: ElementRef,\r\n    private tdsImageService: TDSImageService,\r\n    protected cdr: ChangeDetectorRef,\r\n    @Optional() private parentGroup: TDSImageGroupComponent,\r\n    @Optional() private directionality: Directionality\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.backLoad();\r\n    if (this.parentGroup) {\r\n      this.parentGroup.addImage(this);\r\n    }\r\n    if (this.directionality) {\r\n      this.directionality.change?.pipe(takeUntil(this.destroy$)).subscribe((direction: Direction) => {\r\n        this.dir = direction;\r\n        this.cdr.detectChanges();\r\n      });\r\n      this.dir = this.directionality.value;\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  onPreview(): void {\r\n    if (!this.previewable) {\r\n      return;\r\n    }\r\n\r\n    if (this.parentGroup) {\r\n      // preview inside image group\r\n      const previewAbleImages = this.parentGroup.images.filter(e => e.previewable);\r\n      const previewImages = previewAbleImages.map(e => ({ src: e.tdsSrc, srcset: e.srcset }));\r\n      const previewIndex = previewAbleImages.findIndex(el => this === el);\r\n      const previewRef = this.tdsImageService.preview(previewImages, { direction: this.dir });\r\n      previewRef.switchTo(previewIndex);\r\n    } else {\r\n      // preview not inside image group\r\n      const previewImages = [{ src: this.tdsSrc, srcset: this.srcset }];\r\n      this.tdsImageService.preview(previewImages, { direction: this.dir });\r\n    }\r\n  }\r\n\r\n  getElement(): ElementRef<HTMLImageElement> {\r\n    return this.elementRef;\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    const { tdsSrc } = changes;\r\n    if (tdsSrc) {\r\n      this.getElement().nativeElement.src = tdsSrc.currentValue;\r\n      this.backLoad();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * use internal Image object handle fallback & placeholder\r\n   *\r\n   * @private\r\n   */\r\n  private backLoad(): void {\r\n    this.backLoadImage = this.document.createElement('img');\r\n    this.backLoadImage.src = this.tdsSrc;\r\n    this.backLoadImage.srcset = this.srcset;\r\n    this.status = 'loading';\r\n\r\n    if (this.backLoadImage.complete) {\r\n      this.status = 'normal';\r\n      this.getElement().nativeElement.src = this.tdsSrc;\r\n      this.getElement().nativeElement.srcset = this.srcset;\r\n    } else {\r\n      if (this.placeholder) {\r\n        this.getElement().nativeElement.src = this.placeholder;\r\n        this.getElement().nativeElement.srcset = '';\r\n      } else {\r\n        this.getElement().nativeElement.src = this.tdsSrc;\r\n        this.getElement().nativeElement.srcset = this.srcset;\r\n      }\r\n\r\n      this.backLoadImage.onload = () => {\r\n        this.status = 'normal';\r\n        this.getElement().nativeElement.src = this.tdsSrc;\r\n        this.getElement().nativeElement.srcset = this.srcset;\r\n      };\r\n\r\n      this.backLoadImage.onerror = () => {\r\n        this.status = 'error';\r\n        if (this.fallback) {\r\n          this.getElement().nativeElement.src = this.fallback;\r\n          this.getElement().nativeElement.srcset = '';\r\n        }\r\n      };\r\n    }\r\n  }\r\n}\r\n","\r\n\r\nimport { BidiModule } from '@angular/cdk/bidi';\r\nimport { DragDropModule } from '@angular/cdk/drag-drop';\r\nimport { OverlayModule } from '@angular/cdk/overlay';\r\nimport { PortalModule } from '@angular/cdk/portal';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { TDSButtonModule } from 'tds-ui/button';\r\nimport { TDSPipesModule } from 'tds-ui/core/pipes';\r\n\r\nimport { TDSImageGroupComponent } from './image-group.component';\r\nimport { TDSImagePreviewComponent } from './image-preview.component';\r\nimport { TDSImageDirective } from './image.directive';\r\nimport { TDSImageService } from './image.service';\r\n\r\n@NgModule({\r\n    imports: [BidiModule, OverlayModule, PortalModule, DragDropModule, CommonModule, TDSPipesModule, TDSButtonModule],\r\n    exports: [TDSImageDirective, TDSImagePreviewComponent, TDSImageGroupComponent],\r\n    providers: [TDSImageService],\r\n    declarations: [TDSImageDirective, TDSImagePreviewComponent, TDSImageGroupComponent]\r\n})\r\nexport class TDSImageModule {}\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["TDS_CONFIG_MODULE_NAME","i2.TDSImagePreviewOptions","i1","i2","i3","i2.TDSImageService","i3.TDSImageGroupComponent","i4"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAGa,MAAA,6BAA6B,GAAG;AAC3C,IAAA,KAAK,EAAE,gBAAgB;AACvB,IAAA,WAAW,EAAE,uBAAuB;AACpC,IAAA,KAAK,EAAE,gBAAgB;AACvB,IAAA,WAAW,EAAE,uBAAuB;EACpC;AAEW,MAAA,6BAA6B,GAAG;AAC3C,IAAA,KAAK,EAAE,gBAAgB;AACvB,IAAA,WAAW,EAAE,uBAAuB;AACpC,IAAA,KAAK,EAAE,gBAAgB;AACvB,IAAA,WAAW,EAAE,uBAAuB;EACpC;AACK,MAAM,iCAAiC,GAAG;;MCZpC,sBAAsB,CAAA;AAAnC,IAAA,WAAA,GAAA;QACE,IAAQ,CAAA,QAAA,GAAa,IAAI,CAAC;QAC1B,IAAW,CAAA,WAAA,GAAa,KAAK,CAAC;QAC9B,IAAY,CAAA,YAAA,GAAa,IAAI,CAAC;QAC9B,IAAiB,CAAA,iBAAA,GAAa,IAAI,CAAC;KAKpC;AAAA;;MCJY,kBAAkB,CAAA;AAC7B,IAAA,WAAA,CACS,eAAyC,EACxC,MAA8B,EAC9B,UAAsB,EAAA;QAFvB,IAAe,CAAA,eAAA,GAAf,eAAe,CAA0B;QACxC,IAAM,CAAA,MAAA,GAAN,MAAM,CAAwB;QAC9B,IAAU,CAAA,UAAA,GAAV,UAAU,CAAY;QAE9B,UAAU;AACP,aAAA,aAAa,EAAE;aACf,IAAI,CAAC,MAAM,CAAC,KAAK,IAAK,IAAI,CAAC,MAAM,CAAC,QAAoB,IAAI,KAAK,CAAC,OAAO,KAAK,MAAM,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC;aAC9G,SAAS,CAAC,KAAK,IAAG;YACjB,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,IAAI,CAAC,KAAK,EAAE,CAAC;AACf,SAAC,CAAC,CAAC;AAEL,QAAA,UAAU,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,MAAK;AACtC,YAAA,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC;AAC5B,SAAC,CAAC,CAAC;AAEH,QAAA,eAAe,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,MAAK;YAC1D,IAAI,CAAC,KAAK,EAAE,CAAC;AACf,SAAC,CAAC,CAAC;AAEH,QAAA,eAAe,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,MAAK;YACtD,IAAI,CAAC,KAAK,EAAE,CAAC;AACf,SAAC,CAAC,CAAC;AAEH,QAAA,eAAe,CAAC,qBAAqB;aAClC,IAAI,CACH,MAAM,CAAC,KAAK,IAAI,KAAK,CAAC,SAAS,KAAK,MAAM,IAAI,KAAK,CAAC,OAAO,KAAK,OAAO,CAAC,EACxE,IAAI,CAAC,CAAC,CAAC,CACR;aACA,SAAS,CAAC,MAAK;YACd,IAAI,CAAC,OAAO,EAAE,CAAC;AACjB,SAAC,CAAC,CAAC;KACN;AAED,IAAA,QAAQ,CAAC,KAAa,EAAA;AACpB,QAAA,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;KACtC;IAED,IAAI,GAAA;AACF,QAAA,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,CAAC;KAC7B;IAED,IAAI,GAAA;AACF,QAAA,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,CAAC;KAC7B;IAED,KAAK,GAAA;AACH,QAAA,IAAI,CAAC,eAAe,CAAC,mBAAmB,EAAE,CAAC;KAC5C;IAEO,OAAO,GAAA;AACb,QAAA,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC;KAC3B;AACF;;AC9DD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDG;AACG,SAAU,qBAAqB,CAAC,MAOrC,EAAA;IACC,IAAI,MAAM,GAAG,EAAE,CAAC;AAEhB,IAAA,IAAI,MAAM,CAAC,KAAK,IAAI,MAAM,CAAC,WAAW,IAAI,MAAM,CAAC,MAAM,IAAI,MAAM,CAAC,YAAY,EAAE;AAC9E,QAAA,MAAM,GAAG;AACP,YAAA,CAAC,EAAE,CAAC;AACJ,YAAA,CAAC,EAAE,CAAC;SACL,CAAC;AACH,KAAA;AAED,IAAA,IAAI,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC,WAAW,IAAI,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,YAAY,EAAE;AAC5E,QAAA,MAAM,GAAG;AACP,YAAA,CAAC,EAAE,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,WAAW,CAAC;AAC1D,YAAA,CAAC,EAAE,QAAQ,CAAC,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,MAAM,EAAE,MAAM,CAAC,YAAY,CAAC;SAC5D,CAAC;AACH,KAAA;AAED,IAAA,OAAO,MAAM,CAAC;AAChB,CAAC;AAEK,SAAU,SAAS,CAAC,IAAiB,EAAA;AACzC,IAAA,MAAM,GAAG,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;AACzC,IAAA,MAAM,OAAO,GAAG,QAAQ,CAAC,eAAe,CAAC;;IAGzC,OAAO;QACL,IAAI,EAAE,GAAG,CAAC,IAAI,IAAI,MAAM,CAAC,WAAW,IAAI,OAAO,CAAC,UAAU,CAAC,IAAI,OAAO,CAAC,UAAU,IAAI,QAAQ,CAAC,IAAI,CAAC,UAAU,IAAI,CAAC,CAAC;QACnH,GAAG,EAAE,GAAG,CAAC,GAAG,IAAI,MAAM,CAAC,WAAW,IAAI,OAAO,CAAC,SAAS,CAAC,IAAI,OAAO,CAAC,SAAS,IAAI,QAAQ,CAAC,IAAI,CAAC,SAAS,IAAI,CAAC,CAAC;KAC/G,CAAC;AACJ,CAAC;SAEe,aAAa,GAAA;AAC3B,IAAA,MAAM,KAAK,GAAG,QAAQ,CAAC,eAAe,CAAC,WAAW,CAAC;IACnD,MAAM,MAAM,GAAG,MAAM,CAAC,WAAW,IAAI,QAAQ,CAAC,eAAe,CAAC,YAAY,CAAC;IAC3E,OAAO;QACL,KAAK;QACL,MAAM;KACP,CAAC;AACJ,CAAC;AAED,SAAS,QAAQ,CAAC,KAAa,EAAE,IAAY,EAAE,UAAkB,EAAA;AAC/D,IAAA,MAAM,YAAY,GAAG,KAAK,GAAG,IAAI,CAAC;IAClC,MAAM,WAAW,GAAG,CAAC,IAAI,GAAG,UAAU,IAAI,CAAC,CAAC;IAC5C,IAAI,QAAQ,GAAkB,IAAI,CAAC;IAEnC,IAAI,IAAI,GAAG,UAAU,EAAE;QACrB,IAAI,KAAK,GAAG,CAAC,EAAE;YACb,QAAQ,GAAG,WAAW,CAAC;AACxB,SAAA;AACD,QAAA,IAAI,KAAK,GAAG,CAAC,IAAI,YAAY,GAAG,UAAU,EAAE;YAC1C,QAAQ,GAAG,CAAC,WAAW,CAAC;AACzB,SAAA;AACF,KAAA;AAAM,SAAA;AACL,QAAA,IAAI,KAAK,GAAG,CAAC,IAAI,YAAY,GAAG,UAAU,EAAE;AAC1C,YAAA,QAAQ,GAAG,KAAK,GAAG,CAAC,GAAG,WAAW,GAAG,CAAC,WAAW,CAAC;AACnD,SAAA;AACF,KAAA;AAED,IAAA,OAAO,QAAQ,CAAC;AAClB;;;;ICxDc,EAWE,CAAA,SAAA,CAAA,CAAA,EAAA,KAAA,EAAA,EAAA,EAAA,EAAA,CAAA,CAAA;;;;AAHA,IAAA,EAAA,CAAA,WAAA,CAAA,OAAA,EAAA,QAAA,CAAA,KAAA,CAA2B,2BAAA,CAAA,WAAA,EAAA,MAAA,CAAA,qBAAA,CAAA,CAAA;AAH3B,IAAA,EAAA,CAAA,WAAA,CAAA,KAAA,EAAA,QAAA,CAAA,GAAA,EAAA,EAAA,CAAA,aAAA,CAAsB,6CAAA,CAAA,KAAA,EAAA,QAAA,CAAA,GAAA,CAAA,CAAA;;;IAN1B,EAAgE,CAAA,uBAAA,CAAA,CAAA,CAAA,CAAA;IAC9D,EAWE,CAAA,UAAA,CAAA,CAAA,EAAA,sDAAA,EAAA,CAAA,EAAA,CAAA,EAAA,KAAA,EAAA,EAAA,CAAA,CAAA;IACJ,EAAe,CAAA,qBAAA,EAAA,CAAA;;;;IARV,EAA0B,CAAA,SAAA,CAAA,CAAA,CAAA,CAAA;IAA1B,EAA0B,CAAA,UAAA,CAAA,MAAA,EAAA,MAAA,CAAA,KAAA,KAAA,aAAA,CAAA,CAAA;;;;IAW/B,EAMC,CAAA,cAAA,CAAA,CAAA,EAAA,IAAA,EAAA,EAAA,CAAA,CAAA;AAFC,IAAA,EAAA,CAAA,UAAA,CAAA,OAAA,EAAA,SAAA,2DAAA,GAAA,EAAA,MAAA,WAAA,GAAA,EAAA,CAAA,aAAA,CAAA,IAAA,CAAA,CAAA,CAAA,MAAA,SAAA,GAAA,WAAA,CAAA,SAAA,CAAA,CAAA,OAAS,mBAAgB,CAAC,EAAA,CAAA,CAAA;IAG1B,EAAqG,CAAA,SAAA,CAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,CAAA;IACvG,EAAK,CAAA,YAAA,EAAA,CAAA;;;;IALH,EAAsG,CAAA,WAAA,CAAA,iDAAA,EAAA,MAAA,CAAA,eAAA,IAAA,SAAA,CAAA,IAAA,KAAA,SAAA,CAAA,CAAA;IADtG,EAA2F,CAAA,UAAA,CAAA,SAAA,EAAA,MAAA,CAAA,eAAA,IAAA,SAAA,CAAA,IAAA,KAAA,SAAA,GAAA,oBAAA,GAAA,YAAA,CAAA,CAAA;IAKrB,EAAuB,CAAA,SAAA,CAAA,CAAA,CAAA,CAAA;IAAvB,EAAuB,CAAA,UAAA,CAAA,SAAA,EAAA,SAAA,CAAA,IAAA,CAAA,CAAA;;;;IAGjG,EAAwC,CAAA,uBAAA,CAAA,CAAA,CAAA,CAAA;IACtC,EAKC,CAAA,cAAA,CAAA,CAAA,EAAA,KAAA,EAAA,EAAA,CAAA,CAAA;AADC,IAAA,EAAA,CAAA,UAAA,CAAA,OAAA,EAAA,SAAA,sEAAA,CAAA,MAAA,EAAA,EAAA,EAAA,CAAA,aAAA,CAAA,IAAA,CAAA,CAAA,CAAA,MAAA,OAAA,GAAA,EAAA,CAAA,aAAA,EAAA,CAAA,CAAA,OAAS,4BAAoB,CAAC,EAAA,CAAA,CAAA;IAE9B,EAA+D,CAAA,SAAA,CAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,CAAA;IACjE,EAAM,CAAA,YAAA,EAAA,CAAA;IACN,EAKC,CAAA,cAAA,CAAA,CAAA,EAAA,KAAA,EAAA,EAAA,CAAA,CAAA;AADC,IAAA,EAAA,CAAA,UAAA,CAAA,OAAA,EAAA,SAAA,sEAAA,CAAA,MAAA,EAAA,EAAA,EAAA,CAAA,aAAA,CAAA,IAAA,CAAA,CAAA,CAAA,MAAA,OAAA,GAAA,EAAA,CAAA,aAAA,EAAA,CAAA,CAAA,OAAS,6BAAqB,CAAC,EAAA,CAAA,CAAA;IAE/B,EAAgE,CAAA,SAAA,CAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,CAAA;IAClE,EAAM,CAAA,YAAA,EAAA,CAAA;IACR,EAAe,CAAA,qBAAA,EAAA,CAAA;;;IAdX,EAA2D,CAAA,SAAA,CAAA,CAAA,CAAA,CAAA;IAA3D,EAA2D,CAAA,WAAA,CAAA,wCAAA,EAAA,MAAA,CAAA,KAAA,IAAA,CAAA,CAAA,CAAA;IAC3D,EAAyD,CAAA,UAAA,CAAA,SAAA,EAAA,MAAA,CAAA,KAAA,IAAA,CAAA,GAAA,oBAAA,GAAA,YAAA,CAAA,CAAA;IAOzD,EAA4E,CAAA,SAAA,CAAA,CAAA,CAAA,CAAA;IAA5E,EAA4E,CAAA,WAAA,CAAA,yCAAA,EAAA,MAAA,CAAA,KAAA,IAAA,MAAA,CAAA,MAAA,CAAA,MAAA,GAAA,CAAA,CAAA,CAAA;IAC5E,EAA2E,CAAA,UAAA,CAAA,SAAA,EAAA,MAAA,CAAA,KAAA,IAAA,MAAA,CAAA,MAAA,CAAA,MAAA,GAAA,CAAA,GAAA,oBAAA,GAAA,YAAA,CAAA,CAAA;;AAnFzF,MAAMA,wBAAsB,GAAiB,OAAO,CAAC;AAerD,MAAM,eAAe,GAAG;AACtB,IAAA,CAAC,EAAE,CAAC;AACJ,IAAA,CAAC,EAAE,CAAC;CACL,CAAC;MA6FW,wBAAwB,CAAA;AAiEnC,IAAA,WAAA,CACU,GAAsB,EACvB,gBAAkC,EAClC,MAA8B,EAC7B,UAAsB,EAAA;QAHtB,IAAG,CAAA,GAAA,GAAH,GAAG,CAAmB;QACvB,IAAgB,CAAA,gBAAA,GAAhB,gBAAgB,CAAkB;QAClC,IAAM,CAAA,MAAA,GAAN,MAAM,CAAwB;QAC7B,IAAU,CAAA,UAAA,GAAV,UAAU,CAAY;QApEhC,IAAM,CAAA,MAAA,GAAe,EAAE,CAAC;QACxB,IAAK,CAAA,KAAA,GAAG,CAAC,CAAC;QACV,IAAU,CAAA,UAAA,GAAG,KAAK,CAAC;QACnB,IAAO,CAAA,OAAA,GAAG,IAAI,CAAC;QACf,IAAc,CAAA,cAAA,GAA+B,OAAO,CAAC;AACrD,QAAA,IAAA,CAAA,qBAAqB,GAAG,IAAI,YAAY,EAAkB,CAAC;QAE3D,IAAqB,CAAA,qBAAA,GAAG,EAAE,CAAC;QAC3B,IAA4B,CAAA,4BAAA,GAAG,EAAE,CAAC;AAClC,QAAA,IAAA,CAAA,UAAU,GAAgC;AACxC,YAAA;AACE,gBAAA,IAAI,EAAE,uBAAuB;gBAC7B,OAAO,EAAE,MAAK;oBACZ,IAAI,CAAC,YAAY,EAAE,CAAC;iBACrB;AACD,gBAAA,IAAI,EAAE,YAAY;AACnB,aAAA;AACD,YAAA;AACE,gBAAA,IAAI,EAAE,wBAAwB;gBAC9B,OAAO,EAAE,MAAK;oBACZ,IAAI,CAAC,aAAa,EAAE,CAAC;iBACtB;AACD,gBAAA,IAAI,EAAE,aAAa;AACpB,aAAA;AAED,YAAA;AACE,gBAAA,IAAI,EAAE,oBAAoB;gBAC1B,OAAO,EAAE,MAAK;oBACZ,IAAI,CAAC,SAAS,EAAE,CAAC;iBAClB;AACD,gBAAA,IAAI,EAAE,SAAS;AAChB,aAAA;AACD,YAAA;AACE,gBAAA,IAAI,EAAE,mBAAmB;gBACzB,OAAO,EAAE,MAAK;oBACZ,IAAI,CAAC,QAAQ,EAAE,CAAC;iBACjB;AACD,gBAAA,IAAI,EAAE,QAAQ;AACf,aAAA;SAGF,CAAC;QAEF,IAAe,CAAA,eAAA,GAAG,KAAK,CAAC;AACxB,QAAA,IAAA,CAAA,QAAQ,GAAG,EAAE,GAAG,eAAe,EAAE,CAAC;AAElC,QAAA,IAAA,CAAA,cAAc,GAAG,IAAI,YAAY,EAAQ,CAAC;AAC1C,QAAA,IAAA,CAAA,UAAU,GAAG,IAAI,YAAY,EAAQ,CAAC;AAM9B,QAAA,IAAA,CAAA,QAAQ,GAAG,IAAI,OAAO,EAAQ,CAAC;;QAkBrC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,CAAC;QAClC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,IAAI,CAAC,CAAC;QACtC,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC7B,IAAI,CAAC,2BAA2B,EAAE,CAAC;QACnC,IAAI,CAAC,kCAAkC,EAAE,CAAC;KAC3C;AArBD,IAAA,IAAI,iBAAiB,GAAA;AACnB,QAAA,OAAO,IAAI,CAAC,MAAM,CAAC,WAAW,IAAI,KAAK,CAAC;KACzC;AAED,IAAA,IAAI,YAAY,GAAA;AACd,QAAA,MAAM,aAAa,GAAe,IAAI,CAAC,gBAAgB,CAAC,qBAAqB,CAACA,wBAAsB,CAAC,IAAI,EAAE,CAAC;QAC5G,OAAO,IAAI,CAAC,MAAM,CAAC,YAAY,IAAI,aAAa,CAAC,YAAY,IAAI,IAAI,CAAC;KACvE;AAgBD,IAAA,SAAS,CAAC,MAAkB,EAAA;AAC1B,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;AACrB,QAAA,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;KACzB;AAED,IAAA,QAAQ,CAAC,KAAa,EAAA;AACpB,QAAA,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;AACnB,QAAA,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;KACzB;IAED,IAAI,GAAA;QACF,IAAI,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;YACvC,IAAI,CAAC,KAAK,EAAE,CAAC;YACb,IAAI,CAAC,KAAK,EAAE,CAAC;YACb,IAAI,CAAC,2BAA2B,EAAE,CAAC;YACnC,IAAI,CAAC,kCAAkC,EAAE,CAAC;YAC1C,IAAI,CAAC,qBAAqB,EAAE,CAAC;AAC7B,YAAA,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;AACzB,SAAA;KACF;IAED,IAAI,GAAA;AACF,QAAA,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,EAAE;YAClB,IAAI,CAAC,KAAK,EAAE,CAAC;YACb,IAAI,CAAC,KAAK,EAAE,CAAC;YACb,IAAI,CAAC,2BAA2B,EAAE,CAAC;YACnC,IAAI,CAAC,kCAAkC,EAAE,CAAC;YAC1C,IAAI,CAAC,qBAAqB,EAAE,CAAC;AAC7B,YAAA,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;AACzB,SAAA;KACF;IAED,YAAY,GAAA;AACV,QAAA,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;KACzB;IAED,OAAO,GAAA;AACL,QAAA,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;KACxB;IAED,QAAQ,GAAA;AACN,QAAA,IAAI,CAAC,IAAI,IAAI,CAAC,CAAC;QACf,IAAI,CAAC,2BAA2B,EAAE,CAAC;QACnC,IAAI,CAAC,qBAAqB,EAAE,CAAC;AAC7B,QAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,GAAG,eAAe,EAAE,CAAC;KACxC;IAED,SAAS,GAAA;AACP,QAAA,IAAI,IAAI,CAAC,IAAI,GAAG,CAAC,EAAE;AACjB,YAAA,IAAI,CAAC,IAAI,IAAI,CAAC,CAAC;YACf,IAAI,CAAC,2BAA2B,EAAE,CAAC;YACnC,IAAI,CAAC,qBAAqB,EAAE,CAAC;AAC7B,YAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,GAAG,eAAe,EAAE,CAAC;AACxC,SAAA;KACF;IAED,aAAa,GAAA;AACX,QAAA,IAAI,CAAC,MAAM,IAAI,EAAE,CAAC;QAClB,IAAI,CAAC,2BAA2B,EAAE,CAAC;KACpC;IAED,YAAY,GAAA;AACV,QAAA,IAAI,CAAC,MAAM,IAAI,EAAE,CAAC;QAClB,IAAI,CAAC,2BAA2B,EAAE,CAAC;KACpC;AAED,IAAA,YAAY,CAAC,KAAiB,EAAA;QAC5B,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,KAAK,CAAC,eAAe,EAAE,CAAC;QACxB,IAAI,CAAC,IAAI,EAAE,CAAC;KACb;AAED,IAAA,aAAa,CAAC,KAAiB,EAAA;QAC7B,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,KAAK,CAAC,eAAe,EAAE,CAAC;QACxB,IAAI,CAAC,IAAI,EAAE,CAAC;KACb;AAED,IAAA,gBAAgB,CAAC,CAAa,EAAA;QAC5B,IAAI,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,aAAa,IAAI,IAAI,CAAC,YAAY,EAAE;AACrD,YAAA,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC;AAC5B,SAAA;KACF;AAED,IAAA,gBAAgB,CAAC,KAAqB,EAAA;AACpC,QAAA,IAAI,KAAK,CAAC,OAAO,KAAK,OAAO,EAAE;YAC7B,IAAI,CAAC,sBAAsB,EAAE,CAAC;AAC/B,SAAA;AAAM,aAAA,IAAI,KAAK,CAAC,OAAO,KAAK,OAAO,EAAE;YACpC,IAAI,CAAC,sBAAsB,EAAE,CAAC;AAC/B,SAAA;AAED,QAAA,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KACxC;AAED,IAAA,eAAe,CAAC,KAAqB,EAAA;AACnC,QAAA,IAAI,KAAK,CAAC,OAAO,KAAK,OAAO,EAAE;YAC7B,IAAI,CAAC,sBAAsB,EAAE,CAAC;AAC/B,SAAA;AAAM,aAAA,IAAI,KAAK,CAAC,OAAO,KAAK,OAAO,EAAE;YACpC,IAAI,CAAC,sBAAsB,EAAE,CAAC;AAC/B,SAAA;AACD,QAAA,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KACxC;IAED,mBAAmB,GAAA;AACjB,QAAA,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC;AAC9B,QAAA,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;KACzB;IAED,aAAa,GAAA;AACX,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;KACxB;IAED,cAAc,GAAA;AACZ,QAAA,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;AACxB,QAAA,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC;AAClE,QAAA,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC;AACpE,QAAA,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;AAC7D,QAAA,MAAM,EAAE,KAAK,EAAE,WAAW,EAAE,MAAM,EAAE,YAAY,EAAE,GAAG,aAAa,EAAE,CAAC;QACrE,MAAM,QAAQ,GAAG,IAAI,CAAC,MAAM,GAAG,GAAG,KAAK,CAAC,CAAC;AACzC,QAAA,MAAM,gBAAgB,GAAG;YACvB,KAAK,EAAE,QAAQ,GAAG,MAAM,GAAG,KAAK;YAChC,MAAM,EAAE,QAAQ,GAAG,KAAK,GAAG,MAAM;YACjC,IAAI;YACJ,GAAG;YACH,WAAW;YACX,YAAY;SACb,CAAC;AACF,QAAA,MAAM,aAAa,GAAG,qBAAqB,CAAC,gBAAgB,CAAC,CAAC;AAC9D,QAAA,IAAI,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE;AAC1D,YAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,GAAG,IAAI,CAAC,QAAQ,EAAE,GAAG,aAAa,EAAE,CAAC;AACxD,SAAA;KACF;IAED,WAAW,GAAA;AACT,QAAA,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;AACrB,QAAA,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;KAC1B;IAEO,2BAA2B,GAAA;AACjC,QAAA,IAAI,CAAC,qBAAqB,GAAG,CAAW,QAAA,EAAA,IAAI,CAAC,IAAI,CAAA,EAAA,EAAK,IAAI,CAAC,IAAI,CAAe,YAAA,EAAA,IAAI,CAAC,MAAM,MAAM,CAAC;KACjG;IAEO,kCAAkC,GAAA;AACxC,QAAA,IAAI,CAAC,4BAA4B,GAAG,CAAe,YAAA,EAAA,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAA,IAAA,EAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC;KAClG;IAEO,qBAAqB,GAAA;QAC3B,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,IAAI,IAAI,CAAC,CAAC;KACvC;IAEO,sBAAsB,GAAA;QAC5B,IAAI,IAAI,CAAC,iBAAiB,EAAE;YAC1B,OAAO;AACR,SAAA;AACD,QAAA,MAAM,eAAe,GAAG,IAAI,CAAC,UAAU,CAAC,eAAe,CAAC;AACxD,QAAA,IAAI,eAAe,EAAE;YACnB,eAAe,CAAC,SAAS,CAAC,GAAG,CAAC,6BAA6B,CAAC,KAAK,CAAC,CAAC;YACnE,eAAe,CAAC,SAAS,CAAC,GAAG,CAAC,6BAA6B,CAAC,WAAW,CAAC,CAAC;AAC1E,SAAA;KACF;IAEO,sBAAsB,GAAA;QAC5B,IAAI,IAAI,CAAC,iBAAiB,EAAE;YAC1B,OAAO;AACR,SAAA;AACD,QAAA,MAAM,eAAe,GAAG,IAAI,CAAC,UAAU,CAAC,eAAe,CAAC;AACxD,QAAA,IAAI,eAAe,EAAE;YACnB,eAAe,CAAC,SAAS,CAAC,GAAG,CAAC,6BAA6B,CAAC,KAAK,CAAC,CAAC;YACnE,eAAe,CAAC,SAAS,CAAC,GAAG,CAAC,6BAA6B,CAAC,WAAW,CAAC,CAAC;AAC1E,SAAA;KACF;IAEO,KAAK,GAAA;AACX,QAAA,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;AACd,QAAA,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;AAChB,QAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,GAAG,eAAe,EAAE,CAAC;KACxC;;gGA/PU,wBAAwB,EAAA,EAAA,CAAA,iBAAA,CAAA,EAAA,CAAA,iBAAA,CAAA,EAAA,EAAA,CAAA,iBAAA,CAAA,EAAA,CAAA,gBAAA,CAAA,EAAA,EAAA,CAAA,iBAAA,CAAAC,sBAAA,CAAA,EAAA,EAAA,CAAA,iBAAA,CAAA,EAAA,CAAA,UAAA,CAAA,CAAA,CAAA,EAAA,CAAA;2EAAxB,wBAAwB,EAAA,SAAA,EAAA,CAAA,CAAA,mBAAA,CAAA,CAAA,EAAA,SAAA,EAAA,SAAA,8BAAA,CAAA,EAAA,EAAA,GAAA,EAAA,EAAA,IAAA,EAAA,GAAA,CAAA,EAAA;;;;;;AAAxB,QAAA,EAAA,CAAA,uBAAA,CAAA,mBAAA,EAAA,SAAA,sEAAA,CAAA,MAAA,EAAA,EAAA,OAAA,GAAA,CAAA,gBAAA,CAAA,MAAA,CAAwB,yHAAxB,GAAuB,CAAA,eAAA,CAAA,MAAA,CAAA,CAAA,EAAA,CAAA,CAAA;2GAAvB,GAAwB,CAAA,gBAAA,CAAA,MAAA,CAAA,CAAA,EAAA,CAAA,CAAA;;;;;;QAtFjC,EAA8E,CAAA,cAAA,CAAA,CAAA,EAAA,KAAA,EAAA,CAAA,CAAA,CAAA;QAC5E,EAAyG,CAAA,SAAA,CAAA,CAAA,EAAA,KAAA,EAAA,CAAA,CAAA,CAAA;QACzG,EAA6D,CAAA,cAAA,CAAA,CAAA,EAAA,KAAA,EAAA,CAAA,CAAA,CAAA,CAAA,EAAA,KAAA,EAAA,CAAA,CAAA,aAAA,CAAA,CAAA,EAAA,KAAA,EAAA,CAAA,CAAA,CAAA;AAKrD,QAAA,EAAA,CAAA,UAAA,CAAA,OAAA,EAAA,SAAA,sDAAA,GAAA,EAAA,OAAS,aAAS,CAAC,EAAA,CAAA,CAAA;QAErB,EAAuG,CAAA,SAAA,CAAA,CAAA,EAAA,QAAA,EAAA,CAAA,CAAA,CAAA;AACtG,QAAA,EAAA,CAAA,YAAA,EAAM,EAAA,CAAA;QAET,EAOC,CAAA,cAAA,CAAA,CAAA,EAAA,KAAA,EAAA,CAAA,CAAA,CAAA;AAFC,QAAA,EAAA,CAAA,UAAA,CAAA,WAAA,EAAA,SAAA,0DAAA,GAAA,EAAA,OAAa,GAAe,CAAA,aAAA,EAAA,CAAA,EAAA,CAAC,CACV,iBAAA,EAAA,SAAA,gEAAA,GAAA,EAAA,OAAA,GAAA,CAAA,cAAA,EAAgB,CADN,EAAA,CAAA,CAAA;QAG7B,EAae,CAAA,UAAA,CAAA,CAAA,EAAA,gDAAA,EAAA,CAAA,EAAA,CAAA,EAAA,cAAA,EAAA,CAAA,CAAA,CAAA;QACjB,EAAM,CAAA,YAAA,EAAA,CAAA;QACN,EAA2M,CAAA,cAAA,CAAA,CAAA,EAAA,IAAA,EAAA,CAAA,CAAA,CAAA;QACzM,EAQK,CAAA,UAAA,CAAA,EAAA,EAAA,uCAAA,EAAA,CAAA,EAAA,CAAA,EAAA,IAAA,EAAA,EAAA,CAAA,CAAA;QACP,EAAK,CAAA,YAAA,EAAA,CAAA;QACL,EAiBe,CAAA,UAAA,CAAA,EAAA,EAAA,iDAAA,EAAA,CAAA,EAAA,CAAA,EAAA,cAAA,EAAA,EAAA,CAAA,CAAA;AACjB,QAAA,EAAA,CAAA,YAAA,EAAM,EAAA,CAAA;QAER,EAAyG,CAAA,SAAA,CAAA,EAAA,EAAA,KAAA,EAAA,CAAA,CAAA,CAAA;QAC3G,EAAM,CAAA,YAAA,EAAA,CAAA;;QApDE,EAAgD,CAAA,SAAA,CAAA,CAAA,CAAA,CAAA;QAAhD,EAAgD,CAAA,WAAA,CAAA,WAAA,EAAA,GAAA,CAAA,4BAAA,CAAA,CAAA;QAChD,EAAoC,CAAA,UAAA,CAAA,yBAAA,EAAA,GAAA,CAAA,QAAA,CAAA,CAAA;QAIJ,EAAW,CAAA,SAAA,CAAA,CAAA,CAAA,CAAA;QAAX,EAAW,CAAA,UAAA,CAAA,SAAA,EAAA,GAAA,CAAA,MAAA,CAAA,CAAA;QAqBtB,EAAa,CAAA,SAAA,CAAA,CAAA,CAAA,CAAA;QAAb,EAAa,CAAA,UAAA,CAAA,SAAA,EAAA,GAAA,CAAA,UAAA,CAAA,CAAA;QAKrB,EAAuB,CAAA,SAAA,CAAA,CAAA,CAAA,CAAA;QAAvB,EAAuB,CAAA,UAAA,CAAA,MAAA,EAAA,GAAA,CAAA,MAAA,CAAA,MAAA,GAAA,CAAA,CAAA,CAAA;AAhDlC,KAAA,EAAA,EAAA,UAAA,EAAA,CAAA,EAAA,CAAA,uBAAA,EAAA,EAAA,CAAA,OAAA,EAAA,EAAA,CAAA,OAAA,EAAA,EAAA,CAAA,IAAA,EAAA,EAAA,CAAA,aAAA,EAAA,EAAA,CAAA,OAAA,CAAA,EAAA,aAAA,EAAA,CAAA,EAAA,IAAA,EAAA,EAAA,SAAA,EAAA,CAAC,UAAU,CAAC,EAAA,EAAA,eAAA,EAAA,CAAA,EAAA,CAAA,CAAA;uFAwFb,wBAAwB,EAAA,CAAA;cA3FpC,SAAS;AAAC,QAAA,IAAA,EAAA,CAAA;AACT,gBAAA,QAAQ,EAAE,mBAAmB;AAC7B,gBAAA,QAAQ,EAAE,iBAAiB;gBAC3B,UAAU,EAAE,CAAC,UAAU,CAAC;AACxB,gBAAA,QAAQ,EAAE,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqET,EAAA,CAAA;AACD,gBAAA,mBAAmB,EAAE,KAAK;gBAC1B,eAAe,EAAE,uBAAuB,CAAC,MAAM;gBAC/C,aAAa,EAAE,iBAAiB,CAAC,IAAI;AACrC,gBAAA,IAAI,EAAE;AACJ,oBAAA,kCAAkC,EAAE,YAAY;AAChD,oBAAA,gBAAgB,EAAE,eAAe;AACjC,oBAAA,gCAAgC,EAAE,MAAM;AACxC,oBAAA,cAAc,EAAE,oBAAoB;AACpC,oBAAA,eAAe,EAAE,gBAAgB;AACjC,oBAAA,qBAAqB,EAAE,0BAA0B;AACjD,oBAAA,oBAAoB,EAAE,yBAAyB;AAC/C,oBAAA,SAAS,EAAE,0BAA0B;AACrC,oBAAA,OAAO,EAAE,oDAAoD;AAC7D,oBAAA,QAAQ,EAAE,IAAI;AACd,oBAAA,IAAI,EAAE,UAAU;AACjB,iBAAA;AACF,aAAA,CAAA;8JAmDsB,QAAQ,EAAA,CAAA;kBAA5B,SAAS;mBAAC,QAAQ,CAAA;;;ACzKrB,MAAMD,wBAAsB,GAAiB,OAAO,CAAC;MAMxC,eAAe,CAAA;AAC1B,IAAA,WAAA,CACU,OAAgB,EAChB,QAAkB,EAClB,gBAAkC,EACtB,cAA8B,EAAA;QAH1C,IAAO,CAAA,OAAA,GAAP,OAAO,CAAS;QAChB,IAAQ,CAAA,QAAA,GAAR,QAAQ,CAAU;QAClB,IAAgB,CAAA,gBAAA,GAAhB,gBAAgB,CAAkB;QACtB,IAAc,CAAA,cAAA,GAAd,cAAc,CAAgB;KAChD;IAEJ,OAAO,CAAC,MAAkB,EAAE,OAAgC,EAAA;QAC1D,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;KACtC;IAEO,OAAO,CAAC,MAAkB,EAAE,MAA+B,EAAA;AACjE,QAAA,MAAM,YAAY,GAAG,EAAE,GAAG,IAAI,sBAAsB,EAAE,EAAE,IAAI,MAAM,IAAI,EAAE,CAAC,EAAE,CAAC;QAC5E,MAAM,UAAU,GAAG,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;QACpD,MAAM,gBAAgB,GAAG,IAAI,CAAC,sBAAsB,CAAC,UAAU,EAAE,YAAY,CAAC,CAAC;AAC/E,QAAA,gBAAgB,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;QACnC,MAAM,UAAU,GAAG,IAAI,kBAAkB,CAAC,gBAAgB,EAAE,YAAY,EAAE,UAAU,CAAC,CAAC;AAEtF,QAAA,gBAAgB,CAAC,UAAU,GAAG,UAAU,CAAC;AACzC,QAAA,OAAO,UAAU,CAAC;KACnB;IAEO,sBAAsB,CAAC,UAAsB,EAAE,MAA8B,EAAA;AACnF,QAAA,MAAM,QAAQ,GAAG,QAAQ,CAAC,MAAM,CAAC;YAC/B,MAAM,EAAE,IAAI,CAAC,QAAQ;AACrB,YAAA,SAAS,EAAE;AACT,gBAAA,EAAE,OAAO,EAAE,UAAU,EAAE,QAAQ,EAAE,UAAU,EAAE;AAC7C,gBAAA,EAAE,OAAO,EAAE,sBAAsB,EAAE,QAAQ,EAAE,MAAM,EAAE;AACtD,aAAA;AACF,SAAA,CAAC,CAAC;QAEH,MAAM,eAAe,GAAG,IAAI,eAAe,CAAC,wBAAwB,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC;QACtF,MAAM,YAAY,GAAG,UAAU,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;QAExD,OAAO,YAAY,CAAC,QAAQ,CAAC;KAC9B;AAEO,IAAA,aAAa,CAAC,MAA8B,EAAA;AAClD,QAAA,MAAM,YAAY,GAAI,IAAI,CAAC,gBAAgB,CAAC,qBAAqB,CAACA,wBAAsB,CAAiB,IAAI,EAAE,CAAC;AAChH,QAAA,MAAM,aAAa,GAAG,IAAI,aAAa,CAAC;AACtC,YAAA,WAAW,EAAE,IAAI;YACjB,cAAc,EAAE,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,KAAK,EAAE;YACrD,gBAAgB,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC,MAAM,EAAE;YAClD,mBAAmB,EAAE,MAAM,CAAC,iBAAiB,IAAI,YAAY,CAAC,iBAAiB,IAAI,IAAI;AACvF,YAAA,aAAa,EAAE,iCAAiC;AAChD,YAAA,SAAS,EAAE,MAAM,CAAC,SAAS,IAAI,YAAY,CAAC,SAAS,IAAI,IAAI,CAAC,cAAc,CAAC,KAAK;AACnF,SAAA,CAAC,CAAC;QAEH,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;KAC3C;;8EAlDU,eAAe,EAAA,EAAA,CAAA,QAAA,CAAAE,EAAA,CAAA,OAAA,CAAA,EAAA,EAAA,CAAA,QAAA,CAAA,EAAA,CAAA,QAAA,CAAA,EAAA,EAAA,CAAA,QAAA,CAAAC,EAAA,CAAA,gBAAA,CAAA,EAAA,EAAA,CAAA,QAAA,CAAAC,IAAA,CAAA,cAAA,EAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA;AAAf,eAAA,CAAA,KAAA,iBAAA,EAAA,CAAA,kBAAA,CAAA,EAAA,KAAA,EAAA,eAAe,WAAf,eAAe,CAAA,IAAA,EAAA,CAAA,CAAA;uFAAf,eAAe,EAAA,CAAA;cAD3B,UAAU;;sBAMN,QAAQ;;;;MCTA,sBAAsB,CAAA;AARnC,IAAA,WAAA,GAAA;QASE,IAAM,CAAA,MAAA,GAAwB,EAAE,CAAC;AAKlC,KAAA;AAHC,IAAA,QAAQ,CAAC,KAAwB,EAAA;AAC/B,QAAA,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KACzB;;4FALU,sBAAsB,GAAA,CAAA,EAAA,CAAA;yEAAtB,sBAAsB,EAAA,SAAA,EAAA,CAAA,CAAA,iBAAA,CAAA,CAAA,EAAA,QAAA,EAAA,CAAA,eAAA,CAAA,EAAA,kBAAA,EAAA,GAAA,EAAA,KAAA,EAAA,CAAA,EAAA,IAAA,EAAA,CAAA,EAAA,QAAA,EAAA,SAAA,+BAAA,CAAA,EAAA,EAAA,GAAA,EAAA,EAAA,IAAA,EAAA,GAAA,CAAA,EAAA;;QALtB,EAAyB,CAAA,YAAA,CAAA,CAAA,CAAA,CAAA;;uFAKzB,sBAAsB,EAAA,CAAA;cARlC,SAAS;AAAC,QAAA,IAAA,EAAA,CAAA;AACT,gBAAA,QAAQ,EAAE,iBAAiB;AAC3B,gBAAA,QAAQ,EAAE,eAAe;AACzB,gBAAA,QAAQ,EAAE,2BAA2B;AACrC,gBAAA,mBAAmB,EAAE,KAAK;gBAC1B,eAAe,EAAE,uBAAuB,CAAC,MAAM;gBAC/C,aAAa,EAAE,iBAAiB,CAAC,IAAI;AACtC,aAAA,CAAA;;;ACaD,MAAM,sBAAsB,GAAiB,OAAO,CAAC;MAWxC,iBAAiB,CAAA;AAoB5B,IAAA,WAAA,CAC4B,QAAoB,EACvC,gBAAkC,EACjC,UAAsB,EACtB,eAAgC,EAC9B,GAAsB,EACZ,WAAmC,EACnC,cAA8B,EAAA;QANxB,IAAQ,CAAA,QAAA,GAAR,QAAQ,CAAY;QACvC,IAAgB,CAAA,gBAAA,GAAhB,gBAAgB,CAAkB;QACjC,IAAU,CAAA,UAAA,GAAV,UAAU,CAAY;QACtB,IAAe,CAAA,eAAA,GAAf,eAAe,CAAiB;QAC9B,IAAG,CAAA,GAAA,GAAH,GAAG,CAAmB;QACZ,IAAW,CAAA,WAAA,GAAX,WAAW,CAAwB;QACnC,IAAc,CAAA,cAAA,GAAd,cAAc,CAAgB;QA1B3C,IAAc,CAAA,cAAA,GAAiB,sBAAsB,CAAC;QAItD,IAAM,CAAA,MAAA,GAAG,EAAE,CAAC;QACZ,IAAM,CAAA,MAAA,GAAG,EAAE,CAAC;QACkB,IAAc,CAAA,cAAA,GAAY,KAAK,CAAC;QAChD,IAAQ,CAAA,QAAA,GAAkB,IAAI,CAAC;QAC/B,IAAW,CAAA,WAAA,GAAkB,IAAI,CAAC;QAIjD,IAAM,CAAA,MAAA,GAAoB,QAAQ,CAAC;AACnC,QAAA,IAAA,CAAA,QAAQ,GAAkB,IAAI,OAAO,EAAE,CAAC;KAc5C;AAZJ,IAAA,IAAI,WAAW,GAAA;QACb,OAAO,CAAC,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,MAAM,KAAK,OAAO,CAAC;KACxD;IAYD,QAAQ,GAAA;QACN,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,IAAI,IAAI,CAAC,WAAW,EAAE;AACpB,YAAA,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;AACjC,SAAA;QACD,IAAI,IAAI,CAAC,cAAc,EAAE;YACvB,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,SAAoB,KAAI;AAC5F,gBAAA,IAAI,CAAC,GAAG,GAAG,SAAS,CAAC;AACrB,gBAAA,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC;AAC3B,aAAC,CAAC,CAAC;YACH,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC;AACtC,SAAA;KACF;IAED,WAAW,GAAA;AACT,QAAA,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;AACrB,QAAA,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;KAC1B;IAED,SAAS,GAAA;AACP,QAAA,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YACrB,OAAO;AACR,SAAA;QAED,IAAI,IAAI,CAAC,WAAW,EAAE;;AAEpB,YAAA,MAAM,iBAAiB,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,WAAW,CAAC,CAAC;YAC7E,MAAM,aAAa,GAAG,iBAAiB,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,GAAG,EAAE,CAAC,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;AACxF,YAAA,MAAM,YAAY,GAAG,iBAAiB,CAAC,SAAS,CAAC,EAAE,IAAI,IAAI,KAAK,EAAE,CAAC,CAAC;AACpE,YAAA,MAAM,UAAU,GAAG,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,aAAa,EAAE,EAAE,SAAS,EAAE,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC;AACxF,YAAA,UAAU,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;AACnC,SAAA;AAAM,aAAA;;AAEL,YAAA,MAAM,aAAa,GAAG,CAAC,EAAE,GAAG,EAAE,IAAI,CAAC,MAAM,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;AAClE,YAAA,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,aAAa,EAAE,EAAE,SAAS,EAAE,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC;AACtE,SAAA;KACF;IAED,UAAU,GAAA;QACR,OAAO,IAAI,CAAC,UAAU,CAAC;KACxB;AAED,IAAA,WAAW,CAAC,OAAsB,EAAA;AAChC,QAAA,MAAM,EAAE,MAAM,EAAE,GAAG,OAAO,CAAC;AAC3B,QAAA,IAAI,MAAM,EAAE;YACV,IAAI,CAAC,UAAU,EAAE,CAAC,aAAa,CAAC,GAAG,GAAG,MAAM,CAAC,YAAY,CAAC;YAC1D,IAAI,CAAC,QAAQ,EAAE,CAAC;AACjB,SAAA;KACF;AAED;;;;AAIG;IACK,QAAQ,GAAA;QACd,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QACxD,IAAI,CAAC,aAAa,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC;QACrC,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;AACxC,QAAA,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;AAExB,QAAA,IAAI,IAAI,CAAC,aAAa,CAAC,QAAQ,EAAE;AAC/B,YAAA,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC;YACvB,IAAI,CAAC,UAAU,EAAE,CAAC,aAAa,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC;YAClD,IAAI,CAAC,UAAU,EAAE,CAAC,aAAa,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;AACtD,SAAA;AAAM,aAAA;YACL,IAAI,IAAI,CAAC,WAAW,EAAE;gBACpB,IAAI,CAAC,UAAU,EAAE,CAAC,aAAa,CAAC,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC;gBACvD,IAAI,CAAC,UAAU,EAAE,CAAC,aAAa,CAAC,MAAM,GAAG,EAAE,CAAC;AAC7C,aAAA;AAAM,iBAAA;gBACL,IAAI,CAAC,UAAU,EAAE,CAAC,aAAa,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC;gBAClD,IAAI,CAAC,UAAU,EAAE,CAAC,aAAa,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;AACtD,aAAA;AAED,YAAA,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,MAAK;AAC/B,gBAAA,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC;gBACvB,IAAI,CAAC,UAAU,EAAE,CAAC,aAAa,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC;gBAClD,IAAI,CAAC,UAAU,EAAE,CAAC,aAAa,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;AACvD,aAAC,CAAC;AAEF,YAAA,IAAI,CAAC,aAAa,CAAC,OAAO,GAAG,MAAK;AAChC,gBAAA,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC;gBACtB,IAAI,IAAI,CAAC,QAAQ,EAAE;oBACjB,IAAI,CAAC,UAAU,EAAE,CAAC,aAAa,CAAC,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC;oBACpD,IAAI,CAAC,UAAU,EAAE,CAAC,aAAa,CAAC,MAAM,GAAG,EAAE,CAAC;AAC7C,iBAAA;AACH,aAAC,CAAC;AACH,SAAA;KACF;;AAtHU,iBAAA,CAAA,IAAA,GAAA,SAAA,yBAAA,CAAA,CAAA,EAAA,EAAA,OAAA,KAAA,CAAA,IAAA,iBAAiB,uBAqBlB,QAAQ,CAAA,EAAA,EAAA,CAAA,iBAAA,CAAA,EAAA,CAAA,gBAAA,CAAA,EAAA,EAAA,CAAA,iBAAA,CAAA,EAAA,CAAA,UAAA,CAAA,EAAA,EAAA,CAAA,iBAAA,CAAAC,eAAA,CAAA,EAAA,EAAA,CAAA,iBAAA,CAAA,EAAA,CAAA,iBAAA,CAAA,EAAA,EAAA,CAAA,iBAAA,CAAAC,sBAAA,EAAA,CAAA,CAAA,EAAA,EAAA,CAAA,iBAAA,CAAAC,IAAA,CAAA,cAAA,EAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA;oEArBP,iBAAiB,EAAA,SAAA,EAAA,CAAA,CAAA,KAAA,EAAA,WAAA,EAAA,EAAA,CAAA,CAAA,EAAA,YAAA,EAAA,SAAA,8BAAA,CAAA,EAAA,EAAA,GAAA,EAAA,EAAA,IAAA,EAAA,GAAA,CAAA,EAAA;8FAAjB,GAAW,CAAA,SAAA,EAAA,CAAA,EAAA,CAAA,CAAA;;AAOiB,UAAA,CAAA;AAA7B,IAAA,YAAY,EAAE;AAAE,IAAA,UAAU,EAAE;AAAiC,CAAA,EAAA,iBAAA,CAAA,SAAA,EAAA,gBAAA,EAAA,KAAA,CAAA,CAAA,CAAA;AAChD,UAAA,CAAA;AAAb,IAAA,UAAU,EAAE;AAAgC,CAAA,EAAA,iBAAA,CAAA,SAAA,EAAA,UAAA,EAAA,KAAA,CAAA,CAAA,CAAA;AAC/B,UAAA,CAAA;AAAb,IAAA,UAAU,EAAE;AAAmC,CAAA,EAAA,iBAAA,CAAA,SAAA,EAAA,aAAA,EAAA,KAAA,CAAA,CAAA,CAAA;uFAT9C,iBAAiB,EAAA,CAAA;cAP7B,SAAS;AAAC,QAAA,IAAA,EAAA,CAAA;AACT,gBAAA,QAAQ,EAAE,gBAAgB;AAC1B,gBAAA,QAAQ,EAAE,UAAU;AACpB,gBAAA,IAAI,EAAE;AACJ,oBAAA,SAAS,EAAE,aAAa;AACzB,iBAAA;AACF,aAAA,CAAA;;sBAsBI,MAAM;uBAAC,QAAQ,CAAA;;sBAKf,QAAQ;;sBACR,QAAQ;wBAtBF,MAAM,EAAA,CAAA;kBAAd,KAAK;YACG,MAAM,EAAA,CAAA;kBAAd,KAAK;YACiC,cAAc,EAAA,CAAA;kBAApD,KAAK;YACiB,QAAQ,EAAA,CAAA;kBAA9B,KAAK;YACiB,WAAW,EAAA,CAAA;kBAAjC,KAAK;;;MCxBK,cAAc,CAAA;;4EAAd,cAAc,GAAA,CAAA,EAAA,CAAA;gEAAd,cAAc,EAAA,CAAA,CAAA;AAHZ,cAAA,CAAA,IAAA,iBAAA,EAAA,CAAA,gBAAA,CAAA,EAAA,SAAA,EAAA,CAAC,eAAe,CAAC,EAAA,OAAA,EAAA,CAFnB,CAAC,UAAU,EAAE,aAAa,EAAE,YAAY,EAAE,cAAc,EAAE,YAAY,EAAE,cAAc,EAAE,eAAe,CAAC,CAAA,EAAA,CAAA,CAAA;uFAKxG,cAAc,EAAA,CAAA;cAN1B,QAAQ;AAAC,QAAA,IAAA,EAAA,CAAA;AACN,gBAAA,OAAO,EAAE,CAAC,UAAU,EAAE,aAAa,EAAE,YAAY,EAAE,cAAc,EAAE,YAAY,EAAE,cAAc,EAAE,eAAe,CAAC;AACjH,gBAAA,OAAO,EAAE,CAAC,iBAAiB,EAAE,wBAAwB,EAAE,sBAAsB,CAAC;gBAC9E,SAAS,EAAE,CAAC,eAAe,CAAC;AAC5B,gBAAA,YAAY,EAAE,CAAC,iBAAiB,EAAE,wBAAwB,EAAE,sBAAsB,CAAC;AACtF,aAAA,CAAA;;wFACY,cAAc,EAAA,EAAA,YAAA,EAAA,CAFR,iBAAiB,EAAE,wBAAwB,EAAE,sBAAsB,CAHxE,EAAA,OAAA,EAAA,CAAA,UAAU,EAAE,aAAa,EAAE,YAAY,EAAE,cAAc,EAAE,YAAY,EAAE,cAAc,EAAE,eAAe,CAAA,EAAA,OAAA,EAAA,CACtG,iBAAiB,EAAE,wBAAwB,EAAE,sBAAsB,CAAA,EAAA,CAAA,CAAA,EAAA,GAAA;;AClBjF;;AAEG;;;;"}