import { __decorate } from "tslib";
import { ChangeDetectionStrategy, Component, EventEmitter, Host, Input, Optional, Output, ViewEncapsulation } from '@angular/core';
import { Subject } from 'rxjs';
import { takeUntil } from 'rxjs/operators';
import { collapseMotion } from 'tds-ui/core/animation';
import { WithConfig } from 'tds-ui/core/config';
import { InputBoolean, TDSHelperObject } from 'tds-ui/shared/utility';
import * as i0 from "@angular/core";
import * as i1 from "tds-ui/core/config";
import * as i2 from "./collapse.component";
import * as i3 from "tds-ui/core/no-animation";
import * as i4 from "@angular/common";
import * as i5 from "tds-ui/core/outlet";
const _c0 = function (a0, a1) { return { "tdsi-arrow-right-line": a0, "tdsi-arrow-down-line": a1 }; };
function TDSCollapsePanelComponent_ng_container_2_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelement(1, "span", 7);
    i0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r3 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngClass", i0.ɵɵpureFunction2(1, _c0, !ctx_r3.active, ctx_r3.active));
} }
function TDSCollapsePanelComponent_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, TDSCollapsePanelComponent_ng_container_2_ng_container_1_Template, 2, 4, "ng-container", 3);
    i0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("tdsStringTemplateOutlet", ctx_r0.expandedIcon);
} }
function TDSCollapsePanelComponent_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "span", 8);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r1.header);
} }
function TDSCollapsePanelComponent_div_4_div_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtext(1);
    i0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r7 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance(1);
    i0.ɵɵtextInterpolate(ctx_r7.extra);
} }
function TDSCollapsePanelComponent_div_4_div_1_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 11);
    i0.ɵɵtemplate(1, TDSCollapsePanelComponent_div_4_div_1_ng_container_1_Template, 2, 1, "ng-container", 3);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r5 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("tdsStringTemplateOutlet", ctx_r5.extra);
} }
const _c1 = function (a0, a1) { return { "tdsi-arrow-down-line": a0, "tdsi-arrow-up-line": a1 }; };
function TDSCollapsePanelComponent_div_4_ng_container_2_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelement(1, "span", 12);
    i0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r8 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngClass", i0.ɵɵpureFunction2(1, _c1, !ctx_r8.active, ctx_r8.active));
} }
function TDSCollapsePanelComponent_div_4_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, TDSCollapsePanelComponent_div_4_ng_container_2_ng_container_1_Template, 2, 4, "ng-container", 3);
    i0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r6 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("tdsStringTemplateOutlet", ctx_r6.expandedIcon);
} }
function TDSCollapsePanelComponent_div_4_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 9);
    i0.ɵɵtemplate(1, TDSCollapsePanelComponent_div_4_div_1_Template, 2, 1, "div", 10);
    i0.ɵɵtemplate(2, TDSCollapsePanelComponent_div_4_ng_container_2_Template, 2, 1, "ng-container", 2);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngIf", ctx_r2.extra);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngIf", ctx_r2.showArrow && ctx_r2.positionArrow == "right");
} }
const _c2 = function (a0) { return { "w-full": a0 }; };
const _c3 = function (a0) { return { "border-t border-neutral-2-200 dark:border-d-neutral-2-200": a0 }; };
const _c4 = ["*"];
const TDS_CONFIG_MODULE_NAME = 'collapsePanel';
export class TDSCollapsePanelComponent {
    constructor(tdsConfigService, cdr, tdsCollapseComponent, elementRef, noAnimation) {
        this.tdsConfigService = tdsConfigService;
        this.cdr = cdr;
        this.tdsCollapseComponent = tdsCollapseComponent;
        this.elementRef = elementRef;
        this.noAnimation = noAnimation;
        this._tdsModuleName = TDS_CONFIG_MODULE_NAME;
        this.active = false;
        this.disabled = false;
        this.showArrow = true;
        this.expandedIcon = 'tdsi-arrow-right-line';
        this.tdsClass = "p-4";
        this.tdsHeaderClass = "px-4 py-3";
        this.activeChange = new EventEmitter();
        this.destroy$ = new Subject();
        // TODO: move to host after View Engine deprecation
        this.elementRef.nativeElement.classList.add('tds-collapse-item');
        this.tdsConfigService
            .getConfigChangeEventForComponent(TDS_CONFIG_MODULE_NAME)
            .pipe(takeUntil(this.destroy$))
            .subscribe(() => {
            this.cdr.markForCheck();
        });
    }
    clickHeader() {
        if (!this.disabled) {
            this.tdsCollapseComponent.click(this);
        }
    }
    markForCheck() {
        this.cdr.markForCheck();
    }
    ngOnInit() {
        this.tdsCollapseComponent.addPanel(this);
    }
    ngOnDestroy() {
        this.destroy$.next();
        this.destroy$.complete();
        this.tdsCollapseComponent.removePanel(this);
    }
    get positionArrow() {
        if (TDSHelperObject.hasValue(this.tdsCollapseComponent)) {
            return this.tdsCollapseComponent.expandIconPosition;
        }
        return 'left';
    }
    get bordered() {
        if (TDSHelperObject.hasValue(this.tdsCollapseComponent)) {
            return this.tdsCollapseComponent.bordered;
        }
        return true;
    }
}
TDSCollapsePanelComponent.ɵfac = function TDSCollapsePanelComponent_Factory(t) { return new (t || TDSCollapsePanelComponent)(i0.ɵɵdirectiveInject(i1.TDSConfigService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i2.TDSCollapseComponent, 1), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i3.TDSNoAnimationDirective, 8)); };
TDSCollapsePanelComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: TDSCollapsePanelComponent, selectors: [["tds-collapse-panel"]], hostAttrs: [1, "block"], hostVars: 12, hostBindings: function TDSCollapsePanelComponent_HostBindings(rf, ctx) { if (rf & 2) {
        i0.ɵɵclassProp("tds-collapse-no-arrow", !ctx.showArrow)("tds-collapse-item-active", ctx.active)("tds-collapse-item-disabled", ctx.disabled)("border-b", ctx.bordered)("border-neutral-2-200", ctx.bordered)("dark:border-d-neutral-2-200", ctx.bordered);
    } }, inputs: { active: "active", disabled: "disabled", showArrow: "showArrow", extra: "extra", header: "header", expandedIcon: "expandedIcon", tdsClass: "tdsClass", tdsHeaderClass: "tdsHeaderClass" }, outputs: { activeChange: "activeChange" }, exportAs: ["tdsCollapsePanel"], ngContentSelectors: _c4, decls: 8, vars: 17, consts: [["role", "tab", 1, "tds-collapse-header", "w-full", "flex", "items-center", "cursor-pointer", "justify-between", 3, "ngClass", "click"], [1, "flex", "items-center", "flex-auto", 3, "ngClass"], [4, "ngIf"], [4, "tdsStringTemplateOutlet"], ["class", "flex items-center", 4, "ngIf"], [1, "tds-collapse-content", "w-full"], [1, "tds-collapse-content-box", "text-body-2", "font-regular", "w-full", "text-neutral-1-900", "dark:text-d-neutral-1-900", 3, "ngClass"], [1, "text-neutral-1-500", "dark:text-d-neutral-1-500", "text-xl", "leading-none", "mr-3", 3, "ngClass"], [1, "text-neutral-1-900", "dark:text-d-neutral-1-900", "text-header-2", "font-semibold"], [1, "flex", "items-center"], ["class", "tds-collapse-extra", 4, "ngIf"], [1, "tds-collapse-extra"], [1, "text-neutral-1-500", "dark:text-d-neutral-1-500", "text-xl", "leading-none", "ml-3", 3, "ngClass"]], template: function TDSCollapsePanelComponent_Template(rf, ctx) { if (rf & 1) {
        i0.ɵɵprojectionDef();
        i0.ɵɵelementStart(0, "div", 0);
        i0.ɵɵlistener("click", function TDSCollapsePanelComponent_Template_div_click_0_listener() { return ctx.clickHeader(); });
        i0.ɵɵelementStart(1, "div", 1);
        i0.ɵɵtemplate(2, TDSCollapsePanelComponent_ng_container_2_Template, 2, 1, "ng-container", 2);
        i0.ɵɵtemplate(3, TDSCollapsePanelComponent_ng_container_3_Template, 3, 1, "ng-container", 3);
        i0.ɵɵelementEnd();
        i0.ɵɵtemplate(4, TDSCollapsePanelComponent_div_4_Template, 3, 2, "div", 4);
        i0.ɵɵelementEnd();
        i0.ɵɵelementStart(5, "div", 5)(6, "div", 6);
        i0.ɵɵprojection(7);
        i0.ɵɵelementEnd()();
    } if (rf & 2) {
        i0.ɵɵproperty("ngClass", ctx.tdsHeaderClass);
        i0.ɵɵattribute("aria-expanded", ctx.active);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngClass", i0.ɵɵpureFunction1(13, _c2, !ctx.showArrow && !ctx.extra));
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngIf", ctx.showArrow && ctx.positionArrow == "left");
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("tdsStringTemplateOutlet", ctx.header);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngIf", ctx.showArrow && ctx.positionArrow == "right" || ctx.extra);
        i0.ɵɵadvance(1);
        i0.ɵɵclassProp("tds-collapse-content-active", ctx.active);
        i0.ɵɵproperty("@.disabled", ctx.noAnimation == null ? null : ctx.noAnimation.noAnimation)("@collapseMotion", ctx.active ? "expanded" : "hidden");
        i0.ɵɵadvance(1);
        i0.ɵɵclassMap(ctx.tdsClass);
        i0.ɵɵproperty("ngClass", i0.ɵɵpureFunction1(15, _c3, ctx.bordered));
    } }, directives: [i4.NgClass, i4.NgIf, i5.TDSStringTemplateOutletDirective], encapsulation: 2, data: { animation: [collapseMotion] }, changeDetection: 0 });
__decorate([
    InputBoolean()
], TDSCollapsePanelComponent.prototype, "active", void 0);
__decorate([
    InputBoolean()
], TDSCollapsePanelComponent.prototype, "disabled", void 0);
__decorate([
    WithConfig(),
    InputBoolean()
], TDSCollapsePanelComponent.prototype, "showArrow", void 0);
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(TDSCollapsePanelComponent, [{
        type: Component,
        args: [{
                selector: 'tds-collapse-panel',
                exportAs: 'tdsCollapsePanel',
                changeDetection: ChangeDetectionStrategy.OnPush,
                encapsulation: ViewEncapsulation.None,
                animations: [collapseMotion],
                template: `
  <div role="tab" [attr.aria-expanded]="active"
  class="tds-collapse-header w-full flex items-center  cursor-pointer justify-between" [ngClass]="tdsHeaderClass" (click)="clickHeader()">
  <div class="flex items-center flex-auto" [ngClass]="{'w-full':!showArrow && !extra}">
    <ng-container *ngIf="showArrow && positionArrow == 'left'">
      <ng-container *tdsStringTemplateOutlet="expandedIcon; let expandedIcon">
          <span [ngClass]="{'tdsi-arrow-right-line':!active,'tdsi-arrow-down-line':active}" class="text-neutral-1-500 dark:text-d-neutral-1-500 text-xl leading-none mr-3"></span>       
      </ng-container>
    </ng-container>
    <ng-container *tdsStringTemplateOutlet="header">
      <span class="text-neutral-1-900 dark:text-d-neutral-1-900 text-header-2 font-semibold">{{ header }}</span>
    </ng-container>
  </div> 
  <div class="flex items-center" *ngIf="(showArrow && positionArrow == 'right') || extra">
    <div class="tds-collapse-extra" *ngIf="extra">
      <ng-container *tdsStringTemplateOutlet="extra">{{ extra }}</ng-container>
    </div>
    <ng-container *ngIf="showArrow && positionArrow == 'right'">
      <ng-container *tdsStringTemplateOutlet="expandedIcon; let expandedIcon">
      <span [ngClass]="{'tdsi-arrow-down-line':!active,'tdsi-arrow-up-line':active}" class="text-neutral-1-500 dark:text-d-neutral-1-500 text-xl leading-none ml-3"></span>
        <!-- <span *ngIf="!active" [ngClass]="expandedIcon" class="text-neutral-1-500 dark:text-d-neutral-1-500 text-xl leading-none ml-3"></span>
        <span *ngIf="active" [ngClass]="collapsedIcon || 'tdsi-arrow-down-line'" class="dsads text-neutral-1-500 dark:text-d-neutral-1-500 text-xl leading-none ml-3"></span> -->
      </ng-container>
    </ng-container>
  </div>
</div>
<div class="tds-collapse-content w-full " [class.tds-collapse-content-active]="active"
  [@.disabled]="noAnimation?.noAnimation" [@collapseMotion]="active ? 'expanded' : 'hidden'">
  <div
  [ngClass]="{'border-t border-neutral-2-200 dark:border-d-neutral-2-200':bordered}"
    class="tds-collapse-content-box  text-body-2 font-regular w-full  text-neutral-1-900 dark:text-d-neutral-1-900"
    [class]="tdsClass"
    >
    <ng-content></ng-content>
  </div>
</div>
  `,
                host: {
                    'class': "block ",
                    '[class.tds-collapse-no-arrow]': '!showArrow',
                    '[class.tds-collapse-item-active]': 'active',
                    '[class.tds-collapse-item-disabled]': 'disabled',
                    '[class.border-b]': "bordered",
                    '[class.border-neutral-2-200]': "bordered",
                    '[class.dark:border-d-neutral-2-200]': "bordered"
                }
            }]
    }], function () { return [{ type: i1.TDSConfigService }, { type: i0.ChangeDetectorRef }, { type: i2.TDSCollapseComponent, decorators: [{
                type: Host
            }] }, { type: i0.ElementRef }, { type: i3.TDSNoAnimationDirective, decorators: [{
                type: Optional
            }] }]; }, { active: [{
            type: Input
        }], disabled: [{
            type: Input
        }], showArrow: [{
            type: Input
        }], extra: [{
            type: Input
        }], header: [{
            type: Input
        }], expandedIcon: [{
            type: Input
        }], tdsClass: [{
            type: Input
        }], tdsHeaderClass: [{
            type: Input
        }], activeChange: [{
            type: Output
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29sbGFwc2UtcGFuZWwuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvdGRzLXVpL2NvbGxhcHNlL2NvbGxhcHNlLXBhbmVsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBR0EsT0FBTyxFQUNMLHVCQUF1QixFQUV2QixTQUFTLEVBRVQsWUFBWSxFQUNaLElBQUksRUFDSixLQUFLLEVBR0wsUUFBUSxFQUNSLE1BQU0sRUFFTixpQkFBaUIsRUFDbEIsTUFBTSxlQUFlLENBQUM7QUFFdkIsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMvQixPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDM0MsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQ3ZELE9BQU8sRUFBa0MsVUFBVSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFFaEYsT0FBTyxFQUFFLFlBQVksRUFBRSxlQUFlLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQzs7Ozs7Ozs7O0lBaUJoRSw2QkFBd0U7SUFDcEUsMEJBQXdLO0lBQzVLLDBCQUFlOzs7SUFETCxlQUEyRTtJQUEzRSxtRkFBMkU7OztJQUZ2Riw2QkFBMkQ7SUFDekQsMkdBRWU7SUFDakIsMEJBQWU7OztJQUhFLGVBQXVDO0lBQXZDLDZEQUF1Qzs7O0lBSXhELDZCQUFnRDtJQUM5QywrQkFBdUY7SUFBQSxZQUFZO0lBQUEsaUJBQU87SUFDNUcsMEJBQWU7OztJQUQwRSxlQUFZO0lBQVosbUNBQVk7OztJQUtuRyw2QkFBK0M7SUFBQSxZQUFXO0lBQUEsMEJBQWU7OztJQUExQixlQUFXO0lBQVgsa0NBQVc7OztJQUQ1RCwrQkFBOEM7SUFDNUMsd0dBQXlFO0lBQzNFLGlCQUFNOzs7SUFEVyxlQUE4QjtJQUE5QixzREFBOEI7Ozs7SUFHN0MsNkJBQXdFO0lBQ3hFLDJCQUFxSztJQUdySywwQkFBZTs7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QU07a0JBQTlCLEtBQUs7WUFDbUIsUUFBUTtrQkFBaEMsS0FBSztZQUNpQyxTQUFTO2tCQUEvQyxLQUFLO1lBQ0csS0FBSztrQkFBYixLQUFLO1lBQ0csTUFBTTtrQkFBZCxLQUFLO1lBQ0csWUFBWTtrQkFBcEIsS0FBSztZQUNHLFFBQVE7a0JBQWhCLEtBQUs7WUFDRyxjQUFjO2tCQUF0QixLQUFLO1lBQ2EsWUFBWTtrQkFBOUIsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5cclxuaW1wb3J0IHsgQm9vbGVhbklucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2NvZXJjaW9uJztcclxuaW1wb3J0IHtcclxuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcclxuICBDaGFuZ2VEZXRlY3RvclJlZixcclxuICBDb21wb25lbnQsXHJcbiAgRWxlbWVudFJlZixcclxuICBFdmVudEVtaXR0ZXIsXHJcbiAgSG9zdCxcclxuICBJbnB1dCxcclxuICBPbkRlc3Ryb3ksXHJcbiAgT25Jbml0LFxyXG4gIE9wdGlvbmFsLFxyXG4gIE91dHB1dCxcclxuICBUZW1wbGF0ZVJlZixcclxuICBWaWV3RW5jYXBzdWxhdGlvblxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5cclxuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyB0YWtlVW50aWwgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcbmltcG9ydCB7IGNvbGxhcHNlTW90aW9uIH0gZnJvbSAndGRzLXVpL2NvcmUvYW5pbWF0aW9uJztcclxuaW1wb3J0IHsgVERTQ29uZmlnS2V5LCBURFNDb25maWdTZXJ2aWNlLCBXaXRoQ29uZmlnIH0gZnJvbSAndGRzLXVpL2NvcmUvY29uZmlnJztcclxuaW1wb3J0IHsgVERTTm9BbmltYXRpb25EaXJlY3RpdmUgfSBmcm9tICd0ZHMtdWkvY29yZS9uby1hbmltYXRpb24nO1xyXG5pbXBvcnQgeyBJbnB1dEJvb2xlYW4sIFREU0hlbHBlck9iamVjdCB9IGZyb20gJ3Rkcy11aS9zaGFyZWQvdXRpbGl0eSc7XHJcblxyXG5pbXBvcnQgeyBURFNDb2xsYXBzZUNvbXBvbmVudCB9IGZyb20gJy4vY29sbGFwc2UuY29tcG9uZW50JztcclxuXHJcbmNvbnN0IFREU19DT05GSUdfTU9EVUxFX05BTUU6IFREU0NvbmZpZ0tleSA9ICdjb2xsYXBzZVBhbmVsJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAndGRzLWNvbGxhcHNlLXBhbmVsJyxcclxuICBleHBvcnRBczogJ3Rkc0NvbGxhcHNlUGFuZWwnLFxyXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxyXG4gIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXHJcbiAgYW5pbWF0aW9uczogW2NvbGxhcHNlTW90aW9uXSxcclxuICB0ZW1wbGF0ZTogYFxyXG4gIDxkaXYgcm9sZT1cInRhYlwiIFthdHRyLmFyaWEtZXhwYW5kZWRdPVwiYWN0aXZlXCJcclxuICBjbGFzcz1cInRkcy1jb2xsYXBzZS1oZWFkZXIgdy1mdWxsIGZsZXggaXRlbXMtY2VudGVyICBjdXJzb3ItcG9pbnRlciBqdXN0aWZ5LWJldHdlZW5cIiBbbmdDbGFzc109XCJ0ZHNIZWFkZXJDbGFzc1wiIChjbGljayk9XCJjbGlja0hlYWRlcigpXCI+XHJcbiAgPGRpdiBjbGFzcz1cImZsZXggaXRlbXMtY2VudGVyIGZsZXgtYXV0b1wiIFtuZ0NsYXNzXT1cInsndy1mdWxsJzohc2hvd0Fycm93ICYmICFleHRyYX1cIj5cclxuICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJzaG93QXJyb3cgJiYgcG9zaXRpb25BcnJvdyA9PSAnbGVmdCdcIj5cclxuICAgICAgPG5nLWNvbnRhaW5lciAqdGRzU3RyaW5nVGVtcGxhdGVPdXRsZXQ9XCJleHBhbmRlZEljb247IGxldCBleHBhbmRlZEljb25cIj5cclxuICAgICAgICAgIDxzcGFuIFtuZ0NsYXNzXT1cInsndGRzaS1hcnJvdy1yaWdodC1saW5lJzohYWN0aXZlLCd0ZHNpLWFycm93LWRvd24tbGluZSc6YWN0aXZlfVwiIGNsYXNzPVwidGV4dC1uZXV0cmFsLTEtNTAwIGRhcms6dGV4dC1kLW5ldXRyYWwtMS01MDAgdGV4dC14bCBsZWFkaW5nLW5vbmUgbXItM1wiPjwvc3Bhbj4gICAgICAgXHJcbiAgICAgIDwvbmctY29udGFpbmVyPlxyXG4gICAgPC9uZy1jb250YWluZXI+XHJcbiAgICA8bmctY29udGFpbmVyICp0ZHNTdHJpbmdUZW1wbGF0ZU91dGxldD1cImhlYWRlclwiPlxyXG4gICAgICA8c3BhbiBjbGFzcz1cInRleHQtbmV1dHJhbC0xLTkwMCBkYXJrOnRleHQtZC1uZXV0cmFsLTEtOTAwIHRleHQtaGVhZGVyLTIgZm9udC1zZW1pYm9sZFwiPnt7IGhlYWRlciB9fTwvc3Bhbj5cclxuICAgIDwvbmctY29udGFpbmVyPlxyXG4gIDwvZGl2PiBcclxuICA8ZGl2IGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXJcIiAqbmdJZj1cIihzaG93QXJyb3cgJiYgcG9zaXRpb25BcnJvdyA9PSAncmlnaHQnKSB8fCBleHRyYVwiPlxyXG4gICAgPGRpdiBjbGFzcz1cInRkcy1jb2xsYXBzZS1leHRyYVwiICpuZ0lmPVwiZXh0cmFcIj5cclxuICAgICAgPG5nLWNvbnRhaW5lciAqdGRzU3RyaW5nVGVtcGxhdGVPdXRsZXQ9XCJleHRyYVwiPnt7IGV4dHJhIH19PC9uZy1jb250YWluZXI+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJzaG93QXJyb3cgJiYgcG9zaXRpb25BcnJvdyA9PSAncmlnaHQnXCI+XHJcbiAgICAgIDxuZy1jb250YWluZXIgKnRkc1N0cmluZ1RlbXBsYXRlT3V0bGV0PVwiZXhwYW5kZWRJY29uOyBsZXQgZXhwYW5kZWRJY29uXCI+XHJcbiAgICAgIDxzcGFuIFtuZ0NsYXNzXT1cInsndGRzaS1hcnJvdy1kb3duLWxpbmUnOiFhY3RpdmUsJ3Rkc2ktYXJyb3ctdXAtbGluZSc6YWN0aXZlfVwiIGNsYXNzPVwidGV4dC1uZXV0cmFsLTEtNTAwIGRhcms6dGV4dC1kLW5ldXRyYWwtMS01MDAgdGV4dC14bCBsZWFkaW5nLW5vbmUgbWwtM1wiPjwvc3Bhbj5cclxuICAgICAgICA8IS0tIDxzcGFuICpuZ0lmPVwiIWFjdGl2ZVwiIFtuZ0NsYXNzXT1cImV4cGFuZGVkSWNvblwiIGNsYXNzPVwidGV4dC1uZXV0cmFsLTEtNTAwIGRhcms6dGV4dC1kLW5ldXRyYWwtMS01MDAgdGV4dC14bCBsZWFkaW5nLW5vbmUgbWwtM1wiPjwvc3Bhbj5cclxuICAgICAgICA8c3BhbiAqbmdJZj1cImFjdGl2ZVwiIFtuZ0NsYXNzXT1cImNvbGxhcHNlZEljb24gfHwgJ3Rkc2ktYXJyb3ctZG93bi1saW5lJ1wiIGNsYXNzPVwiZHNhZHMgdGV4dC1uZXV0cmFsLTEtNTAwIGRhcms6dGV4dC1kLW5ldXRyYWwtMS01MDAgdGV4dC14bCBsZWFkaW5nLW5vbmUgbWwtM1wiPjwvc3Bhbj4gLS0+XHJcbiAgICAgIDwvbmctY29udGFpbmVyPlxyXG4gICAgPC9uZy1jb250YWluZXI+XHJcbiAgPC9kaXY+XHJcbjwvZGl2PlxyXG48ZGl2IGNsYXNzPVwidGRzLWNvbGxhcHNlLWNvbnRlbnQgdy1mdWxsIFwiIFtjbGFzcy50ZHMtY29sbGFwc2UtY29udGVudC1hY3RpdmVdPVwiYWN0aXZlXCJcclxuICBbQC5kaXNhYmxlZF09XCJub0FuaW1hdGlvbj8ubm9BbmltYXRpb25cIiBbQGNvbGxhcHNlTW90aW9uXT1cImFjdGl2ZSA/ICdleHBhbmRlZCcgOiAnaGlkZGVuJ1wiPlxyXG4gIDxkaXZcclxuICBbbmdDbGFzc109XCJ7J2JvcmRlci10IGJvcmRlci1uZXV0cmFsLTItMjAwIGRhcms6Ym9yZGVyLWQtbmV1dHJhbC0yLTIwMCc6Ym9yZGVyZWR9XCJcclxuICAgIGNsYXNzPVwidGRzLWNvbGxhcHNlLWNvbnRlbnQtYm94ICB0ZXh0LWJvZHktMiBmb250LXJlZ3VsYXIgdy1mdWxsICB0ZXh0LW5ldXRyYWwtMS05MDAgZGFyazp0ZXh0LWQtbmV1dHJhbC0xLTkwMFwiXHJcbiAgICBbY2xhc3NdPVwidGRzQ2xhc3NcIlxyXG4gICAgPlxyXG4gICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxyXG4gIDwvZGl2PlxyXG48L2Rpdj5cclxuICBgLFxyXG5cclxuICBob3N0OiB7XHJcbiAgICAnY2xhc3MnOiBcImJsb2NrIFwiLFxyXG4gICAgJ1tjbGFzcy50ZHMtY29sbGFwc2Utbm8tYXJyb3ddJzogJyFzaG93QXJyb3cnLFxyXG4gICAgJ1tjbGFzcy50ZHMtY29sbGFwc2UtaXRlbS1hY3RpdmVdJzogJ2FjdGl2ZScsXHJcbiAgICAnW2NsYXNzLnRkcy1jb2xsYXBzZS1pdGVtLWRpc2FibGVkXSc6ICdkaXNhYmxlZCcsXHJcbiAgICAnW2NsYXNzLmJvcmRlci1iXSc6IFwiYm9yZGVyZWRcIixcclxuICAgICdbY2xhc3MuYm9yZGVyLW5ldXRyYWwtMi0yMDBdJzogXCJib3JkZXJlZFwiLFxyXG4gICAgJ1tjbGFzcy5kYXJrOmJvcmRlci1kLW5ldXRyYWwtMi0yMDBdJzogXCJib3JkZXJlZFwiXHJcbiAgfVxyXG59KVxyXG5leHBvcnQgY2xhc3MgVERTQ29sbGFwc2VQYW5lbENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95IHtcclxuICByZWFkb25seSBfdGRzTW9kdWxlTmFtZTogVERTQ29uZmlnS2V5ID0gVERTX0NPTkZJR19NT0RVTEVfTkFNRTtcclxuICBzdGF0aWMgbmdBY2NlcHRJbnB1dFR5cGVfYWN0aXZlOiBCb29sZWFuSW5wdXQ7XHJcbiAgc3RhdGljIG5nQWNjZXB0SW5wdXRUeXBlX2Rpc2FibGVkOiBCb29sZWFuSW5wdXQ7XHJcbiAgc3RhdGljIG5nQWNjZXB0SW5wdXRUeXBlX3Nob3dBcnJvdzogQm9vbGVhbklucHV0O1xyXG5cclxuICBASW5wdXQoKSBASW5wdXRCb29sZWFuKCkgYWN0aXZlID0gZmFsc2U7XHJcbiAgQElucHV0KCkgQElucHV0Qm9vbGVhbigpIGRpc2FibGVkID0gZmFsc2U7XHJcbiAgQElucHV0KCkgQFdpdGhDb25maWcoKSBASW5wdXRCb29sZWFuKCkgc2hvd0Fycm93OiBib29sZWFuID0gdHJ1ZTtcclxuICBASW5wdXQoKSBleHRyYT86IHN0cmluZyB8IFRlbXBsYXRlUmVmPHZvaWQ+O1xyXG4gIEBJbnB1dCgpIGhlYWRlcj86IHN0cmluZyB8IFRlbXBsYXRlUmVmPHZvaWQ+O1xyXG4gIEBJbnB1dCgpIGV4cGFuZGVkSWNvbj86IHN0cmluZyB8IFRlbXBsYXRlUmVmPHZvaWQ+ID0gJ3Rkc2ktYXJyb3ctcmlnaHQtbGluZSc7XHJcbiAgQElucHV0KCkgdGRzQ2xhc3M6IHN0cmluZyA9IFwicC00XCI7XHJcbiAgQElucHV0KCkgdGRzSGVhZGVyQ2xhc3M6IHN0cmluZyA9IFwicHgtNCBweS0zXCI7XHJcbiAgQE91dHB1dCgpIHJlYWRvbmx5IGFjdGl2ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8Ym9vbGVhbj4oKTtcclxuXHJcbiAgcHJpdmF0ZSBkZXN0cm95JCA9IG5ldyBTdWJqZWN0PHZvaWQ+KCk7XHJcbiAgY2xpY2tIZWFkZXIoKTogdm9pZCB7XHJcbiAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcclxuICAgICAgdGhpcy50ZHNDb2xsYXBzZUNvbXBvbmVudC5jbGljayh0aGlzKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG1hcmtGb3JDaGVjaygpOiB2b2lkIHtcclxuICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xyXG4gIH1cclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwdWJsaWMgdGRzQ29uZmlnU2VydmljZTogVERTQ29uZmlnU2VydmljZSxcclxuICAgIHByaXZhdGUgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgIEBIb3N0KCkgcHJpdmF0ZSB0ZHNDb2xsYXBzZUNvbXBvbmVudDogVERTQ29sbGFwc2VDb21wb25lbnQsXHJcbiAgICBwcml2YXRlIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYsXHJcbiAgICBAT3B0aW9uYWwoKSBwdWJsaWMgbm9BbmltYXRpb24/OiBURFNOb0FuaW1hdGlvbkRpcmVjdGl2ZVxyXG4gICkge1xyXG4gICAgLy8gVE9ETzogbW92ZSB0byBob3N0IGFmdGVyIFZpZXcgRW5naW5lIGRlcHJlY2F0aW9uXHJcbiAgICB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5jbGFzc0xpc3QuYWRkKCd0ZHMtY29sbGFwc2UtaXRlbScpO1xyXG4gICAgdGhpcy50ZHNDb25maWdTZXJ2aWNlXHJcbiAgICAgIC5nZXRDb25maWdDaGFuZ2VFdmVudEZvckNvbXBvbmVudChURFNfQ09ORklHX01PRFVMRV9OQU1FKVxyXG4gICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXHJcbiAgICAgIC5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgdGhpcy50ZHNDb2xsYXBzZUNvbXBvbmVudC5hZGRQYW5lbCh0aGlzKTtcclxuICB9XHJcblxyXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xyXG4gICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XHJcbiAgICB0aGlzLmRlc3Ryb3kkLmNvbXBsZXRlKCk7XHJcbiAgICB0aGlzLnRkc0NvbGxhcHNlQ29tcG9uZW50LnJlbW92ZVBhbmVsKHRoaXMpO1xyXG4gIH1cclxuICBnZXQgcG9zaXRpb25BcnJvdygpIHtcclxuXHJcbiAgICBpZiAoVERTSGVscGVyT2JqZWN0Lmhhc1ZhbHVlKHRoaXMudGRzQ29sbGFwc2VDb21wb25lbnQpKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnRkc0NvbGxhcHNlQ29tcG9uZW50LmV4cGFuZEljb25Qb3NpdGlvbjtcclxuICAgIH1cclxuICAgIHJldHVybiAnbGVmdCdcclxuICB9XHJcbiAgZ2V0IGJvcmRlcmVkKCkge1xyXG4gICAgaWYgKFREU0hlbHBlck9iamVjdC5oYXNWYWx1ZSh0aGlzLnRkc0NvbGxhcHNlQ29tcG9uZW50KSkge1xyXG4gICAgICByZXR1cm4gdGhpcy50ZHNDb2xsYXBzZUNvbXBvbmVudC5ib3JkZXJlZDtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxufVxyXG4iXX0=