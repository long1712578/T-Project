import { __decorate } from "tslib";
import { coerceNumberProperty } from '@angular/cdk/coercion';
import { ChangeDetectionStrategy, Component, ContentChildren, EventEmitter, Input, Optional, Output, QueryList, ViewChild, ViewEncapsulation } from '@angular/core';
import { NavigationEnd } from '@angular/router';
import { merge, of, Subject, Subscription } from 'rxjs';
import { delay, filter, first, startWith, takeUntil } from 'rxjs/operators';
import { TDSTabChangeEvent } from './interfaces';
import { TDSTabNavBarComponent } from './tab-nav-bar.component';
import { TDSTabComponent, TDS_TAB_SET } from './tab.component';
import { InputBoolean } from 'tds-ui/shared/utility';
import { WithConfig } from 'tds-ui/core/config';
import { wrapIntoObservable } from 'tds-ui/core/util';
import * as i0 from "@angular/core";
import * as i1 from "tds-ui/core/config";
import * as i2 from "@angular/cdk/bidi";
import * as i3 from "@angular/router";
import * as i4 from "@angular/common";
import * as i5 from "./tab-nav-bar.component";
import * as i6 from "./tab-nav-item.directive";
import * as i7 from "@angular/cdk/a11y";
import * as i8 from "tds-ui/core/outlet";
import * as i9 from "./tab-close-button.component";
import * as i10 from "./tab-body.component";
function TDSTabSetComponent_tds_tabs_nav_0_div_1_ng_container_2_button_3_Template(rf, ctx) { if (rf & 1) {
    const _r9 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 11);
    i0.ɵɵlistener("click", function TDSTabSetComponent_tds_tabs_nav_0_div_1_ng_container_2_button_3_Template_button_click_0_listener($event) { i0.ɵɵrestoreView(_r9); const i_r4 = i0.ɵɵnextContext(2).index; const ctx_r7 = i0.ɵɵnextContext(2); return ctx_r7._onClose(i_r4, $event); });
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const tab_r3 = i0.ɵɵnextContext(2).$implicit;
    i0.ɵɵproperty("closeIcon", tab_r3.closeIcon);
} }
const _c0 = function (a0, a1, a2, a3, a4) { return { "border-b-3": a0, "border-l-3": a1, "tds-tabs-tab-active  border-primary-1": a2, "border-transparent": a3, "cursor-pointer hover:border-primary-1 ": a4 }; };
function TDSTabSetComponent_tds_tabs_nav_0_div_1_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "div", 9);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(3, TDSTabSetComponent_tds_tabs_nav_0_div_1_ng_container_2_button_3_Template, 1, 1, "button", 10);
    i0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r11 = i0.ɵɵnextContext();
    const i_r4 = ctx_r11.index;
    const tab_r3 = ctx_r11.$implicit;
    const ctx_r5 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngClass", i0.ɵɵpureFunction5(3, _c0, ctx_r5.position === "horizontal", ctx_r5.tabPosition === "right" || ctx_r5.tabPosition === "left", ctx_r5.selectedIndex === i_r4, ctx_r5.selectedIndex !== i_r4, !tab_r3.disabled));
    i0.ɵɵadvance(1);
    i0.ɵɵtextInterpolate1(" ", tab_r3.label, " ");
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngIf", tab_r3.closable && ctx_r5.closable && !tab_r3.disabled);
} }
const _c1 = function (a0, a1, a2) { return { "text-neutral-1-900 dark:text-d-neutral-1-900": a0, "text-neutral-1-400 dark:text-d-neutral-1-400 hover:text-neutral-1-900 dark:hover:text-d-neutral-1-900": a1, "text-neutral-1-300 dark:text-d-neutral-1-300": a2 }; };
const _c2 = function (a1) { return { visible: true, active: a1 }; };
function TDSTabSetComponent_tds_tabs_nav_0_div_1_Template(rf, ctx) { if (rf & 1) {
    const _r13 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 6);
    i0.ɵɵlistener("click", function TDSTabSetComponent_tds_tabs_nav_0_div_1_Template_div_click_0_listener($event) { const restoredCtx = i0.ɵɵrestoreView(_r13); const tab_r3 = restoredCtx.$implicit; const i_r4 = restoredCtx.index; const ctx_r12 = i0.ɵɵnextContext(2); return ctx_r12.clickNavItem(tab_r3, i_r4, $event); })("contextmenu", function TDSTabSetComponent_tds_tabs_nav_0_div_1_Template_div_contextmenu_0_listener($event) { const restoredCtx = i0.ɵɵrestoreView(_r13); const tab_r3 = restoredCtx.$implicit; const ctx_r14 = i0.ɵɵnextContext(2); return ctx_r14.contextmenuNavItem(tab_r3, $event); });
    i0.ɵɵelementStart(1, "div", 7);
    i0.ɵɵtemplate(2, TDSTabSetComponent_tds_tabs_nav_0_div_1_ng_container_2_Template, 4, 9, "ng-container", 8);
    i0.ɵɵelementEnd()();
} if (rf & 2) {
    const tab_r3 = ctx.$implicit;
    const i_r4 = ctx.index;
    const ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵstyleProp("margin-right", ctx_r2.position === "horizontal" ? ctx_r2.tabBarGutter : null, "px")("margin-bottom", ctx_r2.position === "vertical" ? ctx_r2.tabBarGutter : null, "px");
    i0.ɵɵclassProp("tds-tabs-tab-disabled", tab_r3.disabled);
    i0.ɵɵproperty("ngClass", ctx_r2.clsTab);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("disabled", tab_r3.disabled)("tab", tab_r3)("active", ctx_r2.selectedIndex === i_r4)("ngClass", i0.ɵɵpureFunction3(17, _c1, !tab_r3.disabled && ctx_r2.selectedIndex === i_r4, !tab_r3.disabled && ctx_r2.selectedIndex !== i_r4, tab_r3.disabled));
    i0.ɵɵattribute("tabIndex", ctx_r2.getTabIndex(tab_r3, i_r4))("aria-disabled", tab_r3.disabled)("aria-selected", ctx_r2.selectedIndex === i_r4 && !ctx_r2.hideAll)("aria-controls", ctx_r2.getTabContentId(i_r4));
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("tdsStringTemplateOutlet", tab_r3.label)("tdsStringTemplateOutletContext", i0.ɵɵpureFunction1(21, _c2, ctx_r2.selectedIndex === i_r4));
} }
function TDSTabSetComponent_tds_tabs_nav_0_Template(rf, ctx) { if (rf & 1) {
    const _r16 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "tds-tabs-nav", 4);
    i0.ɵɵlistener("tabScroll", function TDSTabSetComponent_tds_tabs_nav_0_Template_tds_tabs_nav_tabScroll_0_listener($event) { i0.ɵɵrestoreView(_r16); const ctx_r15 = i0.ɵɵnextContext(); return ctx_r15.tabListScroll.emit($event); })("selectFocusedIndex", function TDSTabSetComponent_tds_tabs_nav_0_Template_tds_tabs_nav_selectFocusedIndex_0_listener($event) { i0.ɵɵrestoreView(_r16); const ctx_r17 = i0.ɵɵnextContext(); return ctx_r17.setSelectedIndex($event); })("addClicked", function TDSTabSetComponent_tds_tabs_nav_0_Template_tds_tabs_nav_addClicked_0_listener() { i0.ɵɵrestoreView(_r16); const ctx_r18 = i0.ɵɵnextContext(); return ctx_r18._onAdd(); });
    i0.ɵɵtemplate(1, TDSTabSetComponent_tds_tabs_nav_0_div_1_Template, 3, 23, "div", 5);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵclassMap(ctx_r0.clsTab);
    i0.ɵɵproperty("ngStyle", ctx_r0.tabBarStyle)("selectedIndex", ctx_r0.selectedIndex || 0)("inkBarAnimated", ctx_r0.inkBarAnimated)("addable", ctx_r0.addable)("addIcon", ctx_r0.addIcon)("hideBar", ctx_r0.hideAll)("position", ctx_r0.position)("tabPosition", ctx_r0.tabPosition)("extraTemplate", ctx_r0.tabBarExtraContent)("hidenNextBtn", ctx_r0.hidenNextBtn);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngForOf", ctx_r0.tabs);
} }
function TDSTabSetComponent_div_3_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelement(0, "div", 12);
} if (rf & 2) {
    const tab_r19 = ctx.$implicit;
    const i_r20 = ctx.index;
    const ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵproperty("active", ctx_r1.selectedIndex == i_r20 && !ctx_r1.hideAll)("content", tab_r19.content)("forceRender", tab_r19.forceRender)("tabPaneAnimated", ctx_r1.tabPaneAnimated)("ngClass", tab_r19.clsContent);
} }
const TDS_CONFIG_MODULE_NAME = 'tabs';
let nextId = 0;
export class TDSTabSetComponent {
    constructor(tdsConfigService, cdr, directionality, router) {
        this.tdsConfigService = tdsConfigService;
        this.cdr = cdr;
        this.directionality = directionality;
        this.router = router;
        this.tabPosition = 'top';
        this.onCanDeactivate = null;
        this.addIcon = 'plus';
        this.tabBarStyle = null;
        this.type = 'line';
        this.size = 'default';
        this.animated = false;
        this.tabBarGutter = undefined;
        this.hideAdd = false;
        this.centered = false;
        this.hideAll = false;
        this.linkRouter = false;
        this.linkExact = true;
        this.hidenNextBtn = false;
        this.clsTab = 'px-4';
        this.selectChange = new EventEmitter(true);
        this.selectedIndexChange = new EventEmitter();
        this.tabListScroll = new EventEmitter();
        this.close = new EventEmitter();
        this.add = new EventEmitter();
        // Pick up only direct descendants under ivy rendering engine
        // We filter out only the tabs that belong to this tab set in `tabs`.
        this.allTabs = new QueryList();
        // All the direct tabs for this tab set
        this.tabs = new QueryList();
        this.dir = 'ltr';
        this.destroy$ = new Subject();
        this.indexToSelect = 0;
        this._selectedIndex = null;
        this.tabLabelSubscription = Subscription.EMPTY;
        this.tabsSubscription = Subscription.EMPTY;
        this.canDeactivateSubscription = Subscription.EMPTY;
        this.tabSetId = nextId++;
    }
    get selectedIndex() {
        return this._selectedIndex;
    }
    set selectedIndex(value) {
        this.indexToSelect = coerceNumberProperty(value, null);
    }
    get position() {
        return ['top', 'bottom'].indexOf(this.tabPosition) === -1 ? 'vertical' : 'horizontal';
    }
    get addable() {
        return this.type === 'editable-card' && !this.hideAdd;
    }
    get closable() {
        return this.type === 'editable-card';
    }
    get line() {
        return this.type === 'line';
    }
    get inkBarAnimated() {
        return this.line && (typeof this.animated === 'boolean' ? this.animated : this.animated.inkBar);
    }
    get tabPaneAnimated() {
        return false;
        // (
        //   this.position === 'horizontal' && this.line && (typeof this.animated === 'boolean' ? this.animated : this.animated.tabPane)
        // );
    }
    ngOnInit() {
        this.dir = this.directionality.value;
        this.directionality.change?.pipe(takeUntil(this.destroy$)).subscribe((direction) => {
            this.dir = direction;
            this.cdr.detectChanges();
        });
    }
    ngOnDestroy() {
        this.destroy$.next();
        this.destroy$.complete();
        this.tabs.destroy();
        this.tabLabelSubscription.unsubscribe();
        this.tabsSubscription.unsubscribe();
        this.canDeactivateSubscription.unsubscribe();
    }
    ngAfterContentInit() {
        Promise.resolve().then(() => {
            this.setUpRouter();
        });
        this.subscribeToTabLabels();
        this.subscribeToAllTabChanges();
        // Subscribe to changes in the amount of tabs, in order to be
        // able to re-render the content as new tabs are added or removed.
        this.tabsSubscription = this.tabs.changes.subscribe(() => {
            const indexToSelect = this.clampTabIndex(this.indexToSelect);
            // Maintain the previously-selected tab if a new tab is added or removed and there is no
            // explicit change that selects a different tab.
            if (indexToSelect === this._selectedIndex) {
                const tabs = this.tabs.toArray();
                for (let i = 0; i < tabs.length; i++) {
                    if (tabs[i].isActive) {
                        // Assign both to the `indexToSelect` and `_selectedIndex` so we don't fire a changed
                        // event, otherwise the consumer may end up in an infinite loop in some edge cases like
                        // adding a tab within the `selectedIndexChange` event.
                        this.indexToSelect = this._selectedIndex = i;
                        break;
                    }
                }
            }
            this.subscribeToTabLabels();
            this.cdr.markForCheck();
        });
    }
    ngAfterContentChecked() {
        // Don't clamp the `indexToSelect` immediately in the setter because it can happen that
        // the amount of tabs changes before the actual change detection runs.
        const indexToSelect = (this.indexToSelect = this.clampTabIndex(this.indexToSelect));
        // If there is a change in selected index, emit a change event. Should not trigger if
        // the selected index has not yet been initialized.
        if (this._selectedIndex !== indexToSelect) {
            const isFirstRun = this._selectedIndex == null;
            if (!isFirstRun) {
                this.selectChange.emit(this.createChangeEvent(indexToSelect));
            }
            // Changing these values after change detection has run
            // since the checked content may contain references to them.
            Promise.resolve().then(() => {
                this.tabs.forEach((tab, index) => (tab.isActive = index === indexToSelect));
                if (!isFirstRun) {
                    this.selectedIndexChange.emit(indexToSelect);
                }
            });
        }
        // Setup the position for each tab and optionally setup an origin on the next selected tab.
        this.tabs.forEach((tab, index) => {
            tab.position = index - indexToSelect;
            // If there is already a selected tab, then set up an origin for the next selected tab
            // if it doesn't have one already.
            if (this._selectedIndex != null && tab.position === 0 && !tab.origin) {
                tab.origin = indexToSelect - this._selectedIndex;
            }
        });
        if (this._selectedIndex !== indexToSelect) {
            this._selectedIndex = indexToSelect;
            this.cdr.markForCheck();
        }
    }
    _onClose(index, e) {
        e.preventDefault();
        e.stopPropagation();
        this.close.emit({ index });
    }
    _onAdd() {
        this.add.emit();
    }
    clampTabIndex(index) {
        return Math.min(this.tabs.length - 1, Math.max(index || 0, 0));
    }
    createChangeEvent(index) {
        const event = new TDSTabChangeEvent();
        event.index = index;
        if (this.tabs && this.tabs.length) {
            event.tab = this.tabs.toArray()[index];
            this.tabs.forEach((tab, i) => {
                if (i !== index) {
                    tab.tabDeselect.emit();
                }
            });
            event.tab.tabSelect.emit();
        }
        return event;
    }
    subscribeToTabLabels() {
        if (this.tabLabelSubscription) {
            this.tabLabelSubscription.unsubscribe();
        }
        this.tabLabelSubscription = merge(...this.tabs.map(tab => tab.stateChanges)).subscribe(() => this.cdr.markForCheck());
    }
    subscribeToAllTabChanges() {
        this.allTabs.changes.pipe(startWith(this.allTabs)).subscribe((tabs) => {
            this.tabs.reset(tabs.filter(tab => tab.closestTabSet === this));
            this.tabs.notifyOnChanges();
        });
    }
    canDeactivateFun(pre, next) {
        if (typeof this.onCanDeactivate === 'function') {
            const observable = wrapIntoObservable(this.onCanDeactivate(pre, next));
            return observable.pipe(first(), takeUntil(this.destroy$));
        }
        else {
            return of(true);
        }
    }
    clickNavItem(tab, index, e) {
        if (!tab.disabled) {
            // ignore onCanDeactivate
            tab.tabClick.emit();
            if (!this.isRouterLinkClickEvent(index, e)) {
                this.setSelectedIndex(index);
            }
        }
    }
    isRouterLinkClickEvent(index, event) {
        const target = event.target;
        if (this.linkRouter) {
            return !!this.tabs.toArray()[index]?.linkDirective?.elementRef.nativeElement.contains(target);
        }
        else {
            return false;
        }
    }
    contextmenuNavItem(tab, e) {
        if (!tab.disabled) {
            // ignore onCanDeactivate
            tab.tabContextmenu.emit(e);
        }
    }
    setSelectedIndex(index) {
        this.canDeactivateSubscription.unsubscribe();
        this.canDeactivateSubscription = this.canDeactivateFun(this._selectedIndex, index).subscribe(can => {
            if (can) {
                this.selectedIndex = index;
                this.tabNavBarRef.focusIndex = index;
                this.cdr.markForCheck();
            }
        });
    }
    getTabIndex(tab, index) {
        if (tab.disabled) {
            return null;
        }
        return this._selectedIndex === index ? 0 : -1;
    }
    getTabContentId(i) {
        return `tds-tabs-${this.tabSetId}-tab-${i}`;
    }
    setUpRouter() {
        if (this.linkRouter) {
            if (!this.router) {
                throw new Error(`[TDS] you should import 'RouterModule' if you want to use 'linkRouter'!`);
            }
            this.router.events
                .pipe(takeUntil(this.destroy$), filter(e => e instanceof NavigationEnd), startWith(true), delay(0))
                .subscribe(() => {
                this.updateRouterActive();
                this.cdr.markForCheck();
            });
        }
    }
    updateRouterActive() {
        if (this.router.navigated) {
            const index = this.findShouldActiveTabIndex();
            if (index !== this._selectedIndex) {
                this.setSelectedIndex(index);
            }
            this.hideAll = index === -1;
        }
    }
    findShouldActiveTabIndex() {
        const tabs = this.tabs.toArray();
        const isActive = this.isLinkActive(this.router);
        return tabs.findIndex(tab => {
            const c = tab.linkDirective;
            return c ? isActive(c.routerLink) || isActive(c.routerLinkWithHref) : false;
        });
    }
    isLinkActive(router) {
        return (link) => (link ? router.isActive(link.urlTree, this.linkExact) : false);
    }
    getTabContentMarginValue() {
        return -(this.selectedIndex || 0) * 100;
    }
    getTabContentMarginLeft() {
        if (this.tabPaneAnimated) {
            if (this.dir !== 'rtl') {
                return this.getTabContentMarginValue() + '%';
            }
        }
        return '';
    }
    getTabContentMarginRight() {
        if (this.tabPaneAnimated) {
            if (this.dir === 'rtl') {
                return this.getTabContentMarginValue() + '%';
            }
        }
        return '';
    }
}
TDSTabSetComponent.ɵfac = function TDSTabSetComponent_Factory(t) { return new (t || TDSTabSetComponent)(i0.ɵɵdirectiveInject(i1.TDSConfigService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i2.Directionality, 8), i0.ɵɵdirectiveInject(i3.Router, 8)); };
TDSTabSetComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: TDSTabSetComponent, selectors: [["tds-tabset"]], contentQueries: function TDSTabSetComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        i0.ɵɵcontentQuery(dirIndex, TDSTabComponent, 5);
    } if (rf & 2) {
        let _t;
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.allTabs = _t);
    } }, viewQuery: function TDSTabSetComponent_Query(rf, ctx) { if (rf & 1) {
        i0.ɵɵviewQuery(TDSTabNavBarComponent, 5);
    } if (rf & 2) {
        let _t;
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.tabNavBarRef = _t.first);
    } }, hostAttrs: [1, "tds-tabs", "box-border", "m-0", "p-0", "flex", "overflow-hidden", "w-full"], hostVars: 32, hostBindings: function TDSTabSetComponent_HostBindings(rf, ctx) { if (rf & 2) {
        i0.ɵɵclassProp("tds-tabs-card", ctx.type === "card" || ctx.type === "editable-card")("tds-tabs-editable", ctx.type === "editable-card")("tds-tabs-editable-card", ctx.type === "editable-card")("tds-tabs-centered", ctx.centered)("tds-tabs-rtl", ctx.dir === "rtl")("tds-tabs-top", ctx.tabPosition === "top")("flex-col", ctx.tabPosition === "top" || ctx.tabPosition === "bottom")("tds-tabs-bottom", ctx.tabPosition === "bottom")("tds-tabs-left", ctx.tabPosition === "left")("tds-tabs-right", ctx.tabPosition === "right")("flex-row-reverse", ctx.tabPosition === "right")("flex-col-reverse", ctx.tabPosition === "bottom")("py-4", ctx.tabPosition === "right")("tds-tabs-default", ctx.size === "default")("tds-tabs-small", ctx.size === "small")("tds-tabs-large", ctx.size === "large");
    } }, inputs: { selectedIndex: "selectedIndex", tabPosition: "tabPosition", tabBarExtraContent: "tabBarExtraContent", onCanDeactivate: "onCanDeactivate", addIcon: "addIcon", tabBarStyle: "tabBarStyle", type: "type", size: "size", animated: "animated", tabBarGutter: "tabBarGutter", hideAdd: "hideAdd", centered: "centered", hideAll: "hideAll", linkRouter: "linkRouter", linkExact: "linkExact", hidenNextBtn: "hidenNextBtn", clsTab: "clsTab" }, outputs: { selectChange: "selectChange", selectedIndexChange: "selectedIndexChange", tabListScroll: "tabListScroll", close: "close", add: "add" }, exportAs: ["tdsTabset"], features: [i0.ɵɵProvidersFeature([
            {
                provide: TDS_TAB_SET,
                useExisting: TDSTabSetComponent
            }
        ])], decls: 4, vars: 16, consts: [[3, "ngStyle", "selectedIndex", "inkBarAnimated", "addable", "addIcon", "hideBar", "position", "tabPosition", "extraTemplate", "class", "hidenNextBtn", "tabScroll", "selectFocusedIndex", "addClicked", 4, "ngIf"], [1, "tds-tabs-content-holder", "h-full", "w-full"], [1, "tds-tabs-content", "h-full", "w-full"], ["tds-tab-body", "", 3, "active", "content", "forceRender", "tabPaneAnimated", "ngClass", 4, "ngFor", "ngForOf"], [3, "ngStyle", "selectedIndex", "inkBarAnimated", "addable", "addIcon", "hideBar", "position", "tabPosition", "extraTemplate", "hidenNextBtn", "tabScroll", "selectFocusedIndex", "addClicked"], ["class", "tds-tabs-tab relative inline-block outline-none  text-body-2 ", 3, "margin-right", "margin-bottom", "tds-tabs-tab-disabled", "ngClass", "click", "contextmenu", 4, "ngFor", "ngForOf"], [1, "tds-tabs-tab", "relative", "inline-block", "outline-none", "text-body-2", 3, "ngClass", "click", "contextmenu"], ["role", "tab", "tdsTabNavItem", "", "cdkMonitorElementFocus", "", 1, "tds-tabs-tab-btn", "focus:outline-none", "w-full", 3, "disabled", "tab", "active", "ngClass"], [4, "tdsStringTemplateOutlet", "tdsStringTemplateOutletContext"], [1, "px-2", "py-4", "font-semibold", "text-body-2", 3, "ngClass"], ["tds-tab-close-button", "", 3, "closeIcon", "click", 4, "ngIf"], ["tds-tab-close-button", "", 3, "closeIcon", "click"], ["tds-tab-body", "", 3, "active", "content", "forceRender", "tabPaneAnimated", "ngClass"]], template: function TDSTabSetComponent_Template(rf, ctx) { if (rf & 1) {
        i0.ɵɵtemplate(0, TDSTabSetComponent_tds_tabs_nav_0_Template, 2, 13, "tds-tabs-nav", 0);
        i0.ɵɵelementStart(1, "div", 1)(2, "div", 2);
        i0.ɵɵtemplate(3, TDSTabSetComponent_div_3_Template, 1, 5, "div", 3);
        i0.ɵɵelementEnd()();
    } if (rf & 2) {
        i0.ɵɵproperty("ngIf", ctx.tabs.length);
        i0.ɵɵadvance(2);
        i0.ɵɵstyleProp("margin-left", ctx.getTabContentMarginLeft())("margin-right", ctx.getTabContentMarginRight());
        i0.ɵɵclassProp("tds-tabs-content-top", ctx.tabPosition === "top")("tds-tabs-content-bottom", ctx.tabPosition === "bottom")("tds-tabs-content-left", ctx.tabPosition === "left")("tds-tabs-content-right", ctx.tabPosition === "right")("tds-tabs-content-animated", ctx.tabPaneAnimated);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngForOf", ctx.tabs);
    } }, directives: [i4.NgIf, i5.TDSTabNavBarComponent, i4.NgStyle, i4.NgForOf, i4.NgClass, i6.TDSTabNavItemDirective, i7.CdkMonitorFocus, i8.TDSStringTemplateOutletDirective, i9.TDSTabCloseButtonComponent, i10.TDSTabBodyComponent], encapsulation: 2 });
__decorate([
    WithConfig()
], TDSTabSetComponent.prototype, "type", void 0);
__decorate([
    WithConfig()
], TDSTabSetComponent.prototype, "size", void 0);
__decorate([
    WithConfig()
], TDSTabSetComponent.prototype, "animated", void 0);
__decorate([
    WithConfig()
], TDSTabSetComponent.prototype, "tabBarGutter", void 0);
__decorate([
    InputBoolean()
], TDSTabSetComponent.prototype, "hideAdd", void 0);
__decorate([
    InputBoolean()
], TDSTabSetComponent.prototype, "centered", void 0);
__decorate([
    InputBoolean()
], TDSTabSetComponent.prototype, "hideAll", void 0);
__decorate([
    InputBoolean()
], TDSTabSetComponent.prototype, "linkRouter", void 0);
__decorate([
    InputBoolean()
], TDSTabSetComponent.prototype, "linkExact", void 0);
__decorate([
    InputBoolean()
], TDSTabSetComponent.prototype, "hidenNextBtn", void 0);
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(TDSTabSetComponent, [{
        type: Component,
        args: [{ selector: 'tds-tabset', exportAs: 'tdsTabset', preserveWhitespaces: false, encapsulation: ViewEncapsulation.None, changeDetection: ChangeDetectionStrategy.Default, providers: [
                    {
                        provide: TDS_TAB_SET,
                        useExisting: TDSTabSetComponent
                    }
                ], host: {
                    class: 'tds-tabs box-border m-0 p-0 flex overflow-hidden w-full ',
                    '[class.tds-tabs-card]': `type === 'card' || type === 'editable-card'`,
                    '[class.tds-tabs-editable]': `type === 'editable-card'`,
                    '[class.tds-tabs-editable-card]': `type === 'editable-card'`,
                    '[class.tds-tabs-centered]': `centered`,
                    '[class.tds-tabs-rtl]': `dir === 'rtl'`,
                    '[class.tds-tabs-top]': `tabPosition === 'top'`,
                    '[class.flex-col]': `tabPosition === 'top' || tabPosition === 'bottom'`,
                    '[class.tds-tabs-bottom]': `tabPosition === 'bottom'`,
                    '[class.tds-tabs-left]': `tabPosition === 'left'`,
                    '[class.tds-tabs-right]': `tabPosition === 'right'`,
                    '[class.flex-row-reverse]': `tabPosition === 'right'`,
                    '[class.flex-col-reverse]': `tabPosition === 'bottom'`,
                    '[class.py-4]': `tabPosition === 'right'`,
                    '[class.tds-tabs-default]': `size === 'default'`,
                    '[class.tds-tabs-small]': `size === 'small'`,
                    '[class.tds-tabs-large]': `size === 'large'`
                }, template: "<tds-tabs-nav *ngIf=\"tabs.length\" [ngStyle]=\"tabBarStyle\" [selectedIndex]=\"selectedIndex || 0\"\r\n    [inkBarAnimated]=\"inkBarAnimated\" [addable]=\"addable\" [addIcon]=\"addIcon\" [hideBar]=\"hideAll\" [position]=\"position\"\r\n    [tabPosition]=\"tabPosition\" [extraTemplate]=\"tabBarExtraContent\" (tabScroll)=\"tabListScroll.emit($event)\"\r\n    (selectFocusedIndex)=\"setSelectedIndex($event)\" (addClicked)=\"_onAdd()\" [class]=\"clsTab\" [hidenNextBtn]=\"hidenNextBtn\">\r\n    <div class=\"tds-tabs-tab relative inline-block outline-none  text-body-2 \"\r\n        [style.margin-right.px]=\"position === 'horizontal' ? tabBarGutter : null\"\r\n        [style.margin-bottom.px]=\"position === 'vertical' ? tabBarGutter : null\"\r\n        [class.tds-tabs-tab-disabled]=\"tab.disabled\" (click)=\"clickNavItem(tab, i, $event)\" [ngClass]=\"clsTab\"\r\n        (contextmenu)=\"contextmenuNavItem(tab, $event)\" *ngFor=\"let tab of tabs; let i = index\">\r\n        <div role=\"tab\" [attr.tabIndex]=\"getTabIndex(tab, i)\" [attr.aria-disabled]=\"tab.disabled\"\r\n            [attr.aria-selected]=\"selectedIndex === i && !hideAll\" [attr.aria-controls]=\"getTabContentId(i)\"\r\n            [disabled]=\"tab.disabled\" [tab]=\"tab\" [active]=\"selectedIndex === i\"\r\n            class=\"tds-tabs-tab-btn focus:outline-none w-full\" tdsTabNavItem cdkMonitorElementFocus [ngClass]=\"{\r\n                'text-neutral-1-900 dark:text-d-neutral-1-900':!tab.disabled && selectedIndex === i,\r\n                    'text-neutral-1-400 dark:text-d-neutral-1-400 hover:text-neutral-1-900 dark:hover:text-d-neutral-1-900':!tab.disabled && selectedIndex !== i,\r\n                    'text-neutral-1-300 dark:text-d-neutral-1-300':tab.disabled\r\n            }\">\r\n            <ng-container *tdsStringTemplateOutlet=\"tab.label; context: { visible: true , active: selectedIndex === i}\">\r\n                <div class=\"px-2 py-4 font-semibold text-body-2\" [ngClass]=\"{\r\n                    'border-b-3':position === 'horizontal',\r\n                    'border-l-3': tabPosition === 'right' || tabPosition === 'left',\r\n                    'tds-tabs-tab-active  border-primary-1':selectedIndex === i,\r\n                    'border-transparent':selectedIndex !== i,\r\n                    'cursor-pointer hover:border-primary-1 ':!tab.disabled\r\n                    \r\n                }\">\r\n                    {{ tab.label }}\r\n                </div>\r\n                <button tds-tab-close-button *ngIf=\"tab.closable && closable && !tab.disabled\"\r\n                    [closeIcon]=\"tab.closeIcon\" (click)=\"_onClose(i, $event)\"></button>\r\n            </ng-container>\r\n\r\n\r\n        </div>\r\n    </div>\r\n</tds-tabs-nav>\r\n<div class=\"tds-tabs-content-holder h-full w-full\">\r\n    <div class=\"tds-tabs-content h-full w-full\" [class.tds-tabs-content-top]=\"tabPosition === 'top'\"\r\n        [class.tds-tabs-content-bottom]=\"tabPosition === 'bottom'\"\r\n        [class.tds-tabs-content-left]=\"tabPosition === 'left'\" [class.tds-tabs-content-right]=\"tabPosition === 'right'\"\r\n        [class.tds-tabs-content-animated]=\"tabPaneAnimated\" [style.margin-left]=\"getTabContentMarginLeft()\"\r\n        [style.margin-right]=\"getTabContentMarginRight()\">\r\n        <div tds-tab-body *ngFor=\"let tab of tabs; let i = index\" [active]=\"selectedIndex == i && !hideAll\"\r\n            [content]=\"tab.content\" [forceRender]=\"tab.forceRender\" [tabPaneAnimated]=\"tabPaneAnimated\"\r\n            [ngClass]=\"tab.clsContent\"></div>\r\n    </div>\r\n</div>" }]
    }], function () { return [{ type: i1.TDSConfigService }, { type: i0.ChangeDetectorRef }, { type: i2.Directionality, decorators: [{
                type: Optional
            }] }, { type: i3.Router, decorators: [{
                type: Optional
            }] }]; }, { selectedIndex: [{
            type: Input
        }], tabPosition: [{
            type: Input
        }], tabBarExtraContent: [{
            type: Input
        }], onCanDeactivate: [{
            type: Input
        }], addIcon: [{
            type: Input
        }], tabBarStyle: [{
            type: Input
        }], type: [{
            type: Input
        }], size: [{
            type: Input
        }], animated: [{
            type: Input
        }], tabBarGutter: [{
            type: Input
        }], hideAdd: [{
            type: Input
        }], centered: [{
            type: Input
        }], hideAll: [{
            type: Input
        }], linkRouter: [{
            type: Input
        }], linkExact: [{
            type: Input
        }], hidenNextBtn: [{
            type: Input
        }], clsTab: [{
            type: Input
        }], selectChange: [{
            type: Output
        }], selectedIndexChange: [{
            type: Output
        }], tabListScroll: [{
            type: Output
        }], close: [{
            type: Output
        }], add: [{
            type: Output
        }], allTabs: [{
            type: ContentChildren,
            args: [TDSTabComponent, { descendants: true }]
        }], tabNavBarRef: [{
            type: ViewChild,
            args: [TDSTabNavBarComponent, { static: false }]
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFic2V0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL3Rkcy11aS90YWJzL3RhYnNldC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi9wcm9qZWN0cy90ZHMtdWkvdGFicy90YWJzZXQuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUVBLE9BQU8sRUFBZ0Isb0JBQW9CLEVBQWUsTUFBTSx1QkFBdUIsQ0FBQztBQUl4RixPQUFPLEVBR0wsdUJBQXVCLEVBRXZCLFNBQVMsRUFDVCxlQUFlLEVBQ2YsWUFBWSxFQUNaLEtBQUssRUFHTCxRQUFRLEVBQ1IsTUFBTSxFQUNOLFNBQVMsRUFFVCxTQUFTLEVBQ1QsaUJBQWlCLEVBQ2xCLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxhQUFhLEVBQTBDLE1BQU0saUJBQWlCLENBQUM7QUFFeEYsT0FBTyxFQUFFLEtBQUssRUFBYyxFQUFFLEVBQUUsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUNwRSxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzVFLE9BQU8sRUFFTCxpQkFBaUIsRUFNbEIsTUFBTSxjQUFjLENBQUM7QUFDdEIsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDaEUsT0FBTyxFQUFFLGVBQWUsRUFBRSxXQUFXLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUMvRCxPQUFPLEVBQUUsWUFBWSxFQUFjLE1BQU0sdUJBQXVCLENBQUM7QUFDakUsT0FBTyxFQUFvQixVQUFVLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUNsRSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7SUNidEMsa0NBQzhEO0lBQTlCLHFQQUFTLDZC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WUFDYSxZQUFZO2tCQUE5QixNQUFNO1lBQ1ksbUJBQW1CO2tCQUFyQyxNQUFNO1lBQ1ksYUFBYTtrQkFBL0IsTUFBTTtZQUNZLEtBQUs7a0JBQXZCLE1BQU07WUFDWSxHQUFHO2tCQUFyQixNQUFNO1lBK0JrRCxPQUFPO2tCQUEvRCxlQUFlO21CQUFDLGVBQWUsRUFBRSxFQUFFLFdBQVcsRUFBRSxJQUFJLEVBQUU7WUFDRixZQUFZO2tCQUFoRSxTQUFTO21CQUFDLHFCQUFxQixFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5cclxuaW1wb3J0IHsgQm9vbGVhbklucHV0LCBjb2VyY2VOdW1iZXJQcm9wZXJ0eSwgTnVtYmVySW5wdXQgfSBmcm9tICdAYW5ndWxhci9jZGsvY29lcmNpb24nO1xyXG4vKiogZ2V0IHNvbWUgY29kZSBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL21hdGVyaWFsMiAqL1xyXG5cclxuaW1wb3J0IHsgRGlyZWN0aW9uLCBEaXJlY3Rpb25hbGl0eSB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9iaWRpJztcclxuaW1wb3J0IHtcclxuICBBZnRlckNvbnRlbnRDaGVja2VkLFxyXG4gIEFmdGVyQ29udGVudEluaXQsXHJcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXHJcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgQ29tcG9uZW50LFxyXG4gIENvbnRlbnRDaGlsZHJlbixcclxuICBFdmVudEVtaXR0ZXIsXHJcbiAgSW5wdXQsXHJcbiAgT25EZXN0cm95LFxyXG4gIE9uSW5pdCxcclxuICBPcHRpb25hbCxcclxuICBPdXRwdXQsXHJcbiAgUXVlcnlMaXN0LFxyXG4gIFRlbXBsYXRlUmVmLFxyXG4gIFZpZXdDaGlsZCxcclxuICBWaWV3RW5jYXBzdWxhdGlvblxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBOYXZpZ2F0aW9uRW5kLCBSb3V0ZXIsIFJvdXRlckxpbmssIFJvdXRlckxpbmtXaXRoSHJlZiB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XHJcblxyXG5pbXBvcnQgeyBtZXJnZSwgT2JzZXJ2YWJsZSwgb2YsIFN1YmplY3QsIFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBkZWxheSwgZmlsdGVyLCBmaXJzdCwgc3RhcnRXaXRoLCB0YWtlVW50aWwgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcbmltcG9ydCB7XHJcbiAgVERTQW5pbWF0ZWRJbnRlcmZhY2UsXHJcbiAgVERTVGFiQ2hhbmdlRXZlbnQsXHJcbiAgVERTVGFiUG9zaXRpb24sXHJcbiAgVERTVGFiUG9zaXRpb25Nb2RlLFxyXG4gIFREU1RhYnNDYW5EZWFjdGl2YXRlRm4sXHJcbiAgVERTVGFiU2Nyb2xsRXZlbnQsXHJcbiAgVERTVGFiVHlwZVxyXG59IGZyb20gJy4vaW50ZXJmYWNlcyc7XHJcbmltcG9ydCB7IFREU1RhYk5hdkJhckNvbXBvbmVudCB9IGZyb20gJy4vdGFiLW5hdi1iYXIuY29tcG9uZW50JztcclxuaW1wb3J0IHsgVERTVGFiQ29tcG9uZW50LCBURFNfVEFCX1NFVCB9IGZyb20gJy4vdGFiLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IElucHV0Qm9vbGVhbiwgVERTU2FmZUFueSB9IGZyb20gJ3Rkcy11aS9zaGFyZWQvdXRpbGl0eSc7XHJcbmltcG9ydCB7IFREU0NvbmZpZ1NlcnZpY2UsIFdpdGhDb25maWcgfSBmcm9tICd0ZHMtdWkvY29yZS9jb25maWcnO1xyXG5pbXBvcnQgeyB3cmFwSW50b09ic2VydmFibGUgfSBmcm9tICd0ZHMtdWkvY29yZS91dGlsJztcclxuXHJcbmNvbnN0IFREU19DT05GSUdfTU9EVUxFX05BTUU9ICAndGFicyc7XHJcblxyXG5sZXQgbmV4dElkID0gMDtcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAndGRzLXRhYnNldCcsXHJcbiAgZXhwb3J0QXM6ICd0ZHNUYWJzZXQnLFxyXG4gIHByZXNlcnZlV2hpdGVzcGFjZXM6IGZhbHNlLFxyXG4gIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXHJcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5EZWZhdWx0LFxyXG4gIHByb3ZpZGVyczogW1xyXG4gICAge1xyXG4gICAgICBwcm92aWRlOiBURFNfVEFCX1NFVCxcclxuICAgICAgdXNlRXhpc3Rpbmc6IFREU1RhYlNldENvbXBvbmVudFxyXG4gICAgfVxyXG4gIF0sXHJcbiAgdGVtcGxhdGVVcmw6Jy4vdGFic2V0LmNvbXBvbmVudC5odG1sJyxcclxuICAvLyB0ZW1wbGF0ZTogYFxyXG4gIC8vICAgPHRkcy10YWJzLW5hdlxyXG4gIC8vICAgICAqbmdJZj1cInRhYnMubGVuZ3RoXCJcclxuICAvLyAgICAgW25nU3R5bGVdPVwidGFiQmFyU3R5bGVcIlxyXG4gIC8vICAgICBbX3NlbGVjdGVkSW5kZXhdPVwic2VsZWN0ZWRJbmRleCB8fCAwXCJcclxuICAvLyAgICAgW2lua0JhckFuaW1hdGVkXT1cImlua0JhckFuaW1hdGVkXCJcclxuICAvLyAgICAgW2FkZGFibGVdPVwiYWRkYWJsZVwiXHJcbiAgLy8gICAgIFthZGRJY29uXT1cImFkZEljb25cIlxyXG4gIC8vICAgICBbaGlkZUJhcl09XCJoaWRlQWxsXCJcclxuICAvLyAgICAgW3Bvc2l0aW9uXT1cInBvc2l0aW9uXCJcclxuICAvLyAgICAgW3RhYlBvc2l0aW9uXT1cInRhYlBvc2l0aW9uXCJcclxuICAvLyAgICAgW2V4dHJhVGVtcGxhdGVdPVwidGFiQmFyRXh0cmFDb250ZW50XCJcclxuICAvLyAgICAgKHRhYlNjcm9sbCk9XCJ0YWJMaXN0U2Nyb2xsLmVtaXQoJGV2ZW50KVwiXHJcbiAgLy8gICAgIChzZWxlY3RGb2N1c2VkSW5kZXgpPVwic2V0U2VsZWN0ZWRJbmRleCgkZXZlbnQpXCJcclxuICAvLyAgICAgKGFkZENsaWNrZWQpPVwiX29uQWRkKClcIlxyXG4gIC8vICAgICBjbGFzcz1cInB4LTRcIlxyXG4gICAgICBcclxuICAvLyAgID5cclxuICAvLyAgICAgPGRpdlxyXG4gIC8vICAgICAgIGNsYXNzPVwidGRzLXRhYnMtdGFiIHJlbGF0aXZlICBpdGVtcy1jZW50ZXIgaW5saW5lLWZsZXggb3V0bGluZS1ub25lIGN1cnNvci1wb2ludGVyIHAtNCB0ZXh0LWJvZHktMlwiXHJcbiAgLy8gICAgICAgW3N0eWxlLm1hcmdpbi1yaWdodC5weF09XCJwb3NpdGlvbiA9PT0gJ2hvcml6b250YWwnID8gdGFiQmFyR3V0dGVyIDogbnVsbFwiXHJcbiAgLy8gICAgICAgW3N0eWxlLm1hcmdpbi1ib3R0b20ucHhdPVwicG9zaXRpb24gPT09ICd2ZXJ0aWNhbCcgPyB0YWJCYXJHdXR0ZXIgOiBudWxsXCJcclxuICAvLyAgICAgICBbY2xhc3MuYm9yZGVyLWItMl09XCJwb3NpdGlvbiA9PT0gJ2hvcml6b250YWwnXCJcclxuICAvLyAgICAgICBbY2xhc3MuYm9yZGVyLXItMl09XCJ0YWJQb3NpdGlvbiA9PT0gJ2xlZnQnXCJcclxuICAvLyAgICAgICBbY2xhc3MuYm9yZGVyLWwtMl09XCJ0YWJQb3NpdGlvbiA9PT0gJ3JpZ2h0J1wiICAgICAgICBcclxuICAvLyAgICAgICBbY2xhc3MudGRzLXRhYnMtdGFiLWFjdGl2ZV09XCJzZWxlY3RlZEluZGV4ID09PSBpXCJcclxuICAvLyAgICAgICBbY2xhc3MudGV4dC1uZXV0cmFsLTEtOTAwXT1cInNlbGVjdGVkSW5kZXggPT09IGlcIlxyXG4gIC8vICAgICAgIFtjbGFzcy50ZXh0LW5ldXRyYWwtMS02MDBdPVwic2VsZWN0ZWRJbmRleCAhPT0gaVwiXHJcbiAgLy8gICAgICAgW2NsYXNzLmJvcmRlci1wcmltYXJ5LTFdPVwic2VsZWN0ZWRJbmRleCA9PT0gaVwiXHJcbiAgLy8gICAgICAgW2NsYXNzLmJvcmRlci10cmFuc3BhcmVudF09XCJzZWxlY3RlZEluZGV4ICE9PSBpXCJcclxuICAvLyAgICAgICBbY2xhc3MuZm9udC1zZW1pYm9sZF09XCJzZWxlY3RlZEluZGV4ID09PSBpXCJcclxuICAvLyAgICAgICBbY2xhc3MuZm9udC1yZWd1bGFyXT1cInNlbGVjdGVkSW5kZXggIT09IGlcIlxyXG4gIC8vICAgICAgIFtjbGFzcy50ZHMtdGFicy10YWItZGlzYWJsZWRdPVwidGFiLmRpc2FibGVkXCJcclxuICAvLyAgICAgICAoY2xpY2spPVwiY2xpY2tOYXZJdGVtKHRhYiwgaSwgJGV2ZW50KVwiXHJcbiAgLy8gICAgICAgKGNvbnRleHRtZW51KT1cImNvbnRleHRtZW51TmF2SXRlbSh0YWIsICRldmVudClcIlxyXG4gIC8vICAgICAgICpuZ0Zvcj1cImxldCB0YWIgb2YgdGFiczsgbGV0IGkgPSBpbmRleFwiXHJcbiAgLy8gICAgID5cclxuICAvLyAgICAgICA8ZGl2XHJcbiAgLy8gICAgICAgICByb2xlPVwidGFiXCJcclxuICAvLyAgICAgICAgIFthdHRyLnRhYkluZGV4XT1cImdldFRhYkluZGV4KHRhYiwgaSlcIlxyXG4gIC8vICAgICAgICAgW2F0dHIuYXJpYS1kaXNhYmxlZF09XCJ0YWIuZGlzYWJsZWRcIlxyXG4gIC8vICAgICAgICAgW2F0dHIuYXJpYS1zZWxlY3RlZF09XCJzZWxlY3RlZEluZGV4ID09PSBpICYmICFoaWRlQWxsXCJcclxuICAvLyAgICAgICAgIFthdHRyLmFyaWEtY29udHJvbHNdPVwiZ2V0VGFiQ29udGVudElkKGkpXCJcclxuICAvLyAgICAgICAgIFtkaXNhYmxlZF09XCJ0YWIuZGlzYWJsZWRcIlxyXG4gIC8vICAgICAgICAgW3RhYl09XCJ0YWJcIlxyXG4gIC8vICAgICAgICAgW2FjdGl2ZV09XCJzZWxlY3RlZEluZGV4ID09PSBpXCJcclxuICAvLyAgICAgICAgIGNsYXNzPVwidGRzLXRhYnMtdGFiLWJ0biBmb2N1czpvdXRsaW5lLW5vbmVcIlxyXG4gIC8vICAgICAgICAgdGRzVGFiTmF2SXRlbVxyXG4gIC8vICAgICAgICAgY2RrTW9uaXRvckVsZW1lbnRGb2N1c1xyXG4gIC8vICAgICAgID5cclxuICAgICAgICBcclxuICAvLyAgICAgICAgIDxuZy1jb250YWluZXIgKnRkc1N0cmluZ1RlbXBsYXRlT3V0bGV0PVwidGFiLmxhYmVsOyBjb250ZXh0OiB7IHZpc2libGU6IHRydWUgLCBhY3RpdmU6IHNlbGVjdGVkSW5kZXggPT09IGl9XCI+e3sgdGFiLmxhYmVsIH19PC9uZy1jb250YWluZXI+XHJcbiAgLy8gICAgICAgICA8YnV0dG9uXHJcbiAgLy8gICAgICAgICAgIHRkcy10YWItY2xvc2UtYnV0dG9uXHJcbiAgLy8gICAgICAgICAgICpuZ0lmPVwidGFiLmNsb3NhYmxlICYmIGNsb3NhYmxlICYmICF0YWIuZGlzYWJsZWRcIlxyXG4gIC8vICAgICAgICAgICBbY2xvc2VJY29uXT1cInRhYi5jbG9zZUljb25cIlxyXG4gIC8vICAgICAgICAgICAoY2xpY2spPVwiX29uQ2xvc2UoaSwgJGV2ZW50KVwiXHJcbiAgLy8gICAgICAgICA+PC9idXR0b24+XHJcbiAgLy8gICAgICAgPC9kaXY+XHJcbiAgLy8gICAgIDwvZGl2PlxyXG4gIC8vICAgPC90ZHMtdGFicy1uYXY+XHJcbiAgLy8gICA8ZGl2IGNsYXNzPVwidGRzLXRhYnMtY29udGVudC1ob2xkZXIgcC00IHctZnVsbFwiPlxyXG4gIC8vICAgICA8ZGl2XHJcbiAgLy8gICAgICAgY2xhc3M9XCJ0ZHMtdGFicy1jb250ZW50IHctZnVsbFwiXHJcbiAgLy8gICAgICAgW2NsYXNzLnRkcy10YWJzLWNvbnRlbnQtdG9wXT1cInRhYlBvc2l0aW9uID09PSAndG9wJ1wiXHJcbiAgLy8gICAgICAgW2NsYXNzLnRkcy10YWJzLWNvbnRlbnQtYm90dG9tXT1cInRhYlBvc2l0aW9uID09PSAnYm90dG9tJ1wiXHJcbiAgLy8gICAgICAgW2NsYXNzLnRkcy10YWJzLWNvbnRlbnQtbGVmdF09XCJ0YWJQb3NpdGlvbiA9PT0gJ2xlZnQnXCJcclxuICAvLyAgICAgICBbY2xhc3MudGRzLXRhYnMtY29udGVudC1yaWdodF09XCJ0YWJQb3NpdGlvbiA9PT0gJ3JpZ2h0J1wiXHJcbiAgLy8gICAgICAgW2NsYXNzLnRkcy10YWJzLWNvbnRlbnQtYW5pbWF0ZWRdPVwidGFiUGFuZUFuaW1hdGVkXCJcclxuICAvLyAgICAgICBbc3R5bGUubWFyZ2luLWxlZnRdPVwiZ2V0VGFiQ29udGVudE1hcmdpbkxlZnQoKVwiXHJcbiAgLy8gICAgICAgW3N0eWxlLm1hcmdpbi1yaWdodF09XCJnZXRUYWJDb250ZW50TWFyZ2luUmlnaHQoKVwiXHJcbiAgLy8gICAgID5cclxuICAvLyAgICAgICA8ZGl2XHJcbiAgLy8gICAgICAgICB0ZHMtdGFiLWJvZHlcclxuICAvLyAgICAgICAgICpuZ0Zvcj1cImxldCB0YWIgb2YgdGFiczsgbGV0IGkgPSBpbmRleFwiXHJcbiAgLy8gICAgICAgICBbYWN0aXZlXT1cInNlbGVjdGVkSW5kZXggPT0gaSAmJiAhaGlkZUFsbFwiXHJcbiAgLy8gICAgICAgICBbY29udGVudF09XCJ0YWIuY29udGVudFwiXHJcbiAgLy8gICAgICAgICBbZm9yY2VSZW5kZXJdPVwidGFiLmZvcmNlUmVuZGVyXCJcclxuICAvLyAgICAgICAgIFt0YWJQYW5lQW5pbWF0ZWRdPVwidGFiUGFuZUFuaW1hdGVkXCJcclxuICAvLyAgICAgICA+PC9kaXY+XHJcbiAgLy8gICAgIDwvZGl2PlxyXG4gIC8vICAgPC9kaXY+XHJcbiAgLy8gYCxcclxuICBob3N0OiB7XHJcbiAgICBjbGFzczogJ3Rkcy10YWJzIGJveC1ib3JkZXIgbS0wIHAtMCBmbGV4IG92ZXJmbG93LWhpZGRlbiB3LWZ1bGwgJyxcclxuICAgICdbY2xhc3MudGRzLXRhYnMtY2FyZF0nOiBgdHlwZSA9PT0gJ2NhcmQnIHx8IHR5cGUgPT09ICdlZGl0YWJsZS1jYXJkJ2AsXHJcbiAgICAnW2NsYXNzLnRkcy10YWJzLWVkaXRhYmxlXSc6IGB0eXBlID09PSAnZWRpdGFibGUtY2FyZCdgLFxyXG4gICAgJ1tjbGFzcy50ZHMtdGFicy1lZGl0YWJsZS1jYXJkXSc6IGB0eXBlID09PSAnZWRpdGFibGUtY2FyZCdgLFxyXG4gICAgJ1tjbGFzcy50ZHMtdGFicy1jZW50ZXJlZF0nOiBgY2VudGVyZWRgLFxyXG4gICAgJ1tjbGFzcy50ZHMtdGFicy1ydGxdJzogYGRpciA9PT0gJ3J0bCdgLFxyXG4gICAgJ1tjbGFzcy50ZHMtdGFicy10b3BdJzogYHRhYlBvc2l0aW9uID09PSAndG9wJ2AsXHJcbiAgICAnW2NsYXNzLmZsZXgtY29sXSc6IGB0YWJQb3NpdGlvbiA9PT0gJ3RvcCcgfHwgdGFiUG9zaXRpb24gPT09ICdib3R0b20nYCxcclxuICAgICdbY2xhc3MudGRzLXRhYnMtYm90dG9tXSc6IGB0YWJQb3NpdGlvbiA9PT0gJ2JvdHRvbSdgLFxyXG4gICAgJ1tjbGFzcy50ZHMtdGFicy1sZWZ0XSc6IGB0YWJQb3NpdGlvbiA9PT0gJ2xlZnQnYCxcclxuICAgICdbY2xhc3MudGRzLXRhYnMtcmlnaHRdJzogYHRhYlBvc2l0aW9uID09PSAncmlnaHQnYCxcclxuICAgICdbY2xhc3MuZmxleC1yb3ctcmV2ZXJzZV0nOiBgdGFiUG9zaXRpb24gPT09ICdyaWdodCdgLFxyXG4gICAgJ1tjbGFzcy5mbGV4LWNvbC1yZXZlcnNlXSc6IGB0YWJQb3NpdGlvbiA9PT0gJ2JvdHRvbSdgLFxyXG4gICAgJ1tjbGFzcy5weS00XSc6IGB0YWJQb3NpdGlvbiA9PT0gJ3JpZ2h0J2AsXHJcbiAgICAnW2NsYXNzLnRkcy10YWJzLWRlZmF1bHRdJzogYHNpemUgPT09ICdkZWZhdWx0J2AsXHJcbiAgICAnW2NsYXNzLnRkcy10YWJzLXNtYWxsXSc6IGBzaXplID09PSAnc21hbGwnYCxcclxuICAgICdbY2xhc3MudGRzLXRhYnMtbGFyZ2VdJzogYHNpemUgPT09ICdsYXJnZSdgXHJcbiAgfVxyXG59KVxyXG5leHBvcnQgY2xhc3MgVERTVGFiU2V0Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlckNvbnRlbnRDaGVja2VkLCBPbkRlc3Ryb3ksIEFmdGVyQ29udGVudEluaXQge1xyXG5cclxuICBzdGF0aWMgbmdBY2NlcHRJbnB1dFR5cGVfaGlkZUFkZDogQm9vbGVhbklucHV0O1xyXG4gIHN0YXRpYyBuZ0FjY2VwdElucHV0VHlwZV9oaWRlQWxsOiBCb29sZWFuSW5wdXQ7XHJcbiAgc3RhdGljIG5nQWNjZXB0SW5wdXRUeXBlX2NlbnRlcmVkOiBCb29sZWFuSW5wdXQ7XHJcbiAgc3RhdGljIG5nQWNjZXB0SW5wdXRUeXBlX2xpbmtSb3V0ZXI6IEJvb2xlYW5JbnB1dDtcclxuICBzdGF0aWMgbmdBY2NlcHRJbnB1dFR5cGVfbGlua0V4YWN0OiBCb29sZWFuSW5wdXQ7XHJcbiAgc3RhdGljIG5nQWNjZXB0SW5wdXRUeXBlX3NlbGVjdGVkSW5kZXg6IE51bWJlcklucHV0O1xyXG5cclxuICBASW5wdXQoKVxyXG4gIGdldCBzZWxlY3RlZEluZGV4KCk6IG51bWJlciB8IG51bGwge1xyXG4gICAgcmV0dXJuIHRoaXMuX3NlbGVjdGVkSW5kZXg7XHJcbiAgfVxyXG4gIHNldCBzZWxlY3RlZEluZGV4KHZhbHVlOiBudWxsIHwgbnVtYmVyKSB7XHJcbiAgICB0aGlzLmluZGV4VG9TZWxlY3QgPSBjb2VyY2VOdW1iZXJQcm9wZXJ0eSh2YWx1ZSwgbnVsbCk7XHJcbiAgfVxyXG4gIEBJbnB1dCgpIHRhYlBvc2l0aW9uOiBURFNUYWJQb3NpdGlvbiA9ICd0b3AnO1xyXG4gIEBJbnB1dCgpIHRhYkJhckV4dHJhQ29udGVudD86IFRlbXBsYXRlUmVmPHZvaWQ+O1xyXG4gIEBJbnB1dCgpIG9uQ2FuRGVhY3RpdmF0ZTogVERTVGFic0NhbkRlYWN0aXZhdGVGbiB8IG51bGwgPSBudWxsO1xyXG4gIEBJbnB1dCgpIGFkZEljb246IHN0cmluZyB8IFRlbXBsYXRlUmVmPFREU1NhZmVBbnk+ID0gJ3BsdXMnO1xyXG4gIEBJbnB1dCgpIHRhYkJhclN0eWxlOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9IHwgbnVsbCA9IG51bGw7XHJcbiAgQElucHV0KCkgQFdpdGhDb25maWcoKSB0eXBlOiBURFNUYWJUeXBlID0gJ2xpbmUnO1xyXG4gIEBJbnB1dCgpIEBXaXRoQ29uZmlnKCkgc2l6ZSA9ICdkZWZhdWx0JztcclxuICBASW5wdXQoKSBAV2l0aENvbmZpZygpIGFuaW1hdGVkOiBURFNBbmltYXRlZEludGVyZmFjZSB8IGJvb2xlYW4gPSBmYWxzZTtcclxuICBASW5wdXQoKSBAV2l0aENvbmZpZygpIHRhYkJhckd1dHRlcj86IG51bWJlciA9IHVuZGVmaW5lZDtcclxuICBASW5wdXQoKSBASW5wdXRCb29sZWFuKCkgaGlkZUFkZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpIEBJbnB1dEJvb2xlYW4oKSBjZW50ZXJlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpIEBJbnB1dEJvb2xlYW4oKSBoaWRlQWxsID0gZmFsc2U7XHJcbiAgQElucHV0KCkgQElucHV0Qm9vbGVhbigpIGxpbmtSb3V0ZXIgPSBmYWxzZTtcclxuICBASW5wdXQoKSBASW5wdXRCb29sZWFuKCkgbGlua0V4YWN0ID0gdHJ1ZTtcclxuICBASW5wdXQoKSBASW5wdXRCb29sZWFuKCkgaGlkZW5OZXh0QnRuID0gZmFsc2U7XHJcbiAgQElucHV0KCkgY2xzVGFiIDpzdHJpbmcgPSAncHgtNCc7XHJcbiAgQE91dHB1dCgpIHJlYWRvbmx5IHNlbGVjdENoYW5nZTogRXZlbnRFbWl0dGVyPFREU1RhYkNoYW5nZUV2ZW50PiA9IG5ldyBFdmVudEVtaXR0ZXI8VERTVGFiQ2hhbmdlRXZlbnQ+KHRydWUpO1xyXG4gIEBPdXRwdXQoKSByZWFkb25seSBzZWxlY3RlZEluZGV4Q2hhbmdlOiBFdmVudEVtaXR0ZXI8bnVtYmVyPiA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpO1xyXG4gIEBPdXRwdXQoKSByZWFkb25seSB0YWJMaXN0U2Nyb2xsID0gbmV3IEV2ZW50RW1pdHRlcjxURFNUYWJTY3JvbGxFdmVudD4oKTtcclxuICBAT3V0cHV0KCkgcmVhZG9ubHkgY2xvc2UgPSBuZXcgRXZlbnRFbWl0dGVyPHsgaW5kZXg6IG51bWJlciB9PigpO1xyXG4gIEBPdXRwdXQoKSByZWFkb25seSBhZGQgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XHJcblxyXG4gIGdldCBwb3NpdGlvbigpOiBURFNUYWJQb3NpdGlvbk1vZGUge1xyXG4gICAgcmV0dXJuIFsndG9wJywgJ2JvdHRvbSddLmluZGV4T2YodGhpcy50YWJQb3NpdGlvbikgPT09IC0xID8gJ3ZlcnRpY2FsJyA6ICdob3Jpem9udGFsJztcclxuICB9XHJcblxyXG4gIGdldCBhZGRhYmxlKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMudHlwZSA9PT0gJ2VkaXRhYmxlLWNhcmQnICYmICF0aGlzLmhpZGVBZGQ7XHJcbiAgfVxyXG5cclxuICBnZXQgY2xvc2FibGUoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy50eXBlID09PSAnZWRpdGFibGUtY2FyZCc7XHJcbiAgfVxyXG5cclxuICBnZXQgbGluZSgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLnR5cGUgPT09ICdsaW5lJztcclxuICB9XHJcblxyXG4gIGdldCBpbmtCYXJBbmltYXRlZCgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLmxpbmUgJiYgKHR5cGVvZiB0aGlzLmFuaW1hdGVkID09PSAnYm9vbGVhbicgPyB0aGlzLmFuaW1hdGVkIDogdGhpcy5hbmltYXRlZC5pbmtCYXIpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHRhYlBhbmVBbmltYXRlZCgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiAgZmFsc2VcclxuICAgIC8vIChcclxuICAgIC8vICAgdGhpcy5wb3NpdGlvbiA9PT0gJ2hvcml6b250YWwnICYmIHRoaXMubGluZSAmJiAodHlwZW9mIHRoaXMuYW5pbWF0ZWQgPT09ICdib29sZWFuJyA/IHRoaXMuYW5pbWF0ZWQgOiB0aGlzLmFuaW1hdGVkLnRhYlBhbmUpXHJcbiAgICAvLyApO1xyXG4gIH1cclxuXHJcbiAgLy8gUGljayB1cCBvbmx5IGRpcmVjdCBkZXNjZW5kYW50cyB1bmRlciBpdnkgcmVuZGVyaW5nIGVuZ2luZVxyXG4gIC8vIFdlIGZpbHRlciBvdXQgb25seSB0aGUgdGFicyB0aGF0IGJlbG9uZyB0byB0aGlzIHRhYiBzZXQgaW4gYHRhYnNgLlxyXG4gIEBDb250ZW50Q2hpbGRyZW4oVERTVGFiQ29tcG9uZW50LCB7IGRlc2NlbmRhbnRzOiB0cnVlIH0pIGFsbFRhYnM6IFF1ZXJ5TGlzdDxURFNUYWJDb21wb25lbnQ+ID0gbmV3IFF1ZXJ5TGlzdDxURFNUYWJDb21wb25lbnQ+KCk7XHJcbiAgQFZpZXdDaGlsZChURFNUYWJOYXZCYXJDb21wb25lbnQsIHsgc3RhdGljOiBmYWxzZSB9KSB0YWJOYXZCYXJSZWYhOiBURFNUYWJOYXZCYXJDb21wb25lbnQ7XHJcblxyXG4gIC8vIEFsbCB0aGUgZGlyZWN0IHRhYnMgZm9yIHRoaXMgdGFiIHNldFxyXG4gIHRhYnM6IFF1ZXJ5TGlzdDxURFNUYWJDb21wb25lbnQ+ID0gbmV3IFF1ZXJ5TGlzdDxURFNUYWJDb21wb25lbnQ+KCk7XHJcblxyXG4gIGRpcjogRGlyZWN0aW9uID0gJ2x0cic7XHJcbiAgcHJpdmF0ZSByZWFkb25seSB0YWJTZXRJZCE6IG51bWJlcjtcclxuICBwcml2YXRlIGRlc3Ryb3kkID0gbmV3IFN1YmplY3Q8dm9pZD4oKTtcclxuICBwcml2YXRlIGluZGV4VG9TZWxlY3Q6IG51bWJlciB8IG51bGwgPSAwO1xyXG4gIHByaXZhdGUgX3NlbGVjdGVkSW5kZXg6IG51bWJlciB8IG51bGwgPSBudWxsO1xyXG4gIHByaXZhdGUgdGFiTGFiZWxTdWJzY3JpcHRpb24gPSBTdWJzY3JpcHRpb24uRU1QVFk7XHJcbiAgcHJpdmF0ZSB0YWJzU3Vic2NyaXB0aW9uID0gU3Vic2NyaXB0aW9uLkVNUFRZO1xyXG4gIHByaXZhdGUgY2FuRGVhY3RpdmF0ZVN1YnNjcmlwdGlvbiA9IFN1YnNjcmlwdGlvbi5FTVBUWTtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwdWJsaWMgdGRzQ29uZmlnU2VydmljZTogVERTQ29uZmlnU2VydmljZSxcclxuICAgIHByaXZhdGUgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgIEBPcHRpb25hbCgpIHByaXZhdGUgZGlyZWN0aW9uYWxpdHk6IERpcmVjdGlvbmFsaXR5LFxyXG4gICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSByb3V0ZXI6IFJvdXRlclxyXG4gICkge1xyXG4gICAgdGhpcy50YWJTZXRJZCA9IG5leHRJZCsrO1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLmRpciA9IHRoaXMuZGlyZWN0aW9uYWxpdHkudmFsdWU7XHJcbiAgICB0aGlzLmRpcmVjdGlvbmFsaXR5LmNoYW5nZT8ucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpLnN1YnNjcmliZSgoZGlyZWN0aW9uOiBEaXJlY3Rpb24pID0+IHtcclxuICAgICAgdGhpcy5kaXIgPSBkaXJlY3Rpb247XHJcbiAgICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICB0aGlzLmRlc3Ryb3kkLm5leHQoKTtcclxuICAgIHRoaXMuZGVzdHJveSQuY29tcGxldGUoKTtcclxuICAgIHRoaXMudGFicy5kZXN0cm95KCk7XHJcbiAgICB0aGlzLnRhYkxhYmVsU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICB0aGlzLnRhYnNTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgIHRoaXMuY2FuRGVhY3RpdmF0ZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gIH1cclxuXHJcbiAgbmdBZnRlckNvbnRlbnRJbml0KCk6IHZvaWQge1xyXG4gICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB7XHJcbiAgICAgIHRoaXMuc2V0VXBSb3V0ZXIoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5zdWJzY3JpYmVUb1RhYkxhYmVscygpO1xyXG4gICAgdGhpcy5zdWJzY3JpYmVUb0FsbFRhYkNoYW5nZXMoKTtcclxuXHJcbiAgICAvLyBTdWJzY3JpYmUgdG8gY2hhbmdlcyBpbiB0aGUgYW1vdW50IG9mIHRhYnMsIGluIG9yZGVyIHRvIGJlXHJcbiAgICAvLyBhYmxlIHRvIHJlLXJlbmRlciB0aGUgY29udGVudCBhcyBuZXcgdGFicyBhcmUgYWRkZWQgb3IgcmVtb3ZlZC5cclxuICAgIHRoaXMudGFic1N1YnNjcmlwdGlvbiA9IHRoaXMudGFicy5jaGFuZ2VzLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGluZGV4VG9TZWxlY3QgPSB0aGlzLmNsYW1wVGFiSW5kZXgodGhpcy5pbmRleFRvU2VsZWN0KTtcclxuXHJcbiAgICAgIC8vIE1haW50YWluIHRoZSBwcmV2aW91c2x5LXNlbGVjdGVkIHRhYiBpZiBhIG5ldyB0YWIgaXMgYWRkZWQgb3IgcmVtb3ZlZCBhbmQgdGhlcmUgaXMgbm9cclxuICAgICAgLy8gZXhwbGljaXQgY2hhbmdlIHRoYXQgc2VsZWN0cyBhIGRpZmZlcmVudCB0YWIuXHJcbiAgICAgIGlmIChpbmRleFRvU2VsZWN0ID09PSB0aGlzLl9zZWxlY3RlZEluZGV4KSB7XHJcbiAgICAgICAgY29uc3QgdGFicyA9IHRoaXMudGFicy50b0FycmF5KCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGFicy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgaWYgKHRhYnNbaV0uaXNBY3RpdmUpIHtcclxuICAgICAgICAgICAgLy8gQXNzaWduIGJvdGggdG8gdGhlIGBpbmRleFRvU2VsZWN0YCBhbmQgYF9zZWxlY3RlZEluZGV4YCBzbyB3ZSBkb24ndCBmaXJlIGEgY2hhbmdlZFxyXG4gICAgICAgICAgICAvLyBldmVudCwgb3RoZXJ3aXNlIHRoZSBjb25zdW1lciBtYXkgZW5kIHVwIGluIGFuIGluZmluaXRlIGxvb3AgaW4gc29tZSBlZGdlIGNhc2VzIGxpa2VcclxuICAgICAgICAgICAgLy8gYWRkaW5nIGEgdGFiIHdpdGhpbiB0aGUgYHNlbGVjdGVkSW5kZXhDaGFuZ2VgIGV2ZW50LlxyXG4gICAgICAgICAgICB0aGlzLmluZGV4VG9TZWxlY3QgPSB0aGlzLl9zZWxlY3RlZEluZGV4ID0gaTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuc3Vic2NyaWJlVG9UYWJMYWJlbHMoKTtcclxuICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJDb250ZW50Q2hlY2tlZCgpOiB2b2lkIHtcclxuICAgIC8vIERvbid0IGNsYW1wIHRoZSBgaW5kZXhUb1NlbGVjdGAgaW1tZWRpYXRlbHkgaW4gdGhlIHNldHRlciBiZWNhdXNlIGl0IGNhbiBoYXBwZW4gdGhhdFxyXG4gICAgLy8gdGhlIGFtb3VudCBvZiB0YWJzIGNoYW5nZXMgYmVmb3JlIHRoZSBhY3R1YWwgY2hhbmdlIGRldGVjdGlvbiBydW5zLlxyXG4gICAgY29uc3QgaW5kZXhUb1NlbGVjdCA9ICh0aGlzLmluZGV4VG9TZWxlY3QgPSB0aGlzLmNsYW1wVGFiSW5kZXgodGhpcy5pbmRleFRvU2VsZWN0KSk7XHJcblxyXG4gICAgLy8gSWYgdGhlcmUgaXMgYSBjaGFuZ2UgaW4gc2VsZWN0ZWQgaW5kZXgsIGVtaXQgYSBjaGFuZ2UgZXZlbnQuIFNob3VsZCBub3QgdHJpZ2dlciBpZlxyXG4gICAgLy8gdGhlIHNlbGVjdGVkIGluZGV4IGhhcyBub3QgeWV0IGJlZW4gaW5pdGlhbGl6ZWQuXHJcbiAgICBpZiAodGhpcy5fc2VsZWN0ZWRJbmRleCAhPT0gaW5kZXhUb1NlbGVjdCkge1xyXG4gICAgICBjb25zdCBpc0ZpcnN0UnVuID0gdGhpcy5fc2VsZWN0ZWRJbmRleCA9PSBudWxsO1xyXG5cclxuICAgICAgaWYgKCFpc0ZpcnN0UnVuKSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RDaGFuZ2UuZW1pdCh0aGlzLmNyZWF0ZUNoYW5nZUV2ZW50KGluZGV4VG9TZWxlY3QpKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ2hhbmdpbmcgdGhlc2UgdmFsdWVzIGFmdGVyIGNoYW5nZSBkZXRlY3Rpb24gaGFzIHJ1blxyXG4gICAgICAvLyBzaW5jZSB0aGUgY2hlY2tlZCBjb250ZW50IG1heSBjb250YWluIHJlZmVyZW5jZXMgdG8gdGhlbS5cclxuICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgdGhpcy50YWJzLmZvckVhY2goKHRhYiwgaW5kZXgpID0+ICh0YWIuaXNBY3RpdmUgPSBpbmRleCA9PT0gaW5kZXhUb1NlbGVjdCkpO1xyXG5cclxuICAgICAgICBpZiAoIWlzRmlyc3RSdW4pIHtcclxuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleENoYW5nZS5lbWl0KGluZGV4VG9TZWxlY3QpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2V0dXAgdGhlIHBvc2l0aW9uIGZvciBlYWNoIHRhYiBhbmQgb3B0aW9uYWxseSBzZXR1cCBhbiBvcmlnaW4gb24gdGhlIG5leHQgc2VsZWN0ZWQgdGFiLlxyXG4gICAgdGhpcy50YWJzLmZvckVhY2goKHRhYjogVERTVGFiQ29tcG9uZW50LCBpbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICAgIHRhYi5wb3NpdGlvbiA9IGluZGV4IC0gaW5kZXhUb1NlbGVjdDtcclxuXHJcbiAgICAgIC8vIElmIHRoZXJlIGlzIGFscmVhZHkgYSBzZWxlY3RlZCB0YWIsIHRoZW4gc2V0IHVwIGFuIG9yaWdpbiBmb3IgdGhlIG5leHQgc2VsZWN0ZWQgdGFiXHJcbiAgICAgIC8vIGlmIGl0IGRvZXNuJ3QgaGF2ZSBvbmUgYWxyZWFkeS5cclxuICAgICAgaWYgKHRoaXMuX3NlbGVjdGVkSW5kZXggIT0gbnVsbCAmJiB0YWIucG9zaXRpb24gPT09IDAgJiYgIXRhYi5vcmlnaW4pIHtcclxuICAgICAgICB0YWIub3JpZ2luID0gaW5kZXhUb1NlbGVjdCAtIHRoaXMuX3NlbGVjdGVkSW5kZXg7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGlmICh0aGlzLl9zZWxlY3RlZEluZGV4ICE9PSBpbmRleFRvU2VsZWN0KSB7XHJcbiAgICAgIHRoaXMuX3NlbGVjdGVkSW5kZXggPSBpbmRleFRvU2VsZWN0O1xyXG4gICAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9vbkNsb3NlKGluZGV4OiBudW1iZXIsIGU6IE1vdXNlRXZlbnQpOiB2b2lkIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB0aGlzLmNsb3NlLmVtaXQoeyBpbmRleCB9KTtcclxuICB9XHJcblxyXG4gIF9vbkFkZCgpOiB2b2lkIHtcclxuICAgIHRoaXMuYWRkLmVtaXQoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY2xhbXBUYWJJbmRleChpbmRleDogbnVtYmVyIHwgbnVsbCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gTWF0aC5taW4odGhpcy50YWJzLmxlbmd0aCAtIDEsIE1hdGgubWF4KGluZGV4IHx8IDAsIDApKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY3JlYXRlQ2hhbmdlRXZlbnQoaW5kZXg6IG51bWJlcik6IFREU1RhYkNoYW5nZUV2ZW50IHtcclxuICAgIGNvbnN0IGV2ZW50ID0gbmV3IFREU1RhYkNoYW5nZUV2ZW50KCk7XHJcbiAgICBldmVudC5pbmRleCA9IGluZGV4O1xyXG4gICAgaWYgKHRoaXMudGFicyAmJiB0aGlzLnRhYnMubGVuZ3RoKSB7XHJcbiAgICAgIGV2ZW50LnRhYiA9IHRoaXMudGFicy50b0FycmF5KClbaW5kZXhdO1xyXG4gICAgICB0aGlzLnRhYnMuZm9yRWFjaCgodGFiLCBpKSA9PiB7XHJcbiAgICAgICAgaWYgKGkgIT09IGluZGV4KSB7XHJcbiAgICAgICAgICB0YWIudGFiRGVzZWxlY3QuZW1pdCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIGV2ZW50LnRhYi50YWJTZWxlY3QuZW1pdCgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGV2ZW50O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdWJzY3JpYmVUb1RhYkxhYmVscygpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLnRhYkxhYmVsU3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgIHRoaXMudGFiTGFiZWxTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnRhYkxhYmVsU3Vic2NyaXB0aW9uID0gbWVyZ2UoLi4udGhpcy50YWJzLm1hcCh0YWIgPT4gdGFiLnN0YXRlQ2hhbmdlcykpLnN1YnNjcmliZSgoKSA9PiB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHN1YnNjcmliZVRvQWxsVGFiQ2hhbmdlcygpOiB2b2lkIHtcclxuICAgIHRoaXMuYWxsVGFicy5jaGFuZ2VzLnBpcGUoc3RhcnRXaXRoKHRoaXMuYWxsVGFicykpLnN1YnNjcmliZSgodGFiczogUXVlcnlMaXN0PFREU1RhYkNvbXBvbmVudD4pID0+IHtcclxuICAgICAgdGhpcy50YWJzLnJlc2V0KHRhYnMuZmlsdGVyKHRhYiA9PiB0YWIuY2xvc2VzdFRhYlNldCA9PT0gdGhpcykpO1xyXG4gICAgICB0aGlzLnRhYnMubm90aWZ5T25DaGFuZ2VzKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNhbkRlYWN0aXZhdGVGdW4ocHJlOiBudW1iZXIsIG5leHQ6IG51bWJlcik6IE9ic2VydmFibGU8Ym9vbGVhbj4ge1xyXG4gICAgaWYgKHR5cGVvZiB0aGlzLm9uQ2FuRGVhY3RpdmF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICBjb25zdCBvYnNlcnZhYmxlID0gd3JhcEludG9PYnNlcnZhYmxlKHRoaXMub25DYW5EZWFjdGl2YXRlKHByZSwgbmV4dCkpO1xyXG4gICAgICByZXR1cm4gb2JzZXJ2YWJsZS5waXBlKGZpcnN0KCksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gb2YodHJ1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjbGlja05hdkl0ZW0odGFiOiBURFNUYWJDb21wb25lbnQsIGluZGV4OiBudW1iZXIsIGU6IE1vdXNlRXZlbnQpOiB2b2lkIHtcclxuICAgIGlmICghdGFiLmRpc2FibGVkKSB7XHJcbiAgICAgIC8vIGlnbm9yZSBvbkNhbkRlYWN0aXZhdGVcclxuICAgICAgdGFiLnRhYkNsaWNrLmVtaXQoKTtcclxuICAgICAgaWYgKCF0aGlzLmlzUm91dGVyTGlua0NsaWNrRXZlbnQoaW5kZXgsIGUpKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTZWxlY3RlZEluZGV4KGluZGV4KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpc1JvdXRlckxpbmtDbGlja0V2ZW50KGluZGV4OiBudW1iZXIsIGV2ZW50OiBNb3VzZUV2ZW50KTogYm9vbGVhbiB7XHJcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICBpZiAodGhpcy5saW5rUm91dGVyKSB7XHJcbiAgICAgIHJldHVybiAhIXRoaXMudGFicy50b0FycmF5KClbaW5kZXhdPy5saW5rRGlyZWN0aXZlPy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuY29udGFpbnModGFyZ2V0KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbnRleHRtZW51TmF2SXRlbSh0YWI6IFREU1RhYkNvbXBvbmVudCwgZTogTW91c2VFdmVudCk6IHZvaWQge1xyXG4gICAgaWYgKCF0YWIuZGlzYWJsZWQpIHtcclxuICAgICAgLy8gaWdub3JlIG9uQ2FuRGVhY3RpdmF0ZVxyXG4gICAgICB0YWIudGFiQ29udGV4dG1lbnUuZW1pdChlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldFNlbGVjdGVkSW5kZXgoaW5kZXg6IG51bWJlcik6IHZvaWQge1xyXG4gICAgdGhpcy5jYW5EZWFjdGl2YXRlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICB0aGlzLmNhbkRlYWN0aXZhdGVTdWJzY3JpcHRpb24gPSB0aGlzLmNhbkRlYWN0aXZhdGVGdW4odGhpcy5fc2VsZWN0ZWRJbmRleCEsIGluZGV4KS5zdWJzY3JpYmUoY2FuID0+IHtcclxuICAgICAgaWYgKGNhbikge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IGluZGV4O1xyXG4gICAgICAgIHRoaXMudGFiTmF2QmFyUmVmLmZvY3VzSW5kZXggPSBpbmRleDtcclxuICAgICAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRUYWJJbmRleCh0YWI6IFREU1RhYkNvbXBvbmVudCwgaW5kZXg6IG51bWJlcik6IG51bWJlciB8IG51bGwge1xyXG4gICAgaWYgKHRhYi5kaXNhYmxlZCkge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLl9zZWxlY3RlZEluZGV4ID09PSBpbmRleCA/IDAgOiAtMTtcclxuICB9XHJcblxyXG4gIGdldFRhYkNvbnRlbnRJZChpOiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIGB0ZHMtdGFicy0ke3RoaXMudGFiU2V0SWR9LXRhYi0ke2l9YDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0VXBSb3V0ZXIoKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5saW5rUm91dGVyKSB7XHJcbiAgICAgIGlmICghdGhpcy5yb3V0ZXIpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFtURFNdIHlvdSBzaG91bGQgaW1wb3J0ICdSb3V0ZXJNb2R1bGUnIGlmIHlvdSB3YW50IHRvIHVzZSAnbGlua1JvdXRlcichYCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5yb3V0ZXIuZXZlbnRzXHJcbiAgICAgICAgLnBpcGUoXHJcbiAgICAgICAgICB0YWtlVW50aWwodGhpcy5kZXN0cm95JCksXHJcbiAgICAgICAgICBmaWx0ZXIoZSA9PiBlIGluc3RhbmNlb2YgTmF2aWdhdGlvbkVuZCksXHJcbiAgICAgICAgICBzdGFydFdpdGgodHJ1ZSksXHJcbiAgICAgICAgICBkZWxheSgwKVxyXG4gICAgICAgIClcclxuICAgICAgICAuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICAgIHRoaXMudXBkYXRlUm91dGVyQWN0aXZlKCk7XHJcbiAgICAgICAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgdXBkYXRlUm91dGVyQWN0aXZlKCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMucm91dGVyLm5hdmlnYXRlZCkge1xyXG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZFNob3VsZEFjdGl2ZVRhYkluZGV4KCk7XHJcbiAgICAgIGlmIChpbmRleCAhPT0gdGhpcy5fc2VsZWN0ZWRJbmRleCkge1xyXG4gICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRJbmRleChpbmRleCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5oaWRlQWxsID0gaW5kZXggPT09IC0xO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBmaW5kU2hvdWxkQWN0aXZlVGFiSW5kZXgoKTogbnVtYmVyIHtcclxuICAgIGNvbnN0IHRhYnMgPSB0aGlzLnRhYnMudG9BcnJheSgpO1xyXG4gICAgY29uc3QgaXNBY3RpdmUgPSB0aGlzLmlzTGlua0FjdGl2ZSh0aGlzLnJvdXRlcik7XHJcblxyXG4gICAgcmV0dXJuIHRhYnMuZmluZEluZGV4KHRhYiA9PiB7XHJcbiAgICAgIGNvbnN0IGMgPSB0YWIubGlua0RpcmVjdGl2ZTtcclxuICAgICAgcmV0dXJuIGMgPyBpc0FjdGl2ZShjLnJvdXRlckxpbmspIHx8IGlzQWN0aXZlKGMucm91dGVyTGlua1dpdGhIcmVmKSA6IGZhbHNlO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGlzTGlua0FjdGl2ZShyb3V0ZXI6IFJvdXRlcik6IChsaW5rPzogUm91dGVyTGluayB8IFJvdXRlckxpbmtXaXRoSHJlZikgPT4gYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gKGxpbms/OiBSb3V0ZXJMaW5rIHwgUm91dGVyTGlua1dpdGhIcmVmKSA9PiAobGluayA/IHJvdXRlci5pc0FjdGl2ZShsaW5rLnVybFRyZWUhLCB0aGlzLmxpbmtFeGFjdCkgOiBmYWxzZSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldFRhYkNvbnRlbnRNYXJnaW5WYWx1ZSgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIC0odGhpcy5zZWxlY3RlZEluZGV4IHx8IDApICogMTAwO1xyXG4gIH1cclxuXHJcbiAgZ2V0VGFiQ29udGVudE1hcmdpbkxlZnQoKTogc3RyaW5nIHtcclxuICAgIGlmICh0aGlzLnRhYlBhbmVBbmltYXRlZCkge1xyXG4gICAgICBpZiAodGhpcy5kaXIgIT09ICdydGwnKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGFiQ29udGVudE1hcmdpblZhbHVlKCkgKyAnJSc7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiAnJztcclxuICB9XHJcbiAgZ2V0VGFiQ29udGVudE1hcmdpblJpZ2h0KCk6IHN0cmluZyB7XHJcbiAgICBpZiAodGhpcy50YWJQYW5lQW5pbWF0ZWQpIHtcclxuICAgICAgaWYgKHRoaXMuZGlyID09PSAncnRsJykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFRhYkNvbnRlbnRNYXJnaW5WYWx1ZSgpICsgJyUnO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gJyc7XHJcbiAgfVxyXG59XHJcbiIsIjx0ZHMtdGFicy1uYXYgKm5nSWY9XCJ0YWJzLmxlbmd0aFwiIFtuZ1N0eWxlXT1cInRhYkJhclN0eWxlXCIgW3NlbGVjdGVkSW5kZXhdPVwic2VsZWN0ZWRJbmRleCB8fCAwXCJcclxuICAgIFtpbmtCYXJBbmltYXRlZF09XCJpbmtCYXJBbmltYXRlZFwiIFthZGRhYmxlXT1cImFkZGFibGVcIiBbYWRkSWNvbl09XCJhZGRJY29uXCIgW2hpZGVCYXJdPVwiaGlkZUFsbFwiIFtwb3NpdGlvbl09XCJwb3NpdGlvblwiXHJcbiAgICBbdGFiUG9zaXRpb25dPVwidGFiUG9zaXRpb25cIiBbZXh0cmFUZW1wbGF0ZV09XCJ0YWJCYXJFeHRyYUNvbnRlbnRcIiAodGFiU2Nyb2xsKT1cInRhYkxpc3RTY3JvbGwuZW1pdCgkZXZlbnQpXCJcclxuICAgIChzZWxlY3RGb2N1c2VkSW5kZXgpPVwic2V0U2VsZWN0ZWRJbmRleCgkZXZlbnQpXCIgKGFkZENsaWNrZWQpPVwiX29uQWRkKClcIiBbY2xhc3NdPVwiY2xzVGFiXCIgW2hpZGVuTmV4dEJ0bl09XCJoaWRlbk5leHRCdG5cIj5cclxuICAgIDxkaXYgY2xhc3M9XCJ0ZHMtdGFicy10YWIgcmVsYXRpdmUgaW5saW5lLWJsb2NrIG91dGxpbmUtbm9uZSAgdGV4dC1ib2R5LTIgXCJcclxuICAgICAgICBbc3R5bGUubWFyZ2luLXJpZ2h0LnB4XT1cInBvc2l0aW9uID09PSAnaG9yaXpvbnRhbCcgPyB0YWJCYXJHdXR0ZXIgOiBudWxsXCJcclxuICAgICAgICBbc3R5bGUubWFyZ2luLWJvdHRvbS5weF09XCJwb3NpdGlvbiA9PT0gJ3ZlcnRpY2FsJyA/IHRhYkJhckd1dHRlciA6IG51bGxcIlxyXG4gICAgICAgIFtjbGFzcy50ZHMtdGFicy10YWItZGlzYWJsZWRdPVwidGFiLmRpc2FibGVkXCIgKGNsaWNrKT1cImNsaWNrTmF2SXRlbSh0YWIsIGksICRldmVudClcIiBbbmdDbGFzc109XCJjbHNUYWJcIlxyXG4gICAgICAgIChjb250ZXh0bWVudSk9XCJjb250ZXh0bWVudU5hdkl0ZW0odGFiLCAkZXZlbnQpXCIgKm5nRm9yPVwibGV0IHRhYiBvZiB0YWJzOyBsZXQgaSA9IGluZGV4XCI+XHJcbiAgICAgICAgPGRpdiByb2xlPVwidGFiXCIgW2F0dHIudGFiSW5kZXhdPVwiZ2V0VGFiSW5kZXgodGFiLCBpKVwiIFthdHRyLmFyaWEtZGlzYWJsZWRdPVwidGFiLmRpc2FibGVkXCJcclxuICAgICAgICAgICAgW2F0dHIuYXJpYS1zZWxlY3RlZF09XCJzZWxlY3RlZEluZGV4ID09PSBpICYmICFoaWRlQWxsXCIgW2F0dHIuYXJpYS1jb250cm9sc109XCJnZXRUYWJDb250ZW50SWQoaSlcIlxyXG4gICAgICAgICAgICBbZGlzYWJsZWRdPVwidGFiLmRpc2FibGVkXCIgW3RhYl09XCJ0YWJcIiBbYWN0aXZlXT1cInNlbGVjdGVkSW5kZXggPT09IGlcIlxyXG4gICAgICAgICAgICBjbGFzcz1cInRkcy10YWJzLXRhYi1idG4gZm9jdXM6b3V0bGluZS1ub25lIHctZnVsbFwiIHRkc1RhYk5hdkl0ZW0gY2RrTW9uaXRvckVsZW1lbnRGb2N1cyBbbmdDbGFzc109XCJ7XHJcbiAgICAgICAgICAgICAgICAndGV4dC1uZXV0cmFsLTEtOTAwIGRhcms6dGV4dC1kLW5ldXRyYWwtMS05MDAnOiF0YWIuZGlzYWJsZWQgJiYgc2VsZWN0ZWRJbmRleCA9PT0gaSxcclxuICAgICAgICAgICAgICAgICAgICAndGV4dC1uZXV0cmFsLTEtNDAwIGRhcms6dGV4dC1kLW5ldXRyYWwtMS00MDAgaG92ZXI6dGV4dC1uZXV0cmFsLTEtOTAwIGRhcms6aG92ZXI6dGV4dC1kLW5ldXRyYWwtMS05MDAnOiF0YWIuZGlzYWJsZWQgJiYgc2VsZWN0ZWRJbmRleCAhPT0gaSxcclxuICAgICAgICAgICAgICAgICAgICAndGV4dC1uZXV0cmFsLTEtMzAwIGRhcms6dGV4dC1kLW5ldXRyYWwtMS0zMDAnOnRhYi5kaXNhYmxlZFxyXG4gICAgICAgICAgICB9XCI+XHJcbiAgICAgICAgICAgIDxuZy1jb250YWluZXIgKnRkc1N0cmluZ1RlbXBsYXRlT3V0bGV0PVwidGFiLmxhYmVsOyBjb250ZXh0OiB7IHZpc2libGU6IHRydWUgLCBhY3RpdmU6IHNlbGVjdGVkSW5kZXggPT09IGl9XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHgtMiBweS00IGZvbnQtc2VtaWJvbGQgdGV4dC1ib2R5LTJcIiBbbmdDbGFzc109XCJ7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2JvcmRlci1iLTMnOnBvc2l0aW9uID09PSAnaG9yaXpvbnRhbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2JvcmRlci1sLTMnOiB0YWJQb3NpdGlvbiA9PT0gJ3JpZ2h0JyB8fCB0YWJQb3NpdGlvbiA9PT0gJ2xlZnQnLFxyXG4gICAgICAgICAgICAgICAgICAgICd0ZHMtdGFicy10YWItYWN0aXZlICBib3JkZXItcHJpbWFyeS0xJzpzZWxlY3RlZEluZGV4ID09PSBpLFxyXG4gICAgICAgICAgICAgICAgICAgICdib3JkZXItdHJhbnNwYXJlbnQnOnNlbGVjdGVkSW5kZXggIT09IGksXHJcbiAgICAgICAgICAgICAgICAgICAgJ2N1cnNvci1wb2ludGVyIGhvdmVyOmJvcmRlci1wcmltYXJ5LTEgJzohdGFiLmRpc2FibGVkXHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAge3sgdGFiLmxhYmVsIH19XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxidXR0b24gdGRzLXRhYi1jbG9zZS1idXR0b24gKm5nSWY9XCJ0YWIuY2xvc2FibGUgJiYgY2xvc2FibGUgJiYgIXRhYi5kaXNhYmxlZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgW2Nsb3NlSWNvbl09XCJ0YWIuY2xvc2VJY29uXCIgKGNsaWNrKT1cIl9vbkNsb3NlKGksICRldmVudClcIj48L2J1dHRvbj5cclxuICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XHJcblxyXG5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG48L3Rkcy10YWJzLW5hdj5cclxuPGRpdiBjbGFzcz1cInRkcy10YWJzLWNvbnRlbnQtaG9sZGVyIGgtZnVsbCB3LWZ1bGxcIj5cclxuICAgIDxkaXYgY2xhc3M9XCJ0ZHMtdGFicy1jb250ZW50IGgtZnVsbCB3LWZ1bGxcIiBbY2xhc3MudGRzLXRhYnMtY29udGVudC10b3BdPVwidGFiUG9zaXRpb24gPT09ICd0b3AnXCJcclxuICAgICAgICBbY2xhc3MudGRzLXRhYnMtY29udGVudC1ib3R0b21dPVwidGFiUG9zaXRpb24gPT09ICdib3R0b20nXCJcclxuICAgICAgICBbY2xhc3MudGRzLXRhYnMtY29udGVudC1sZWZ0XT1cInRhYlBvc2l0aW9uID09PSAnbGVmdCdcIiBbY2xhc3MudGRzLXRhYnMtY29udGVudC1yaWdodF09XCJ0YWJQb3NpdGlvbiA9PT0gJ3JpZ2h0J1wiXHJcbiAgICAgICAgW2NsYXNzLnRkcy10YWJzLWNvbnRlbnQtYW5pbWF0ZWRdPVwidGFiUGFuZUFuaW1hdGVkXCIgW3N0eWxlLm1hcmdpbi1sZWZ0XT1cImdldFRhYkNvbnRlbnRNYXJnaW5MZWZ0KClcIlxyXG4gICAgICAgIFtzdHlsZS5tYXJnaW4tcmlnaHRdPVwiZ2V0VGFiQ29udGVudE1hcmdpblJpZ2h0KClcIj5cclxuICAgICAgICA8ZGl2IHRkcy10YWItYm9keSAqbmdGb3I9XCJsZXQgdGFiIG9mIHRhYnM7IGxldCBpID0gaW5kZXhcIiBbYWN0aXZlXT1cInNlbGVjdGVkSW5kZXggPT0gaSAmJiAhaGlkZUFsbFwiXHJcbiAgICAgICAgICAgIFtjb250ZW50XT1cInRhYi5jb250ZW50XCIgW2ZvcmNlUmVuZGVyXT1cInRhYi5mb3JjZVJlbmRlclwiIFt0YWJQYW5lQW5pbWF0ZWRdPVwidGFiUGFuZUFuaW1hdGVkXCJcclxuICAgICAgICAgICAgW25nQ2xhc3NdPVwidGFiLmNsc0NvbnRlbnRcIj48L2Rpdj5cclxuICAgIDwvZGl2PlxyXG48L2Rpdj4iXX0=