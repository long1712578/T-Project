import { ChangeDetectionStrategy, Component, EventEmitter, Input, Output, ViewEncapsulation } from '@angular/core';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "tds-ui/dropdown";
import * as i3 from "tds-ui/core/outlet";
import * as i4 from "./tab-add-button.component";
const _c0 = function () { return { minWidth: "46px" }; };
function TDSTabNavOperationComponent_button_0_Template(rf, ctx) { if (rf & 1) {
    const _r6 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 5, 6);
    i0.ɵɵlistener("visibleChange", function TDSTabNavOperationComponent_button_0_Template_button_visibleChange_0_listener($event) { i0.ɵɵrestoreView(_r6); const ctx_r5 = i0.ɵɵnextContext(); return ctx_r5.menuVisChange($event); })("mouseenter", function TDSTabNavOperationComponent_button_0_Template_button_mouseenter_0_listener() { i0.ɵɵrestoreView(_r6); const ctx_r7 = i0.ɵɵnextContext(); return ctx_r7.showItems(); });
    i0.ɵɵelement(2, "i", 7);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    i0.ɵɵnextContext();
    const _r1 = i0.ɵɵreference(2);
    i0.ɵɵproperty("tdsDropdownMenu", _r1)("overlayStyle", i0.ɵɵpureFunction0(3, _c0))("matchWidthElement", null);
} }
function TDSTabNavOperationComponent_div_4_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtext(1);
    i0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const item_r8 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵadvance(1);
    i0.ɵɵtextInterpolate(item_r8.tab.label);
} }
const _c1 = function (a1) { return { visible: false, active: a1 }; };
function TDSTabNavOperationComponent_div_4_Template(rf, ctx) { if (rf & 1) {
    const _r12 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 8);
    i0.ɵɵlistener("click", function TDSTabNavOperationComponent_div_4_Template_div_click_0_listener() { const restoredCtx = i0.ɵɵrestoreView(_r12); const item_r8 = restoredCtx.$implicit; const ctx_r11 = i0.ɵɵnextContext(); return ctx_r11.onSelect(item_r8); })("contextmenu", function TDSTabNavOperationComponent_div_4_Template_div_contextmenu_0_listener($event) { const restoredCtx = i0.ɵɵrestoreView(_r12); const item_r8 = restoredCtx.$implicit; const ctx_r13 = i0.ɵɵnextContext(); return ctx_r13.onContextmenu(item_r8, $event); });
    i0.ɵɵtemplate(1, TDSTabNavOperationComponent_div_4_ng_container_1_Template, 2, 1, "ng-container", 9);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const item_r8 = ctx.$implicit;
    i0.ɵɵclassProp("tds-tabs-dropdown-menu-item-disabled", item_r8.disabled);
    i0.ɵɵproperty("selected", item_r8.active)("disabled", item_r8.disabled);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("tdsStringTemplateOutlet", item_r8.tab.label)("tdsStringTemplateOutletContext", i0.ɵɵpureFunction1(6, _c1, item_r8.active));
} }
function TDSTabNavOperationComponent_button_5_Template(rf, ctx) { if (rf & 1) {
    const _r15 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 10);
    i0.ɵɵlistener("click", function TDSTabNavOperationComponent_button_5_Template_button_click_0_listener() { i0.ɵɵrestoreView(_r15); const ctx_r14 = i0.ɵɵnextContext(); return ctx_r14.addClicked.emit(); });
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r3 = i0.ɵɵnextContext();
    i0.ɵɵproperty("addIcon", ctx_r3.addIcon);
} }
export class TDSTabNavOperationComponent {
    constructor(cdr, elementRef) {
        this.cdr = cdr;
        this.elementRef = elementRef;
        this.items = [];
        this.addable = false;
        this.addIcon = 'plus';
        this.hidenNextBtn = false;
        this.nextClicked = new EventEmitter();
        this.addClicked = new EventEmitter();
        this.selected = new EventEmitter();
        this.closeAnimationWaitTimeoutId = -1;
        this.menuOpened = false;
        this.element = this.elementRef.nativeElement;
    }
    onSelect(item) {
        if (!item.disabled) {
            // ignore onCanDeactivate
            item.tab.tabClick.emit();
            this.selected.emit(item);
        }
    }
    onContextmenu(item, e) {
        if (!item.disabled) {
            item.tab.tabContextmenu.emit(e);
        }
    }
    showItems() {
        clearTimeout(this.closeAnimationWaitTimeoutId);
        this.menuOpened = true;
        this.cdr.markForCheck();
    }
    menuVisChange(visible) {
        if (!visible) {
            this.closeAnimationWaitTimeoutId = setTimeout(() => {
                this.menuOpened = false;
                this.cdr.markForCheck();
            }, 150);
        }
    }
    getElementWidth() {
        return this.element?.offsetWidth || 0;
    }
    getElementHeight() {
        return this.element?.offsetHeight || 0;
    }
    ngOnDestroy() {
        clearTimeout(this.closeAnimationWaitTimeoutId);
    }
    onclickNext(e) {
        this.nextClicked.emit();
    }
}
TDSTabNavOperationComponent.ɵfac = function TDSTabNavOperationComponent_Factory(t) { return new (t || TDSTabNavOperationComponent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i0.ElementRef)); };
TDSTabNavOperationComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: TDSTabNavOperationComponent, selectors: [["tds-tab-nav-operation"]], hostAttrs: [1, "tds-tabs-nav-operations", "flex", "items-stretch"], hostVars: 4, hostBindings: function TDSTabNavOperationComponent_HostBindings(rf, ctx) { if (rf & 2) {
        i0.ɵɵclassProp("tds-tabs-nav-operations-hidden", ctx.items.length === 0)("hidden", ctx.items.length === 0);
    } }, inputs: { items: "items", addable: "addable", addIcon: "addIcon", hidenNextBtn: "hidenNextBtn" }, outputs: { nextClicked: "nextClicked", addClicked: "addClicked", selected: "selected" }, exportAs: ["tdsTabNavOperation"], decls: 6, vars: 3, consts: [["tds-dropdown", "", "class", "tds-tabs-nav-more px-2 py-4", "type", "button", "tabindex", "-1", "aria-hidden", "true", "overlayClassName", "tds-tabs-dropdown", "style", "box-shadow:-12px 0 8px -4px rgb(0 0 0 / 8%)", 3, "tdsDropdownMenu", "overlayStyle", "matchWidthElement", "visibleChange", "mouseenter", 4, "ngIf"], ["menu", "tdsDropdownMenu"], [1, "w-full", "py-2", "overflow-y-auto", "tds-custom-scroll", "bg-white", "dark:bg-d-neutral-3-200", "shadow-1-lg", 2, "max-height", "200px", "min-width", "150px"], ["tds-dropdown-item", "", "class", "tds-tabs-dropdown-menu-item", 3, "tds-tabs-dropdown-menu-item-disabled", "selected", "disabled", "click", "contextmenu", 4, "ngFor", "ngForOf"], ["tds-tab-add-button", "", 3, "addIcon", "click", 4, "ngIf"], ["tds-dropdown", "", "type", "button", "tabindex", "-1", "aria-hidden", "true", "overlayClassName", "tds-tabs-dropdown", 1, "tds-tabs-nav-more", "px-2", "py-4", 2, "box-shadow", "-12px 0 8px -4px rgb(0 0 0 / 8%)", 3, "tdsDropdownMenu", "overlayStyle", "matchWidthElement", "visibleChange", "mouseenter"], ["dropdownTrigger", "tdsDropdown"], [1, "tdsi-three-dots-horizon-fill"], ["tds-dropdown-item", "", 1, "tds-tabs-dropdown-menu-item", 3, "selected", "disabled", "click", "contextmenu"], [4, "tdsStringTemplateOutlet", "tdsStringTemplateOutletContext"], ["tds-tab-add-button", "", 3, "addIcon", "click"]], template: function TDSTabNavOperationComponent_Template(rf, ctx) { if (rf & 1) {
        i0.ɵɵtemplate(0, TDSTabNavOperationComponent_button_0_Template, 3, 4, "button", 0);
        i0.ɵɵelementStart(1, "tds-dropdown-menu", null, 1)(3, "div", 2);
        i0.ɵɵtemplate(4, TDSTabNavOperationComponent_div_4_Template, 2, 8, "div", 3);
        i0.ɵɵelementEnd()();
        i0.ɵɵtemplate(5, TDSTabNavOperationComponent_button_5_Template, 1, 1, "button", 4);
    } if (rf & 2) {
        i0.ɵɵproperty("ngIf", !ctx.hidenNextBtn);
        i0.ɵɵadvance(4);
        i0.ɵɵproperty("ngForOf", ctx.items);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngIf", ctx.addable);
    } }, directives: [i1.NgIf, i2.TDSDropDownDirective, i2.TDSDropdownMenuComponent, i1.NgForOf, i2.TDSDropDownItemDirective, i3.TDSStringTemplateOutletDirective, i4.TDSTabAddButtonComponent], encapsulation: 2, changeDetection: 0 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(TDSTabNavOperationComponent, [{
        type: Component,
        args: [{ selector: 'tds-tab-nav-operation', exportAs: 'tdsTabNavOperation', preserveWhitespaces: false, changeDetection: ChangeDetectionStrategy.OnPush, encapsulation: ViewEncapsulation.None, host: {
                    class: 'tds-tabs-nav-operations flex items-stretch',
                    '[class.tds-tabs-nav-operations-hidden]': 'items.length === 0',
                    '[class.hidden]': 'items.length === 0'
                }, template: "<button *ngIf=\"!hidenNextBtn\" tds-dropdown class=\"tds-tabs-nav-more px-2 py-4\" type=\"button\" tabindex=\"-1\"\r\n  aria-hidden=\"true\" overlayClassName=\"tds-tabs-dropdown\" #dropdownTrigger=\"tdsDropdown\" [tdsDropdownMenu]=\"menu\"\r\n  [overlayStyle]=\"{ minWidth: '46px' }\" [matchWidthElement]=\"null\" (visibleChange)=\"menuVisChange($event)\"\r\n  (mouseenter)=\"showItems()\" style=\"box-shadow:-12px 0 8px -4px rgb(0 0 0 / 8%)\">\r\n  <i class='tdsi-three-dots-horizon-fill'></i>\r\n</button>\r\n<tds-dropdown-menu #menu=\"tdsDropdownMenu\">\r\n  <div class=\"w-full py-2  overflow-y-auto tds-custom-scroll bg-white dark:bg-d-neutral-3-200 shadow-1-lg\"\r\n    style=\"max-height: 200px;min-width: 150px\">\r\n    <div tds-dropdown-item *ngFor=\"let item of items\" class=\"tds-tabs-dropdown-menu-item\"\r\n      [class.tds-tabs-dropdown-menu-item-disabled]=\"item.disabled\" [selected]=\"item.active\" [disabled]=\"item.disabled\"\r\n      (click)=\"onSelect(item)\" (contextmenu)=\"onContextmenu(item, $event)\">\r\n      <ng-container *tdsStringTemplateOutlet=\"item.tab.label; context: { visible: false ,active:item.active }\">{{\r\n        item.tab.label }}</ng-container>\r\n    </div>\r\n  </div>\r\n</tds-dropdown-menu>\r\n<button *ngIf=\"addable\" tds-tab-add-button [addIcon]=\"addIcon\" (click)=\"addClicked.emit()\"></button>" }]
    }], function () { return [{ type: i0.ChangeDetectorRef }, { type: i0.ElementRef }]; }, { items: [{
            type: Input
        }], addable: [{
            type: Input
        }], addIcon: [{
            type: Input
        }], hidenNextBtn: [{
            type: Input
        }], nextClicked: [{
            type: Output
        }], addClicked: [{
            type: Output
        }], selected: [{
            type: Output
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFiLW5hdi1vcGVyYXRpb24uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvdGRzLXVpL3RhYnMvdGFiLW5hdi1vcGVyYXRpb24uY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vcHJvamVjdHMvdGRzLXVpL3RhYnMvdGFiLW5hdi1vcGVyYXRpb24uY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsT0FBTyxFQUNMLHVCQUF1QixFQUV2QixTQUFTLEVBRVQsWUFBWSxFQUNaLEtBQUssRUFFTCxNQUFNLEVBRU4saUJBQWlCLEVBQ2xCLE1BQU0sZUFBZSxDQUFDOzs7Ozs7Ozs7SUNidkIsb0NBR2lGO0lBRGQsaU1BQWlCLDRCQUFxQixJQUFDLHdLQUMxRixrQkFBVyxJQUQrRTtJQUV4Ryx1QkFBNEM7SUFDOUMsaUJBQVM7Ozs7SUFKZ0YscUNBQXdCLDRDQUFBLDJCQUFBOzs7SUFXM0csNkJBQXlHO0lBQUEsWUFDdEY7SUFBQSwwQkFBZTs7O0lBRHVFLGVBQ3RGO0lBRHNGLHVDQUN0Rjs7Ozs7SUFKckIsOEJBRXVFO0lBQXJFLGtPQUFTLHlCQUFjLElBQUMsdU9BQWdCLHNDQUEyQixJQUEzQztJQUN4QixvR0FDa0M7SUFDcEMsaUJBQU07OztJQUpKLHdFQUE0RDtJQUFDLHlDQUF3Qiw4QkFBQTtJQUV0RSxlQUF5QztJQUF6QywyREFBeUMsOEVBQUE7Ozs7SUFLOUQsa0NBQTJGO0lBQTVCLDZLQUFTLHlCQUFpQixJQUFDO0lBQUMsaUJBQVM7OztJQUF6RCx3Q0FBbUI7O0FEbUQ5RCxNQUFNLE9BQU8sMkJBQTJCO0lBYXRDLFlBQW1CLEdBQXNCLEVBQVUsVUFBbUM7UUFBbkUsUUFBRyxHQUFILEdBQUcsQ0FBbUI7UUFBVSxlQUFVLEdBQVYsVUFBVSxDQUF5QjtRQVo3RSxVQUFLLEdBQTZCLEVBQUUsQ0FBQztRQUNyQyxZQUFPLEdBQVksS0FBSyxDQUFDO1FBQ3pCLFlBQU8s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biAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXHJcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgQ29tcG9uZW50LFxyXG4gIEVsZW1lbnRSZWYsXHJcbiAgRXZlbnRFbWl0dGVyLFxyXG4gIElucHV0LFxyXG4gIE9uRGVzdHJveSxcclxuICBPdXRwdXQsXHJcbiAgVGVtcGxhdGVSZWYsXHJcbiAgVmlld0VuY2Fwc3VsYXRpb25cclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbmltcG9ydCB7IFREU1NhZmVBbnkgfSBmcm9tICd0ZHMtdWkvc2hhcmVkL3V0aWxpdHknO1xyXG5cclxuaW1wb3J0IHsgVERTVGFiTmF2SXRlbURpcmVjdGl2ZSB9IGZyb20gJy4vdGFiLW5hdi1pdGVtLmRpcmVjdGl2ZSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ3Rkcy10YWItbmF2LW9wZXJhdGlvbicsXHJcbiAgZXhwb3J0QXM6ICd0ZHNUYWJOYXZPcGVyYXRpb24nLFxyXG4gIHByZXNlcnZlV2hpdGVzcGFjZXM6IGZhbHNlLFxyXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxyXG4gIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXHJcbiAgdGVtcGxhdGVVcmw6Jy4vdGFiLW5hdi1vcGVyYXRpb24uY29tcG9uZW50Lmh0bWwnLFxyXG4gIC8vIHRlbXBsYXRlOiBgPGRpdj48L2Rpdj5gLFxyXG4gIC8vIHRlbXBsYXRlOiBgPGRpdj48L2Rpdj5cclxuICAvLyAgIDxidXR0b25cclxuICAvLyAgICAgdGRzLWRyb3Bkb3duXHJcbiAgLy8gICAgIGNsYXNzPVwidGRzLXRhYnMtbmF2LW1vcmVcIlxyXG4gIC8vICAgICB0eXBlPVwiYnV0dG9uXCJcclxuICAvLyAgICAgdGFiaW5kZXg9XCItMVwiXHJcbiAgLy8gICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXHJcbiAgLy8gICAgIG92ZXJsYXlDbGFzc05hbWU9XCJ0ZHMtdGFicy1kcm9wZG93blwiXHJcbiAgLy8gICAgICNkcm9wZG93blRyaWdnZXI9XCJ0ZHNEcm9wZG93blwiXHJcbiAgLy8gICAgIFt0ZHNEcm9wZG93bk1lbnVdPVwibWVudVwiXHJcbiAgLy8gICAgIFtvdmVybGF5U3R5bGVdPVwieyBtaW5XaWR0aDogJzQ2cHgnIH1cIlxyXG4gIC8vICAgICBbbnpNYXRjaFdpZHRoRWxlbWVudF09XCJudWxsXCJcclxuICAvLyAgICAgKHZpc2libGVDaGFuZ2UpPVwibWVudVZpc0NoYW5nZSgkZXZlbnQpXCJcclxuICAvLyAgICAgKG1vdXNlZW50ZXIpPVwic2hvd0l0ZW1zKClcIlxyXG4gIC8vICAgPlxyXG4gIC8vICAgICA8aSBjbGFzcz0ndGRzaS10aHJlZS1kb3RzLWhvcml6b24tZmlsbCc+PC9pPlxyXG4gIC8vICAgPC9idXR0b24+XHJcbiAgLy8gICA8dGRzLWRyb3Bkb3duLW1lbnUgI21lbnU9XCJ0ZHNEcm9wZG93bk1lbnVcIj5cclxuICAvLyAgICAgPHVsIG56LW1lbnUgKm5nSWY9XCJtZW51T3BlbmVkXCI+XHJcbiAgLy8gICAgICAgPGxpXHJcbiAgLy8gICAgICAgICBuei1tZW51LWl0ZW1cclxuICAvLyAgICAgICAgICpuZ0Zvcj1cImxldCBpdGVtIG9mIGl0ZW1zXCJcclxuICAvLyAgICAgICAgIGNsYXNzPVwidGRzLXRhYnMtZHJvcGRvd24tbWVudS1pdGVtXCJcclxuICAvLyAgICAgICAgIFtjbGFzcy50ZHMtdGFicy1kcm9wZG93bi1tZW51LWl0ZW0tZGlzYWJsZWRdPVwiaXRlbS5kaXNhYmxlZFwiXHJcbiAgLy8gICAgICAgICBbbnpTZWxlY3RlZF09XCJpdGVtLmFjdGl2ZVwiXHJcbiAgLy8gICAgICAgICBbZGlzYWJsZWRdPVwiaXRlbS5kaXNhYmxlZFwiXHJcbiAgLy8gICAgICAgICAoY2xpY2spPVwib25TZWxlY3QoaXRlbSlcIlxyXG4gIC8vICAgICAgICAgKGNvbnRleHRtZW51KT1cIm9uQ29udGV4dG1lbnUoaXRlbSwgJGV2ZW50KVwiXHJcbiAgLy8gICAgICAgPlxyXG4gIC8vICAgICAgICAgPG5nLWNvbnRhaW5lciAqdGRzU3RyaW5nVGVtcGxhdGVPdXRsZXQ9XCJpdGVtLnRhYi5sYWJlbDsgY29udGV4dDogeyB2aXNpYmxlOiBmYWxzZSB9XCI+e3sgaXRlbS50YWIubGFiZWwgfX08L25nLWNvbnRhaW5lcj5cclxuICAvLyAgICAgICA8L2xpPlxyXG4gIC8vICAgICA8L3VsPlxyXG4gIC8vICAgPC90ZHMtZHJvcGRvd24tbWVudT5cclxuICAvLyAgIDxidXR0b24gKm5nSWY9XCJhZGRhYmxlXCIgdGRzLXRhYi1hZGQtYnV0dG9uIFthZGRJY29uXT1cImFkZEljb25cIiAoY2xpY2spPVwiYWRkQ2xpY2tlZC5lbWl0KClcIj48L2J1dHRvbj5cclxuICAvLyBgLFxyXG4gIGhvc3Q6IHtcclxuICAgIGNsYXNzOiAndGRzLXRhYnMtbmF2LW9wZXJhdGlvbnMgZmxleCBpdGVtcy1zdHJldGNoJyxcclxuICAgICdbY2xhc3MudGRzLXRhYnMtbmF2LW9wZXJhdGlvbnMtaGlkZGVuXSc6ICdpdGVtcy5sZW5ndGggPT09IDAnLFxyXG4gICAgJ1tjbGFzcy5oaWRkZW5dJzogJ2l0ZW1zLmxlbmd0aCA9PT0gMCdcclxuICB9XHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBURFNUYWJOYXZPcGVyYXRpb25Db21wb25lbnQgaW1wbGVtZW50cyBPbkRlc3Ryb3kge1xyXG4gIEBJbnB1dCgpIGl0ZW1zOiBURFNUYWJOYXZJdGVtRGlyZWN0aXZlW10gPSBbXTtcclxuICBASW5wdXQoKSBhZGRhYmxlOiBib29sZWFuID0gZmFsc2U7XHJcbiAgQElucHV0KCkgYWRkSWNvbjogc3RyaW5nIHwgVGVtcGxhdGVSZWY8VERTU2FmZUFueT4gPSAncGx1cyc7XHJcbiAgQElucHV0KCkgaGlkZW5OZXh0QnRuIDogYm9vbGVhbiA9ZmFsc2U7XHJcbiAgQE91dHB1dCgpIHJlYWRvbmx5IG5leHRDbGlja2VkID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xyXG4gIEBPdXRwdXQoKSByZWFkb25seSBhZGRDbGlja2VkID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xyXG4gIEBPdXRwdXQoKSByZWFkb25seSBzZWxlY3RlZCA9IG5ldyBFdmVudEVtaXR0ZXI8VERTVGFiTmF2SXRlbURpcmVjdGl2ZT4oKTtcclxuXHJcbiAgY2xvc2VBbmltYXRpb25XYWl0VGltZW91dElkOlREU1NhZmVBbnkgPSAtMTtcclxuICBtZW51T3BlbmVkID0gZmFsc2U7XHJcblxyXG4gIHByaXZhdGUgcmVhZG9ubHkgZWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcbiAgY29uc3RydWN0b3IocHVibGljIGNkcjogQ2hhbmdlRGV0ZWN0b3JSZWYsIHByaXZhdGUgZWxlbWVudFJlZjogRWxlbWVudFJlZjxIVE1MRWxlbWVudD4pIHtcclxuICAgIHRoaXMuZWxlbWVudCA9IHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgb25TZWxlY3QoaXRlbTogVERTVGFiTmF2SXRlbURpcmVjdGl2ZSk6IHZvaWQge1xyXG4gICAgaWYgKCFpdGVtLmRpc2FibGVkKSB7XHJcbiAgICAgIC8vIGlnbm9yZSBvbkNhbkRlYWN0aXZhdGVcclxuICAgICAgaXRlbS50YWIudGFiQ2xpY2suZW1pdCgpO1xyXG4gICAgICB0aGlzLnNlbGVjdGVkLmVtaXQoaXRlbSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbkNvbnRleHRtZW51KGl0ZW06IFREU1RhYk5hdkl0ZW1EaXJlY3RpdmUsIGU6IE1vdXNlRXZlbnQpOiB2b2lkIHtcclxuICAgIGlmICghaXRlbS5kaXNhYmxlZCkge1xyXG4gICAgICBpdGVtLnRhYi50YWJDb250ZXh0bWVudS5lbWl0KGUpO1xyXG4gICAgfVxyXG4gIH1cclxuICBzaG93SXRlbXMoKTogdm9pZCB7XHJcbiAgICBjbGVhclRpbWVvdXQodGhpcy5jbG9zZUFuaW1hdGlvbldhaXRUaW1lb3V0SWQpO1xyXG4gICAgdGhpcy5tZW51T3BlbmVkID0gdHJ1ZTtcclxuICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xyXG4gIH1cclxuXHJcbiAgbWVudVZpc0NoYW5nZSh2aXNpYmxlOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICBpZiAoIXZpc2libGUpIHtcclxuICAgICAgdGhpcy5jbG9zZUFuaW1hdGlvbldhaXRUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICB0aGlzLm1lbnVPcGVuZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgfSwgMTUwKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldEVsZW1lbnRXaWR0aCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudD8ub2Zmc2V0V2lkdGggfHwgMDtcclxuICB9XHJcblxyXG4gIGdldEVsZW1lbnRIZWlnaHQoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLmVsZW1lbnQ/Lm9mZnNldEhlaWdodCB8fCAwO1xyXG4gIH1cclxuXHJcbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICBjbGVhclRpbWVvdXQodGhpcy5jbG9zZUFuaW1hdGlvbldhaXRUaW1lb3V0SWQpO1xyXG4gIH1cclxuICBvbmNsaWNrTmV4dChlOk1vdXNlRXZlbnQpXHJcbiAge1xyXG4gICAgdGhpcy5uZXh0Q2xpY2tlZC5lbWl0KCk7XHJcbiAgfVxyXG59XHJcbiIsIjxidXR0b24gKm5nSWY9XCIhaGlkZW5OZXh0QnRuXCIgdGRzLWRyb3Bkb3duIGNsYXNzPVwidGRzLXRhYnMtbmF2LW1vcmUgcHgtMiBweS00XCIgdHlwZT1cImJ1dHRvblwiIHRhYmluZGV4PVwiLTFcIlxyXG4gIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIG92ZXJsYXlDbGFzc05hbWU9XCJ0ZHMtdGFicy1kcm9wZG93blwiICNkcm9wZG93blRyaWdnZXI9XCJ0ZHNEcm9wZG93blwiIFt0ZHNEcm9wZG93bk1lbnVdPVwibWVudVwiXHJcbiAgW292ZXJsYXlTdHlsZV09XCJ7IG1pbldpZHRoOiAnNDZweCcgfVwiIFttYXRjaFdpZHRoRWxlbWVudF09XCJudWxsXCIgKHZpc2libGVDaGFuZ2UpPVwibWVudVZpc0NoYW5nZSgkZXZlbnQpXCJcclxuICAobW91c2VlbnRlcik9XCJzaG93SXRlbXMoKVwiIHN0eWxlPVwiYm94LXNoYWRvdzotMTJweCAwIDhweCAtNHB4IHJnYigwIDAgMCAvIDglKVwiPlxyXG4gIDxpIGNsYXNzPSd0ZHNpLXRocmVlLWRvdHMtaG9yaXpvbi1maWxsJz48L2k+XHJcbjwvYnV0dG9uPlxyXG48dGRzLWRyb3Bkb3duLW1lbnUgI21lbnU9XCJ0ZHNEcm9wZG93bk1lbnVcIj5cclxuICA8ZGl2IGNsYXNzPVwidy1mdWxsIHB5LTIgIG92ZXJmbG93LXktYXV0byB0ZHMtY3VzdG9tLXNjcm9sbCBiZy13aGl0ZSBkYXJrOmJnLWQtbmV1dHJhbC0zLTIwMCBzaGFkb3ctMS1sZ1wiXHJcbiAgICBzdHlsZT1cIm1heC1oZWlnaHQ6IDIwMHB4O21pbi13aWR0aDogMTUwcHhcIj5cclxuICAgIDxkaXYgdGRzLWRyb3Bkb3duLWl0ZW0gKm5nRm9yPVwibGV0IGl0ZW0gb2YgaXRlbXNcIiBjbGFzcz1cInRkcy10YWJzLWRyb3Bkb3duLW1lbnUtaXRlbVwiXHJcbiAgICAgIFtjbGFzcy50ZHMtdGFicy1kcm9wZG93bi1tZW51LWl0ZW0tZGlzYWJsZWRdPVwiaXRlbS5kaXNhYmxlZFwiIFtzZWxlY3RlZF09XCJpdGVtLmFjdGl2ZVwiIFtkaXNhYmxlZF09XCJpdGVtLmRpc2FibGVkXCJcclxuICAgICAgKGNsaWNrKT1cIm9uU2VsZWN0KGl0ZW0pXCIgKGNvbnRleHRtZW51KT1cIm9uQ29udGV4dG1lbnUoaXRlbSwgJGV2ZW50KVwiPlxyXG4gICAgICA8bmctY29udGFpbmVyICp0ZHNTdHJpbmdUZW1wbGF0ZU91dGxldD1cIml0ZW0udGFiLmxhYmVsOyBjb250ZXh0OiB7IHZpc2libGU6IGZhbHNlICxhY3RpdmU6aXRlbS5hY3RpdmUgfVwiPnt7XHJcbiAgICAgICAgaXRlbS50YWIubGFiZWwgfX08L25nLWNvbnRhaW5lcj5cclxuICAgIDwvZGl2PlxyXG4gIDwvZGl2PlxyXG48L3Rkcy1kcm9wZG93bi1tZW51PlxyXG48YnV0dG9uICpuZ0lmPVwiYWRkYWJsZVwiIHRkcy10YWItYWRkLWJ1dHRvbiBbYWRkSWNvbl09XCJhZGRJY29uXCIgKGNsaWNrKT1cImFkZENsaWNrZWQuZW1pdCgpXCI+PC9idXR0b24+Il19