import { ChangeDetectionStrategy, Component, EventEmitter, Input, Output, ViewEncapsulation } from '@angular/core';
import { CandyDate } from 'tds-ui/core/time';
import * as i0 from "@angular/core";
import * as i1 from "tds-ui/i18n";
import * as i2 from "tds-ui/radio";
import * as i3 from "@angular/forms";
import * as i4 from "@angular/common";
import * as i5 from "tds-ui/button";
import * as i6 from "./tds-calendar-datepicker.component";
function TDSCalendarHeaderComponent_button_10_Template(rf, ctx) { if (rf & 1) {
    const _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 7);
    i0.ɵɵlistener("click", function TDSCalendarHeaderComponent_button_10_Template_button_click_0_listener($event) { i0.ɵɵrestoreView(_r2); const ctx_r1 = i0.ɵɵnextContext(); return ctx_r1.onToday($event); });
    i0.ɵɵelementStart(1, "span", 8);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd()();
} if (rf & 2) {
    const ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", ctx_r0.toDayTypeText, " ");
} }
export class TDSCalendarHeaderComponent {
    constructor(i18n, dateHelper, cdr) {
        this.i18n = i18n;
        this.dateHelper = dateHelper;
        this.cdr = cdr;
        this.tdsMode = 'month';
        this.tdsFullscreen = true;
        this.tdsViewDate = new Date();
        this.tdsModeChange = new EventEmitter();
        this.tdsActiveDateChange = new EventEmitter();
        this.tdsViewDateChange = new EventEmitter();
        this.hiddenTodaybtn = false;
        this.activeDate = new CandyDate();
    }
    get activeYear() {
        return this.activeDate.getYear();
    }
    get activeMonth() {
        return this.activeDate.getMonth();
    }
    get size() {
        return this.tdsFullscreen ? 'md' : 'sm';
    }
    get dayTypeText() {
        return this.i18n.getLocale().Calendar.lang.day;
    }
    get weekTypeText() {
        return this.i18n.getLocale().Calendar.lang.week;
    }
    get yearTypeText() {
        return this.i18n.getLocale().Calendar.lang.year;
    }
    get monthTypeText() {
        return this.i18n.getLocale().Calendar.lang.month;
    }
    get toDayTypeText() {
        return this.i18n.getLocale().Calendar.lang.today;
    }
    ngOnInit() {
        this.updateDate(this.tdsViewDate);
    }
    onToday(e) {
        e.preventDefault();
        e.stopImmediatePropagation();
        this.activeDate = new CandyDate(new Date());
        this.tdsViewDateChange.emit(this.activeDate.nativeDate);
        // this.checkHiddenTodayBtn();    
    }
    onModeChange(e) {
        this.tdsModeChange.emit(e);
        this.checkHiddenTodayBtn();
    }
    onValueChange(date) {
        this.tdsActiveDateChange.emit(new CandyDate(date));
        this.tdsViewDateChange.emit(date);
        this.checkHiddenTodayBtn();
    }
    ngOnChanges(changes) {
        if (changes.tdsViewDate) {
            this.updateDate(this.tdsViewDate);
            this.checkHiddenTodayBtn();
        }
    }
    updateDate(date) {
        this.activeDate = new CandyDate(date);
    }
    checkHiddenTodayBtn() {
        this.hiddenTodaybtn = this.tdsMode == "date" && !this.activeDate.isSame(new Date());
        this.cdr.markForCheck();
    }
}
TDSCalendarHeaderComponent.ɵfac = function TDSCalendarHeaderComponent_Factory(t) { return new (t || TDSCalendarHeaderComponent)(i0.ɵɵdirectiveInject(i1.TDSI18nService), i0.ɵɵdirectiveInject(i1.DateHelperService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef)); };
TDSCalendarHeaderComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: TDSCalendarHeaderComponent, selectors: [["tds-calendar-header"]], hostAttrs: [1, "tds-fullcalendar-header", "tds-picker-calendar-header", "w-full", "flex", "items-center", "justify-between", "py-2", "px-3"], inputs: { tdsMode: "tdsMode", tdsFullscreen: "tdsFullscreen", tdsViewDate: "tdsViewDate" }, outputs: { tdsModeChange: "tdsModeChange", tdsActiveDateChange: "tdsActiveDateChange", tdsViewDateChange: "tdsViewDateChange" }, exportAs: ["tdsCalendarHeader"], features: [i0.ɵɵNgOnChangesFeature], decls: 14, vars: 12, consts: [[1, "tds-calendar-header-left", "flex", "items-center"], [1, "mr-2", 3, "ngModel", "ngModelChange"], ["tds-radio-button", "", 3, "value"], ["tds-button-flat", "", "color", "primary", 3, "click", 4, "ngIf"], [1, "tds-calendar-header-middle"], [3, "tdsViewDate", "tdsMode", "tdsViewDateChange"], [1, "tds-calendar-header-right", "min-w-[30%]"], ["tds-button-flat", "", "color", "primary", 3, "click"], [1, "flex", "items-center"]], template: function TDSCalendarHeaderComponent_Template(rf, ctx) { if (rf & 1) {
        i0.ɵɵelementStart(0, "div", 0)(1, "tds-radio-group", 1);
        i0.ɵɵlistener("ngModelChange", function TDSCalendarHeaderComponent_Template_tds_radio_group_ngModelChange_1_listener($event) { return ctx.tdsMode = $event; })("ngModelChange", function TDSCalendarHeaderComponent_Template_tds_radio_group_ngModelChange_1_listener($event) { return ctx.onModeChange($event); });
        i0.ɵɵelementStart(2, "label", 2);
        i0.ɵɵtext(3);
        i0.ɵɵelementEnd();
        i0.ɵɵelementStart(4, "label", 2);
        i0.ɵɵtext(5);
        i0.ɵɵelementEnd();
        i0.ɵɵelementStart(6, "label", 2);
        i0.ɵɵtext(7);
        i0.ɵɵelementEnd();
        i0.ɵɵelementStart(8, "label", 2);
        i0.ɵɵtext(9);
        i0.ɵɵelementEnd()();
        i0.ɵɵtemplate(10, TDSCalendarHeaderComponent_button_10_Template, 3, 1, "button", 3);
        i0.ɵɵelementEnd();
        i0.ɵɵelementStart(11, "div", 4)(12, "tds-calendar-datepicker", 5);
        i0.ɵɵlistener("tdsViewDateChange", function TDSCalendarHeaderComponent_Template_tds_calendar_datepicker_tdsViewDateChange_12_listener($event) { return ctx.onValueChange($event); });
        i0.ɵɵelementEnd()();
        i0.ɵɵelement(13, "div", 6);
    } if (rf & 2) {
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngModel", ctx.tdsMode);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("value", "date");
        i0.ɵɵadvance(1);
        i0.ɵɵtextInterpolate(ctx.dayTypeText);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("value", "week");
        i0.ɵɵadvance(1);
        i0.ɵɵtextInterpolate(ctx.weekTypeText);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("value", "month");
        i0.ɵɵadvance(1);
        i0.ɵɵtextInterpolate(ctx.monthTypeText);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("value", "year");
        i0.ɵɵadvance(1);
        i0.ɵɵtextInterpolate(ctx.yearTypeText);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngIf", ctx.hiddenTodaybtn);
        i0.ɵɵadvance(2);
        i0.ɵɵproperty("tdsViewDate", ctx.tdsViewDate)("tdsMode", ctx.tdsMode);
    } }, directives: [i2.TDSRadioGroupComponent, i3.NgControlStatus, i3.NgModel, i2.TDSRadioComponent, i2.TDSRadioButtonDirective, i4.NgIf, i5.TDSButtonFlatComponent, i6.TDSCalendarDatepickerComponent], encapsulation: 2, changeDetection: 0 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(TDSCalendarHeaderComponent, [{
        type: Component,
        args: [{
                encapsulation: ViewEncapsulation.None,
                changeDetection: ChangeDetectionStrategy.OnPush,
                selector: 'tds-calendar-header',
                exportAs: 'tdsCalendarHeader',
                template: `
    <div class="tds-calendar-header-left flex items-center ">
          <tds-radio-group class="mr-2" [(ngModel)]="tdsMode" (ngModelChange)="onModeChange($event)">
            <label tds-radio-button [value]="'date'">{{dayTypeText}}</label>
            <label tds-radio-button [value]="'week'">{{weekTypeText}}</label>
            <label tds-radio-button [value]="'month'">{{monthTypeText}}</label>
            <label tds-radio-button [value]="'year'">{{yearTypeText}}</label>            
          </tds-radio-group>
          <button tds-button-flat color="primary" *ngIf="hiddenTodaybtn" (click)="onToday($event)">
            <span class="flex items-center"> {{toDayTypeText}} </span>
          </button>
        </div>
        <div class="tds-calendar-header-middle">
          <tds-calendar-datepicker [tdsViewDate]="tdsViewDate" [tdsMode]="tdsMode" (tdsViewDateChange)="onValueChange($event)"></tds-calendar-datepicker>
        </div>
        <div class="tds-calendar-header-right min-w-[30%]">
        <!-- <tds-radio-group [(ngModel)]="tdsMode">
            <label tds-radio-button [value]="'date'">Hangzhou</label>
            <label tds-radio-button [value]="'week'">Chengdu</label>
            <label tds-radio-button [value]="'month'">Shanghai</label>
            <label tds-radio-button [value]="'year'">Beijing</label>            
          </tds-radio-group> -->
        </div>
  `,
                host: {
                    class: 'tds-fullcalendar-header tds-picker-calendar-header w-full flex items-center justify-between py-2 px-3',
                }
            }]
    }], function () { return [{ type: i1.TDSI18nService }, { type: i1.DateHelperService }, { type: i0.ChangeDetectorRef }]; }, { tdsMode: [{
            type: Input
        }], tdsFullscreen: [{
            type: Input
        }], tdsViewDate: [{
            type: Input
        }], tdsModeChange: [{
            type: Output
        }], tdsActiveDateChange: [{
            type: Output
        }], tdsViewDateChange: [{
            type: Output
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FsZW5kYXItaGVhZGVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL3Rkcy11aS9jYWxlbmRhci9jYWxlbmRhci1oZWFkZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE9BQU8sRUFDTCx1QkFBdUIsRUFFdkIsU0FBUyxFQUNULFlBQVksRUFDWixLQUFLLEVBR0wsTUFBTSxFQUVOLGlCQUFpQixFQUNsQixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7Ozs7Ozs7Ozs7SUFtQm5DLGlDQUF5RjtJQUExQixpTEFBUyxzQkFBZSxJQUFDO0lBQ3RGLCtCQUFnQztJQUFDLFlBQWtCO0lBQUEsaUJBQU8sRUFBQTs7O0lBQXpCLGVBQWtCO0lBQWxCLHFEQUFrQjs7QUFvQi9ELE1BQU0sT0FBTywwQkFBMEI7SUFxQ3JDLFlBQ1UsSUFBVSxFQUFVLFVBQTZCLEVBQ2pELEdBQXNCO1FBRHRCLFNBQUksR0FBSixJQUFJLENBQU07UUFBVSxlQUFVLEdBQVYsVUFBVSxDQUFtQjtRQUNqRCxRQUFHLEdBQUgsR0FBRyxDQUFtQjtRQXRDdkIsWUFBTyxHQUFvQixPQUFPLENBQUM7UUFDbkMsa0JBQWEsR0FBWSxJQUFJLENBQUM7UUFDOUIsZ0JBQVcsR0FBUyxJQUFJLElBQUksRUFBRSxDQUFDO1FBQ3JCLGtCQUFhLEdBQWtDLElBQUksWUFBWSxFQUFFLENBQUM7UUFDbEUsd0JBQW1CLEdBQTRCLElBQUksWUFBWSxFQUFFLENBQUM7UUFDbEUsc0JBQWlCLEdBQXVCLElBQUksWUFBWSxFQUFFLENBQUM7UUFDOUUsbUJBQWMsR0FBRyxLQUFLLENBQUM7UUFDdkIsZUFBVSxHQUFjLElBQUksU0FBUyxFQUFFLENBQUM7SUFnQ3BDLENBQUM7SUEvQkwsSUFBSSxVQUFVO1FBQ1osT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8s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O2tCQUFuQyxNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiXHJcblxyXG5pbXBvcnQge1xyXG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxyXG4gIENoYW5nZURldGVjdG9yUmVmLFxyXG4gIENvbXBvbmVudCxcclxuICBFdmVudEVtaXR0ZXIsXHJcbiAgSW5wdXQsXHJcbiAgT25DaGFuZ2VzLFxyXG4gIE9uSW5pdCxcclxuICBPdXRwdXQsXHJcbiAgU2ltcGxlQ2hhbmdlcyxcclxuICBWaWV3RW5jYXBzdWxhdGlvblxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBDYW5keURhdGUgfSBmcm9tICd0ZHMtdWkvY29yZS90aW1lJztcclxuaW1wb3J0IHsgVERTQ2FsZW5kYXJNb2RlIH0gZnJvbSAndGRzLXVpL2RhdGUtcGlja2VyJztcclxuaW1wb3J0IHsgRGF0ZUhlbHBlclNlcnZpY2UsIFREU0kxOG5TZXJ2aWNlIGFzIEkxOG4gfSBmcm9tICd0ZHMtdWkvaTE4bic7XHJcblxyXG5cclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXHJcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXHJcbiAgc2VsZWN0b3I6ICd0ZHMtY2FsZW5kYXItaGVhZGVyJyxcclxuICBleHBvcnRBczogJ3Rkc0NhbGVuZGFySGVhZGVyJyxcclxuICB0ZW1wbGF0ZTogYFxyXG4gICAgPGRpdiBjbGFzcz1cInRkcy1jYWxlbmRhci1oZWFkZXItbGVmdCBmbGV4IGl0ZW1zLWNlbnRlciBcIj5cclxuICAgICAgICAgIDx0ZHMtcmFkaW8tZ3JvdXAgY2xhc3M9XCJtci0yXCIgWyhuZ01vZGVsKV09XCJ0ZHNNb2RlXCIgKG5nTW9kZWxDaGFuZ2UpPVwib25Nb2RlQ2hhbmdlKCRldmVudClcIj5cclxuICAgICAgICAgICAgPGxhYmVsIHRkcy1yYWRpby1idXR0b24gW3ZhbHVlXT1cIidkYXRlJ1wiPnt7ZGF5VHlwZVRleHR9fTwvbGFiZWw+XHJcbiAgICAgICAgICAgIDxsYWJlbCB0ZHMtcmFkaW8tYnV0dG9uIFt2YWx1ZV09XCInd2VlaydcIj57e3dlZWtUeXBlVGV4dH19PC9sYWJlbD5cclxuICAgICAgICAgICAgPGxhYmVsIHRkcy1yYWRpby1idXR0b24gW3ZhbHVlXT1cIidtb250aCdcIj57e21vbnRoVHlwZVRleHR9fTwvbGFiZWw+XHJcbiAgICAgICAgICAgIDxsYWJlbCB0ZHMtcmFkaW8tYnV0dG9uIFt2YWx1ZV09XCIneWVhcidcIj57e3llYXJUeXBlVGV4dH19PC9sYWJlbD4gICAgICAgICAgICBcclxuICAgICAgICAgIDwvdGRzLXJhZGlvLWdyb3VwPlxyXG4gICAgICAgICAgPGJ1dHRvbiB0ZHMtYnV0dG9uLWZsYXQgY29sb3I9XCJwcmltYXJ5XCIgKm5nSWY9XCJoaWRkZW5Ub2RheWJ0blwiIChjbGljayk9XCJvblRvZGF5KCRldmVudClcIj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPiB7e3RvRGF5VHlwZVRleHR9fSA8L3NwYW4+XHJcbiAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwidGRzLWNhbGVuZGFyLWhlYWRlci1taWRkbGVcIj5cclxuICAgICAgICAgIDx0ZHMtY2FsZW5kYXItZGF0ZXBpY2tlciBbdGRzVmlld0RhdGVdPVwidGRzVmlld0RhdGVcIiBbdGRzTW9kZV09XCJ0ZHNNb2RlXCIgKHRkc1ZpZXdEYXRlQ2hhbmdlKT1cIm9uVmFsdWVDaGFuZ2UoJGV2ZW50KVwiPjwvdGRzLWNhbGVuZGFyLWRhdGVwaWNrZXI+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInRkcy1jYWxlbmRhci1oZWFkZXItcmlnaHQgbWluLXctWzMwJV1cIj5cclxuICAgICAgICA8IS0tIDx0ZHMtcmFkaW8tZ3JvdXAgWyhuZ01vZGVsKV09XCJ0ZHNNb2RlXCI+XHJcbiAgICAgICAgICAgIDxsYWJlbCB0ZHMtcmFkaW8tYnV0dG9uIFt2YWx1ZV09XCInZGF0ZSdcIj5IYW5nemhvdTwvbGFiZWw+XHJcbiAgICAgICAgICAgIDxsYWJlbCB0ZHMtcmFkaW8tYnV0dG9uIFt2YWx1ZV09XCInd2VlaydcIj5DaGVuZ2R1PC9sYWJlbD5cclxuICAgICAgICAgICAgPGxhYmVsIHRkcy1yYWRpby1idXR0b24gW3ZhbHVlXT1cIidtb250aCdcIj5TaGFuZ2hhaTwvbGFiZWw+XHJcbiAgICAgICAgICAgIDxsYWJlbCB0ZHMtcmFkaW8tYnV0dG9uIFt2YWx1ZV09XCIneWVhcidcIj5CZWlqaW5nPC9sYWJlbD4gICAgICAgICAgICBcclxuICAgICAgICAgIDwvdGRzLXJhZGlvLWdyb3VwPiAtLT5cclxuICAgICAgICA8L2Rpdj5cclxuICBgLFxyXG4gIGhvc3Q6IHtcclxuICAgIGNsYXNzOiAndGRzLWZ1bGxjYWxlbmRhci1oZWFkZXIgdGRzLXBpY2tlci1jYWxlbmRhci1oZWFkZXIgdy1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBweS0yIHB4LTMnLFxyXG5cclxuICB9XHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBURFNDYWxlbmRhckhlYWRlckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzIHtcclxuICBASW5wdXQoKSB0ZHNNb2RlOiBURFNDYWxlbmRhck1vZGUgPSAnbW9udGgnO1xyXG4gIEBJbnB1dCgpIHRkc0Z1bGxzY3JlZW46IGJvb2xlYW4gPSB0cnVlO1xyXG4gIEBJbnB1dCgpIHRkc1ZpZXdEYXRlOiBEYXRlID0gbmV3IERhdGUoKTtcclxuICBAT3V0cHV0KCkgcmVhZG9ubHkgdGRzTW9kZUNoYW5nZTogRXZlbnRFbWl0dGVyPFREU0NhbGVuZGFyTW9kZT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgQE91dHB1dCgpIHJlYWRvbmx5IHRkc0FjdGl2ZURhdGVDaGFuZ2U6IEV2ZW50RW1pdHRlcjxDYW5keURhdGU+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gIEBPdXRwdXQoKSByZWFkb25seSB0ZHNWaWV3RGF0ZUNoYW5nZTogRXZlbnRFbWl0dGVyPERhdGU+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gIGhpZGRlblRvZGF5YnRuID0gZmFsc2U7XHJcbiAgYWN0aXZlRGF0ZTogQ2FuZHlEYXRlID0gbmV3IENhbmR5RGF0ZSgpO1xyXG4gIGdldCBhY3RpdmVZZWFyKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5hY3RpdmVEYXRlLmdldFllYXIoKTtcclxuICB9XHJcblxyXG4gIGdldCBhY3RpdmVNb250aCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuYWN0aXZlRGF0ZS5nZXRNb250aCgpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHNpemUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy50ZHNGdWxsc2NyZWVuID8gJ21kJyA6ICdzbSc7XHJcbiAgfVxyXG4gIGdldCBkYXlUeXBlVGV4dCgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMuaTE4bi5nZXRMb2NhbGUoKS5DYWxlbmRhci5sYW5nLmRheTtcclxuICB9XHJcbiAgZ2V0IHdlZWtUeXBlVGV4dCgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMuaTE4bi5nZXRMb2NhbGUoKS5DYWxlbmRhci5sYW5nLndlZWs7XHJcbiAgfVxyXG4gIGdldCB5ZWFyVHlwZVRleHQoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLmkxOG4uZ2V0TG9jYWxlKCkuQ2FsZW5kYXIubGFuZy55ZWFyO1xyXG4gIH1cclxuXHJcbiAgZ2V0IG1vbnRoVHlwZVRleHQoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLmkxOG4uZ2V0TG9jYWxlKCkuQ2FsZW5kYXIubGFuZy5tb250aDtcclxuICB9XHJcbiAgZ2V0IHRvRGF5VHlwZVRleHQoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLmkxOG4uZ2V0TG9jYWxlKCkuQ2FsZW5kYXIubGFuZy50b2RheTtcclxuICB9XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHJpdmF0ZSBpMThuOiBJMThuLCBwcml2YXRlIGRhdGVIZWxwZXI6IERhdGVIZWxwZXJTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBjZHI6IENoYW5nZURldGVjdG9yUmVmXHJcbiAgKSB7IH1cclxuXHJcbiAgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLnVwZGF0ZURhdGUodGhpcy50ZHNWaWV3RGF0ZSk7XHJcbiAgfVxyXG5cclxuICBvblRvZGF5KGU6IE1vdXNlRXZlbnQpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcbiAgICB0aGlzLmFjdGl2ZURhdGUgPSBuZXcgQ2FuZHlEYXRlKG5ldyBEYXRlKCkpO1xyXG4gICAgdGhpcy50ZHNWaWV3RGF0ZUNoYW5nZS5lbWl0KHRoaXMuYWN0aXZlRGF0ZS5uYXRpdmVEYXRlKTtcclxuICAgIC8vIHRoaXMuY2hlY2tIaWRkZW5Ub2RheUJ0bigpOyAgICBcclxuICB9XHJcbiAgb25Nb2RlQ2hhbmdlKGU6IFREU0NhbGVuZGFyTW9kZSkge1xyXG4gICAgdGhpcy50ZHNNb2RlQ2hhbmdlLmVtaXQoZSk7XHJcbiAgICB0aGlzLmNoZWNrSGlkZGVuVG9kYXlCdG4oKTtcclxuICB9XHJcbiAgb25WYWx1ZUNoYW5nZShkYXRlOiBEYXRlKSB7XHJcbiAgICB0aGlzLnRkc0FjdGl2ZURhdGVDaGFuZ2UuZW1pdChuZXcgQ2FuZHlEYXRlKGRhdGUpKTtcclxuICAgIHRoaXMudGRzVmlld0RhdGVDaGFuZ2UuZW1pdChkYXRlKTtcclxuICAgIHRoaXMuY2hlY2tIaWRkZW5Ub2RheUJ0bigpO1xyXG4gIH1cclxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XHJcbiAgICBpZiAoY2hhbmdlcy50ZHNWaWV3RGF0ZSkge1xyXG4gICAgICB0aGlzLnVwZGF0ZURhdGUodGhpcy50ZHNWaWV3RGF0ZSk7XHJcbiAgICAgIHRoaXMuY2hlY2tIaWRkZW5Ub2RheUJ0bigpO1xyXG4gICAgfVxyXG4gIH1cclxuICBwcml2YXRlIHVwZGF0ZURhdGUoZGF0ZTogRGF0ZSkge1xyXG4gICAgdGhpcy5hY3RpdmVEYXRlID0gbmV3IENhbmR5RGF0ZShkYXRlKTtcclxuICB9XHJcbiAgcHJpdmF0ZSBjaGVja0hpZGRlblRvZGF5QnRuKCkge1xyXG4gICAgdGhpcy5oaWRkZW5Ub2RheWJ0biA9IHRoaXMudGRzTW9kZSA9PSBcImRhdGVcIiAmJiAhdGhpcy5hY3RpdmVEYXRlLmlzU2FtZShuZXcgRGF0ZSgpKTtcclxuICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xyXG4gIH1cclxuIFxyXG59XHJcbiJdfQ==