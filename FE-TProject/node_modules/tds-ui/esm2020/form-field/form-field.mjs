import { ContentChild, ContentChildren, InjectionToken, Input, ViewChild, ViewEncapsulation } from "@angular/core";
import { Component, ChangeDetectionStrategy } from "@angular/core";
import { merge, Subject } from "rxjs";
import { startWith, takeUntil } from "rxjs/operators";
import { TDSHelperArray } from "tds-ui/shared/utility";
import { TDS_ADDONLEFT, TA_ADDONRIGHT } from "./add-on";
import { TDS_ERROR } from "./error";
import { tdsFormFieldAnimations } from "./form-field-animations";
import { mixinInputColor } from "./form-field-color";
import { TDSFormFieldControl } from "./form-field-control";
import { TDSLabel } from "./label";
import { TDS_PREFIX } from "./prefix";
import { TDS_SUFFIX } from "./suffix";
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "./form-field-container";
const _c0 = ["connectionContainer"];
const _c1 = ["inputContainer"];
function TDSFormField_div_2_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 13);
    i0.ɵɵprojection(1, 5);
    i0.ɵɵelementEnd();
} }
const _c2 = function (a0, a1, a2) { return { "px-2": a0, "px-2.5": a1, "bg-neutral-3-50 adrk:bg-d-neutral-3-50 rounded-l": a2 }; };
function TDSFormField_div_8_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 14);
    i0.ɵɵprojection(1, 6);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵproperty("ngClass", i0.ɵɵpureFunction3(1, _c2, ctx_r2.size === "sm", ctx_r2.size !== "sm", ctx_r2._control.disabled));
} }
const _c3 = function (a0, a1, a2, a3, a4) { return { "px-1.5": a0, "px-2": a1, "px-1": a2, "group-hover:bg-neutral-3-50 group-hover:rounded-r cursor-pointer dark:group-hover:bg-d-neutral-3-200 dark:bg-d-neutral-3-50 bg-white ": a3, "bg-neutral-3-50 adrk:bg-d-neutral-3-50 rounded-r ": a4 }; };
function TDSFormField_div_12_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 15);
    i0.ɵɵprojection(1, 7);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r4 = i0.ɵɵnextContext();
    i0.ɵɵproperty("ngClass", i0.ɵɵpureFunction5(1, _c3, ctx_r4.size === "md", ctx_r4.size === "lg", ctx_r4.size === "sm", !ctx_r4._control.disabled, ctx_r4._control.disabled));
} }
function TDSFormField_div_14_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div");
    i0.ɵɵprojection(1, 8);
    i0.ɵɵelementEnd();
} }
const _c4 = [[["", "tdsAddOnLeft", ""]], "*", [["tds-warning"]], [["tds-success"]], [["", "tdsAddOnRight", ""]], [["tds-label"]], [["", "tdsPrefix", ""]], [["", "tdsSuffix", ""]], [["tds-error"]]];
const _c5 = function (a0) { return { "opacity-65": a0 }; };
const _c6 = function (a0) { return { "w-full": a0 }; };
const _c7 = ["[tdsAddOnLeft]", "*", "tds-warning", "tds-success", "[tdsAddOnRight]", "tds-label", "[tdsPrefix]", "[tdsSuffix]", "tds-error"];
let nextUniqueId = 0;
/**
 * Boilerplate for applying mixins to TDSFormField.
 * @docs-private
 */
class TAFormFieldBase {
    constructor(_elementRef) {
        this._elementRef = _elementRef;
    }
}
/**
* Base class to which we're applying the form field mixins.
* @docs-private
*/
const _TAFormFieldMixinBase = mixinInputColor(TAFormFieldBase, 'default');
export const TDS_FORM_FIELD = new InjectionToken('TDSFormField');
export class TDSFormField {
    constructor(_elementRef, _changeDetectorRef) {
        this._elementRef = _elementRef;
        this._changeDetectorRef = _changeDetectorRef;
        this._destroyed = new Subject();
        this._color = "default";
        this._size = "md";
        this._tdsClass = 'dark:bg-d-neutral-3-50 border bg-white ';
        this._tdsClassDefault = 'dark:border-d-neutral-2-200 border-neutral-2-200';
        this.clsContainer = '';
        this.tdsClass = '';
        this._labelId = `tds-form-field-label-${nextUniqueId++}`;
    }
    get color() {
        return this._color;
    }
    set color(val) {
        this._color = val;
    }
    // @Input()
    get size() {
        return (this._control && this._control.size) ? this._control.size : this._size;
    }
    get _control() {
        // TODO(crisbeto): we need this workaround in order to support both Ivy and ViewEngine.
        //  We should clean this up once Ivy is the default renderer.
        return this._explicitFormFieldControl || this._controlNonStatic || this._controlStatic;
    }
    set _control(value) {
        this._explicitFormFieldControl = value;
    }
    /**
  * Gets an ElementRef for the element that a overlay attached to the form-field should be
  * positioned relative to.
  */
    getConnectedOverlayOrigin() {
        return this._connectionContainerRef || this._elementRef;
    }
    ngAfterContentInit() {
        this._validateControlChild();
        const control = this._control;
        if (control.controlType) {
            this._elementRef.nativeElement.classList.add(`tds-form-field-type-${control.controlType}`);
        }
        // Subscribe to changes in the child control state in order to update the form field UI.
        control.stateChanges.pipe(startWith(null)).subscribe(() => {
            this.updateCssContainer();
            this._syncDescribedByIds();
            this._changeDetectorRef.markForCheck();
        });
        // Run change detection if the value changes.
        if (control.ngControl && control.ngControl.valueChanges) {
            control.ngControl.valueChanges
                .pipe(takeUntil(this._destroyed))
                .subscribe(() => {
                this.updateCssContainer();
                this._changeDetectorRef.markForCheck();
            });
        }
        // Run change detection and update the outline if the suffix or prefix changes.
        merge(this._prefixChildren.changes, this._suffixChildren.changes).subscribe(() => {
            this._changeDetectorRef.markForCheck();
        });
        // Update the aria-described by when the number of errors changes.
        this._errorChildren.changes.pipe(startWith(null)).subscribe(() => {
            this._syncDescribedByIds();
            this.updateCssContainer();
            this._changeDetectorRef.markForCheck();
        });
    }
    ngAfterContentChecked() {
        this._validateControlChild();
    }
    ngAfterViewInit() {
        if (TDSHelperArray.hasListValue(this._labelChildChildren) && this.hasRequired)
            this._labelChildChildren.forEach(el => {
                el.updateRequired(this.hasRequired);
            });
        this._changeDetectorRef.detectChanges();
    }
    ngOnDestroy() {
        this._destroyed.next();
        this._destroyed.complete();
    }
    /**
      * Gets the id of the label element. If no label is present, returns `null`.
      */
    getLabelId() {
        return this._hasLabel() ? this._labelId : null;
    }
    /** Determines whether a class from the NgControl should be forwarded to the host element. */
    _shouldForward(prop) {
        const ngControl = this._control ? this._control.ngControl : null;
        return ngControl && ngControl[prop];
    }
    _hasPlaceholder() {
        return !!(this._control && this._control.placeholder);
    }
    _hasLabel() {
        return !!(this._labelChildNonStatic || this._labelChildStatic);
    }
    /** Determines whether to display hints or errors. */
    _getDisplayedMessages() {
        return (this._control.errorState) ? 'error' : this.color;
    }
    _hasAddOnRightChildren() {
        return this._addOnRightChildren && this._addOnRightChildren.length > 0;
    }
    _hasAddOnLeftChildren() {
        return this._addOnLeftChildren && this._addOnLeftChildren.length > 0;
    }
    _hasSuffixChildren() {
        return this._suffixChildren && this._suffixChildren.length > 0;
    }
    _hasPrefixChildren() {
        return this._prefixChildren && this._prefixChildren.length > 0;
    }
    get hasRequired() {
        return (this._control.required || this.hasRequiredValidator(this._control.ngControl?.control)) && !this._control.disabled;
    }
    hasRequiredValidator(control) {
        if (control?.validator) {
            const validator = control?.validator({});
            if (validator && validator.required) {
                return true;
            }
        }
        return false;
    }
    /**
     * Sets the list of element IDs that describe the child control. This allows the control to update
     * its `aria-describedby` attribute accordingly.
     */
    _syncDescribedByIds() {
        if (this._control) {
            let ids = [];
            // TODO(wagnermaciel): Remove the type check when we find the root cause of this bug.
            if (this._control.userAriaDescribedBy &&
                typeof this._control.userAriaDescribedBy === 'string') {
                ids.push(...this._control.userAriaDescribedBy.split(' '));
            }
            if (this._errorChildren) {
                ids.push(...this._errorChildren.map(error => error.id));
            }
            this._control.setDescribedByIds(ids);
        }
    }
    /** Throws an error if the form field's control is missing. */
    _validateControlChild() {
        if (!this._control) {
            throw 'tds-form-field must contain a TDSFormFieldControl.';
        }
    }
    updateCssContainer() {
        // console.log('updateCssContainer');
        let cls = this._tdsClass;
        if (this._control.disabled) {
            cls = 'dark:bg-d-neutral-3-50 border bg-neutral-3-50 cursor-not-allowed';
        }
        else if (this._control.focused) {
            cls += ` ${this.p_ClassFocus()}`;
        }
        else if (this._control.errorState) {
            cls += ` outline-none ring-opacity-20 dark:ring-opacity-20 ring ring-error-400 dark:ring-d-error-400 border-error-400`;
        }
        else {
            if (this.color == "default" || this.color == 'dark')
                cls += ` ${this._tdsClassDefault} `;
            else {
                cls += this.p_getClassBorderByColor(this.color);
            }
        }
        this.clsContainer = cls + ` ${this.p_GetBorderRadius()}` + ` ${this.tdsClass}`;
    }
    p_GetBorderRadius() {
        let rounded = 'rounded';
        if (this._addOnLeftChildren.length > 0) {
            rounded = "rounded-r";
        }
        else if (this._addOnRightChildren.length > 0) {
            rounded = 'rounded-l';
        }
        return rounded;
    }
    p_ClassFocus() {
        let result = '';
        if (this.color == "default" || this.color == 'dark') {
            result = 'outline-none ring-opacity-20 dark:ring-opacity-20 ring ring-primary-1 border-primary-1 dark:ring-d-primary-1 dark:border-d-primary-1';
        }
        else {
            result = this.p_getClassFocusByColor(this.color);
        }
        return result;
    }
    p_getClassBorderByColor(color) {
        let result = '';
        switch (color) {
            case "dark":
                result = `border-transparent`,
                    result = 'outline-none ring-opacity-20 dark:ring-opacity-20 ring  ring-primary-1 dark:ring-d-primary-1 border-primary-1 dark:border-d-primary-1';
                break;
            case "success":
                result = `border-success-400 dark:border-d-success-400`,
                    result = `outline-none ring-opacity-20 dark:ring-opacity-20 ring ring-success-400 dark:ring-d-success-400 border-success-400 dark:border-d-success-400`;
                break;
            case "error":
                result = `border-error-400 dark:border-d-error-400`,
                    result = `outline-none ring-opacity-20 dark:ring-opacity-20 ring ring-error-400 dark:ring-d-error-400 border-error-400 dark:border-d-error-400`;
                break;
            case "warning":
                result = `border-warning-400 dark:border-d-warning-400`,
                    result = `outline-none ring-opacity-20 dark:ring-opacity-20 ring ring-warning-400 dark:ring-d-warning-400 border-warning-400 dark:border-d-warning-400`;
                break;
            default:
                result = 'border-neutral-2-200 dark:border-d-neutral-2-200',
                    result = 'outline-none ring-opacity-20 dark:ring-opacity-20 ring  ring-primary-1 dark:ring-d-primary-1 border-primary-1 dark:border-d-primary-1';
                break;
        }
        return result;
    }
    p_getClassFocusByColor(color) {
        let result = '';
        switch (color) {
            case "dark":
                result = 'outline-none ring-opacity-20 dark:ring-opacity-20 ring  ring-primary-1 dark:ring-d-primary-1 border-primary-1 dark:border-d-primary-1';
                break;
            case "success":
                result = `outline-none ring-opacity-20 dark:ring-opacity-20 ring ring-success-400 dark:ring-d-success-400 border-success-400 dark:border-d-success-400`;
                break;
            case "error":
                result = `outline-none ring-opacity-20 dark:ring-opacity-20 ring ring-error-400 dark:ring-d-error-400 border-error-400 dark:border-d-error-400`;
                break;
            case "warning":
                result = `outline-none ring-opacity-20 dark:ring-opacity-20 ring ring-warning-400 dark:ring-d-warning-400 border-warning-400 dark:border-d-warning-400`;
                break;
            default:
                result = 'outline-none ring-opacity-20 dark:ring-opacity-20 ring  ring-primary-1 dark:ring-d-primary-1 border-primary-1 dark:border-d-primary-1';
                break;
        }
        return result;
    }
}
TDSFormField.ɵfac = function TDSFormField_Factory(t) { return new (t || TDSFormField)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef)); };
TDSFormField.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: TDSFormField, selectors: [["tds-form-field"]], contentQueries: function TDSFormField_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        i0.ɵɵcontentQuery(dirIndex, TDSFormFieldControl, 5);
        i0.ɵɵcontentQuery(dirIndex, TDSFormFieldControl, 7);
        i0.ɵɵcontentQuery(dirIndex, TDSLabel, 5);
        i0.ɵɵcontentQuery(dirIndex, TDSLabel, 7);
        i0.ɵɵcontentQuery(dirIndex, TDSLabel, 4);
        i0.ɵɵcontentQuery(dirIndex, TDS_ERROR, 5);
        i0.ɵɵcontentQuery(dirIndex, TDS_PREFIX, 5);
        i0.ɵɵcontentQuery(dirIndex, TDS_SUFFIX, 5);
        i0.ɵɵcontentQuery(dirIndex, TDS_ADDONLEFT, 5);
        i0.ɵɵcontentQuery(dirIndex, TA_ADDONRIGHT, 5);
    } if (rf & 2) {
        let _t;
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._controlNonStatic = _t.first);
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._controlStatic = _t.first);
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._labelChildNonStatic = _t.first);
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._labelChildStatic = _t.first);
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._labelChildChildren = _t);
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._errorChildren = _t);
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._prefixChildren = _t);
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._suffixChildren = _t);
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._addOnLeftChildren = _t);
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._addOnRightChildren = _t);
    } }, viewQuery: function TDSFormField_Query(rf, ctx) { if (rf & 1) {
        i0.ɵɵviewQuery(_c0, 7);
        i0.ɵɵviewQuery(_c1, 5);
    } if (rf & 2) {
        let _t;
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._connectionContainerRef = _t.first);
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._inputContainerRef = _t.first);
    } }, hostAttrs: [1, "block", "relative", "text-left"], hostVars: 22, hostBindings: function TDSFormField_HostBindings(rf, ctx) { if (rf & 2) {
        i0.ɵɵclassProp("tds-form-field-invalid", ctx._control.errorState)("tds-form-field-disabled", ctx._control.disabled)("tds-form-field-autofilled", ctx._control.autofilled)("ta-focused", ctx._control.focused)("ng-untouched", ctx._shouldForward("untouched"))("ng-touched", ctx._shouldForward("touched"))("ng-pristine", ctx._shouldForward("pristine"))("ng-dirty", ctx._shouldForward("dirty"))("ng-valid", ctx._shouldForward("valid"))("ng-invalid", ctx._shouldForward("invalid"))("ng-pending", ctx._shouldForward("pending"));
    } }, inputs: { tdsClass: "tdsClass", color: "color" }, exportAs: ["taFormField"], features: [i0.ɵɵProvidersFeature([
            { provide: TDS_FORM_FIELD, useExisting: TDSFormField },
        ])], ngContentSelectors: _c7, decls: 18, vars: 13, consts: [[1, "w-full"], [1, "flex", "flex-col", "w-full"], ["class", "flex w-full mb-2", 4, "ngIf"], [1, "flex", "w-full", 3, "ngClass", "click"], [1, "flex", "flex-auto", "flex-col", 3, "ngClass"], ["tds-form-field-container", "", 1, "flex", "items-end", "relative", "tds-form-field-control", "w-full", "max-w-full", "form-field-connection-container", 3, "tdsClass"], ["connectionContainer", ""], ["class", "tds-form-field-prefix text-xl leading-none self-center", 3, "ngClass", 4, "ngIf"], [1, "tds-form-field-infix", "flex-auto", "max-w-full", 3, "id"], ["inputContainer", ""], ["class", "tds-form-field-suffix h-full flex  items-center text-xl leading-none text-neutral-1-300 dark:text-d-neutral-1-900", 3, "ngClass", 4, "ngIf"], [1, "tds-form-field-subscript-wrapper", 3, "ngSwitch"], [4, "ngSwitchCase"], [1, "flex", "w-full", "mb-2"], [1, "tds-form-field-prefix", "text-xl", "leading-none", "self-center", 3, "ngClass"], [1, "tds-form-field-suffix", "h-full", "flex", "items-center", "text-xl", "leading-none", "text-neutral-1-300", "dark:text-d-neutral-1-900", 3, "ngClass"]], template: function TDSFormField_Template(rf, ctx) { if (rf & 1) {
        i0.ɵɵprojectionDef(_c4);
        i0.ɵɵelementStart(0, "div", 0)(1, "div", 1);
        i0.ɵɵtemplate(2, TDSFormField_div_2_Template, 2, 0, "div", 2);
        i0.ɵɵelementStart(3, "div", 3);
        i0.ɵɵlistener("click", function TDSFormField_Template_div_click_3_listener($event) { return ctx._control.onContainerClick && ctx._control.onContainerClick($event); });
        i0.ɵɵprojection(4, 0, ["[size]", "size"]);
        i0.ɵɵelementStart(5, "div", 4)(6, "div", 5, 6);
        i0.ɵɵtemplate(8, TDSFormField_div_8_Template, 2, 5, "div", 7);
        i0.ɵɵelementStart(9, "div", 8, 9);
        i0.ɵɵprojection(11, 1);
        i0.ɵɵelementEnd();
        i0.ɵɵtemplate(12, TDSFormField_div_12_Template, 2, 7, "div", 10);
        i0.ɵɵelementEnd();
        i0.ɵɵelementStart(13, "div", 11);
        i0.ɵɵtemplate(14, TDSFormField_div_14_Template, 2, 0, "div", 12);
        i0.ɵɵprojection(15, 2);
        i0.ɵɵprojection(16, 3);
        i0.ɵɵelementEnd()();
        i0.ɵɵprojection(17, 4);
        i0.ɵɵelementEnd()()();
    } if (rf & 2) {
        i0.ɵɵadvance(2);
        i0.ɵɵproperty("ngIf", ctx._labelChildChildren.length);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngClass", i0.ɵɵpureFunction1(9, _c5, ctx._control.disabled));
        i0.ɵɵadvance(2);
        i0.ɵɵproperty("ngClass", i0.ɵɵpureFunction1(11, _c6, !ctx._addOnRightChildren.length && !ctx._addOnLeftChildren.length));
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("tdsClass", ctx.clsContainer);
        i0.ɵɵadvance(2);
        i0.ɵɵproperty("ngIf", ctx._prefixChildren.length);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("id", ctx._labelId);
        i0.ɵɵadvance(3);
        i0.ɵɵproperty("ngIf", ctx._suffixChildren.length);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngSwitch", ctx._getDisplayedMessages());
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngSwitchCase", "error");
    } }, directives: [i1.NgIf, i1.NgClass, i2.TDSFormFieldContainer, i1.NgSwitch, i1.NgSwitchCase], encapsulation: 2, data: { animation: [tdsFormFieldAnimations.transitionMessages] }, changeDetection: 0 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(TDSFormField, [{
        type: Component,
        args: [{ selector: 'tds-form-field', exportAs: 'taFormField', host: {
                    'class': 'block relative text-left',
                    '[class.tds-form-field-invalid]': '_control.errorState',
                    '[class.tds-form-field-disabled]': '_control.disabled',
                    '[class.tds-form-field-autofilled]': '_control.autofilled',
                    '[class.ta-focused]': '_control.focused',
                    '[class.ng-untouched]': '_shouldForward("untouched")',
                    '[class.ng-touched]': '_shouldForward("touched")',
                    '[class.ng-pristine]': '_shouldForward("pristine")',
                    '[class.ng-dirty]': '_shouldForward("dirty")',
                    '[class.ng-valid]': '_shouldForward("valid")',
                    '[class.ng-invalid]': '_shouldForward("invalid")',
                    '[class.ng-pending]': '_shouldForward("pending")',
                }, encapsulation: ViewEncapsulation.None, changeDetection: ChangeDetectionStrategy.OnPush, providers: [
                    { provide: TDS_FORM_FIELD, useExisting: TDSFormField },
                ], animations: [tdsFormFieldAnimations.transitionMessages], template: "<div class=\"w-full\">\r\n    <div class=\"flex flex-col w-full\">\r\n        <div class=\"flex w-full mb-2\" *ngIf=\"_labelChildChildren.length\">\r\n            <ng-content select=\"tds-label\"></ng-content>\r\n        </div>\r\n        <div class=\"flex w-full\" [ngClass]=\"{'opacity-65':_control.disabled}\"\r\n            (click)=\"_control.onContainerClick && _control.onContainerClick($event)\">\r\n            <ng-content select=\"[tdsAddOnLeft]\" [size]=\"size\"></ng-content>\r\n            <div class=\"flex flex-auto flex-col\"\r\n                [ngClass]=\"{'w-full':!_addOnRightChildren.length && !_addOnLeftChildren.length}\">\r\n                <div #connectionContainer\r\n                    class=\"flex items-end relative tds-form-field-control w-full max-w-full form-field-connection-container\"\r\n                    tds-form-field-container [tdsClass]=\"clsContainer\">\r\n                    <div class=\"tds-form-field-prefix text-xl leading-none self-center\" *ngIf=\"_prefixChildren.length\"\r\n                        [ngClass]=\"{\r\n                            'px-2':size ==='sm',\r\n                            'px-2.5':size !=='sm',\r\n                            'bg-neutral-3-50 adrk:bg-d-neutral-3-50 rounded-l':_control.disabled\r\n                        }\">\r\n                        <ng-content select=\"[tdsPrefix]\"></ng-content>\r\n                    </div>\r\n                    <div class=\"tds-form-field-infix flex-auto max-w-full\" #inputContainer [id]=\"_labelId\">\r\n                        <ng-content></ng-content>\r\n                    </div>\r\n                    <div class=\"tds-form-field-suffix h-full flex  items-center text-xl leading-none text-neutral-1-300 dark:text-d-neutral-1-900\"\r\n                        *ngIf=\"_suffixChildren.length\" [ngClass]=\"{\r\n                            'px-1.5':size ==='md',\r\n                            'px-2':size ==='lg',\r\n                            'px-1':size ==='sm',\r\n                            'group-hover:bg-neutral-3-50 group-hover:rounded-r cursor-pointer dark:group-hover:bg-d-neutral-3-200 dark:bg-d-neutral-3-50 bg-white ':!_control.disabled,\r\n                            'bg-neutral-3-50 adrk:bg-d-neutral-3-50 rounded-r ':_control.disabled\r\n                        }\">\r\n                        <ng-content select=\"[tdsSuffix]\"></ng-content>\r\n                    </div>\r\n                </div>\r\n                <div class=\"tds-form-field-subscript-wrapper \" [ngSwitch]=\"_getDisplayedMessages()\">\r\n\r\n                    <div *ngSwitchCase=\"'error'\">\r\n                        <ng-content select=\"tds-error\"></ng-content>\r\n                    </div>\r\n                    <ng-content select=\"tds-warning\"></ng-content>\r\n                    <ng-content select=\"tds-success\"></ng-content>\r\n                </div>\r\n            </div>\r\n            <ng-content select=\"[tdsAddOnRight]\"></ng-content>\r\n\r\n        </div>\r\n\r\n    </div>\r\n\r\n</div>" }]
    }], function () { return [{ type: i0.ElementRef }, { type: i0.ChangeDetectorRef }]; }, { tdsClass: [{
            type: Input
        }], color: [{
            type: Input
        }], _connectionContainerRef: [{
            type: ViewChild,
            args: ['connectionContainer', { static: true }]
        }], _inputContainerRef: [{
            type: ViewChild,
            args: ['inputContainer']
        }], _controlNonStatic: [{
            type: ContentChild,
            args: [TDSFormFieldControl]
        }], _controlStatic: [{
            type: ContentChild,
            args: [TDSFormFieldControl, { static: true }]
        }], _labelChildNonStatic: [{
            type: ContentChild,
            args: [TDSLabel]
        }], _labelChildStatic: [{
            type: ContentChild,
            args: [TDSLabel, { static: true }]
        }], _labelChildChildren: [{
            type: ContentChildren,
            args: [TDSLabel, { descendants: false }]
        }], _errorChildren: [{
            type: ContentChildren,
            args: [TDS_ERROR, { descendants: true }]
        }], _prefixChildren: [{
            type: ContentChildren,
            args: [TDS_PREFIX, { descendants: true }]
        }], _suffixChildren: [{
            type: ContentChildren,
            args: [TDS_SUFFIX, { descendants: true }]
        }], _addOnLeftChildren: [{
            type: ContentChildren,
            args: [TDS_ADDONLEFT, { descendants: true }]
        }], _addOnRightChildren: [{
            type: ContentChildren,
            args: [TA_ADDONRIGHT, { descendants: true }]
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybS1maWVsZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL3Rkcy11aS9mb3JtLWZpZWxkL2Zvcm0tZmllbGQudHMiLCIuLi8uLi8uLi8uLi9wcm9qZWN0cy90ZHMtdWkvZm9ybS1maWVsZC9mb3JtLWZpZWxkLmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFvQyxZQUFZLEVBQUUsZUFBZSxFQUFVLGNBQWMsRUFBRSxLQUFLLEVBQXFCLFNBQVMsRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUloTCxPQUFPLEVBQUUsU0FBUyxFQUFFLHVCQUF1QixFQUFjLE1BQU0sZUFBZSxDQUFDO0FBRS9FLE9BQU8sRUFBYSxLQUFLLEVBQUUsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ2pELE9BQU8sRUFBRSxTQUFTLEVBQVEsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFNUQsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBRXZELE9BQU8sRUFBK0IsYUFBYSxFQUFFLGFBQWEsRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUNyRixPQUFPLEVBQVksU0FBUyxFQUFFLE1BQU0sU0FBUyxDQUFDO0FBQzlDLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQ2pFLE9BQU8sRUFBZ0QsZUFBZSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDbkcsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDM0QsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLFNBQVMsQ0FBQztBQUNuQyxPQUFPLEVBQWEsVUFBVSxFQUFFLE1BQU0sVUFBVSxDQUFDO0FBQ2pELE9BQU8sRUFBYSxVQUFVLEVBQUUsTUFBTSxVQUFVLENBQUM7Ozs7Ozs7SUNqQnpDLCtCQUFpRTtJQUM3RCxxQkFBNEM7SUFDaEQsaUJBQU07Ozs7SUFTTSwrQkFL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YXRmb3JtXCI7XHJcbmltcG9ydCB7IEFmdGVyVmlld0luaXQsIENoYW5nZURldGVjdG9yUmVmLCBDb250ZW50Q2hpbGQsIENvbnRlbnRDaGlsZHJlbiwgSW5qZWN0LCBJbmplY3Rpb25Ub2tlbiwgSW5wdXQsIE5nWm9uZSwgUXVlcnlMaXN0LCBWaWV3Q2hpbGQsIFZpZXdFbmNhcHN1bGF0aW9uIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcclxuaW1wb3J0IHsgQWZ0ZXJDb250ZW50SW5pdCB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcbmltcG9ydCB7IE9uRGVzdHJveSB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcbmltcG9ydCB7IEFmdGVyQ29udGVudENoZWNrZWQgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xyXG5pbXBvcnQgeyBDb21wb25lbnQsIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LCBFbGVtZW50UmVmIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcclxuaW1wb3J0IHsgQWJzdHJhY3RDb250cm9sLCBOZ0NvbnRyb2wgfSBmcm9tIFwiQGFuZ3VsYXIvZm9ybXNcIjtcclxuaW1wb3J0IHsgZnJvbUV2ZW50LCBtZXJnZSwgU3ViamVjdCB9IGZyb20gXCJyeGpzXCI7XHJcbmltcG9ydCB7IHN0YXJ0V2l0aCwgdGFrZSwgdGFrZVVudGlsIH0gZnJvbSBcInJ4anMvb3BlcmF0b3JzXCI7XHJcbmltcG9ydCB7IEJ1dHRvblNpemUgfSBmcm9tIFwidGRzLXVpL2NvcmUvY29uZmlnXCI7XHJcbmltcG9ydCB7IFREU0hlbHBlckFycmF5IH0gZnJvbSBcInRkcy11aS9zaGFyZWQvdXRpbGl0eVwiO1xyXG5cclxuaW1wb3J0IHsgVERTQWRkT25MZWZ0LCBURFNBZGRPblJpZ2h0LCBURFNfQURET05MRUZULCBUQV9BRERPTlJJR0hUIH0gZnJvbSBcIi4vYWRkLW9uXCI7XHJcbmltcG9ydCB7IFREU0Vycm9yLCBURFNfRVJST1IgfSBmcm9tIFwiLi9lcnJvclwiO1xyXG5pbXBvcnQgeyB0ZHNGb3JtRmllbGRBbmltYXRpb25zIH0gZnJvbSBcIi4vZm9ybS1maWVsZC1hbmltYXRpb25zXCI7XHJcbmltcG9ydCB7IENhbklucHV0Q29sb3IsIENhbklucHV0Q29sb3JDdG9yLCBJbnB1dENvbG9yLCBtaXhpbklucHV0Q29sb3IgfSBmcm9tIFwiLi9mb3JtLWZpZWxkLWNvbG9yXCI7XHJcbmltcG9ydCB7IFREU0Zvcm1GaWVsZENvbnRyb2wgfSBmcm9tIFwiLi9mb3JtLWZpZWxkLWNvbnRyb2xcIjtcclxuaW1wb3J0IHsgVERTTGFiZWwgfSBmcm9tIFwiLi9sYWJlbFwiO1xyXG5pbXBvcnQgeyBURFNQcmVmaXgsIFREU19QUkVGSVggfSBmcm9tIFwiLi9wcmVmaXhcIjtcclxuaW1wb3J0IHsgVERTU3VmZml4LCBURFNfU1VGRklYIH0gZnJvbSBcIi4vc3VmZml4XCI7XHJcbmxldCBuZXh0VW5pcXVlSWQgPSAwO1xyXG5cclxuLyoqXHJcbiAqIEJvaWxlcnBsYXRlIGZvciBhcHBseWluZyBtaXhpbnMgdG8gVERTRm9ybUZpZWxkLlxyXG4gKiBAZG9jcy1wcml2YXRlXHJcbiAqL1xyXG5jbGFzcyBUQUZvcm1GaWVsZEJhc2Uge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBfZWxlbWVudFJlZjogRWxlbWVudFJlZikgeyB9XHJcbn1cclxuLyoqXHJcbiogQmFzZSBjbGFzcyB0byB3aGljaCB3ZSdyZSBhcHBseWluZyB0aGUgZm9ybSBmaWVsZCBtaXhpbnMuXHJcbiogQGRvY3MtcHJpdmF0ZVxyXG4qL1xyXG5jb25zdCBfVEFGb3JtRmllbGRNaXhpbkJhc2U6IENhbklucHV0Q29sb3JDdG9yICYgdHlwZW9mIFRBRm9ybUZpZWxkQmFzZSA9XHJcbiAgICBtaXhpbklucHV0Q29sb3IoVEFGb3JtRmllbGRCYXNlLCAnZGVmYXVsdCcpO1xyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBURFNfRk9STV9GSUVMRCA9IG5ldyBJbmplY3Rpb25Ub2tlbjxURFNGb3JtRmllbGQ+KCdURFNGb3JtRmllbGQnKTtcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICd0ZHMtZm9ybS1maWVsZCcsXHJcbiAgICBleHBvcnRBczogJ3RhRm9ybUZpZWxkJyxcclxuICAgIHRlbXBsYXRlVXJsOiAnLi9mb3JtLWZpZWxkLmh0bWwnLFxyXG4gICAgaG9zdDoge1xyXG4gICAgICAgICdjbGFzcyc6ICdibG9jayByZWxhdGl2ZSB0ZXh0LWxlZnQnLFxyXG4gICAgICAgICdbY2xhc3MudGRzLWZvcm0tZmllbGQtaW52YWxpZF0nOiAnX2NvbnRyb2wuZXJyb3JTdGF0ZScsXHJcbiAgICAgICAgJ1tjbGFzcy50ZHMtZm9ybS1maWVsZC1kaXNhYmxlZF0nOiAnX2NvbnRyb2wuZGlzYWJsZWQnLFxyXG4gICAgICAgICdbY2xhc3MudGRzLWZvcm0tZmllbGQtYXV0b2ZpbGxlZF0nOiAnX2NvbnRyb2wuYXV0b2ZpbGxlZCcsXHJcbiAgICAgICAgJ1tjbGFzcy50YS1mb2N1c2VkXSc6ICdfY29udHJvbC5mb2N1c2VkJyxcclxuICAgICAgICAnW2NsYXNzLm5nLXVudG91Y2hlZF0nOiAnX3Nob3VsZEZvcndhcmQoXCJ1bnRvdWNoZWRcIiknLFxyXG4gICAgICAgICdbY2xhc3MubmctdG91Y2hlZF0nOiAnX3Nob3VsZEZvcndhcmQoXCJ0b3VjaGVkXCIpJyxcclxuICAgICAgICAnW2NsYXNzLm5nLXByaXN0aW5lXSc6ICdfc2hvdWxkRm9yd2FyZChcInByaXN0aW5lXCIpJyxcclxuICAgICAgICAnW2NsYXNzLm5nLWRpcnR5XSc6ICdfc2hvdWxkRm9yd2FyZChcImRpcnR5XCIpJyxcclxuICAgICAgICAnW2NsYXNzLm5nLXZhbGlkXSc6ICdfc2hvdWxkRm9yd2FyZChcInZhbGlkXCIpJyxcclxuICAgICAgICAnW2NsYXNzLm5nLWludmFsaWRdJzogJ19zaG91bGRGb3J3YXJkKFwiaW52YWxpZFwiKScsXHJcbiAgICAgICAgJ1tjbGFzcy5uZy1wZW5kaW5nXSc6ICdfc2hvdWxkRm9yd2FyZChcInBlbmRpbmdcIiknLFxyXG4gICAgfSxcclxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXHJcbiAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcclxuICAgIHByb3ZpZGVyczogW1xyXG4gICAgICAgIHsgcHJvdmlkZTogVERTX0ZPUk1fRklFTEQsIHVzZUV4aXN0aW5nOiBURFNGb3JtRmllbGQgfSxcclxuICAgIF0sXHJcbiAgICBhbmltYXRpb25zOiBbdGRzRm9ybUZpZWxkQW5pbWF0aW9ucy50cmFuc2l0aW9uTWVzc2FnZXNdLFxyXG59KVxyXG5cclxuZXhwb3J0IGNsYXNzIFREU0Zvcm1GaWVsZFxyXG4gICAgaW1wbGVtZW50cyBBZnRlckNvbnRlbnRJbml0LCBBZnRlckNvbnRlbnRDaGVja2VkLCBBZnRlclZpZXdJbml0LCBPbkRlc3Ryb3kge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZGVzdHJveWVkID0gbmV3IFN1YmplY3Q8dm9pZD4oKTtcclxuICAgIHByaXZhdGUgX2NvbG9yOiBJbnB1dENvbG9yID0gXCJkZWZhdWx0XCI7XHJcbiAgICBwcml2YXRlIF9zaXplOiBCdXR0b25TaXplID0gXCJtZFwiO1xyXG4gICAgcHJpdmF0ZSBfdGRzQ2xhc3M6IHN0cmluZyA9ICdkYXJrOmJnLWQtbmV1dHJhbC0zLTUwIGJvcmRlciBiZy13aGl0ZSAnO1xyXG4gICAgcHJpdmF0ZSBfdGRzQ2xhc3NEZWZhdWx0ID0gJ2Rhcms6Ym9yZGVyLWQtbmV1dHJhbC0yLTIwMCBib3JkZXItbmV1dHJhbC0yLTIwMCc7XHJcbiAgICBjbHNDb250YWluZXI6IHN0cmluZyA9ICcnO1xyXG4gICAgQElucHV0KCkgdGRzQ2xhc3M6IHN0cmluZyA9ICcnO1xyXG5cclxuICAgIEBJbnB1dCgpXHJcbiAgICBnZXQgY29sb3IoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbG9yXHJcbiAgICB9XHJcbiAgICBzZXQgY29sb3IodmFsOiBJbnB1dENvbG9yKSB7XHJcbiAgICAgICAgdGhpcy5fY29sb3IgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvLyBASW5wdXQoKVxyXG4gICAgZ2V0IHNpemUoKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLl9jb250cm9sICYmIHRoaXMuX2NvbnRyb2wuc2l6ZSkgPyB0aGlzLl9jb250cm9sLnNpemUgOiB0aGlzLl9zaXplO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRvbmx5IF9sYWJlbElkID0gYHRkcy1mb3JtLWZpZWxkLWxhYmVsLSR7bmV4dFVuaXF1ZUlkKyt9YDtcclxuICAgIEBWaWV3Q2hpbGQoJ2Nvbm5lY3Rpb25Db250YWluZXInLCB7IHN0YXRpYzogdHJ1ZSB9KSBfY29ubmVjdGlvbkNvbnRhaW5lclJlZiE6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdpbnB1dENvbnRhaW5lcicpIF9pbnB1dENvbnRhaW5lclJlZiE6IEVsZW1lbnRSZWY7XHJcblxyXG4gICAgQENvbnRlbnRDaGlsZChURFNGb3JtRmllbGRDb250cm9sKSBfY29udHJvbE5vblN0YXRpYyE6IFREU0Zvcm1GaWVsZENvbnRyb2w8YW55PjtcclxuICAgIEBDb250ZW50Q2hpbGQoVERTRm9ybUZpZWxkQ29udHJvbCwgeyBzdGF0aWM6IHRydWUgfSkgX2NvbnRyb2xTdGF0aWMhOiBURFNGb3JtRmllbGRDb250cm9sPGFueT47XHJcblxyXG4gICAgZ2V0IF9jb250cm9sKCkge1xyXG5cclxuICAgICAgICAvLyBUT0RPKGNyaXNiZXRvKTogd2UgbmVlZCB0aGlzIHdvcmthcm91bmQgaW4gb3JkZXIgdG8gc3VwcG9ydCBib3RoIEl2eSBhbmQgVmlld0VuZ2luZS5cclxuICAgICAgICAvLyAgV2Ugc2hvdWxkIGNsZWFuIHRoaXMgdXAgb25jZSBJdnkgaXMgdGhlIGRlZmF1bHQgcmVuZGVyZXIuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2V4cGxpY2l0Rm9ybUZpZWxkQ29udHJvbCB8fCB0aGlzLl9jb250cm9sTm9uU3RhdGljIHx8IHRoaXMuX2NvbnRyb2xTdGF0aWM7XHJcbiAgICB9XHJcbiAgICBzZXQgX2NvbnRyb2wodmFsdWUpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fZXhwbGljaXRGb3JtRmllbGRDb250cm9sID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIF9leHBsaWNpdEZvcm1GaWVsZENvbnRyb2whOiBURFNGb3JtRmllbGRDb250cm9sPGFueT47XHJcblxyXG4gICAgQENvbnRlbnRDaGlsZChURFNMYWJlbCkgX2xhYmVsQ2hpbGROb25TdGF0aWMhOiBURFNMYWJlbDtcclxuICAgIEBDb250ZW50Q2hpbGQoVERTTGFiZWwsIHsgc3RhdGljOiB0cnVlIH0pIF9sYWJlbENoaWxkU3RhdGljITogVERTTGFiZWw7XHJcbiAgICBAQ29udGVudENoaWxkcmVuKFREU0xhYmVsLCB7IGRlc2NlbmRhbnRzOiBmYWxzZSB9KSBfbGFiZWxDaGlsZENoaWxkcmVuITogUXVlcnlMaXN0PFREU0xhYmVsPjtcclxuICAgIEBDb250ZW50Q2hpbGRyZW4oVERTX0VSUk9SLCB7IGRlc2NlbmRhbnRzOiB0cnVlIH0pIF9lcnJvckNoaWxkcmVuITogUXVlcnlMaXN0PFREU0Vycm9yPjtcclxuICAgIC8vIEBDb250ZW50Q2hpbGRyZW4oX01BVF9ISU5ULCB7IGRlc2NlbmRhbnRzOiB0cnVlIH0pIF9oaW50Q2hpbGRyZW46IFF1ZXJ5TGlzdDxNYXRIaW50PjtcclxuICAgIEBDb250ZW50Q2hpbGRyZW4oVERTX1BSRUZJWCwgeyBkZXNjZW5kYW50czogdHJ1ZSB9KSBfcHJlZml4Q2hpbGRyZW4hOiBRdWVyeUxpc3Q8VERTUHJlZml4PjtcclxuICAgIEBDb250ZW50Q2hpbGRyZW4oVERTX1NVRkZJWCwgeyBkZXNjZW5kYW50czogdHJ1ZSB9KSBfc3VmZml4Q2hpbGRyZW4hOiBRdWVyeUxpc3Q8VERTU3VmZml4PjtcclxuICAgIEBDb250ZW50Q2hpbGRyZW4oVERTX0FERE9OTEVGVCwgeyBkZXNjZW5kYW50czogdHJ1ZSB9KSBfYWRkT25MZWZ0Q2hpbGRyZW4hOiBRdWVyeUxpc3Q8VERTQWRkT25MZWZ0PjtcclxuICAgIEBDb250ZW50Q2hpbGRyZW4oVEFfQURET05SSUdIVCwgeyBkZXNjZW5kYW50czogdHJ1ZSB9KSBfYWRkT25SaWdodENoaWxkcmVuITogUXVlcnlMaXN0PFREU0FkZE9uUmlnaHQ+O1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHVibGljIF9lbGVtZW50UmVmOiBFbGVtZW50UmVmLCBwcml2YXRlIF9jaGFuZ2VEZXRlY3RvclJlZjogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcblxyXG4gICAgKSB7XHJcblxyXG5cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICogR2V0cyBhbiBFbGVtZW50UmVmIGZvciB0aGUgZWxlbWVudCB0aGF0IGEgb3ZlcmxheSBhdHRhY2hlZCB0byB0aGUgZm9ybS1maWVsZCBzaG91bGQgYmVcclxuICAqIHBvc2l0aW9uZWQgcmVsYXRpdmUgdG8uXHJcbiAgKi9cclxuICAgIGdldENvbm5lY3RlZE92ZXJsYXlPcmlnaW4oKTogRWxlbWVudFJlZiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Nvbm5lY3Rpb25Db250YWluZXJSZWYgfHwgdGhpcy5fZWxlbWVudFJlZjtcclxuICAgIH1cclxuXHJcbiAgICBuZ0FmdGVyQ29udGVudEluaXQoKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX3ZhbGlkYXRlQ29udHJvbENoaWxkKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbnRyb2wgPSB0aGlzLl9jb250cm9sO1xyXG4gICAgICAgIGlmIChjb250cm9sLmNvbnRyb2xUeXBlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2VsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5jbGFzc0xpc3QuYWRkKGB0ZHMtZm9ybS1maWVsZC10eXBlLSR7Y29udHJvbC5jb250cm9sVHlwZX1gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFN1YnNjcmliZSB0byBjaGFuZ2VzIGluIHRoZSBjaGlsZCBjb250cm9sIHN0YXRlIGluIG9yZGVyIHRvIHVwZGF0ZSB0aGUgZm9ybSBmaWVsZCBVSS5cclxuICAgICAgICBjb250cm9sLnN0YXRlQ2hhbmdlcy5waXBlKHN0YXJ0V2l0aChudWxsKSkuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVDc3NDb250YWluZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5fc3luY0Rlc2NyaWJlZEJ5SWRzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBSdW4gY2hhbmdlIGRldGVjdGlvbiBpZiB0aGUgdmFsdWUgY2hhbmdlcy5cclxuICAgICAgICBpZiAoY29udHJvbC5uZ0NvbnRyb2wgJiYgY29udHJvbC5uZ0NvbnRyb2wudmFsdWVDaGFuZ2VzKSB7XHJcbiAgICAgICAgICAgIGNvbnRyb2wubmdDb250cm9sLnZhbHVlQ2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgLnBpcGUodGFrZVVudGlsKHRoaXMuX2Rlc3Ryb3llZCkpXHJcbiAgICAgICAgICAgICAgICAuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNzc0NvbnRhaW5lcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUnVuIGNoYW5nZSBkZXRlY3Rpb24gYW5kIHVwZGF0ZSB0aGUgb3V0bGluZSBpZiB0aGUgc3VmZml4IG9yIHByZWZpeCBjaGFuZ2VzLlxyXG4gICAgICAgIG1lcmdlKHRoaXMuX3ByZWZpeENoaWxkcmVuLmNoYW5nZXMsIHRoaXMuX3N1ZmZpeENoaWxkcmVuLmNoYW5nZXMpLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgYXJpYS1kZXNjcmliZWQgYnkgd2hlbiB0aGUgbnVtYmVyIG9mIGVycm9ycyBjaGFuZ2VzLlxyXG4gICAgICAgIHRoaXMuX2Vycm9yQ2hpbGRyZW4uY2hhbmdlcy5waXBlKHN0YXJ0V2l0aChudWxsKSkuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fc3luY0Rlc2NyaWJlZEJ5SWRzKCk7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ3NzQ29udGFpbmVyKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJDb250ZW50Q2hlY2tlZCgpIHtcclxuICAgICAgICB0aGlzLl92YWxpZGF0ZUNvbnRyb2xDaGlsZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoVERTSGVscGVyQXJyYXkuaGFzTGlzdFZhbHVlKHRoaXMuX2xhYmVsQ2hpbGRDaGlsZHJlbikgJiYgdGhpcy5oYXNSZXF1aXJlZClcclxuICAgICAgICAgICAgdGhpcy5fbGFiZWxDaGlsZENoaWxkcmVuLmZvckVhY2goZWwgPT4geyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGVsLnVwZGF0ZVJlcXVpcmVkKHRoaXMuaGFzUmVxdWlyZWQpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uRGVzdHJveSgpIHtcclxuICAgICAgICB0aGlzLl9kZXN0cm95ZWQubmV4dCgpO1xyXG4gICAgICAgIHRoaXMuX2Rlc3Ryb3llZC5jb21wbGV0ZSgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgICogR2V0cyB0aGUgaWQgb2YgdGhlIGxhYmVsIGVsZW1lbnQuIElmIG5vIGxhYmVsIGlzIHByZXNlbnQsIHJldHVybnMgYG51bGxgLlxyXG4gICAgICAqL1xyXG4gICAgZ2V0TGFiZWxJZCgpOiBzdHJpbmcgfCBudWxsIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faGFzTGFiZWwoKSA/IHRoaXMuX2xhYmVsSWQgOiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBEZXRlcm1pbmVzIHdoZXRoZXIgYSBjbGFzcyBmcm9tIHRoZSBOZ0NvbnRyb2wgc2hvdWxkIGJlIGZvcndhcmRlZCB0byB0aGUgaG9zdCBlbGVtZW50LiAqL1xyXG4gICAgX3Nob3VsZEZvcndhcmQocHJvcDoga2V5b2YgTmdDb250cm9sKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgbmdDb250cm9sID0gdGhpcy5fY29udHJvbCA/IHRoaXMuX2NvbnRyb2wubmdDb250cm9sIDogbnVsbDtcclxuICAgICAgICByZXR1cm4gbmdDb250cm9sICYmIG5nQ29udHJvbFtwcm9wXTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFzUGxhY2Vob2xkZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuICEhKHRoaXMuX2NvbnRyb2wgJiYgdGhpcy5fY29udHJvbC5wbGFjZWhvbGRlcik7XHJcbiAgICB9XHJcblxyXG4gICAgX2hhc0xhYmVsKCkge1xyXG4gICAgICAgIHJldHVybiAhISh0aGlzLl9sYWJlbENoaWxkTm9uU3RhdGljIHx8IHRoaXMuX2xhYmVsQ2hpbGRTdGF0aWMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBEZXRlcm1pbmVzIHdoZXRoZXIgdG8gZGlzcGxheSBoaW50cyBvciBlcnJvcnMuICovXHJcbiAgICBfZ2V0RGlzcGxheWVkTWVzc2FnZXMoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuX2NvbnRyb2wuZXJyb3JTdGF0ZSkgPyAnZXJyb3InIDogdGhpcy5jb2xvcjtcclxuICAgIH1cclxuXHJcbiAgICBfaGFzQWRkT25SaWdodENoaWxkcmVuKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRPblJpZ2h0Q2hpbGRyZW4gJiYgdGhpcy5fYWRkT25SaWdodENoaWxkcmVuLmxlbmd0aCA+IDA7XHJcbiAgICB9XHJcbiAgICBfaGFzQWRkT25MZWZ0Q2hpbGRyZW4oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZE9uTGVmdENoaWxkcmVuICYmIHRoaXMuX2FkZE9uTGVmdENoaWxkcmVuLmxlbmd0aCA+IDA7XHJcbiAgICB9XHJcbiAgICBfaGFzU3VmZml4Q2hpbGRyZW4oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N1ZmZpeENoaWxkcmVuICYmIHRoaXMuX3N1ZmZpeENoaWxkcmVuLmxlbmd0aCA+IDA7XHJcbiAgICB9XHJcbiAgICBfaGFzUHJlZml4Q2hpbGRyZW4oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ByZWZpeENoaWxkcmVuICYmIHRoaXMuX3ByZWZpeENoaWxkcmVuLmxlbmd0aCA+IDA7XHJcbiAgICB9XHJcbiAgICBnZXQgaGFzUmVxdWlyZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLl9jb250cm9sLnJlcXVpcmVkIHx8IHRoaXMuaGFzUmVxdWlyZWRWYWxpZGF0b3IodGhpcy5fY29udHJvbC5uZ0NvbnRyb2w/LmNvbnRyb2wpKSAmJiAhdGhpcy5fY29udHJvbC5kaXNhYmxlZFxyXG4gICAgfVxyXG4gICAgaGFzUmVxdWlyZWRWYWxpZGF0b3IoY29udHJvbDogQWJzdHJhY3RDb250cm9sIHwgbnVsbCB8IHVuZGVmaW5lZCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmIChjb250cm9sPy52YWxpZGF0b3IpIHtcclxuICAgICAgICAgICAgY29uc3QgdmFsaWRhdG9yID0gY29udHJvbD8udmFsaWRhdG9yKHt9IGFzIEFic3RyYWN0Q29udHJvbCk7XHJcbiAgICAgICAgICAgIGlmICh2YWxpZGF0b3IgJiYgdmFsaWRhdG9yLnJlcXVpcmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIGxpc3Qgb2YgZWxlbWVudCBJRHMgdGhhdCBkZXNjcmliZSB0aGUgY2hpbGQgY29udHJvbC4gVGhpcyBhbGxvd3MgdGhlIGNvbnRyb2wgdG8gdXBkYXRlXHJcbiAgICAgKiBpdHMgYGFyaWEtZGVzY3JpYmVkYnlgIGF0dHJpYnV0ZSBhY2NvcmRpbmdseS5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfc3luY0Rlc2NyaWJlZEJ5SWRzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9jb250cm9sKSB7XHJcbiAgICAgICAgICAgIGxldCBpZHM6IHN0cmluZ1tdID0gW107XHJcblxyXG4gICAgICAgICAgICAvLyBUT0RPKHdhZ25lcm1hY2llbCk6IFJlbW92ZSB0aGUgdHlwZSBjaGVjayB3aGVuIHdlIGZpbmQgdGhlIHJvb3QgY2F1c2Ugb2YgdGhpcyBidWcuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9jb250cm9sLnVzZXJBcmlhRGVzY3JpYmVkQnkgJiZcclxuICAgICAgICAgICAgICAgIHR5cGVvZiB0aGlzLl9jb250cm9sLnVzZXJBcmlhRGVzY3JpYmVkQnkgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICBpZHMucHVzaCguLi50aGlzLl9jb250cm9sLnVzZXJBcmlhRGVzY3JpYmVkQnkuc3BsaXQoJyAnKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9lcnJvckNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICBpZHMucHVzaCguLi50aGlzLl9lcnJvckNoaWxkcmVuLm1hcChlcnJvciA9PiBlcnJvci5pZCkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9jb250cm9sLnNldERlc2NyaWJlZEJ5SWRzKGlkcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIGZvcm0gZmllbGQncyBjb250cm9sIGlzIG1pc3NpbmcuICovXHJcbiAgICBwcm90ZWN0ZWQgX3ZhbGlkYXRlQ29udHJvbENoaWxkKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fY29udHJvbCkge1xyXG4gICAgICAgICAgICB0aHJvdyAndGRzLWZvcm0tZmllbGQgbXVzdCBjb250YWluIGEgVERTRm9ybUZpZWxkQ29udHJvbC4nO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZUNzc0NvbnRhaW5lcigpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygndXBkYXRlQ3NzQ29udGFpbmVyJyk7XHJcbiAgICAgICAgbGV0IGNscyA9IHRoaXMuX3Rkc0NsYXNzO1xyXG4gICAgICAgIGlmKHRoaXMuX2NvbnRyb2wuZGlzYWJsZWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjbHMgPSdkYXJrOmJnLWQtbmV1dHJhbC0zLTUwIGJvcmRlciBiZy1uZXV0cmFsLTMtNTAgY3Vyc29yLW5vdC1hbGxvd2VkJ1xyXG4gICAgICAgIH1lbHNlXHJcbiAgICAgICAgaWYgKHRoaXMuX2NvbnRyb2wuZm9jdXNlZCkge1xyXG4gICAgICAgICAgICBjbHMgKz0gYCAke3RoaXMucF9DbGFzc0ZvY3VzKCl9YFxyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fY29udHJvbC5lcnJvclN0YXRlKSB7XHJcbiAgICAgICAgICAgIGNscyArPSBgIG91dGxpbmUtbm9uZSByaW5nLW9wYWNpdHktMjAgZGFyazpyaW5nLW9wYWNpdHktMjAgcmluZyByaW5nLWVycm9yLTQwMCBkYXJrOnJpbmctZC1lcnJvci00MDAgYm9yZGVyLWVycm9yLTQwMGBcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbG9yID09IFwiZGVmYXVsdFwiIHx8IHRoaXMuY29sb3IgPT0gJ2RhcmsnKVxyXG4gICAgICAgICAgICAgICAgY2xzICs9IGAgJHt0aGlzLl90ZHNDbGFzc0RlZmF1bHR9IGBcclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjbHMgKz0gdGhpcy5wX2dldENsYXNzQm9yZGVyQnlDb2xvcih0aGlzLmNvbG9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNsc0NvbnRhaW5lciA9IGNscyArIGAgJHt0aGlzLnBfR2V0Qm9yZGVyUmFkaXVzKCl9YCArIGAgJHt0aGlzLnRkc0NsYXNzfWA7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHBfR2V0Qm9yZGVyUmFkaXVzKCkge1xyXG4gICAgICAgIGxldCByb3VuZGVkID0gJ3JvdW5kZWQnO1xyXG4gICAgICAgIGlmICh0aGlzLl9hZGRPbkxlZnRDaGlsZHJlbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHJvdW5kZWQgPSBcInJvdW5kZWQtclwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMuX2FkZE9uUmlnaHRDaGlsZHJlbi5sZW5ndGggPiAwXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHJvdW5kZWQgPSAncm91bmRlZC1sJztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJvdW5kZWQ7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHBfQ2xhc3NGb2N1cygpIHtcclxuICAgICAgICBsZXQgcmVzdWx0ID0gJyc7XHJcbiAgICAgICAgaWYgKHRoaXMuY29sb3IgPT0gXCJkZWZhdWx0XCIgfHwgdGhpcy5jb2xvciA9PSAnZGFyaycpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gJ291dGxpbmUtbm9uZSByaW5nLW9wYWNpdHktMjAgZGFyazpyaW5nLW9wYWNpdHktMjAgcmluZyByaW5nLXByaW1hcnktMSBib3JkZXItcHJpbWFyeS0xIGRhcms6cmluZy1kLXByaW1hcnktMSBkYXJrOmJvcmRlci1kLXByaW1hcnktMSc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wX2dldENsYXNzRm9jdXNCeUNvbG9yKHRoaXMuY29sb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcF9nZXRDbGFzc0JvcmRlckJ5Q29sb3IoY29sb3I6IElucHV0Q29sb3IpIHtcclxuICAgICAgICBsZXQgcmVzdWx0ID0gJyc7XHJcbiAgICAgICAgc3dpdGNoIChjb2xvcikge1xyXG4gICAgICAgICAgICBjYXNlIFwiZGFya1wiOlxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gYGJvcmRlci10cmFuc3BhcmVudGAsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gJ291dGxpbmUtbm9uZSByaW5nLW9wYWNpdHktMjAgZGFyazpyaW5nLW9wYWNpdHktMjAgcmluZyAgcmluZy1wcmltYXJ5LTEgZGFyazpyaW5nLWQtcHJpbWFyeS0xIGJvcmRlci1wcmltYXJ5LTEgZGFyazpib3JkZXItZC1wcmltYXJ5LTEnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJzdWNjZXNzXCI6XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBgYm9yZGVyLXN1Y2Nlc3MtNDAwIGRhcms6Ym9yZGVyLWQtc3VjY2Vzcy00MDBgLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGBvdXRsaW5lLW5vbmUgcmluZy1vcGFjaXR5LTIwIGRhcms6cmluZy1vcGFjaXR5LTIwIHJpbmcgcmluZy1zdWNjZXNzLTQwMCBkYXJrOnJpbmctZC1zdWNjZXNzLTQwMCBib3JkZXItc3VjY2Vzcy00MDAgZGFyazpib3JkZXItZC1zdWNjZXNzLTQwMGA7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImVycm9yXCI6XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBgYm9yZGVyLWVycm9yLTQwMCBkYXJrOmJvcmRlci1kLWVycm9yLTQwMGAsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gYG91dGxpbmUtbm9uZSByaW5nLW9wYWNpdHktMjAgZGFyazpyaW5nLW9wYWNpdHktMjAgcmluZyByaW5nLWVycm9yLTQwMCBkYXJrOnJpbmctZC1lcnJvci00MDAgYm9yZGVyLWVycm9yLTQwMCBkYXJrOmJvcmRlci1kLWVycm9yLTQwMGA7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIndhcm5pbmdcIjpcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGBib3JkZXItd2FybmluZy00MDAgZGFyazpib3JkZXItZC13YXJuaW5nLTQwMGAsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gYG91dGxpbmUtbm9uZSByaW5nLW9wYWNpdHktMjAgZGFyazpyaW5nLW9wYWNpdHktMjAgcmluZyByaW5nLXdhcm5pbmctNDAwIGRhcms6cmluZy1kLXdhcm5pbmctNDAwIGJvcmRlci13YXJuaW5nLTQwMCBkYXJrOmJvcmRlci1kLXdhcm5pbmctNDAwYDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gJ2JvcmRlci1uZXV0cmFsLTItMjAwIGRhcms6Ym9yZGVyLWQtbmV1dHJhbC0yLTIwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gJ291dGxpbmUtbm9uZSByaW5nLW9wYWNpdHktMjAgZGFyazpyaW5nLW9wYWNpdHktMjAgcmluZyAgcmluZy1wcmltYXJ5LTEgZGFyazpyaW5nLWQtcHJpbWFyeS0xIGJvcmRlci1wcmltYXJ5LTEgZGFyazpib3JkZXItZC1wcmltYXJ5LTEnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBwX2dldENsYXNzRm9jdXNCeUNvbG9yKGNvbG9yOiBJbnB1dENvbG9yKSB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9ICcnO1xyXG4gICAgICAgIHN3aXRjaCAoY29sb3IpIHtcclxuICAgICAgICAgICAgY2FzZSBcImRhcmtcIjpcclxuXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSAnb3V0bGluZS1ub25lIHJpbmctb3BhY2l0eS0yMCBkYXJrOnJpbmctb3BhY2l0eS0yMCByaW5nICByaW5nLXByaW1hcnktMSBkYXJrOnJpbmctZC1wcmltYXJ5LTEgYm9yZGVyLXByaW1hcnktMSBkYXJrOmJvcmRlci1kLXByaW1hcnktMSc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInN1Y2Nlc3NcIjpcclxuXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBgb3V0bGluZS1ub25lIHJpbmctb3BhY2l0eS0yMCBkYXJrOnJpbmctb3BhY2l0eS0yMCByaW5nIHJpbmctc3VjY2Vzcy00MDAgZGFyazpyaW5nLWQtc3VjY2Vzcy00MDAgYm9yZGVyLXN1Y2Nlc3MtNDAwIGRhcms6Ym9yZGVyLWQtc3VjY2Vzcy00MDBgO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJlcnJvclwiOlxyXG5cclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGBvdXRsaW5lLW5vbmUgcmluZy1vcGFjaXR5LTIwIGRhcms6cmluZy1vcGFjaXR5LTIwIHJpbmcgcmluZy1lcnJvci00MDAgZGFyazpyaW5nLWQtZXJyb3ItNDAwIGJvcmRlci1lcnJvci00MDAgZGFyazpib3JkZXItZC1lcnJvci00MDBgO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJ3YXJuaW5nXCI6XHJcblxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gYG91dGxpbmUtbm9uZSByaW5nLW9wYWNpdHktMjAgZGFyazpyaW5nLW9wYWNpdHktMjAgcmluZyByaW5nLXdhcm5pbmctNDAwIGRhcms6cmluZy1kLXdhcm5pbmctNDAwIGJvcmRlci13YXJuaW5nLTQwMCBkYXJrOmJvcmRlci1kLXdhcm5pbmctNDAwYDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG5cclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9ICdvdXRsaW5lLW5vbmUgcmluZy1vcGFjaXR5LTIwIGRhcms6cmluZy1vcGFjaXR5LTIwIHJpbmcgIHJpbmctcHJpbWFyeS0xIGRhcms6cmluZy1kLXByaW1hcnktMSBib3JkZXItcHJpbWFyeS0xIGRhcms6Ym9yZGVyLWQtcHJpbWFyeS0xJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxufSIsIjxkaXYgY2xhc3M9XCJ3LWZ1bGxcIj5cclxuICAgIDxkaXYgY2xhc3M9XCJmbGV4IGZsZXgtY29sIHctZnVsbFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IHctZnVsbCBtYi0yXCIgKm5nSWY9XCJfbGFiZWxDaGlsZENoaWxkcmVuLmxlbmd0aFwiPlxyXG4gICAgICAgICAgICA8bmctY29udGVudCBzZWxlY3Q9XCJ0ZHMtbGFiZWxcIj48L25nLWNvbnRlbnQ+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggdy1mdWxsXCIgW25nQ2xhc3NdPVwieydvcGFjaXR5LTY1JzpfY29udHJvbC5kaXNhYmxlZH1cIlxyXG4gICAgICAgICAgICAoY2xpY2spPVwiX2NvbnRyb2wub25Db250YWluZXJDbGljayAmJiBfY29udHJvbC5vbkNvbnRhaW5lckNsaWNrKCRldmVudClcIj5cclxuICAgICAgICAgICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwiW3Rkc0FkZE9uTGVmdF1cIiBbc2l6ZV09XCJzaXplXCI+PC9uZy1jb250ZW50PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBmbGV4LWF1dG8gZmxleC1jb2xcIlxyXG4gICAgICAgICAgICAgICAgW25nQ2xhc3NdPVwieyd3LWZ1bGwnOiFfYWRkT25SaWdodENoaWxkcmVuLmxlbmd0aCAmJiAhX2FkZE9uTGVmdENoaWxkcmVuLmxlbmd0aH1cIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgI2Nvbm5lY3Rpb25Db250YWluZXJcclxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImZsZXggaXRlbXMtZW5kIHJlbGF0aXZlIHRkcy1mb3JtLWZpZWxkLWNvbnRyb2wgdy1mdWxsIG1heC13LWZ1bGwgZm9ybS1maWVsZC1jb25uZWN0aW9uLWNvbnRhaW5lclwiXHJcbiAgICAgICAgICAgICAgICAgICAgdGRzLWZvcm0tZmllbGQtY29udGFpbmVyIFt0ZHNDbGFzc109XCJjbHNDb250YWluZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGRzLWZvcm0tZmllbGQtcHJlZml4IHRleHQteGwgbGVhZGluZy1ub25lIHNlbGYtY2VudGVyXCIgKm5nSWY9XCJfcHJlZml4Q2hpbGRyZW4ubGVuZ3RoXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgW25nQ2xhc3NdPVwie1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3B4LTInOnNpemUgPT09J3NtJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdweC0yLjUnOnNpemUgIT09J3NtJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiZy1uZXV0cmFsLTMtNTAgYWRyazpiZy1kLW5ldXRyYWwtMy01MCByb3VuZGVkLWwnOl9jb250cm9sLmRpc2FibGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwiW3Rkc1ByZWZpeF1cIj48L25nLWNvbnRlbnQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRkcy1mb3JtLWZpZWxkLWluZml4IGZsZXgtYXV0byBtYXgtdy1mdWxsXCIgI2lucHV0Q29udGFpbmVyIFtpZF09XCJfbGFiZWxJZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8bmctY29udGVudD48L25nLWNvbnRlbnQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRkcy1mb3JtLWZpZWxkLXN1ZmZpeCBoLWZ1bGwgZmxleCAgaXRlbXMtY2VudGVyIHRleHQteGwgbGVhZGluZy1ub25lIHRleHQtbmV1dHJhbC0xLTMwMCBkYXJrOnRleHQtZC1uZXV0cmFsLTEtOTAwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgKm5nSWY9XCJfc3VmZml4Q2hpbGRyZW4ubGVuZ3RoXCIgW25nQ2xhc3NdPVwie1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3B4LTEuNSc6c2l6ZSA9PT0nbWQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3B4LTInOnNpemUgPT09J2xnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdweC0xJzpzaXplID09PSdzbScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZ3JvdXAtaG92ZXI6YmctbmV1dHJhbC0zLTUwIGdyb3VwLWhvdmVyOnJvdW5kZWQtciBjdXJzb3ItcG9pbnRlciBkYXJrOmdyb3VwLWhvdmVyOmJnLWQtbmV1dHJhbC0zLTIwMCBkYXJrOmJnLWQtbmV1dHJhbC0zLTUwIGJnLXdoaXRlICc6IV9jb250cm9sLmRpc2FibGVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2JnLW5ldXRyYWwtMy01MCBhZHJrOmJnLWQtbmV1dHJhbC0zLTUwIHJvdW5kZWQtciAnOl9jb250cm9sLmRpc2FibGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwiW3Rkc1N1ZmZpeF1cIj48L25nLWNvbnRlbnQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZHMtZm9ybS1maWVsZC1zdWJzY3JpcHQtd3JhcHBlciBcIiBbbmdTd2l0Y2hdPVwiX2dldERpc3BsYXllZE1lc3NhZ2VzKClcIj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiAqbmdTd2l0Y2hDYXNlPVwiJ2Vycm9yJ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8bmctY29udGVudCBzZWxlY3Q9XCJ0ZHMtZXJyb3JcIj48L25nLWNvbnRlbnQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwidGRzLXdhcm5pbmdcIj48L25nLWNvbnRlbnQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwidGRzLXN1Y2Nlc3NcIj48L25nLWNvbnRlbnQ+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxuZy1jb250ZW50IHNlbGVjdD1cIlt0ZHNBZGRPblJpZ2h0XVwiPjwvbmctY29udGVudD5cclxuXHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgPC9kaXY+XHJcblxyXG48L2Rpdj4iXX0=