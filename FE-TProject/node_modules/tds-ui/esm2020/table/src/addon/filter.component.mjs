import { ChangeDetectionStrategy, Component, EventEmitter, Input, Output, ViewEncapsulation } from '@angular/core';
import { Subject } from 'rxjs';
import { takeUntil } from 'rxjs/operators';
import { arraysEqual } from 'tds-ui/core/util';
import * as i0 from "@angular/core";
import * as i1 from "tds-ui/i18n";
import * as i2 from "@angular/common";
import * as i3 from "./filter-trigger.component";
import * as i4 from "tds-ui/dropdown";
import * as i5 from "tds-ui/radio";
import * as i6 from "@angular/forms";
import * as i7 from "tds-ui/tds-checkbox";
import * as i8 from "tds-ui/button";
function TDSTableFilterComponent_ng_template_1_Template(rf, ctx) { }
function TDSTableFilterComponent_ng_container_2_div_7_label_1_Template(rf, ctx) { if (rf & 1) {
    const _r9 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "label", 15);
    i0.ɵɵlistener("ngModelChange", function TDSTableFilterComponent_ng_container_2_div_7_label_1_Template_label_ngModelChange_0_listener() { i0.ɵɵrestoreView(_r9); const f_r4 = i0.ɵɵnextContext().$implicit; const ctx_r7 = i0.ɵɵnextContext(2); return ctx_r7.check(f_r4); });
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const f_r4 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵproperty("ngModel", f_r4.checked);
    i0.ɵɵadvance(1);
    i0.ɵɵtextInterpolate1(" ", f_r4.text, " ");
} }
function TDSTableFilterComponent_ng_container_2_div_7_tds_checkbox_2_Template(rf, ctx) { if (rf & 1) {
    const _r13 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "tds-checkbox", 16);
    i0.ɵɵlistener("change", function TDSTableFilterComponent_ng_container_2_div_7_tds_checkbox_2_Template_tds_checkbox_change_0_listener() { i0.ɵɵrestoreView(_r13); const f_r4 = i0.ɵɵnextContext().$implicit; const ctx_r11 = i0.ɵɵnextContext(2); return ctx_r11.check(f_r4); });
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const f_r4 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵproperty("checked", f_r4.checked);
    i0.ɵɵadvance(1);
    i0.ɵɵtextInterpolate1("", f_r4.text, " ");
} }
function TDSTableFilterComponent_ng_container_2_div_7_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 12);
    i0.ɵɵtemplate(1, TDSTableFilterComponent_ng_container_2_div_7_label_1_Template, 2, 2, "label", 13);
    i0.ɵɵtemplate(2, TDSTableFilterComponent_ng_container_2_div_7_tds_checkbox_2_Template, 2, 2, "tds-checkbox", 14);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r3 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngIf", !ctx_r3.filterMultiple);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngIf", ctx_r3.filterMultiple);
} }
const _c0 = function (a0, a1) { return { "text-white bg-primary-1 ": a0, "text-neutral-1-200 group-hover:bg-neutral-3-50": a1 }; };
function TDSTableFilterComponent_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    const _r16 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "tds-filter-trigger", 3);
    i0.ɵɵlistener("visibleChange", function TDSTableFilterComponent_ng_container_2_Template_tds_filter_trigger_visibleChange_1_listener($event) { i0.ɵɵrestoreView(_r16); const ctx_r15 = i0.ɵɵnextContext(); return ctx_r15.onVisibleChange($event); });
    i0.ɵɵelementStart(2, "span", 4);
    i0.ɵɵelement(3, "span", 5);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(4, "tds-dropdown-menu", null, 6)(6, "div", 7);
    i0.ɵɵtemplate(7, TDSTableFilterComponent_ng_container_2_div_7_Template, 3, 2, "div", 8);
    i0.ɵɵelementStart(8, "div", 9)(9, "button", 10);
    i0.ɵɵlistener("click", function TDSTableFilterComponent_ng_container_2_Template_button_click_9_listener() { i0.ɵɵrestoreView(_r16); const ctx_r17 = i0.ɵɵnextContext(); return ctx_r17.reset(); });
    i0.ɵɵtext(10);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(11, "button", 11);
    i0.ɵɵlistener("click", function TDSTableFilterComponent_ng_container_2_Template_button_click_11_listener() { i0.ɵɵrestoreView(_r16); const ctx_r18 = i0.ɵɵnextContext(); return ctx_r18.confirm(); });
    i0.ɵɵtext(12);
    i0.ɵɵelementEnd()()()();
    i0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const _r2 = i0.ɵɵreference(5);
    const ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("visible", ctx_r1.isVisible)("active", ctx_r1.isChecked)("dropdownMenu", _r2);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngClass", i0.ɵɵpureFunction2(9, _c0, ctx_r1.isChecked, !ctx_r1.isChecked));
    i0.ɵɵadvance(5);
    i0.ɵɵproperty("ngForOf", ctx_r1.listOfParsedFilter)("ngForTrackBy", ctx_r1.trackByValue);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("disabled", !ctx_r1.isChecked);
    i0.ɵɵadvance(1);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.locale.filterReset, " ");
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r1.locale.filterConfirm);
} }
export class TDSTableFilterComponent {
    constructor(cdr, i18n, elementRef) {
        this.cdr = cdr;
        this.i18n = i18n;
        this.elementRef = elementRef;
        this.contentTemplate = null;
        this.customFilter = false;
        this.extraTemplate = null;
        this.filterMultiple = true;
        this.listOfFilter = [];
        this.filterChange = new EventEmitter();
        this.destroy$ = new Subject();
        this.isChecked = false;
        this.isVisible = false;
        this.listOfParsedFilter = [];
        this.listOfChecked = [];
        // TODO: move to host after View Engine deprecation
        this.elementRef.nativeElement.classList.add('tds-table-filter-column');
    }
    trackByValue(_, item) {
        return item.value;
    }
    check(filter) {
        if (this.filterMultiple) {
            this.listOfParsedFilter = this.listOfParsedFilter.map(item => {
                if (item === filter) {
                    return { ...item, checked: !filter.checked };
                }
                else {
                    return item;
                }
            });
            filter.checked = !filter.checked;
        }
        else {
            this.listOfParsedFilter = this.listOfParsedFilter.map(item => ({ ...item, checked: item === filter }));
        }
        this.isChecked = this.getCheckedStatus(this.listOfParsedFilter);
    }
    confirm() {
        this.isVisible = false;
        this.emitFilterData();
    }
    reset() {
        this.isVisible = false;
        this.listOfParsedFilter = this.parseListOfFilter(this.listOfFilter, true);
        this.isChecked = this.getCheckedStatus(this.listOfParsedFilter);
        this.emitFilterData();
    }
    onVisibleChange(value) {
        this.isVisible = value;
        if (!value) {
            this.emitFilterData();
        }
        else {
            this.listOfChecked = this.listOfParsedFilter.filter(item => item.checked).map(item => item.value);
        }
    }
    emitFilterData() {
        const listOfChecked = this.listOfParsedFilter.filter(item => item.checked).map(item => item.value);
        if (!arraysEqual(this.listOfChecked, listOfChecked)) {
            if (this.filterMultiple) {
                this.filterChange.emit(listOfChecked);
            }
            else {
                this.filterChange.emit(listOfChecked.length > 0 ? listOfChecked[0] : null);
            }
        }
    }
    parseListOfFilter(listOfFilter, reset) {
        return listOfFilter.map(item => {
            const checked = reset ? false : !!item.byDefault;
            return { text: item.text, value: item.value, checked };
        });
    }
    getCheckedStatus(listOfParsedFilter) {
        return listOfParsedFilter.some(item => item.checked);
    }
    ngOnInit() {
        this.i18n.localeChange.pipe(takeUntil(this.destroy$)).subscribe(() => {
            this.locale = this.i18n.getLocaleData('Table');
            this.cdr.markForCheck();
        });
    }
    ngOnChanges(changes) {
        const { listOfFilter } = changes;
        if (listOfFilter && this.listOfFilter && this.listOfFilter.length) {
            this.listOfParsedFilter = this.parseListOfFilter(this.listOfFilter);
            this.isChecked = this.getCheckedStatus(this.listOfParsedFilter);
        }
    }
    ngOnDestroy() {
        this.destroy$.next();
        this.destroy$.complete();
    }
}
TDSTableFilterComponent.ɵfac = function TDSTableFilterComponent_Factory(t) { return new (t || TDSTableFilterComponent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i1.TDSI18nService), i0.ɵɵdirectiveInject(i0.ElementRef)); };
TDSTableFilterComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: TDSTableFilterComponent, selectors: [["tds-table-filter"]], hostAttrs: [1, "flex", "justify-between", "cursor-pointer", "items-center"], inputs: { contentTemplate: "contentTemplate", customFilter: "customFilter", extraTemplate: "extraTemplate", filterMultiple: "filterMultiple", listOfFilter: "listOfFilter" }, outputs: { filterChange: "filterChange" }, features: [i0.ɵɵNgOnChangesFeature], decls: 3, vars: 3, consts: [[1, "tds-table-column-title", "flex-auto", "flex", "justify-between", "pr-1"], [3, "ngTemplateOutlet"], [4, "ngIf", "ngIfElse"], [3, "visible", "active", "dropdownMenu", "visibleChange"], [1, "p-0.5", "rounded-md", "flex", "items-center", 3, "ngClass"], [1, "tdsi-filter-2-fill", "text-base", "leading-4"], ["filterMenu", "tdsDropdownMenu"], [1, "w-full", "py-2"], ["tds-dropdown-item", "", 4, "ngFor", "ngForOf", "ngForTrackBy"], [1, "tds-table-filter-dropdown-btns", "px-2"], ["tds-flat-button", "", "color", "primary", "size", "sm", 1, "mr-2", 3, "disabled", "click"], ["tds-button", "", "color", "primary", "size", "sm", 1, "max-w-max", 2, "min-width", "50px", 3, "click"], ["tds-dropdown-item", ""], ["tds-radio", "", 3, "ngModel", "ngModelChange", 4, "ngIf"], [3, "checked", "change", 4, "ngIf"], ["tds-radio", "", 3, "ngModel", "ngModelChange"], [3, "checked", "change"]], template: function TDSTableFilterComponent_Template(rf, ctx) { if (rf & 1) {
        i0.ɵɵelementStart(0, "span", 0);
        i0.ɵɵtemplate(1, TDSTableFilterComponent_ng_template_1_Template, 0, 0, "ng-template", 1);
        i0.ɵɵelementEnd();
        i0.ɵɵtemplate(2, TDSTableFilterComponent_ng_container_2_Template, 13, 12, "ng-container", 2);
    } if (rf & 2) {
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngTemplateOutlet", ctx.contentTemplate);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngIf", !ctx.customFilter)("ngIfElse", ctx.extraTemplate);
    } }, directives: [i2.NgTemplateOutlet, i2.NgIf, i3.TDSFilterTriggerComponent, i2.NgClass, i4.TDSDropdownMenuComponent, i2.NgForOf, i4.TDSDropDownItemDirective, i5.TDSRadioComponent, i6.NgControlStatus, i6.NgModel, i7.TDSCheckbox, i8.TDSButtonComponent], encapsulation: 2, changeDetection: 0 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(TDSTableFilterComponent, [{
        type: Component,
        args: [{ selector: 'tds-table-filter', preserveWhitespaces: false, changeDetection: ChangeDetectionStrategy.OnPush, encapsulation: ViewEncapsulation.None, host: {
                    class: "flex justify-between cursor-pointer items-center"
                }, template: "<span class=\"tds-table-column-title flex-auto flex justify-between pr-1 \">\r\n    <ng-template [ngTemplateOutlet]=\"contentTemplate\"></ng-template>\r\n</span>\r\n<ng-container *ngIf=\"!customFilter; else extraTemplate\">\r\n    <tds-filter-trigger [visible]=\"isVisible\" [active]=\"isChecked\" [dropdownMenu]=\"filterMenu\"\r\n        (visibleChange)=\"onVisibleChange($event)\">\r\n        <span class=\"p-0.5 rounded-md flex items-center\" [ngClass]=\"{'text-white bg-primary-1 ':isChecked,'text-neutral-1-200 group-hover:bg-neutral-3-50':!isChecked}\">\r\n            <span class=\"tdsi-filter-2-fill text-base leading-4\" ></span>\r\n        </span>\r\n        \r\n    </tds-filter-trigger>\r\n\r\n    <tds-dropdown-menu #filterMenu=\"tdsDropdownMenu\">\r\n        <div class=\"w-full py-2\">\r\n            <div tds-dropdown-item *ngFor=\"let f of listOfParsedFilter; trackBy: trackByValue\" >\r\n                <label tds-radio *ngIf=\"!filterMultiple\" [ngModel]=\"f.checked\" (ngModelChange)=\"check(f)\">\r\n                    {{ f.text}}\r\n                </label>\r\n                <tds-checkbox *ngIf=\"filterMultiple\" [checked]=\"f.checked\" (change)=\"check(f)\">{{ f.text }}\r\n                </tds-checkbox>\r\n            </div>\r\n            <div class=\"tds-table-filter-dropdown-btns px-2\">\r\n                <button class=\"mr-2\" tds-flat-button color=\"primary\" size=\"sm\" (click)=\"reset()\" [disabled]=\"!isChecked\">\r\n                  {{ locale.filterReset }}\r\n                </button>\r\n                <button tds-button color=\"primary\" size=\"sm\" (click)=\"confirm()\" class=\"max-w-max\" style=\"min-width: 50px;\">{{ locale.filterConfirm }}</button>\r\n              </div>\r\n        </div>\r\n    </tds-dropdown-menu>\r\n  </ng-container>" }]
    }], function () { return [{ type: i0.ChangeDetectorRef }, { type: i1.TDSI18nService }, { type: i0.ElementRef }]; }, { contentTemplate: [{
            type: Input
        }], customFilter: [{
            type: Input
        }], extraTemplate: [{
            type: Input
        }], filterMultiple: [{
            type: Input
        }], listOfFilter: [{
            type: Input
        }], filterChange: [{
            type: Output
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsdGVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3Rkcy11aS90YWJsZS9zcmMvYWRkb24vZmlsdGVyLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3Rkcy11aS90YWJsZS9zcmMvYWRkb24vZmlsdGVyLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFDTCx1QkFBdUIsRUFFdkIsU0FBUyxFQUVULFlBQVksRUFDWixLQUFLLEVBSUwsTUFBTSxFQUdOLGlCQUFpQixFQUNsQixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQy9CLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUMzQyxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7Ozs7Ozs7Ozs7Ozs7SUNIL0IsaUNBQTBGO0lBQTNCLHNQQUFpQixrQkFBUSxJQUFDO0lBQ3JGLFlBQ0o7SUFBQSxpQkFBUTs7O0lBRmlDLHNDQUFxQjtJQUMxRCxlQUNKO0lBREksMENBQ0o7Ozs7SUFDQSx3Q0FBK0U7SUFBcEIsd1BBQVUsbUJBQVEsSUFBQztJQUFDLFlBQy9FO0lBQUEsaUJBQWU7OztJQURzQixzQ0FBcUI7SUFBcUIsZUFDL0U7SUFEK0UseUNBQy9FOzs7SUFMSiwrQkFBb0Y7SUFDaEYsa0dBRVE7SUFDUixnSEFDZTtJQUNuQixpQkFBTTs7O0lBTGdCLGVBQXFCO0lBQXJCLDZDQUFxQjtJQUd4QixlQUFvQjtJQUFwQiw0Q0FBb0I7Ozs7O0lBZm5ELDZCQUF3RDtJQUNwRCw2Q0FDOEM7SUFBMUMsaU5BQWlCLCtCQUF1QixJQUFDO0lBQ3pDLCtCQUFnSztJQUM1SiwwQkFBNkQ7SUFDakUsaUJBQU8sRUFBQTtJQUlYLGtEQUFpRCxhQUFBO0lBRXpDLHVGQU1NO0lB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QUNELFdBQVc7UUFDVCxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDM0IsQ0FBQzs7OEZBcEdVLHVCQUF1QjswRUFBdkIsdUJBQXVCO1FDekNwQywrQkFBMEU7UUFDdEUsd0ZBQWdFO1FBQ3BFLGlCQUFPO1FBQ1AsNEZBMEJpQjs7UUE1QkEsZUFBb0M7UUFBcEMsc0RBQW9DO1FBRXRDLGVBQXFCO1FBQXJCLHdDQUFxQiwrQkFBQTs7dUZEc0N2Qix1QkFBdUI7Y0FWbkMsU0FBUzsyQkFDRSxrQkFBa0IsdUJBQ1AsS0FBSyxtQkFDVCx1QkFBdUIsQ0FBQyxNQUFNLGlCQUNoQyxpQkFBaUIsQ0FBQyxJQUFJLFFBRWpDO29CQUNKLEtBQUssRUFBQyxrREFBa0Q7aUJBQ3hEOzBIQUdTLGVBQWU7a0JBQXZCLEtBQUs7WUFDRyxZQUFZO2tCQUFwQixLQUFLO1lBQ0csYUFBYTtrQkFBckIsS0FBSztZQUNHLGNBQWM7a0JBQXRCLEtBQUs7WUFDRyxZQUFZO2tCQUFwQixLQUFLO1lBQ2EsWUFBWTtrQkFBOUIsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5pbXBvcnQge1xyXG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxyXG4gIENoYW5nZURldGVjdG9yUmVmLFxyXG4gIENvbXBvbmVudCxcclxuICBFbGVtZW50UmVmLFxyXG4gIEV2ZW50RW1pdHRlcixcclxuICBJbnB1dCxcclxuICBPbkNoYW5nZXMsXHJcbiAgT25EZXN0cm95LFxyXG4gIE9uSW5pdCxcclxuICBPdXRwdXQsXHJcbiAgU2ltcGxlQ2hhbmdlcyxcclxuICBUZW1wbGF0ZVJlZixcclxuICBWaWV3RW5jYXBzdWxhdGlvblxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IHRha2VVbnRpbCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuaW1wb3J0IHsgYXJyYXlzRXF1YWwgfSBmcm9tICd0ZHMtdWkvY29yZS91dGlsJztcclxuaW1wb3J0IHsgVERTSTE4blNlcnZpY2UsIFREU1RhYmxlSTE4bkludGVyZmFjZSB9IGZyb20gJ3Rkcy11aS9pMThuJztcclxuaW1wb3J0IHsgVERTU2FmZUFueSB9IGZyb20gJ3Rkcy11aS9zaGFyZWQvdXRpbGl0eSc7XHJcblxyXG5cclxuaW1wb3J0IHsgVERTVGFibGVGaWx0ZXJMaXN0IH0gZnJvbSAnLi4vdGFibGUudHlwZXMnO1xyXG5cclxuaW50ZXJmYWNlIFREU1RoSXRlbUludGVyZmFjZSB7XHJcbiAgdGV4dDogc3RyaW5nO1xyXG4gIHZhbHVlOiBURFNTYWZlQW55O1xyXG4gIGNoZWNrZWQ6IGJvb2xlYW47XHJcbn1cclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAndGRzLXRhYmxlLWZpbHRlcicsXHJcbiAgcHJlc2VydmVXaGl0ZXNwYWNlczogZmFsc2UsXHJcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXHJcbiAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcclxuICB0ZW1wbGF0ZVVybDpcIi4vZmlsdGVyLmNvbXBvbmVudC5odG1sXCIsXHJcbiBob3N0OntcclxuICBjbGFzczpcImZsZXgganVzdGlmeS1iZXR3ZWVuIGN1cnNvci1wb2ludGVyIGl0ZW1zLWNlbnRlclwiXHJcbiB9XHJcbiB9KVxyXG5leHBvcnQgY2xhc3MgVERTVGFibGVGaWx0ZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkNoYW5nZXMsIE9uRGVzdHJveSwgT25Jbml0IHtcclxuICBASW5wdXQoKSBjb250ZW50VGVtcGxhdGU6IFRlbXBsYXRlUmVmPFREU1NhZmVBbnk+IHwgbnVsbCA9IG51bGw7XHJcbiAgQElucHV0KCkgY3VzdG9tRmlsdGVyID0gZmFsc2U7XHJcbiAgQElucHV0KCkgZXh0cmFUZW1wbGF0ZTogVGVtcGxhdGVSZWY8VERTU2FmZUFueT4gfCBudWxsID0gbnVsbDtcclxuICBASW5wdXQoKSBmaWx0ZXJNdWx0aXBsZSA9IHRydWU7XHJcbiAgQElucHV0KCkgbGlzdE9mRmlsdGVyOiBURFNUYWJsZUZpbHRlckxpc3QgPSBbXTtcclxuICBAT3V0cHV0KCkgcmVhZG9ubHkgZmlsdGVyQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxURFNTYWZlQW55W10gfCBURFNTYWZlQW55PigpO1xyXG4gIHByaXZhdGUgZGVzdHJveSQgPSBuZXcgU3ViamVjdDx2b2lkPigpO1xyXG4gIGxvY2FsZSE6IFREU1RhYmxlSTE4bkludGVyZmFjZTtcclxuICBpc0NoZWNrZWQgPSBmYWxzZTtcclxuICBpc1Zpc2libGUgPSBmYWxzZTtcclxuICBsaXN0T2ZQYXJzZWRGaWx0ZXI6IFREU1RoSXRlbUludGVyZmFjZVtdID0gW107XHJcbiAgbGlzdE9mQ2hlY2tlZDogVERTU2FmZUFueVtdID0gW107XHJcblxyXG4gIHRyYWNrQnlWYWx1ZShfOiBudW1iZXIsIGl0ZW06IFREU1RoSXRlbUludGVyZmFjZSk6IFREU1NhZmVBbnkge1xyXG4gICAgcmV0dXJuIGl0ZW0udmFsdWU7XHJcbiAgfVxyXG5cclxuICBjaGVjayhmaWx0ZXI6IFREU1RoSXRlbUludGVyZmFjZSk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuZmlsdGVyTXVsdGlwbGUpIHtcclxuICAgICAgdGhpcy5saXN0T2ZQYXJzZWRGaWx0ZXIgPSB0aGlzLmxpc3RPZlBhcnNlZEZpbHRlci5tYXAoaXRlbSA9PiB7XHJcbiAgICAgICAgaWYgKGl0ZW0gPT09IGZpbHRlcikge1xyXG4gICAgICAgICAgcmV0dXJuIHsgLi4uaXRlbSwgY2hlY2tlZDogIWZpbHRlci5jaGVja2VkIH07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiBpdGVtO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIGZpbHRlci5jaGVja2VkID0gIWZpbHRlci5jaGVja2VkO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5saXN0T2ZQYXJzZWRGaWx0ZXIgPSB0aGlzLmxpc3RPZlBhcnNlZEZpbHRlci5tYXAoaXRlbSA9PiAoeyAuLi5pdGVtLCBjaGVja2VkOiBpdGVtID09PSBmaWx0ZXIgfSkpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5pc0NoZWNrZWQgPSB0aGlzLmdldENoZWNrZWRTdGF0dXModGhpcy5saXN0T2ZQYXJzZWRGaWx0ZXIpO1xyXG4gICAgXHJcbiAgfVxyXG5cclxuICBjb25maXJtKCk6IHZvaWQge1xyXG4gICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTtcclxuICAgIHRoaXMuZW1pdEZpbHRlckRhdGEoKTtcclxuICB9XHJcblxyXG4gIHJlc2V0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTtcclxuICAgIHRoaXMubGlzdE9mUGFyc2VkRmlsdGVyID0gdGhpcy5wYXJzZUxpc3RPZkZpbHRlcih0aGlzLmxpc3RPZkZpbHRlciwgdHJ1ZSk7XHJcbiAgICB0aGlzLmlzQ2hlY2tlZCA9IHRoaXMuZ2V0Q2hlY2tlZFN0YXR1cyh0aGlzLmxpc3RPZlBhcnNlZEZpbHRlcik7XHJcbiAgICB0aGlzLmVtaXRGaWx0ZXJEYXRhKCk7XHJcbiAgfVxyXG5cclxuICBvblZpc2libGVDaGFuZ2UodmFsdWU6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgIHRoaXMuaXNWaXNpYmxlID0gdmFsdWU7XHJcbiAgICBpZiAoIXZhbHVlKSB7XHJcbiAgICAgIHRoaXMuZW1pdEZpbHRlckRhdGEoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMubGlzdE9mQ2hlY2tlZCA9IHRoaXMubGlzdE9mUGFyc2VkRmlsdGVyLmZpbHRlcihpdGVtID0+IGl0ZW0uY2hlY2tlZCkubWFwKGl0ZW0gPT4gaXRlbS52YWx1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBlbWl0RmlsdGVyRGF0YSgpOiB2b2lkIHtcclxuICAgIGNvbnN0IGxpc3RPZkNoZWNrZWQgPSB0aGlzLmxpc3RPZlBhcnNlZEZpbHRlci5maWx0ZXIoaXRlbSA9PiBpdGVtLmNoZWNrZWQpLm1hcChpdGVtID0+IGl0ZW0udmFsdWUpO1xyXG4gICAgaWYgKCFhcnJheXNFcXVhbCh0aGlzLmxpc3RPZkNoZWNrZWQsIGxpc3RPZkNoZWNrZWQpKSB7XHJcbiAgICAgIGlmICh0aGlzLmZpbHRlck11bHRpcGxlKSB7XHJcbiAgICAgICAgdGhpcy5maWx0ZXJDaGFuZ2UuZW1pdChsaXN0T2ZDaGVja2VkKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmZpbHRlckNoYW5nZS5lbWl0KGxpc3RPZkNoZWNrZWQubGVuZ3RoID4gMCA/IGxpc3RPZkNoZWNrZWRbMF0gOiBudWxsKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcGFyc2VMaXN0T2ZGaWx0ZXIobGlzdE9mRmlsdGVyOiBURFNUYWJsZUZpbHRlckxpc3QsIHJlc2V0PzogYm9vbGVhbik6IFREU1RoSXRlbUludGVyZmFjZVtdIHtcclxuICAgIHJldHVybiBsaXN0T2ZGaWx0ZXIubWFwKGl0ZW0gPT4ge1xyXG4gICAgICBjb25zdCBjaGVja2VkID0gcmVzZXQgPyBmYWxzZSA6ICEhaXRlbS5ieURlZmF1bHQ7XHJcbiAgICAgIHJldHVybiB7IHRleHQ6IGl0ZW0udGV4dCwgdmFsdWU6IGl0ZW0udmFsdWUsIGNoZWNrZWQgfTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2hlY2tlZFN0YXR1cyhsaXN0T2ZQYXJzZWRGaWx0ZXI6IFREU1RoSXRlbUludGVyZmFjZVtdKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gbGlzdE9mUGFyc2VkRmlsdGVyLnNvbWUoaXRlbSA9PiBpdGVtLmNoZWNrZWQpO1xyXG4gIH1cclxuXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBjZHI6IENoYW5nZURldGVjdG9yUmVmLCBwcml2YXRlIGkxOG46IFREU0kxOG5TZXJ2aWNlLCBwcml2YXRlIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYpIHtcclxuICAgIC8vIFRPRE86IG1vdmUgdG8gaG9zdCBhZnRlciBWaWV3IEVuZ2luZSBkZXByZWNhdGlvblxyXG4gICAgdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgndGRzLXRhYmxlLWZpbHRlci1jb2x1bW4nKTtcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5pMThuLmxvY2FsZUNoYW5nZS5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSkuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgdGhpcy5sb2NhbGUgPSB0aGlzLmkxOG4uZ2V0TG9jYWxlRGF0YSgnVGFibGUnKTtcclxuICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcclxuICAgIGNvbnN0IHsgbGlzdE9mRmlsdGVyIH0gPSBjaGFuZ2VzO1xyXG4gICAgaWYgKGxpc3RPZkZpbHRlciAmJiB0aGlzLmxpc3RPZkZpbHRlciAmJiB0aGlzLmxpc3RPZkZpbHRlci5sZW5ndGgpIHtcclxuICAgICAgdGhpcy5saXN0T2ZQYXJzZWRGaWx0ZXIgPSB0aGlzLnBhcnNlTGlzdE9mRmlsdGVyKHRoaXMubGlzdE9mRmlsdGVyKTtcclxuICAgICAgdGhpcy5pc0NoZWNrZWQgPSB0aGlzLmdldENoZWNrZWRTdGF0dXModGhpcy5saXN0T2ZQYXJzZWRGaWx0ZXIpO1xyXG4gICAgfVxyXG4gIH1cclxuICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcclxuICAgIHRoaXMuZGVzdHJveSQubmV4dCgpO1xyXG4gICAgdGhpcy5kZXN0cm95JC5jb21wbGV0ZSgpO1xyXG4gIH1cclxufVxyXG4iLCI8c3BhbiBjbGFzcz1cInRkcy10YWJsZS1jb2x1bW4tdGl0bGUgZmxleC1hdXRvIGZsZXgganVzdGlmeS1iZXR3ZWVuIHByLTEgXCI+XHJcbiAgICA8bmctdGVtcGxhdGUgW25nVGVtcGxhdGVPdXRsZXRdPVwiY29udGVudFRlbXBsYXRlXCI+PC9uZy10ZW1wbGF0ZT5cclxuPC9zcGFuPlxyXG48bmctY29udGFpbmVyICpuZ0lmPVwiIWN1c3RvbUZpbHRlcjsgZWxzZSBleHRyYVRlbXBsYXRlXCI+XHJcbiAgICA8dGRzLWZpbHRlci10cmlnZ2VyIFt2aXNpYmxlXT1cImlzVmlzaWJsZVwiIFthY3RpdmVdPVwiaXNDaGVja2VkXCIgW2Ryb3Bkb3duTWVudV09XCJmaWx0ZXJNZW51XCJcclxuICAgICAgICAodmlzaWJsZUNoYW5nZSk9XCJvblZpc2libGVDaGFuZ2UoJGV2ZW50KVwiPlxyXG4gICAgICAgIDxzcGFuIGNsYXNzPVwicC0wLjUgcm91bmRlZC1tZCBmbGV4IGl0ZW1zLWNlbnRlclwiIFtuZ0NsYXNzXT1cInsndGV4dC13aGl0ZSBiZy1wcmltYXJ5LTEgJzppc0NoZWNrZWQsJ3RleHQtbmV1dHJhbC0xLTIwMCBncm91cC1ob3ZlcjpiZy1uZXV0cmFsLTMtNTAnOiFpc0NoZWNrZWR9XCI+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGRzaS1maWx0ZXItMi1maWxsIHRleHQtYmFzZSBsZWFkaW5nLTRcIiA+PC9zcGFuPlxyXG4gICAgICAgIDwvc3Bhbj5cclxuICAgICAgICBcclxuICAgIDwvdGRzLWZpbHRlci10cmlnZ2VyPlxyXG5cclxuICAgIDx0ZHMtZHJvcGRvd24tbWVudSAjZmlsdGVyTWVudT1cInRkc0Ryb3Bkb3duTWVudVwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ3LWZ1bGwgcHktMlwiPlxyXG4gICAgICAgICAgICA8ZGl2IHRkcy1kcm9wZG93bi1pdGVtICpuZ0Zvcj1cImxldCBmIG9mIGxpc3RPZlBhcnNlZEZpbHRlcjsgdHJhY2tCeTogdHJhY2tCeVZhbHVlXCIgPlxyXG4gICAgICAgICAgICAgICAgPGxhYmVsIHRkcy1yYWRpbyAqbmdJZj1cIiFmaWx0ZXJNdWx0aXBsZVwiIFtuZ01vZGVsXT1cImYuY2hlY2tlZFwiIChuZ01vZGVsQ2hhbmdlKT1cImNoZWNrKGYpXCI+XHJcbiAgICAgICAgICAgICAgICAgICAge3sgZi50ZXh0fX1cclxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICA8dGRzLWNoZWNrYm94ICpuZ0lmPVwiZmlsdGVyTXVsdGlwbGVcIiBbY2hlY2tlZF09XCJmLmNoZWNrZWRcIiAoY2hhbmdlKT1cImNoZWNrKGYpXCI+e3sgZi50ZXh0IH19XHJcbiAgICAgICAgICAgICAgICA8L3Rkcy1jaGVja2JveD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZHMtdGFibGUtZmlsdGVyLWRyb3Bkb3duLWJ0bnMgcHgtMlwiPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIm1yLTJcIiB0ZHMtZmxhdC1idXR0b24gY29sb3I9XCJwcmltYXJ5XCIgc2l6ZT1cInNtXCIgKGNsaWNrKT1cInJlc2V0KClcIiBbZGlzYWJsZWRdPVwiIWlzQ2hlY2tlZFwiPlxyXG4gICAgICAgICAgICAgICAgICB7eyBsb2NhbGUuZmlsdGVyUmVzZXQgfX1cclxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiB0ZHMtYnV0dG9uIGNvbG9yPVwicHJpbWFyeVwiIHNpemU9XCJzbVwiIChjbGljayk9XCJjb25maXJtKClcIiBjbGFzcz1cIm1heC13LW1heFwiIHN0eWxlPVwibWluLXdpZHRoOiA1MHB4O1wiPnt7IGxvY2FsZS5maWx0ZXJDb25maXJtIH19PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICA8L3Rkcy1kcm9wZG93bi1tZW51PlxyXG4gIDwvbmctY29udGFpbmVyPiJdfQ==