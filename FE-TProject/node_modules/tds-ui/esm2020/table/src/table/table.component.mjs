import { __decorate } from "tslib";
import { ChangeDetectionStrategy, Component, ContentChild, EventEmitter, Input, Optional, Output, ViewChild, ViewEncapsulation } from '@angular/core';
import { InputBoolean } from 'tds-ui/shared/utility';
import { BehaviorSubject, combineLatest, of, Subject } from 'rxjs';
import { delay, filter, map, takeUntil } from 'rxjs/operators';
import { TDSTableDataService } from '../table-data.service';
import { TDSTableStyleService } from '../table-style.service';
import { TDSTableInnerScrollComponent } from './table-inner-scroll.component';
import { TDSTableVirtualScrollDirective } from './table-virtual-scroll.directive';
import { WithConfig } from 'tds-ui/core/config';
import { measureScrollbar } from 'tds-ui/core/util';
import * as i0 from "@angular/core";
import * as i1 from "tds-ui/core/resize-observers";
import * as i2 from "tds-ui/core/config";
import * as i3 from "../table-style.service";
import * as i4 from "../table-data.service";
import * as i5 from "@angular/cdk/bidi";
import * as i6 from "tds-ui/progress-spinner";
import * as i7 from "@angular/common";
import * as i8 from "./title-footer.component";
import * as i9 from "./table-inner-scroll.component";
import * as i10 from "./table-inner-default.component";
import * as i11 from "tds-ui/pagination";
function TDSTableComponent_ng_container_1_ng_template_1_Template(rf, ctx) { }
function TDSTableComponent_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, TDSTableComponent_ng_container_1_ng_template_1_Template, 0, 0, "ng-template", 11);
    i0.ɵɵelementContainerEnd();
} if (rf & 2) {
    i0.ɵɵnextContext();
    const _r8 = i0.ɵɵreference(11);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngTemplateOutlet", _r8);
} }
const _c0 = function (a0) { return { "border-b border-neutral-2-200": a0 }; };
function TDSTableComponent_tds_table_title_footer_4_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelement(0, "tds-table-title-footer", 12);
} if (rf & 2) {
    const ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵproperty("ngClass", i0.ɵɵpureFunction1(2, _c0, ctx_r2.bordered || ctx_r2.outerBordered))("title", ctx_r2.title);
} }
function TDSTableComponent_tds_table_inner_scroll_5_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelement(0, "tds-table-inner-scroll", 13);
} if (rf & 2) {
    const ctx_r3 = i0.ɵɵnextContext();
    const _r10 = i0.ɵɵreference(13);
    const _r1 = i0.ɵɵreference(3);
    i0.ɵɵproperty("data", ctx_r3.data)("scrollX", ctx_r3.scrollX)("scrollY", ctx_r3.scrollY)("contentTemplate", _r10)("listOfColWidth", ctx_r3.listOfAutoColWidth)("theadTemplate", ctx_r3.theadTemplate)("verticalScrollBarWidth", ctx_r3.verticalScrollBarWidth)("virtualTemplate", ctx_r3.virtualScrollDirective ? ctx_r3.virtualScrollDirective.templateRef : null)("virtualItemSize", ctx_r3.virtualItemSize)("virtualMaxBufferPx", ctx_r3.virtualMaxBufferPx)("virtualMinBufferPx", ctx_r3.virtualMinBufferPx)("tableMainElement", _r1)("virtualForTrackBy", ctx_r3.virtualForTrackBy);
} }
function TDSTableComponent_ng_template_6_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelement(0, "tds-table-inner-default", 14);
} if (rf & 2) {
    const ctx_r5 = i0.ɵɵnextContext();
    const _r10 = i0.ɵɵreference(13);
    i0.ɵɵproperty("tableLayout", ctx_r5.tableLayout)("listOfColWidth", ctx_r5.listOfManualColWidth)("theadTemplate", ctx_r5.theadTemplate)("contentTemplate", _r10);
} }
function TDSTableComponent_tds_table_title_footer_8_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelement(0, "tds-table-title-footer", 15);
} if (rf & 2) {
    const ctx_r6 = i0.ɵɵnextContext();
    i0.ɵɵproperty("footer", ctx_r6.footer);
} }
function TDSTableComponent_ng_container_9_ng_template_1_Template(rf, ctx) { }
function TDSTableComponent_ng_container_9_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, TDSTableComponent_ng_container_9_ng_template_1_Template, 0, 0, "ng-template", 11);
    i0.ɵɵelementContainerEnd();
} if (rf & 2) {
    i0.ɵɵnextContext();
    const _r8 = i0.ɵɵreference(11);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngTemplateOutlet", _r8);
} }
function TDSTableComponent_ng_template_10_div_0_Template(rf, ctx) { if (rf & 1) {
    const _r18 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 17)(1, "tds-pagination", 18);
    i0.ɵɵlistener("pageSizeChange", function TDSTableComponent_ng_template_10_div_0_Template_tds_pagination_pageSizeChange_1_listener($event) { i0.ɵɵrestoreView(_r18); const ctx_r17 = i0.ɵɵnextContext(2); return ctx_r17.onPageSizeChange($event); })("pageIndexChange", function TDSTableComponent_ng_template_10_div_0_Template_tds_pagination_pageIndexChange_1_listener($event) { i0.ɵɵrestoreView(_r18); const ctx_r19 = i0.ɵɵnextContext(2); return ctx_r19.onPageIndexChange($event); })("clickRefresh", function TDSTableComponent_ng_template_10_div_0_Template_tds_pagination_clickRefresh_1_listener($event) { i0.ɵɵrestoreView(_r18); const ctx_r20 = i0.ɵɵnextContext(2); return ctx_r20.onClickRefresh($event); });
    i0.ɵɵelementEnd()();
} if (rf & 2) {
    const ctx_r16 = i0.ɵɵnextContext(2);
    const _r12 = i0.ɵɵreference(15);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("hidden", !ctx_r16.isShowPagination)("showSizeChanger", ctx_r16.showSizeChanger)("pageSizeOptions", ctx_r16.pageSizeOptions)("itemRender", ctx_r16.itemRender)("showQuickJumper", ctx_r16.showQuickJumper)("hideOnSinglePage", ctx_r16.hideOnSinglePage)("showTotal", ctx_r16.showTotal || _r12)("showRefresh", ctx_r16.showRefresh)("size", ctx_r16.paginationType)("pageSize", ctx_r16.pageSize)("total", ctx_r16.total)("simple", ctx_r16.simple)("pageIndex", ctx_r16.pageIndex);
} }
function TDSTableComponent_ng_template_10_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵtemplate(0, TDSTableComponent_ng_template_10_div_0_Template, 2, 13, "div", 16);
} if (rf & 2) {
    const ctx_r9 = i0.ɵɵnextContext();
    i0.ɵɵproperty("ngIf", ctx_r9.isShowPagination);
} }
function TDSTableComponent_ng_template_12_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵprojection(0);
} }
function TDSTableComponent_ng_template_14_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵtext(0);
} if (rf & 2) {
    const range_r21 = ctx.range;
    const total_r22 = ctx.$implicit;
    i0.ɵɵtextInterpolate3(" ", range_r21[0], "-", range_r21[1], " of ", total_r22, " ");
} }
const _c1 = ["*"];
const TDS_CONFIG_MODULE_NAME = 'table';
export class TDSTableComponent {
    constructor(elementRef, tdsResizeObserver, tdsConfigService, cdr, tdsTableStyleService, tdsTableDataService, directionality) {
        this.elementRef = elementRef;
        this.tdsResizeObserver = tdsResizeObserver;
        this.tdsConfigService = tdsConfigService;
        this.cdr = cdr;
        this.tdsTableStyleService = tdsTableStyleService;
        this.tdsTableDataService = tdsTableDataService;
        this.directionality = directionality;
        this._tdsModuleName = TDS_CONFIG_MODULE_NAME;
        this.tableLayout = 'auto';
        this.showTotal = null;
        this.showRefresh = true;
        this.itemRender = null;
        this.title = null;
        this.footer = null;
        this.noResult = undefined;
        this.pageSizeOptions = [10, 20, 30, 40, 50];
        this.virtualItemSize = 0;
        this.virtualMaxBufferPx = 200;
        this.virtualMinBufferPx = 100;
        this.virtualForTrackBy = index => index;
        this.loadingDelay = 0;
        this.pageIndex = 1;
        this.pageSize = 10;
        this.total = 0;
        this.widthConfig = [];
        this.listData = [];
        this.paginationPosition = 'bottom';
        this.scroll = { x: null, y: 'auto' };
        this.paginationType = 'sm';
        this.frontPagination = true;
        this.templateMode = false;
        this.showPagination = true;
        this.loading = false;
        this.outerBordered = false;
        this.loadingIndicator = null;
        this.bordered = false;
        this.size = 'default';
        this.showSizeChanger = false;
        this.hideOnSinglePage = false;
        this.showQuickJumper = false;
        this.simple = false;
        this.pageSizeChange = new EventEmitter();
        this.pageIndexChange = new EventEmitter();
        this.queryParams = new EventEmitter();
        this.currentPageDataChange = new EventEmitter();
        this.clickRefresh = new EventEmitter();
        /** public data for ngFor tr */
        this.data = [];
        this.scrollX = null;
        this.scrollY = null;
        this.theadTemplate = null;
        this.listOfAutoColWidth = [];
        this.listOfManualColWidth = [];
        this.hasFixLeft = false;
        this.hasFixRight = false;
        this.isShowPagination = true;
        this.destroy$ = new Subject();
        this.loading$ = new BehaviorSubject(false);
        this.templateMode$ = new BehaviorSubject(false);
        this.dir = 'ltr';
        this.verticalScrollBarWidth = 0;
        // TODO: move to host after View Engine deprecation
        this.elementRef.nativeElement.classList.add('tds-table-wrapper');
        this.tdsConfigService
            .getConfigChangeEventForComponent(TDS_CONFIG_MODULE_NAME)
            .pipe(takeUntil(this.destroy$))
            .subscribe(() => {
            this.cdr.markForCheck();
        });
    }
    onPageSizeChange(size) {
        this.tdsTableDataService.updatePageSize(size);
    }
    onPageIndexChange(index) {
        this.tdsTableDataService.updatePageIndex(index);
    }
    ngOnInit() {
        const { pageIndexDistinct$, pageSizeDistinct$, listOfCurrentPageData$, total$, queryParams$ } = this.tdsTableDataService;
        const { theadTemplate$, hasFixLeft$, hasFixRight$ } = this.tdsTableStyleService;
        this.dir = this.directionality.value;
        this.directionality.change?.pipe(takeUntil(this.destroy$)).subscribe((direction) => {
            this.dir = direction;
            this.cdr.detectChanges();
        });
        queryParams$.pipe(takeUntil(this.destroy$)).subscribe(this.queryParams);
        pageIndexDistinct$.pipe(takeUntil(this.destroy$)).subscribe(pageIndex => {
            if (pageIndex !== this.pageIndex) {
                this.pageIndex = pageIndex;
                this.pageIndexChange.next(pageIndex);
            }
        });
        pageSizeDistinct$.pipe(takeUntil(this.destroy$)).subscribe(pageSize => {
            if (pageSize !== this.pageSize) {
                this.pageSize = pageSize;
                this.pageSizeChange.next(pageSize);
            }
        });
        total$
            .pipe(takeUntil(this.destroy$), filter(() => this.frontPagination))
            .subscribe(total => {
            if (total !== this.total) {
                this.total = total;
                this.cdr.markForCheck();
            }
        });
        listOfCurrentPageData$.pipe(takeUntil(this.destroy$)).subscribe(data => {
            this.data = data;
            this.currentPageDataChange.next(data);
            this.cdr.markForCheck();
        });
        theadTemplate$.pipe(takeUntil(this.destroy$)).subscribe(theadTemplate => {
            this.theadTemplate = theadTemplate;
            this.cdr.markForCheck();
        });
        hasFixLeft$.pipe(takeUntil(this.destroy$)).subscribe(hasFixLeft => {
            this.hasFixLeft = hasFixLeft;
            this.cdr.markForCheck();
        });
        hasFixRight$.pipe(takeUntil(this.destroy$)).subscribe(hasFixRight => {
            this.hasFixRight = hasFixRight;
            this.cdr.markForCheck();
        });
        combineLatest([total$, this.loading$, this.templateMode$])
            .pipe(map(([total, loading, templateMode]) => total === 0 && !loading && !templateMode), takeUntil(this.destroy$))
            .subscribe(empty => {
            this.tdsTableStyleService.setShowEmpty(empty);
        });
        this.verticalScrollBarWidth = measureScrollbar('vertical');
        this.tdsTableStyleService.listOfListOfThWidthPx$.pipe(takeUntil(this.destroy$)).subscribe(listOfWidth => {
            this.listOfAutoColWidth = listOfWidth;
            this.cdr.markForCheck();
        });
        this.tdsTableStyleService.manualWidthConfigPx$.pipe(takeUntil(this.destroy$)).subscribe(listOfWidth => {
            this.listOfManualColWidth = listOfWidth;
            this.cdr.markForCheck();
        });
    }
    ngOnChanges(changes) {
        const { scroll, pageIndex, pageSize, frontPagination, listData, widthConfig, noResult, loading, templateMode } = changes;
        if (pageIndex) {
            this.tdsTableDataService.updatePageIndex(this.pageIndex);
        }
        if (pageSize) {
            this.tdsTableDataService.updatePageSize(this.pageSize);
        }
        if (listData) {
            this.listData = this.listData || [];
            this.tdsTableDataService.updateListOfData(this.listData);
        }
        if (frontPagination) {
            this.tdsTableDataService.updateFrontPagination(this.frontPagination);
        }
        if (scroll) {
            this.setScrollOnChanges();
        }
        if (widthConfig) {
            this.tdsTableStyleService.setTableWidthConfig(this.widthConfig);
        }
        if (loading) {
            this.loading$.next(this.loading);
        }
        if (templateMode) {
            this.templateMode$.next(this.templateMode);
        }
        if (noResult) {
            this.tdsTableStyleService.setNoResult(this.noResult);
        }
        this.updateShowPagination();
    }
    ngAfterViewInit() {
        //fix lỗi expand ko lấy dc host width
        of(this.getWidthHost()).pipe(delay(10), takeUntil(this.destroy$)).subscribe(this.tdsTableStyleService.hostWidth$);
        this.tdsResizeObserver
            .observe(this.elementRef)
            .pipe(map(([entry]) => {
            const { width } = entry.target.getBoundingClientRect();
            const scrollBarWidth = this.scrollY ? this.verticalScrollBarWidth : 0;
            return Math.floor(width - scrollBarWidth);
        }), takeUntil(this.destroy$))
            .subscribe(this.tdsTableStyleService.hostWidth$);
        if (this.tdsTableInnerScrollComponent && this.tdsTableInnerScrollComponent.cdkVirtualScrollViewport) {
            this.cdkVirtualScrollViewport = this.tdsTableInnerScrollComponent.cdkVirtualScrollViewport;
        }
    }
    ngOnDestroy() {
        this.destroy$.next();
        this.destroy$.complete();
    }
    onClickRefresh(e) {
        this.clickRefresh.emit(e);
    }
    setScrollOnChanges() {
        this.scrollX = (this.scroll && this.scroll.x) || null;
        this.scrollY = (this.scroll && this.scroll.y) || null;
        this.tdsTableStyleService.setScroll(this.scrollX, this.scrollY);
    }
    updateShowPagination() {
        this.isShowPagination =
            this.showPagination && ((this.hideOnSinglePage && this.listData.length > this.pageSize) ||
                (this.listData.length > 0 && !this.hideOnSinglePage) ||
                (!this.frontPagination && this.total > this.pageSize));
    }
    getWidthHost() {
        const { width } = this.elementRef.nativeElement.getBoundingClientRect();
        const scrollBarWidth = this.scrollY ? this.verticalScrollBarWidth : 0;
        return Math.floor(width - scrollBarWidth);
    }
}
TDSTableComponent.ɵfac = function TDSTableComponent_Factory(t) { return new (t || TDSTableComponent)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.TDSResizeObserver), i0.ɵɵdirectiveInject(i2.TDSConfigService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i3.TDSTableStyleService), i0.ɵɵdirectiveInject(i4.TDSTableDataService), i0.ɵɵdirectiveInject(i5.Directionality, 8)); };
TDSTableComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: TDSTableComponent, selectors: [["tds-table"]], contentQueries: function TDSTableComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        i0.ɵɵcontentQuery(dirIndex, TDSTableVirtualScrollDirective, 5);
    } if (rf & 2) {
        let _t;
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.virtualScrollDirective = _t.first);
    } }, viewQuery: function TDSTableComponent_Query(rf, ctx) { if (rf & 1) {
        i0.ɵɵviewQuery(TDSTableInnerScrollComponent, 5);
    } if (rf & 2) {
        let _t;
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.tdsTableInnerScrollComponent = _t.first);
    } }, hostAttrs: [1, "w-full", "h-full"], hostVars: 2, hostBindings: function TDSTableComponent_HostBindings(rf, ctx) { if (rf & 2) {
        i0.ɵɵclassProp("tds-table-wrapper-rtl", ctx.dir === "rtl");
    } }, inputs: { tableLayout: "tableLayout", showTotal: "showTotal", showRefresh: "showRefresh", itemRender: "itemRender", title: "title", footer: "footer", noResult: "noResult", pageSizeOptions: "pageSizeOptions", virtualItemSize: "virtualItemSize", virtualMaxBufferPx: "virtualMaxBufferPx", virtualMinBufferPx: "virtualMinBufferPx", virtualForTrackBy: "virtualForTrackBy", loadingDelay: "loadingDelay", pageIndex: "pageIndex", pageSize: "pageSize", total: "total", widthConfig: "widthConfig", listData: "listData", paginationPosition: "paginationPosition", scroll: "scroll", paginationType: "paginationType", frontPagination: "frontPagination", templateMode: "templateMode", showPagination: "showPagination", loading: "loading", outerBordered: "outerBordered", loadingIndicator: "loadingIndicator", bordered: "bordered", size: "size", showSizeChanger: "showSizeChanger", hideOnSinglePage: "hideOnSinglePage", showQuickJumper: "showQuickJumper", simple: "simple" }, outputs: { pageSizeChange: "pageSizeChange", pageIndexChange: "pageIndexChange", queryParams: "queryParams", currentPageDataChange: "currentPageDataChange", clickRefresh: "clickRefresh" }, exportAs: ["tdsTable"], features: [i0.ɵɵProvidersFeature([TDSTableStyleService, TDSTableDataService]), i0.ɵɵNgOnChangesFeature], ngContentSelectors: _c1, decls: 16, vars: 31, consts: [[1, "h-full", "relative", "w-full", 3, "delay", "spinning", "indicator"], [4, "ngIf"], [1, "tds-table", "flex", "flex-col", "flex-auto", "w-full"], ["tableMainElement", ""], ["class", "text-neutral-1-900 text-header-1 font-semibold", 3, "ngClass", "title", 4, "ngIf"], ["class", "flex flex-col h-full w-full", 3, "data", "scrollX", "scrollY", "contentTemplate", "listOfColWidth", "theadTemplate", "verticalScrollBarWidth", "virtualTemplate", "virtualItemSize", "virtualMaxBufferPx", "virtualMinBufferPx", "tableMainElement", "virtualForTrackBy", 4, "ngIf", "ngIfElse"], ["defaultTemplate", ""], [3, "footer", 4, "ngIf"], ["paginationTemplate", ""], ["contentTemplate", ""], ["rangeTemplate", ""], [3, "ngTemplateOutlet"], [1, "text-neutral-1-900", "text-header-1", "font-semibold", 3, "ngClass", "title"], [1, "flex", "flex-col", "h-full", "w-full", 3, "data", "scrollX", "scrollY", "contentTemplate", "listOfColWidth", "theadTemplate", "verticalScrollBarWidth", "virtualTemplate", "virtualItemSize", "virtualMaxBufferPx", "virtualMinBufferPx", "tableMainElement", "virtualForTrackBy"], [1, "w-full", 3, "tableLayout", "listOfColWidth", "theadTemplate", "contentTemplate"], [3, "footer"], ["class", "w-full pt-2.5", 4, "ngIf"], [1, "w-full", "pt-2.5"], [1, "tds-table-pagination", "tds-table-pagination-right", 3, "hidden", "showSizeChanger", "pageSizeOptions", "itemRender", "showQuickJumper", "hideOnSinglePage", "showTotal", "showRefresh", "size", "pageSize", "total", "simple", "pageIndex", "pageSizeChange", "pageIndexChange", "clickRefresh"]], template: function TDSTableComponent_Template(rf, ctx) { if (rf & 1) {
        i0.ɵɵprojectionDef();
        i0.ɵɵelementStart(0, "tds-spin", 0);
        i0.ɵɵtemplate(1, TDSTableComponent_ng_container_1_Template, 2, 1, "ng-container", 1);
        i0.ɵɵelementStart(2, "div", 2, 3);
        i0.ɵɵtemplate(4, TDSTableComponent_tds_table_title_footer_4_Template, 1, 4, "tds-table-title-footer", 4);
        i0.ɵɵtemplate(5, TDSTableComponent_tds_table_inner_scroll_5_Template, 1, 13, "tds-table-inner-scroll", 5);
        i0.ɵɵtemplate(6, TDSTableComponent_ng_template_6_Template, 1, 4, "ng-template", null, 6, i0.ɵɵtemplateRefExtractor);
        i0.ɵɵtemplate(8, TDSTableComponent_tds_table_title_footer_8_Template, 1, 1, "tds-table-title-footer", 7);
        i0.ɵɵelementEnd();
        i0.ɵɵtemplate(9, TDSTableComponent_ng_container_9_Template, 2, 1, "ng-container", 1);
        i0.ɵɵelementEnd();
        i0.ɵɵtemplate(10, TDSTableComponent_ng_template_10_Template, 1, 1, "ng-template", null, 8, i0.ɵɵtemplateRefExtractor);
        i0.ɵɵtemplate(12, TDSTableComponent_ng_template_12_Template, 1, 0, "ng-template", null, 9, i0.ɵɵtemplateRefExtractor);
        i0.ɵɵtemplate(14, TDSTableComponent_ng_template_14_Template, 1, 3, "ng-template", null, 10, i0.ɵɵtemplateRefExtractor);
    } if (rf & 2) {
        const _r4 = i0.ɵɵreference(7);
        i0.ɵɵproperty("delay", ctx.loadingDelay)("spinning", ctx.loading)("indicator", ctx.loadingIndicator);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngIf", ctx.paginationPosition === "both" || ctx.paginationPosition === "top");
        i0.ɵɵadvance(1);
        i0.ɵɵclassProp("tds-table-rtl", ctx.dir === "rtl")("tds-table-fixed-header", ctx.data.length && ctx.scrollY)("tds-table-fixed-column", ctx.scrollX)("tds-table-has-fix-left", ctx.hasFixLeft)("tds-table-has-fix-right", ctx.hasFixRight)("tds-table-bordered", ctx.bordered)("border-neutral-2-200", ctx.bordered || ctx.outerBordered)("border", ctx.bordered || ctx.outerBordered)("tds-table-out-bordered", ctx.outerBordered && !ctx.bordered)("tds-table-middle", ctx.size === "middle")("tds-table-small", ctx.size === "small");
        i0.ɵɵadvance(2);
        i0.ɵɵproperty("ngIf", ctx.title);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngIf", ctx.scrollY || ctx.scrollX)("ngIfElse", _r4);
        i0.ɵɵadvance(3);
        i0.ɵɵproperty("ngIf", ctx.footer);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngIf", ctx.paginationPosition === "both" || ctx.paginationPosition === "bottom");
    } }, directives: [i6.TDSSpinComponent, i7.NgIf, i7.NgTemplateOutlet, i8.TDSTableTitleFooterComponent, i7.NgClass, i9.TDSTableInnerScrollComponent, i10.TDSTableInnerDefaultComponent, i11.TDSPaginationComponent], encapsulation: 2, changeDetection: 0 });
__decorate([
    InputBoolean()
], TDSTableComponent.prototype, "frontPagination", void 0);
__decorate([
    InputBoolean()
], TDSTableComponent.prototype, "templateMode", void 0);
__decorate([
    InputBoolean()
], TDSTableComponent.prototype, "showPagination", void 0);
__decorate([
    InputBoolean()
], TDSTableComponent.prototype, "loading", void 0);
__decorate([
    InputBoolean()
], TDSTableComponent.prototype, "outerBordered", void 0);
__decorate([
    WithConfig()
], TDSTableComponent.prototype, "loadingIndicator", void 0);
__decorate([
    WithConfig(),
    InputBoolean()
], TDSTableComponent.prototype, "bordered", void 0);
__decorate([
    WithConfig()
], TDSTableComponent.prototype, "size", void 0);
__decorate([
    WithConfig(),
    InputBoolean()
], TDSTableComponent.prototype, "showSizeChanger", void 0);
__decorate([
    WithConfig(),
    InputBoolean()
], TDSTableComponent.prototype, "hideOnSinglePage", void 0);
__decorate([
    WithConfig(),
    InputBoolean()
], TDSTableComponent.prototype, "showQuickJumper", void 0);
__decorate([
    WithConfig(),
    InputBoolean()
], TDSTableComponent.prototype, "simple", void 0);
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(TDSTableComponent, [{
        type: Component,
        args: [{
                selector: 'tds-table',
                exportAs: 'tdsTable',
                providers: [TDSTableStyleService, TDSTableDataService],
                preserveWhitespaces: false,
                changeDetection: ChangeDetectionStrategy.OnPush,
                encapsulation: ViewEncapsulation.None,
                template: `
    <tds-spin [delay]="loadingDelay" [spinning]="loading" [indicator]="loadingIndicator" class="h-full relative w-full">
      <ng-container *ngIf="paginationPosition === 'both' || paginationPosition === 'top'">
        <ng-template [ngTemplateOutlet]="paginationTemplate"></ng-template>
      </ng-container>
      <div
        #tableMainElement
        class="tds-table flex flex-col flex-auto w-full"
        [class.tds-table-rtl]="dir === 'rtl'"
        [class.tds-table-fixed-header]="data.length && scrollY"
        [class.tds-table-fixed-column]="scrollX"
        [class.tds-table-has-fix-left]="hasFixLeft"
        [class.tds-table-has-fix-right]="hasFixRight"
        [class.tds-table-bordered]="bordered"
        [class.border-neutral-2-200]="bordered || outerBordered"
        [class.border]="bordered || outerBordered"
        [class.tds-table-out-bordered]="outerBordered && !bordered"
        [class.tds-table-middle]="size === 'middle'"
        [class.tds-table-small]="size === 'small'"
      >
        <tds-table-title-footer 
        class="text-neutral-1-900 text-header-1 font-semibold"
        [ngClass]="{'border-b border-neutral-2-200':bordered || outerBordered}"              
        [title]="title" 
        *ngIf="title">        
        </tds-table-title-footer>
        <tds-table-inner-scroll
         class="flex flex-col h-full w-full"
          *ngIf="scrollY || scrollX; else defaultTemplate"
          [data]="data"
          [scrollX]="scrollX"
          [scrollY]="scrollY"
          [contentTemplate]="contentTemplate"
          [listOfColWidth]="listOfAutoColWidth"
          [theadTemplate]="theadTemplate"
          [verticalScrollBarWidth]="verticalScrollBarWidth"
          [virtualTemplate]="virtualScrollDirective ? virtualScrollDirective.templateRef : null"
          [virtualItemSize]="virtualItemSize"
          [virtualMaxBufferPx]="virtualMaxBufferPx"
          [virtualMinBufferPx]="virtualMinBufferPx"
          [tableMainElement]="tableMainElement"
          [virtualForTrackBy]="virtualForTrackBy"
        ></tds-table-inner-scroll>
        <ng-template #defaultTemplate>
          <tds-table-inner-default
            class="w-full"
            [tableLayout]="tableLayout"
            [listOfColWidth]="listOfManualColWidth"
            [theadTemplate]="theadTemplate"
            [contentTemplate]="contentTemplate"
          ></tds-table-inner-default>
        </ng-template>
        <tds-table-title-footer [footer]="footer" *ngIf="footer"></tds-table-title-footer>
      </div>
      <ng-container *ngIf="paginationPosition === 'both' || paginationPosition === 'bottom'">
        <ng-template [ngTemplateOutlet]="paginationTemplate"></ng-template>
      </ng-container>
    </tds-spin>
    <ng-template #paginationTemplate>
    <div class="w-full pt-2.5" *ngIf="isShowPagination">
    <tds-pagination
    [hidden]="!isShowPagination"
    class="tds-table-pagination tds-table-pagination-right "
    [showSizeChanger]="showSizeChanger"
    [pageSizeOptions]="pageSizeOptions"
    [itemRender]="itemRender!"
    [showQuickJumper]="showQuickJumper"
    [hideOnSinglePage]="hideOnSinglePage"
    [showTotal]="showTotal || rangeTemplate"
    [showRefresh]="showRefresh"
    [size]="paginationType"
    [pageSize]="pageSize"
    [total]="total"
    [simple]="simple"
    [pageIndex]="pageIndex"
    (pageSizeChange)="onPageSizeChange($event)"
    (pageIndexChange)="onPageIndexChange($event)"
    (clickRefresh)="onClickRefresh($event)"
  ></tds-pagination>
    </div>
      
    </ng-template>
    <ng-template #contentTemplate>
      <ng-content></ng-content>
    </ng-template>
    <ng-template #rangeTemplate let-range="range" let-total>
      {{ range[0] }}-{{ range[1] }} of {{ total }}
    </ng-template>
  `,
                host: {
                    '[class.tds-table-wrapper-rtl]': 'dir === "rtl"',
                    class: "w-full h-full "
                }
            }]
    }], function () { return [{ type: i0.ElementRef }, { type: i1.TDSResizeObserver }, { type: i2.TDSConfigService }, { type: i0.ChangeDetectorRef }, { type: i3.TDSTableStyleService }, { type: i4.TDSTableDataService }, { type: i5.Directionality, decorators: [{
                type: Optional
            }] }]; }, { tableLayout: [{
            type: Input
        }], showTotal: [{
            type: Input
        }], showRefresh: [{
            type: Input
        }], itemRender: [{
            type: Input
        }], title: [{
            type: Input
        }], footer: [{
            type: Input
        }], noResult: [{
            type: Input
        }], pageSizeOptions: [{
            type: Input
        }], virtualItemSize: [{
            type: Input
        }], virtualMaxBufferPx: [{
            type: Input
        }], virtualMinBufferPx: [{
            type: Input
        }], virtualForTrackBy: [{
            type: Input
        }], loadingDelay: [{
            type: Input
        }], pageIndex: [{
            type: Input
        }], pageSize: [{
            type: Input
        }], total: [{
            type: Input
        }], widthConfig: [{
            type: Input
        }], listData: [{
            type: Input
        }], paginationPosition: [{
            type: Input
        }], scroll: [{
            type: Input
        }], paginationType: [{
            type: Input
        }], frontPagination: [{
            type: Input
        }], templateMode: [{
            type: Input
        }], showPagination: [{
            type: Input
        }], loading: [{
            type: Input
        }], outerBordered: [{
            type: Input
        }], loadingIndicator: [{
            type: Input
        }], bordered: [{
            type: Input
        }], size: [{
            type: Input
        }], showSizeChanger: [{
            type: Input
        }], hideOnSinglePage: [{
            type: Input
        }], showQuickJumper: [{
            type: Input
        }], simple: [{
            type: Input
        }], pageSizeChange: [{
            type: Output
        }], pageIndexChange: [{
            type: Output
        }], queryParams: [{
            type: Output
        }], currentPageDataChange: [{
            type: Output
        }], clickRefresh: [{
            type: Output
        }], virtualScrollDirective: [{
            type: ContentChild,
            args: [TDSTableVirtualScrollDirective, { static: false }]
        }], tdsTableInnerScrollComponent: [{
            type: ViewChild,
            args: [TDSTableInnerScrollComponent]
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFibGUuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvdGRzLXVpL3RhYmxlL3NyYy90YWJsZS90YWJsZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUlBLE9BQU8sRUFFTCx1QkFBdUIsRUFFdkIsU0FBUyxFQUNULFlBQVksRUFFWixZQUFZLEVBQ1osS0FBSyxFQUlMLFFBQVEsRUFDUixNQUFNLEVBSU4sU0FBUyxFQUNULGlCQUFpQixFQUNsQixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsWUFBWSxFQUFjLE1BQU0sdUJBQXVCLENBQUM7QUFDakUsT0FBTyxFQUFFLGVBQWUsRUFBRSxhQUFhLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUNuRSxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFHL0QsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDNUQsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFPOUQsT0FBTyxFQUFFLDRCQUE0QixFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFDOUUsT0FBTyxFQUFFLDhCQUE4QixFQUFFLE1BQU0sa0NBQWtDLENBQUM7QUFDbEYsT0FBTyxFQUE4QyxVQUFVLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUc1RixPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7O0lBYTlDLDZCQUFvRjtJQUNsRixrR0FBbUU7SUFDckUsMEJBQWU7Ozs7SUFEQSxlQUF1QztJQUF2QyxzQ0FBdUM7Ozs7SUFpQnBELDZDQUt5Qjs7O0lBSHpCLDZGQUF1RSx1QkFBQTs7O0lBSXZFLDZDQWdCMEI7Ozs7O0lBYnhCLGtDQUFhLDJCQUFB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LEtBQUs7WUFDaUMsZ0JBQWdCO2tCQUF0RCxLQUFLO1lBQ2lDLGVBQWU7a0JBQXJELEtBQUs7WUFDaUMsTUFBTTtrQkFBNUMsS0FBSztZQUNhLGNBQWM7a0JBQWhDLE1BQU07WUFDWSxlQUFlO2tCQUFqQyxNQUFNO1lBQ1ksV0FBVztrQkFBN0IsTUFBTTtZQUNZLHFCQUFxQjtrQkFBdkMsTUFBTTtZQUNZLFlBQVk7a0JBQTlCLE1BQU07WUFpQlAsc0JBQXNCO2tCQURyQixZQUFZO21CQUFDLDhCQUE4QixFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRTtZQUV0Qiw0QkFBNEI7a0JBQXBFLFNBQVM7bUJBQUMsNEJBQTRCIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmltcG9ydCB7IERpcmVjdGlvbiwgRGlyZWN0aW9uYWxpdHkgfSBmcm9tICdAYW5ndWxhci9jZGsvYmlkaSc7XHJcbmltcG9ydCB7IEJvb2xlYW5JbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9jb2VyY2lvbic7XHJcbmltcG9ydCB7IENka1ZpcnR1YWxTY3JvbGxWaWV3cG9ydCB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9zY3JvbGxpbmcnO1xyXG5pbXBvcnQge1xyXG4gIEFmdGVyVmlld0luaXQsXHJcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXHJcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgQ29tcG9uZW50LFxyXG4gIENvbnRlbnRDaGlsZCxcclxuICBFbGVtZW50UmVmLFxyXG4gIEV2ZW50RW1pdHRlcixcclxuICBJbnB1dCxcclxuICBPbkNoYW5nZXMsXHJcbiAgT25EZXN0cm95LFxyXG4gIE9uSW5pdCxcclxuICBPcHRpb25hbCxcclxuICBPdXRwdXQsXHJcbiAgU2ltcGxlQ2hhbmdlcyxcclxuICBUZW1wbGF0ZVJlZixcclxuICBUcmFja0J5RnVuY3Rpb24sXHJcbiAgVmlld0NoaWxkLFxyXG4gIFZpZXdFbmNhcHN1bGF0aW9uXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IElucHV0Qm9vbGVhbiwgVERTU2FmZUFueSB9IGZyb20gJ3Rkcy11aS9zaGFyZWQvdXRpbGl0eSc7XHJcbmltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCwgY29tYmluZUxhdGVzdCwgb2YsIFN1YmplY3QgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgZGVsYXksIGZpbHRlciwgbWFwLCB0YWtlVW50aWwgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcblxyXG5cclxuaW1wb3J0IHsgVERTVGFibGVEYXRhU2VydmljZSB9IGZyb20gJy4uL3RhYmxlLWRhdGEuc2VydmljZSc7XHJcbmltcG9ydCB7IFREU1RhYmxlU3R5bGVTZXJ2aWNlIH0gZnJvbSAnLi4vdGFibGUtc3R5bGUuc2VydmljZSc7XHJcbmltcG9ydCB7XHJcbiAgVERTVGFibGVMYXlvdXQsXHJcbiAgVERTVGFibGVQYWdpbmF0aW9uUG9zaXRpb24sXHJcbiAgVERTVGFibGVRdWVyeVBhcmFtcyxcclxuICBURFNUYWJsZVNpemVcclxufSBmcm9tICcuLi90YWJsZS50eXBlcyc7XHJcbmltcG9ydCB7IFREU1RhYmxlSW5uZXJTY3JvbGxDb21wb25lbnQgfSBmcm9tICcuL3RhYmxlLWlubmVyLXNjcm9sbC5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBURFNUYWJsZVZpcnR1YWxTY3JvbGxEaXJlY3RpdmUgfSBmcm9tICcuL3RhYmxlLXZpcnR1YWwtc2Nyb2xsLmRpcmVjdGl2ZSc7XHJcbmltcG9ydCB7IEJ1dHRvblNpemUsIFREU0NvbmZpZ0tleSwgVERTQ29uZmlnU2VydmljZSwgV2l0aENvbmZpZyB9IGZyb20gJ3Rkcy11aS9jb3JlL2NvbmZpZyc7XHJcbmltcG9ydCB7IFBhZ2luYXRpb25JdGVtUmVuZGVyQ29udGV4dCB9IGZyb20gJ3Rkcy11aS9wYWdpbmF0aW9uJztcclxuaW1wb3J0IHsgVERTUmVzaXplT2JzZXJ2ZXIgfSBmcm9tICd0ZHMtdWkvY29yZS9yZXNpemUtb2JzZXJ2ZXJzJztcclxuaW1wb3J0IHsgbWVhc3VyZVNjcm9sbGJhciB9IGZyb20gJ3Rkcy11aS9jb3JlL3V0aWwnO1xyXG5cclxuY29uc3QgVERTX0NPTkZJR19NT0RVTEVfTkFNRTogVERTQ29uZmlnS2V5ID0gJ3RhYmxlJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAndGRzLXRhYmxlJyxcclxuICBleHBvcnRBczogJ3Rkc1RhYmxlJyxcclxuICBwcm92aWRlcnM6IFtURFNUYWJsZVN0eWxlU2VydmljZSwgVERTVGFibGVEYXRhU2VydmljZV0sXHJcbiAgcHJlc2VydmVXaGl0ZXNwYWNlczogZmFsc2UsXHJcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXHJcbiAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcclxuICB0ZW1wbGF0ZTogYFxyXG4gICAgPHRkcy1zcGluIFtkZWxheV09XCJsb2FkaW5nRGVsYXlcIiBbc3Bpbm5pbmddPVwibG9hZGluZ1wiIFtpbmRpY2F0b3JdPVwibG9hZGluZ0luZGljYXRvclwiIGNsYXNzPVwiaC1mdWxsIHJlbGF0aXZlIHctZnVsbFwiPlxyXG4gICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwicGFnaW5hdGlvblBvc2l0aW9uID09PSAnYm90aCcgfHwgcGFnaW5hdGlvblBvc2l0aW9uID09PSAndG9wJ1wiPlxyXG4gICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdUZW1wbGF0ZU91dGxldF09XCJwYWdpbmF0aW9uVGVtcGxhdGVcIj48L25nLXRlbXBsYXRlPlxyXG4gICAgICA8L25nLWNvbnRhaW5lcj5cclxuICAgICAgPGRpdlxyXG4gICAgICAgICN0YWJsZU1haW5FbGVtZW50XHJcbiAgICAgICAgY2xhc3M9XCJ0ZHMtdGFibGUgZmxleCBmbGV4LWNvbCBmbGV4LWF1dG8gdy1mdWxsXCJcclxuICAgICAgICBbY2xhc3MudGRzLXRhYmxlLXJ0bF09XCJkaXIgPT09ICdydGwnXCJcclxuICAgICAgICBbY2xhc3MudGRzLXRhYmxlLWZpeGVkLWhlYWRlcl09XCJkYXRhLmxlbmd0aCAmJiBzY3JvbGxZXCJcclxuICAgICAgICBbY2xhc3MudGRzLXRhYmxlLWZpeGVkLWNvbHVtbl09XCJzY3JvbGxYXCJcclxuICAgICAgICBbY2xhc3MudGRzLXRhYmxlLWhhcy1maXgtbGVmdF09XCJoYXNGaXhMZWZ0XCJcclxuICAgICAgICBbY2xhc3MudGRzLXRhYmxlLWhhcy1maXgtcmlnaHRdPVwiaGFzRml4UmlnaHRcIlxyXG4gICAgICAgIFtjbGFzcy50ZHMtdGFibGUtYm9yZGVyZWRdPVwiYm9yZGVyZWRcIlxyXG4gICAgICAgIFtjbGFzcy5ib3JkZXItbmV1dHJhbC0yLTIwMF09XCJib3JkZXJlZCB8fCBvdXRlckJvcmRlcmVkXCJcclxuICAgICAgICBbY2xhc3MuYm9yZGVyXT1cImJvcmRlcmVkIHx8IG91dGVyQm9yZGVyZWRcIlxyXG4gICAgICAgIFtjbGFzcy50ZHMtdGFibGUtb3V0LWJvcmRlcmVkXT1cIm91dGVyQm9yZGVyZWQgJiYgIWJvcmRlcmVkXCJcclxuICAgICAgICBbY2xhc3MudGRzLXRhYmxlLW1pZGRsZV09XCJzaXplID09PSAnbWlkZGxlJ1wiXHJcbiAgICAgICAgW2NsYXNzLnRkcy10YWJsZS1zbWFsbF09XCJzaXplID09PSAnc21hbGwnXCJcclxuICAgICAgPlxyXG4gICAgICAgIDx0ZHMtdGFibGUtdGl0bGUtZm9vdGVyIFxyXG4gICAgICAgIGNsYXNzPVwidGV4dC1uZXV0cmFsLTEtOTAwIHRleHQtaGVhZGVyLTEgZm9udC1zZW1pYm9sZFwiXHJcbiAgICAgICAgW25nQ2xhc3NdPVwieydib3JkZXItYiBib3JkZXItbmV1dHJhbC0yLTIwMCc6Ym9yZGVyZWQgfHwgb3V0ZXJCb3JkZXJlZH1cIiAgICAgICAgICAgICAgXHJcbiAgICAgICAgW3RpdGxlXT1cInRpdGxlXCIgXHJcbiAgICAgICAgKm5nSWY9XCJ0aXRsZVwiPiAgICAgICAgXHJcbiAgICAgICAgPC90ZHMtdGFibGUtdGl0bGUtZm9vdGVyPlxyXG4gICAgICAgIDx0ZHMtdGFibGUtaW5uZXItc2Nyb2xsXHJcbiAgICAgICAgIGNsYXNzPVwiZmxleCBmbGV4LWNvbCBoLWZ1bGwgdy1mdWxsXCJcclxuICAgICAgICAgICpuZ0lmPVwic2Nyb2xsWSB8fCBzY3JvbGxYOyBlbHNlIGRlZmF1bHRUZW1wbGF0ZVwiXHJcbiAgICAgICAgICBbZGF0YV09XCJkYXRhXCJcclxuICAgICAgICAgIFtzY3JvbGxYXT1cInNjcm9sbFhcIlxyXG4gICAgICAgICAgW3Njcm9sbFldPVwic2Nyb2xsWVwiXHJcbiAgICAgICAgICBbY29udGVudFRlbXBsYXRlXT1cImNvbnRlbnRUZW1wbGF0ZVwiXHJcbiAgICAgICAgICBbbGlzdE9mQ29sV2lkdGhdPVwibGlzdE9mQXV0b0NvbFdpZHRoXCJcclxuICAgICAgICAgIFt0aGVhZFRlbXBsYXRlXT1cInRoZWFkVGVtcGxhdGVcIlxyXG4gICAgICAgICAgW3ZlcnRpY2FsU2Nyb2xsQmFyV2lkdGhdPVwidmVydGljYWxTY3JvbGxCYXJXaWR0aFwiXHJcbiAgICAgICAgICBbdmlydHVhbFRlbXBsYXRlXT1cInZpcnR1YWxTY3JvbGxEaXJlY3RpdmUgPyB2aXJ0dWFsU2Nyb2xsRGlyZWN0aXZlLnRlbXBsYXRlUmVmIDogbnVsbFwiXHJcbiAgICAgICAgICBbdmlydHVhbEl0ZW1TaXplXT1cInZpcnR1YWxJdGVtU2l6ZVwiXHJcbiAgICAgICAgICBbdmlydHVhbE1heEJ1ZmZlclB4XT1cInZpcnR1YWxNYXhCdWZmZXJQeFwiXHJcbiAgICAgICAgICBbdmlydHVhbE1pbkJ1ZmZlclB4XT1cInZpcnR1YWxNaW5CdWZmZXJQeFwiXHJcbiAgICAgICAgICBbdGFibGVNYWluRWxlbWVudF09XCJ0YWJsZU1haW5FbGVtZW50XCJcclxuICAgICAgICAgIFt2aXJ0dWFsRm9yVHJhY2tCeV09XCJ2aXJ0dWFsRm9yVHJhY2tCeVwiXHJcbiAgICAgICAgPjwvdGRzLXRhYmxlLWlubmVyLXNjcm9sbD5cclxuICAgICAgICA8bmctdGVtcGxhdGUgI2RlZmF1bHRUZW1wbGF0ZT5cclxuICAgICAgICAgIDx0ZHMtdGFibGUtaW5uZXItZGVmYXVsdFxyXG4gICAgICAgICAgICBjbGFzcz1cInctZnVsbFwiXHJcbiAgICAgICAgICAgIFt0YWJsZUxheW91dF09XCJ0YWJsZUxheW91dFwiXHJcbiAgICAgICAgICAgIFtsaXN0T2ZDb2xXaWR0aF09XCJsaXN0T2ZNYW51YWxDb2xXaWR0aFwiXHJcbiAgICAgICAgICAgIFt0aGVhZFRlbXBsYXRlXT1cInRoZWFkVGVtcGxhdGVcIlxyXG4gICAgICAgICAgICBbY29udGVudFRlbXBsYXRlXT1cImNvbnRlbnRUZW1wbGF0ZVwiXHJcbiAgICAgICAgICA+PC90ZHMtdGFibGUtaW5uZXItZGVmYXVsdD5cclxuICAgICAgICA8L25nLXRlbXBsYXRlPlxyXG4gICAgICAgIDx0ZHMtdGFibGUtdGl0bGUtZm9vdGVyIFtmb290ZXJdPVwiZm9vdGVyXCIgKm5nSWY9XCJmb290ZXJcIj48L3Rkcy10YWJsZS10aXRsZS1mb290ZXI+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwicGFnaW5hdGlvblBvc2l0aW9uID09PSAnYm90aCcgfHwgcGFnaW5hdGlvblBvc2l0aW9uID09PSAnYm90dG9tJ1wiPlxyXG4gICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdUZW1wbGF0ZU91dGxldF09XCJwYWdpbmF0aW9uVGVtcGxhdGVcIj48L25nLXRlbXBsYXRlPlxyXG4gICAgICA8L25nLWNvbnRhaW5lcj5cclxuICAgIDwvdGRzLXNwaW4+XHJcbiAgICA8bmctdGVtcGxhdGUgI3BhZ2luYXRpb25UZW1wbGF0ZT5cclxuICAgIDxkaXYgY2xhc3M9XCJ3LWZ1bGwgcHQtMi41XCIgKm5nSWY9XCJpc1Nob3dQYWdpbmF0aW9uXCI+XHJcbiAgICA8dGRzLXBhZ2luYXRpb25cclxuICAgIFtoaWRkZW5dPVwiIWlzU2hvd1BhZ2luYXRpb25cIlxyXG4gICAgY2xhc3M9XCJ0ZHMtdGFibGUtcGFnaW5hdGlvbiB0ZHMtdGFibGUtcGFnaW5hdGlvbi1yaWdodCBcIlxyXG4gICAgW3Nob3dTaXplQ2hhbmdlcl09XCJzaG93U2l6ZUNoYW5nZXJcIlxyXG4gICAgW3BhZ2VTaXplT3B0aW9uc109XCJwYWdlU2l6ZU9wdGlvbnNcIlxyXG4gICAgW2l0ZW1SZW5kZXJdPVwiaXRlbVJlbmRlciFcIlxyXG4gICAgW3Nob3dRdWlja0p1bXBlcl09XCJzaG93UXVpY2tKdW1wZXJcIlxyXG4gICAgW2hpZGVPblNpbmdsZVBhZ2VdPVwiaGlkZU9uU2luZ2xlUGFnZVwiXHJcbiAgICBbc2hvd1RvdGFsXT1cInNob3dUb3RhbCB8fCByYW5nZVRlbXBsYXRlXCJcclxuICAgIFtzaG93UmVmcmVzaF09XCJzaG93UmVmcmVzaFwiXHJcbiAgICBbc2l6ZV09XCJwYWdpbmF0aW9uVHlwZVwiXHJcbiAgICBbcGFnZVNpemVdPVwicGFnZVNpemVcIlxyXG4gICAgW3RvdGFsXT1cInRvdGFsXCJcclxuICAgIFtzaW1wbGVdPVwic2ltcGxlXCJcclxuICAgIFtwYWdlSW5kZXhdPVwicGFnZUluZGV4XCJcclxuICAgIChwYWdlU2l6ZUNoYW5nZSk9XCJvblBhZ2VTaXplQ2hhbmdlKCRldmVudClcIlxyXG4gICAgKHBhZ2VJbmRleENoYW5nZSk9XCJvblBhZ2VJbmRleENoYW5nZSgkZXZlbnQpXCJcclxuICAgIChjbGlja1JlZnJlc2gpPVwib25DbGlja1JlZnJlc2goJGV2ZW50KVwiXHJcbiAgPjwvdGRzLXBhZ2luYXRpb24+XHJcbiAgICA8L2Rpdj5cclxuICAgICAgXHJcbiAgICA8L25nLXRlbXBsYXRlPlxyXG4gICAgPG5nLXRlbXBsYXRlICNjb250ZW50VGVtcGxhdGU+XHJcbiAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cclxuICAgIDwvbmctdGVtcGxhdGU+XHJcbiAgICA8bmctdGVtcGxhdGUgI3JhbmdlVGVtcGxhdGUgbGV0LXJhbmdlPVwicmFuZ2VcIiBsZXQtdG90YWw+XHJcbiAgICAgIHt7IHJhbmdlWzBdIH19LXt7IHJhbmdlWzFdIH19IG9mIHt7IHRvdGFsIH19XHJcbiAgICA8L25nLXRlbXBsYXRlPlxyXG4gIGAsXHJcbiAgaG9zdDoge1xyXG4gICAgJ1tjbGFzcy50ZHMtdGFibGUtd3JhcHBlci1ydGxdJzogJ2RpciA9PT0gXCJydGxcIicsXHJcbiAgICBjbGFzczogXCJ3LWZ1bGwgaC1mdWxsIFwiXHJcbiAgfVxyXG59KVxyXG5leHBvcnQgY2xhc3MgVERTVGFibGVDb21wb25lbnQ8VD4gaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSwgT25DaGFuZ2VzLCBBZnRlclZpZXdJbml0IHtcclxuICByZWFkb25seSBfdGRzTW9kdWxlTmFtZTogVERTQ29uZmlnS2V5ID0gVERTX0NPTkZJR19NT0RVTEVfTkFNRTtcclxuXHJcbiAgc3RhdGljIG5nQWNjZXB0SW5wdXRUeXBlX2Zyb250UGFnaW5hdGlvbjogQm9vbGVhbklucHV0O1xyXG4gIHN0YXRpYyBuZ0FjY2VwdElucHV0VHlwZV90ZW1wbGF0ZU1vZGU6IEJvb2xlYW5JbnB1dDtcclxuICBzdGF0aWMgbmdBY2NlcHRJbnB1dFR5cGVfc2hvd1BhZ2luYXRpb246IEJvb2xlYW5JbnB1dDtcclxuICBzdGF0aWMgbmdBY2NlcHRJbnB1dFR5cGVfbG9hZGluZzogQm9vbGVhbklucHV0O1xyXG4gIHN0YXRpYyBuZ0FjY2VwdElucHV0VHlwZV9ib3JkZXJlZDogQm9vbGVhbklucHV0O1xyXG4gIHN0YXRpYyBuZ0FjY2VwdElucHV0VHlwZV9vdXRlckJvcmRlcmVkOiBCb29sZWFuSW5wdXQ7XHJcbiAgc3RhdGljIG5nQWNjZXB0SW5wdXRUeXBlX3Nob3dTaXplQ2hhbmdlcjogQm9vbGVhbklucHV0O1xyXG4gIHN0YXRpYyBuZ0FjY2VwdElucHV0VHlwZV9oaWRlT25TaW5nbGVQYWdlOiBCb29sZWFuSW5wdXQ7XHJcbiAgc3RhdGljIG5nQWNjZXB0SW5wdXRUeXBlX3Nob3dRdWlja0p1bXBlcjogQm9vbGVhbklucHV0O1xyXG4gIHN0YXRpYyBuZ0FjY2VwdElucHV0VHlwZV9zaW1wbGU6IEJvb2xlYW5JbnB1dDtcclxuXHJcbiAgQElucHV0KCkgdGFibGVMYXlvdXQ6IFREU1RhYmxlTGF5b3V0ID0gJ2F1dG8nO1xyXG4gIEBJbnB1dCgpIHNob3dUb3RhbDogVGVtcGxhdGVSZWY8eyAkaW1wbGljaXQ6IG51bWJlcjsgcmFuZ2U6IFtudW1iZXIsIG51bWJlcl0gfT4gfCBudWxsID0gbnVsbDtcclxuICBASW5wdXQoKSBzaG93UmVmcmVzaDogYm9vbGVhbiA9IHRydWU7XHJcbiAgQElucHV0KCkgaXRlbVJlbmRlcjogVGVtcGxhdGVSZWY8UGFnaW5hdGlvbkl0ZW1SZW5kZXJDb250ZXh0PiB8IG51bGwgPSBudWxsO1xyXG4gIEBJbnB1dCgpIHRpdGxlOiBzdHJpbmcgfCBUZW1wbGF0ZVJlZjxURFNTYWZlQW55PiB8IG51bGwgPSBudWxsO1xyXG4gIEBJbnB1dCgpIGZvb3Rlcjogc3RyaW5nIHwgVGVtcGxhdGVSZWY8VERTU2FmZUFueT4gfCBudWxsID0gbnVsbDtcclxuICBASW5wdXQoKSBub1Jlc3VsdDogc3RyaW5nIHwgVGVtcGxhdGVSZWY8VERTU2FmZUFueT4gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XHJcbiAgQElucHV0KCkgcGFnZVNpemVPcHRpb25zID0gWzEwLCAyMCwgMzAsIDQwLCA1MF07XHJcbiAgQElucHV0KCkgdmlydHVhbEl0ZW1TaXplID0gMDtcclxuICBASW5wdXQoKSB2aXJ0dWFsTWF4QnVmZmVyUHggPSAyMDA7XHJcbiAgQElucHV0KCkgdmlydHVhbE1pbkJ1ZmZlclB4ID0gMTAwO1xyXG4gIEBJbnB1dCgpIHZpcnR1YWxGb3JUcmFja0J5OiBUcmFja0J5RnVuY3Rpb248VD4gPSBpbmRleCA9PiBpbmRleDtcclxuICBASW5wdXQoKSBsb2FkaW5nRGVsYXkgPSAwO1xyXG4gIEBJbnB1dCgpIHBhZ2VJbmRleCA9IDE7XHJcbiAgQElucHV0KCkgcGFnZVNpemUgPSAxMDtcclxuICBASW5wdXQoKSB0b3RhbCA9IDA7XHJcbiAgQElucHV0KCkgd2lkdGhDb25maWc6IFJlYWRvbmx5QXJyYXk8c3RyaW5nIHwgbnVsbD4gPSBbXTtcclxuICBASW5wdXQoKSBsaXN0RGF0YTogcmVhZG9ubHkgVFtdID0gW107XHJcbiAgQElucHV0KCkgcGFnaW5hdGlvblBvc2l0aW9uOiBURFNUYWJsZVBhZ2luYXRpb25Qb3NpdGlvbiA9ICdib3R0b20nO1xyXG4gIEBJbnB1dCgpIHNjcm9sbDogeyB4Pzogc3RyaW5nIHwgbnVsbDsgeT86IHN0cmluZyB8IG51bGwgfSA9IHsgeDogbnVsbCwgeTogJ2F1dG8nIH07XHJcbiAgQElucHV0KCkgcGFnaW5hdGlvblR5cGU6IEJ1dHRvblNpemUgPSAnc20nO1xyXG4gIEBJbnB1dCgpIEBJbnB1dEJvb2xlYW4oKSBmcm9udFBhZ2luYXRpb24gPSB0cnVlO1xyXG4gIEBJbnB1dCgpIEBJbnB1dEJvb2xlYW4oKSB0ZW1wbGF0ZU1vZGUgPSBmYWxzZTtcclxuICBASW5wdXQoKSBASW5wdXRCb29sZWFuKCkgc2hvd1BhZ2luYXRpb24gPSB0cnVlO1xyXG4gIEBJbnB1dCgpIEBJbnB1dEJvb2xlYW4oKSBsb2FkaW5nID0gZmFsc2U7XHJcbiAgQElucHV0KCkgQElucHV0Qm9vbGVhbigpIG91dGVyQm9yZGVyZWQgPSBmYWxzZTtcclxuICBASW5wdXQoKSBAV2l0aENvbmZpZygpIGxvYWRpbmdJbmRpY2F0b3I6IFRlbXBsYXRlUmVmPFREU1NhZmVBbnk+IHwgbnVsbCA9IG51bGw7XHJcbiAgQElucHV0KCkgQFdpdGhDb25maWcoKSBASW5wdXRCb29sZWFuKCkgYm9yZGVyZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBASW5wdXQoKSBAV2l0aENvbmZpZygpIHNpemU6IFREU1RhYmxlU2l6ZSA9ICdkZWZhdWx0JztcclxuICBASW5wdXQoKSBAV2l0aENvbmZpZygpIEBJbnB1dEJvb2xlYW4oKSBzaG93U2l6ZUNoYW5nZXI6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBASW5wdXQoKSBAV2l0aENvbmZpZygpIEBJbnB1dEJvb2xlYW4oKSBoaWRlT25TaW5nbGVQYWdlOiBib29sZWFuID0gZmFsc2U7XHJcbiAgQElucHV0KCkgQFdpdGhDb25maWcoKSBASW5wdXRCb29sZWFuKCkgc2hvd1F1aWNrSnVtcGVyOiBib29sZWFuID0gZmFsc2U7XHJcbiAgQElucHV0KCkgQFdpdGhDb25maWcoKSBASW5wdXRCb29sZWFuKCkgc2ltcGxlOiBib29sZWFuID0gZmFsc2U7XHJcbiAgQE91dHB1dCgpIHJlYWRvbmx5IHBhZ2VTaXplQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxudW1iZXI+KCk7XHJcbiAgQE91dHB1dCgpIHJlYWRvbmx5IHBhZ2VJbmRleENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpO1xyXG4gIEBPdXRwdXQoKSByZWFkb25seSBxdWVyeVBhcmFtcyA9IG5ldyBFdmVudEVtaXR0ZXI8VERTVGFibGVRdWVyeVBhcmFtcz4oKTtcclxuICBAT3V0cHV0KCkgcmVhZG9ubHkgY3VycmVudFBhZ2VEYXRhQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxyZWFkb25seSBUW10+KCk7XHJcbiAgQE91dHB1dCgpIHJlYWRvbmx5IGNsaWNrUmVmcmVzaCA9IG5ldyBFdmVudEVtaXR0ZXI8TW91c2VFdmVudD4oKTtcclxuICAvKiogcHVibGljIGRhdGEgZm9yIG5nRm9yIHRyICovXHJcbiAgcHVibGljIGRhdGE6IHJlYWRvbmx5IFRbXSA9IFtdO1xyXG4gIHB1YmxpYyBjZGtWaXJ0dWFsU2Nyb2xsVmlld3BvcnQ/OiBDZGtWaXJ0dWFsU2Nyb2xsVmlld3BvcnQ7XHJcbiAgc2Nyb2xsWDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcbiAgc2Nyb2xsWTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcbiAgdGhlYWRUZW1wbGF0ZTogVGVtcGxhdGVSZWY8VERTU2FmZUFueT4gfCBudWxsID0gbnVsbDtcclxuICBsaXN0T2ZBdXRvQ29sV2lkdGg6IFJlYWRvbmx5QXJyYXk8c3RyaW5nIHwgbnVsbD4gPSBbXTtcclxuICBsaXN0T2ZNYW51YWxDb2xXaWR0aDogUmVhZG9ubHlBcnJheTxzdHJpbmcgfCBudWxsPiA9IFtdO1xyXG4gIGhhc0ZpeExlZnQgPSBmYWxzZTtcclxuICBoYXNGaXhSaWdodCA9IGZhbHNlO1xyXG4gIGlzU2hvd1BhZ2luYXRpb24gPSB0cnVlO1xyXG4gIHByaXZhdGUgZGVzdHJveSQgPSBuZXcgU3ViamVjdDx2b2lkPigpO1xyXG4gIHByaXZhdGUgbG9hZGluZyQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PGJvb2xlYW4+KGZhbHNlKTtcclxuICBwcml2YXRlIHRlbXBsYXRlTW9kZSQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PGJvb2xlYW4+KGZhbHNlKTtcclxuICBkaXI6IERpcmVjdGlvbiA9ICdsdHInO1xyXG4gIEBDb250ZW50Q2hpbGQoVERTVGFibGVWaXJ0dWFsU2Nyb2xsRGlyZWN0aXZlLCB7IHN0YXRpYzogZmFsc2UgfSlcclxuICB2aXJ0dWFsU2Nyb2xsRGlyZWN0aXZlITogVERTVGFibGVWaXJ0dWFsU2Nyb2xsRGlyZWN0aXZlPFQ+O1xyXG4gIEBWaWV3Q2hpbGQoVERTVGFibGVJbm5lclNjcm9sbENvbXBvbmVudCkgdGRzVGFibGVJbm5lclNjcm9sbENvbXBvbmVudCE6IFREU1RhYmxlSW5uZXJTY3JvbGxDb21wb25lbnQ8VD47XHJcbiAgdmVydGljYWxTY3JvbGxCYXJXaWR0aCA9IDA7XHJcbiAgb25QYWdlU2l6ZUNoYW5nZShzaXplOiBudW1iZXIpOiB2b2lkIHtcclxuICAgIHRoaXMudGRzVGFibGVEYXRhU2VydmljZS51cGRhdGVQYWdlU2l6ZShzaXplKTtcclxuICB9XHJcblxyXG4gIG9uUGFnZUluZGV4Q2hhbmdlKGluZGV4OiBudW1iZXIpOiB2b2lkIHtcclxuICAgIHRoaXMudGRzVGFibGVEYXRhU2VydmljZS51cGRhdGVQYWdlSW5kZXgoaW5kZXgpO1xyXG4gIH1cclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYsXHJcbiAgICBwcml2YXRlIHRkc1Jlc2l6ZU9ic2VydmVyOiBURFNSZXNpemVPYnNlcnZlcixcclxuICAgIHByaXZhdGUgdGRzQ29uZmlnU2VydmljZTogVERTQ29uZmlnU2VydmljZSxcclxuICAgIHByaXZhdGUgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgIHByaXZhdGUgdGRzVGFibGVTdHlsZVNlcnZpY2U6IFREU1RhYmxlU3R5bGVTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSB0ZHNUYWJsZURhdGFTZXJ2aWNlOiBURFNUYWJsZURhdGFTZXJ2aWNlPFQ+LFxyXG4gICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSBkaXJlY3Rpb25hbGl0eTogRGlyZWN0aW9uYWxpdHlcclxuICApIHtcclxuICAgIC8vIFRPRE86IG1vdmUgdG8gaG9zdCBhZnRlciBWaWV3IEVuZ2luZSBkZXByZWNhdGlvblxyXG4gICAgdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgndGRzLXRhYmxlLXdyYXBwZXInKTtcclxuICAgIHRoaXMudGRzQ29uZmlnU2VydmljZVxyXG4gICAgICAuZ2V0Q29uZmlnQ2hhbmdlRXZlbnRGb3JDb21wb25lbnQoVERTX0NPTkZJR19NT0RVTEVfTkFNRSlcclxuICAgICAgLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxyXG4gICAgICAuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpOiB2b2lkIHtcclxuICAgIGNvbnN0IHsgcGFnZUluZGV4RGlzdGluY3QkLCBwYWdlU2l6ZURpc3RpbmN0JCwgbGlzdE9mQ3VycmVudFBhZ2VEYXRhJCwgdG90YWwkLCBxdWVyeVBhcmFtcyQgfSA9XHJcbiAgICAgIHRoaXMudGRzVGFibGVEYXRhU2VydmljZTtcclxuICAgIGNvbnN0IHsgdGhlYWRUZW1wbGF0ZSQsIGhhc0ZpeExlZnQkLCBoYXNGaXhSaWdodCQgfSA9IHRoaXMudGRzVGFibGVTdHlsZVNlcnZpY2U7XHJcblxyXG4gICAgdGhpcy5kaXIgPSB0aGlzLmRpcmVjdGlvbmFsaXR5LnZhbHVlO1xyXG4gICAgdGhpcy5kaXJlY3Rpb25hbGl0eS5jaGFuZ2U/LnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKS5zdWJzY3JpYmUoKGRpcmVjdGlvbjogRGlyZWN0aW9uKSA9PiB7XHJcbiAgICAgIHRoaXMuZGlyID0gZGlyZWN0aW9uO1xyXG4gICAgICB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBxdWVyeVBhcmFtcyQucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpLnN1YnNjcmliZSh0aGlzLnF1ZXJ5UGFyYW1zKTtcclxuICAgIHBhZ2VJbmRleERpc3RpbmN0JC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSkuc3Vic2NyaWJlKHBhZ2VJbmRleCA9PiB7XHJcbiAgICAgIGlmIChwYWdlSW5kZXggIT09IHRoaXMucGFnZUluZGV4KSB7XHJcbiAgICAgICAgdGhpcy5wYWdlSW5kZXggPSBwYWdlSW5kZXg7XHJcbiAgICAgICAgdGhpcy5wYWdlSW5kZXhDaGFuZ2UubmV4dChwYWdlSW5kZXgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHBhZ2VTaXplRGlzdGluY3QkLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKS5zdWJzY3JpYmUocGFnZVNpemUgPT4ge1xyXG4gICAgICBpZiAocGFnZVNpemUgIT09IHRoaXMucGFnZVNpemUpIHtcclxuICAgICAgICB0aGlzLnBhZ2VTaXplID0gcGFnZVNpemU7XHJcbiAgICAgICAgdGhpcy5wYWdlU2l6ZUNoYW5nZS5uZXh0KHBhZ2VTaXplKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB0b3RhbCRcclxuICAgICAgLnBpcGUoXHJcbiAgICAgICAgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpLFxyXG4gICAgICAgIGZpbHRlcigoKSA9PiB0aGlzLmZyb250UGFnaW5hdGlvbilcclxuICAgICAgKVxyXG4gICAgICAuc3Vic2NyaWJlKHRvdGFsID0+IHtcclxuICAgICAgICBpZiAodG90YWwgIT09IHRoaXMudG90YWwpIHtcclxuICAgICAgICAgIHRoaXMudG90YWwgPSB0b3RhbDtcclxuICAgICAgICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICBsaXN0T2ZDdXJyZW50UGFnZURhdGEkLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKS5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICAgIHRoaXMuY3VycmVudFBhZ2VEYXRhQ2hhbmdlLm5leHQoZGF0YSk7XHJcbiAgICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhlYWRUZW1wbGF0ZSQucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpLnN1YnNjcmliZSh0aGVhZFRlbXBsYXRlID0+IHtcclxuICAgICAgdGhpcy50aGVhZFRlbXBsYXRlID0gdGhlYWRUZW1wbGF0ZTtcclxuICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBoYXNGaXhMZWZ0JC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSkuc3Vic2NyaWJlKGhhc0ZpeExlZnQgPT4ge1xyXG4gICAgICB0aGlzLmhhc0ZpeExlZnQgPSBoYXNGaXhMZWZ0O1xyXG4gICAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGhhc0ZpeFJpZ2h0JC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSkuc3Vic2NyaWJlKGhhc0ZpeFJpZ2h0ID0+IHtcclxuICAgICAgdGhpcy5oYXNGaXhSaWdodCA9IGhhc0ZpeFJpZ2h0O1xyXG4gICAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbWJpbmVMYXRlc3QoW3RvdGFsJCwgdGhpcy5sb2FkaW5nJCwgdGhpcy50ZW1wbGF0ZU1vZGUkXSlcclxuICAgICAgLnBpcGUoXHJcbiAgICAgICAgbWFwKChbdG90YWwsIGxvYWRpbmcsIHRlbXBsYXRlTW9kZV0pID0+IHRvdGFsID09PSAwICYmICFsb2FkaW5nICYmICF0ZW1wbGF0ZU1vZGUpLFxyXG4gICAgICAgIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKVxyXG4gICAgICApXHJcbiAgICAgIC5zdWJzY3JpYmUoZW1wdHkgPT4ge1xyXG4gICAgICAgIHRoaXMudGRzVGFibGVTdHlsZVNlcnZpY2Uuc2V0U2hvd0VtcHR5KGVtcHR5KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgdGhpcy52ZXJ0aWNhbFNjcm9sbEJhcldpZHRoID0gbWVhc3VyZVNjcm9sbGJhcigndmVydGljYWwnKTtcclxuICAgIHRoaXMudGRzVGFibGVTdHlsZVNlcnZpY2UubGlzdE9mTGlzdE9mVGhXaWR0aFB4JC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSkuc3Vic2NyaWJlKGxpc3RPZldpZHRoID0+IHtcclxuICAgICAgdGhpcy5saXN0T2ZBdXRvQ29sV2lkdGggPSBsaXN0T2ZXaWR0aDtcclxuICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMudGRzVGFibGVTdHlsZVNlcnZpY2UubWFudWFsV2lkdGhDb25maWdQeCQucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpLnN1YnNjcmliZShsaXN0T2ZXaWR0aCA9PiB7XHJcbiAgICAgIHRoaXMubGlzdE9mTWFudWFsQ29sV2lkdGggPSBsaXN0T2ZXaWR0aDtcclxuICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgc2Nyb2xsLFxyXG4gICAgICBwYWdlSW5kZXgsXHJcbiAgICAgIHBhZ2VTaXplLFxyXG4gICAgICBmcm9udFBhZ2luYXRpb24sXHJcbiAgICAgIGxpc3REYXRhLFxyXG4gICAgICB3aWR0aENvbmZpZyxcclxuICAgICAgbm9SZXN1bHQsXHJcbiAgICAgIGxvYWRpbmcsXHJcbiAgICAgIHRlbXBsYXRlTW9kZVxyXG4gICAgfSA9IGNoYW5nZXM7XHJcblxyXG4gICAgaWYgKHBhZ2VJbmRleCkge1xyXG4gICAgICB0aGlzLnRkc1RhYmxlRGF0YVNlcnZpY2UudXBkYXRlUGFnZUluZGV4KHRoaXMucGFnZUluZGV4KTtcclxuICAgIH1cclxuICAgIGlmIChwYWdlU2l6ZSkge1xyXG4gICAgICB0aGlzLnRkc1RhYmxlRGF0YVNlcnZpY2UudXBkYXRlUGFnZVNpemUodGhpcy5wYWdlU2l6ZSk7XHJcbiAgICB9XHJcbiAgICBpZiAobGlzdERhdGEpIHtcclxuICAgICAgdGhpcy5saXN0RGF0YSA9IHRoaXMubGlzdERhdGEgfHwgW107XHJcbiAgICAgIHRoaXMudGRzVGFibGVEYXRhU2VydmljZS51cGRhdGVMaXN0T2ZEYXRhKHRoaXMubGlzdERhdGEpO1xyXG4gICAgfVxyXG4gICAgaWYgKGZyb250UGFnaW5hdGlvbikge1xyXG4gICAgICB0aGlzLnRkc1RhYmxlRGF0YVNlcnZpY2UudXBkYXRlRnJvbnRQYWdpbmF0aW9uKHRoaXMuZnJvbnRQYWdpbmF0aW9uKTtcclxuICAgIH1cclxuICAgIGlmIChzY3JvbGwpIHtcclxuICAgICAgdGhpcy5zZXRTY3JvbGxPbkNoYW5nZXMoKTtcclxuICAgIH1cclxuICAgIGlmICh3aWR0aENvbmZpZykge1xyXG4gICAgICB0aGlzLnRkc1RhYmxlU3R5bGVTZXJ2aWNlLnNldFRhYmxlV2lkdGhDb25maWcodGhpcy53aWR0aENvbmZpZyk7XHJcbiAgICB9XHJcbiAgICBpZiAobG9hZGluZykge1xyXG4gICAgICB0aGlzLmxvYWRpbmckLm5leHQodGhpcy5sb2FkaW5nKTtcclxuICAgIH1cclxuICAgIGlmICh0ZW1wbGF0ZU1vZGUpIHtcclxuICAgICAgdGhpcy50ZW1wbGF0ZU1vZGUkLm5leHQodGhpcy50ZW1wbGF0ZU1vZGUpO1xyXG4gICAgfVxyXG4gICAgaWYgKG5vUmVzdWx0KSB7XHJcbiAgICAgIHRoaXMudGRzVGFibGVTdHlsZVNlcnZpY2Uuc2V0Tm9SZXN1bHQodGhpcy5ub1Jlc3VsdCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy51cGRhdGVTaG93UGFnaW5hdGlvbigpO1xyXG4gIH1cclxuXHJcbiAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xyXG4gICAgLy9maXggbOG7l2kgZXhwYW5kIGtvIGzhuqV5IGRjIGhvc3Qgd2lkdGhcclxuICAgIG9mKHRoaXMuZ2V0V2lkdGhIb3N0KCkpLnBpcGUoZGVsYXkoMTApLCB0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpLnN1YnNjcmliZSh0aGlzLnRkc1RhYmxlU3R5bGVTZXJ2aWNlLmhvc3RXaWR0aCQpO1xyXG4gICAgdGhpcy50ZHNSZXNpemVPYnNlcnZlclxyXG4gICAgICAub2JzZXJ2ZSh0aGlzLmVsZW1lbnRSZWYpXHJcbiAgICAgIC5waXBlKFxyXG4gICAgICAgIG1hcCgoW2VudHJ5XSkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgeyB3aWR0aCB9ID0gZW50cnkudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgY29uc3Qgc2Nyb2xsQmFyV2lkdGggPSB0aGlzLnNjcm9sbFkgPyB0aGlzLnZlcnRpY2FsU2Nyb2xsQmFyV2lkdGggOiAwO1xyXG4gICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3Iod2lkdGggLSBzY3JvbGxCYXJXaWR0aCk7XHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpXHJcbiAgICAgIClcclxuICAgICAgLnN1YnNjcmliZSh0aGlzLnRkc1RhYmxlU3R5bGVTZXJ2aWNlLmhvc3RXaWR0aCQpO1xyXG4gICAgaWYgKHRoaXMudGRzVGFibGVJbm5lclNjcm9sbENvbXBvbmVudCAmJiB0aGlzLnRkc1RhYmxlSW5uZXJTY3JvbGxDb21wb25lbnQuY2RrVmlydHVhbFNjcm9sbFZpZXdwb3J0KSB7XHJcbiAgICAgIHRoaXMuY2RrVmlydHVhbFNjcm9sbFZpZXdwb3J0ID0gdGhpcy50ZHNUYWJsZUlubmVyU2Nyb2xsQ29tcG9uZW50LmNka1ZpcnR1YWxTY3JvbGxWaWV3cG9ydDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xyXG4gICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XHJcbiAgICB0aGlzLmRlc3Ryb3kkLmNvbXBsZXRlKCk7XHJcbiAgfVxyXG4gIG9uQ2xpY2tSZWZyZXNoKGU6IE1vdXNlRXZlbnQpIHtcclxuICAgIHRoaXMuY2xpY2tSZWZyZXNoLmVtaXQoZSk7XHJcbiAgfVxyXG4gIHByaXZhdGUgc2V0U2Nyb2xsT25DaGFuZ2VzKCk6IHZvaWQge1xyXG4gICAgdGhpcy5zY3JvbGxYID0gKHRoaXMuc2Nyb2xsICYmIHRoaXMuc2Nyb2xsLngpIHx8IG51bGw7XHJcbiAgICB0aGlzLnNjcm9sbFkgPSAodGhpcy5zY3JvbGwgJiYgdGhpcy5zY3JvbGwueSkgfHwgbnVsbDtcclxuICAgIHRoaXMudGRzVGFibGVTdHlsZVNlcnZpY2Uuc2V0U2Nyb2xsKHRoaXMuc2Nyb2xsWCwgdGhpcy5zY3JvbGxZKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgdXBkYXRlU2hvd1BhZ2luYXRpb24oKTogdm9pZCB7XHJcbiAgICB0aGlzLmlzU2hvd1BhZ2luYXRpb24gPVxyXG4gICAgICB0aGlzLnNob3dQYWdpbmF0aW9uICYmIChcclxuICAgICAgICAodGhpcy5oaWRlT25TaW5nbGVQYWdlICYmIHRoaXMubGlzdERhdGEubGVuZ3RoID4gdGhpcy5wYWdlU2l6ZSkgfHxcclxuICAgICAgICAodGhpcy5saXN0RGF0YS5sZW5ndGggPiAwICYmICF0aGlzLmhpZGVPblNpbmdsZVBhZ2UpIHx8XHJcbiAgICAgICAgKCF0aGlzLmZyb250UGFnaW5hdGlvbiAmJiB0aGlzLnRvdGFsID4gdGhpcy5wYWdlU2l6ZSlcclxuICAgICAgKTtcclxuXHJcbiAgfVxyXG4gIHByaXZhdGUgZ2V0V2lkdGhIb3N0KCkge1xyXG4gICAgY29uc3QgeyB3aWR0aCB9ID0gdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICBjb25zdCBzY3JvbGxCYXJXaWR0aCA9IHRoaXMuc2Nyb2xsWSA/IHRoaXMudmVydGljYWxTY3JvbGxCYXJXaWR0aCA6IDA7XHJcbiAgICByZXR1cm4gTWF0aC5mbG9vcih3aWR0aCAtIHNjcm9sbEJhcldpZHRoKTtcclxuICB9XHJcbn1cclxuIl19