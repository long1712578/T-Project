import { __decorate } from "tslib";
import { ChangeDetectionStrategy, Component, EventEmitter, Input, Optional, Output, ViewEncapsulation } from '@angular/core';
import { InputBoolean } from 'tds-ui/shared/utility';
import { scrollIntoView } from 'tds-ui/core/util';
import * as i0 from "@angular/core";
import * as i1 from "./autocomplete-optgroup.component";
import * as i2 from "@angular/common";
const _c0 = function (a0, a1, a2) { return { "py-2": a0, "py-1.5": a1, "py-2.5": a2 }; };
const _c1 = ["*"];
export class TDSAutoOptionSelectionChange {
    constructor(source, isUserInput = false) {
        this.source = source;
        this.isUserInput = isUserInput;
    }
}
export class TDSAutocompleteOptionComponent {
    constructor(changeDetectorRef, element, TDSAutocompleteOptgroupComponent) {
        this.changeDetectorRef = changeDetectorRef;
        this.element = element;
        this.TDSAutocompleteOptgroupComponent = TDSAutocompleteOptgroupComponent;
        this.size = 'md';
        this.disabled = false;
        this.selectionChange = new EventEmitter();
        this.mouseEntered = new EventEmitter();
        this.active = false;
        this.selected = false;
    }
    select(emit = true) {
        this.selected = true;
        this.changeDetectorRef.markForCheck();
        if (emit) {
            this.emitSelectionChangeEvent();
        }
    }
    onMouseEnter() {
        this.mouseEntered.emit(this);
    }
    deselect() {
        this.selected = false;
        this.changeDetectorRef.markForCheck();
        this.emitSelectionChangeEvent();
    }
    /** Git display label */
    getLabel() {
        return this.label || this.value.toString();
    }
    /** Set active (only styles) */
    setActiveStyles() {
        if (!this.active) {
            this.active = true;
            this.changeDetectorRef.markForCheck();
        }
    }
    /** Unset active (only styles) */
    setInactiveStyles() {
        if (this.active) {
            this.active = false;
            this.changeDetectorRef.markForCheck();
        }
    }
    scrollIntoViewIfNeeded() {
        scrollIntoView(this.element.nativeElement);
    }
    selectViaInteraction() {
        if (!this.disabled) {
            this.selected = !this.selected;
            if (this.selected) {
                this.setActiveStyles();
            }
            else {
                this.setInactiveStyles();
            }
            this.emitSelectionChangeEvent(true);
            this.changeDetectorRef.markForCheck();
        }
    }
    emitSelectionChangeEvent(isUserInput = false) {
        this.selectionChange.emit(new TDSAutoOptionSelectionChange(this, isUserInput));
    }
}
TDSAutocompleteOptionComponent.ɵfac = function TDSAutocompleteOptionComponent_Factory(t) { return new (t || TDSAutocompleteOptionComponent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.TDSAutocompleteOptgroupComponent, 8)); };
TDSAutocompleteOptionComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: TDSAutocompleteOptionComponent, selectors: [["tds-auto-option"]], hostAttrs: ["role", "menuitem", 1, "tds-select-item", "tds-select-item-option", "px-3", "text-neutral-1-900", "dark:text-d-neutral-1-900", "text-body-2", "font-regular", "hover:bg-neutral-3-50", "dark:hover:bg-d-neutral-3-300", "flex", "w-full"], hostVars: 18, hostBindings: function TDSAutocompleteOptionComponent_HostBindings(rf, ctx) { if (rf & 1) {
        i0.ɵɵlistener("click", function TDSAutocompleteOptionComponent_click_HostBindingHandler() { return ctx.selectViaInteraction(); })("mouseenter", function TDSAutocompleteOptionComponent_mouseenter_HostBindingHandler() { return ctx.onMouseEnter(); })("mousedown", function TDSAutocompleteOptionComponent_mousedown_HostBindingHandler($event) { return $event.preventDefault(); });
    } if (rf & 2) {
        i0.ɵɵattribute("aria-selected", ctx.selected.toString())("aria-disabled", ctx.disabled.toString());
        i0.ɵɵclassProp("tds-select-item-option-grouped", ctx.TDSAutocompleteOptgroupComponent)("tds-select-item-option-selected", ctx.selected)("bg-neutral-3-50", (ctx.selected || ctx.active) && !ctx.disabled)("dark:bg-d-neutral-3-300", (ctx.selected || ctx.active) && !ctx.disabled)("tds-select-item-option-active", ctx.active)("cursor-pointer", !ctx.disabled)("cursor-not-allowed", ctx.disabled)("tds-select-item-option-disabled", ctx.disabled);
    } }, inputs: { size: "size", value: "value", label: "label", disabled: "disabled" }, outputs: { selectionChange: "selectionChange", mouseEntered: "mouseEntered" }, exportAs: ["tdsAutoOption"], ngContentSelectors: _c1, decls: 2, vars: 5, consts: [[1, "tds-select-item-option-content", "w-full", "flex", "break-words", 3, "ngClass"]], template: function TDSAutocompleteOptionComponent_Template(rf, ctx) { if (rf & 1) {
        i0.ɵɵprojectionDef();
        i0.ɵɵelementStart(0, "div", 0);
        i0.ɵɵprojection(1);
        i0.ɵɵelementEnd();
    } if (rf & 2) {
        i0.ɵɵproperty("ngClass", i0.ɵɵpureFunction3(1, _c0, ctx.size === "md", ctx.size === "sm", ctx.size === "lg"));
    } }, directives: [i2.NgClass], encapsulation: 2, changeDetection: 0 });
__decorate([
    InputBoolean()
], TDSAutocompleteOptionComponent.prototype, "disabled", void 0);
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(TDSAutocompleteOptionComponent, [{
        type: Component,
        args: [{
                selector: 'tds-auto-option',
                exportAs: 'tdsAutoOption',
                // preserveWhitespaces: false,
                changeDetection: ChangeDetectionStrategy.OnPush,
                encapsulation: ViewEncapsulation.None,
                template: `
    <div class="tds-select-item-option-content w-full flex break-words" [ngClass]="{'py-2': size === 'md',
    'py-1.5': size === 'sm',
    'py-2.5': size === 'lg'}">    
      <ng-content></ng-content>
    </div>
  `,
                host: {
                    role: 'menuitem',
                    class: 'tds-select-item tds-select-item-option px-3  text-neutral-1-900 dark:text-d-neutral-1-900 text-body-2 font-regular hover:bg-neutral-3-50 dark:hover:bg-d-neutral-3-300 flex w-full',
                    '[class.tds-select-item-option-grouped]': 'TDSAutocompleteOptgroupComponent',
                    '[class.tds-select-item-option-selected]': 'selected',
                    '[class.bg-neutral-3-50]': '(selected ||active) && !disabled',
                    '[class.dark:bg-d-neutral-3-300]': '(selected ||active) && !disabled',
                    '[class.tds-select-item-option-active]': 'active',
                    '[class.cursor-pointer]': "!disabled",
                    '[class.cursor-not-allowed]': "disabled",
                    '[class.tds-select-item-option-disabled]': 'disabled',
                    '[attr.aria-selected]': 'selected.toString()',
                    '[attr.aria-disabled]': 'disabled.toString()',
                    '(click)': 'selectViaInteraction()',
                    '(mouseenter)': 'onMouseEnter()',
                    '(mousedown)': '$event.preventDefault()'
                }
            }]
    }], function () { return [{ type: i0.ChangeDetectorRef }, { type: i0.ElementRef }, { type: i1.TDSAutocompleteOptgroupComponent, decorators: [{
                type: Optional
            }] }]; }, { size: [{
            type: Input
        }], value: [{
            type: Input
        }], label: [{
            type: Input
        }], disabled: [{
            type: Input
        }], selectionChange: [{
            type: Output
        }], mouseEntered: [{
            type: Output
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXV0b2NvbXBsZXRlLW9wdGlvbi5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy90ZHMtdWkvYXV0by1jb21wbGV0ZS9hdXRvY29tcGxldGUtb3B0aW9uLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBR0EsT0FBTyxFQUNMLHVCQUF1QixFQUV2QixTQUFTLEVBRVQsWUFBWSxFQUNaLEtBQUssRUFDTCxRQUFRLEVBQ1IsTUFBTSxFQUNOLGlCQUFpQixFQUNsQixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsWUFBWSxFQUFjLE1BQU0sdUJBQXVCLENBQUM7QUFDakUsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGtCQUFrQixDQUFDOzs7Ozs7QUFLbEQsTUFBTSxPQUFPLDRCQUE0QjtJQUN2QyxZQUFtQixNQUFzQyxFQUFTLGNBQXVCLEtBQUs7UUFBM0UsV0FBTSxHQUFOLE1BQU0sQ0FBZ0M7UUFBUyxnQkFBVyxHQUFYLFdBQVcsQ0FBaUI7SUFBSSxDQUFDO0NBQ3BHO0FBaUNELE1BQU0sT0FBTyw4QkFBOEI7SUFZekMsWUFDVSxpQkFBb0MsRUFDcEMsT0FBbUIsRUFFcEIsZ0NBQWtFO1FBSGpFLHNCQUFpQixHQUFqQixpQkFBaUIsQ0FBbUI7UUFDcEMsWUFBTyxHQUFQLE9BQU8sQ0FBWTtRQUVwQixxQ0FBZ0MsR0FBaEMsZ0NBQWdDLENBQWtDO1FBZGxFLFNBQUksR0FBdUIsSUFBSSxDQUFDO1FBR2hCLGFBQVEsR0FBRyxLQUFLLENBQUM7UUFDdkIsb0JBQWUsR0FBRyxJQUFJLFlBQVksRUFBZ0MsQ0FBQztRQUNuRSxpQkFBWSxHQUFHLElBQUksWUFBWSxFQUFrQyxDQUFDO1FBRXJGLFdBQU0sR0FBRyxLQUFLLENBQUM7UUFDZixhQUFRLEdBQUcsS0FBSyxDQUFDO0lBT2IsQ0FBQztJQUVMLE1BQU0sQ0FBQyxPQUFnQixJQUFJO1FBQ3pCLElBQUksQ0FBQyxRQUFR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LDRCQUE0QixFQUFDLFVBQVU7b0JBQ3ZDLHlDQUF5QyxFQUFFLFVBQVU7b0JBQ3JELHNCQUFzQixFQUFFLHFCQUFxQjtvQkFDN0Msc0JBQXNCLEVBQUUscUJBQXFCO29CQUM3QyxTQUFTLEVBQUUsd0JBQXdCO29CQUNuQyxjQUFjLEVBQUUsZ0JBQWdCO29CQUNoQyxhQUFhLEVBQUUseUJBQXlCO2lCQUN6QzthQUNGOztzQkFnQkksUUFBUTt3QkFiRixJQUFJO2tCQUFaLEtBQUs7WUFDRyxLQUFLO2tCQUFiLEtBQUs7WUFDRyxLQUFLO2tCQUFiLEtBQUs7WUFDbUIsUUFBUTtrQkFBaEMsS0FBSztZQUNhLGVBQWU7a0JBQWpDLE1BQU07WUFDWSxZQUFZO2tCQUE5QixNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiXHJcblxyXG5pbXBvcnQgeyBCb29sZWFuSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jZGsvY29lcmNpb24nO1xyXG5pbXBvcnQge1xyXG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxyXG4gIENoYW5nZURldGVjdG9yUmVmLFxyXG4gIENvbXBvbmVudCxcclxuICBFbGVtZW50UmVmLFxyXG4gIEV2ZW50RW1pdHRlcixcclxuICBJbnB1dCxcclxuICBPcHRpb25hbCxcclxuICBPdXRwdXQsXHJcbiAgVmlld0VuY2Fwc3VsYXRpb25cclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgSW5wdXRCb29sZWFuLCBURFNTYWZlQW55IH0gZnJvbSAndGRzLXVpL3NoYXJlZC91dGlsaXR5JztcclxuaW1wb3J0IHsgc2Nyb2xsSW50b1ZpZXcgfSBmcm9tICd0ZHMtdWkvY29yZS91dGlsJztcclxuXHJcblxyXG5pbXBvcnQgeyBURFNBdXRvY29tcGxldGVPcHRncm91cENvbXBvbmVudCB9IGZyb20gJy4vYXV0b2NvbXBsZXRlLW9wdGdyb3VwLmNvbXBvbmVudCc7XHJcblxyXG5leHBvcnQgY2xhc3MgVERTQXV0b09wdGlvblNlbGVjdGlvbkNoYW5nZSB7XHJcbiAgY29uc3RydWN0b3IocHVibGljIHNvdXJjZTogVERTQXV0b2NvbXBsZXRlT3B0aW9uQ29tcG9uZW50LCBwdWJsaWMgaXNVc2VySW5wdXQ6IGJvb2xlYW4gPSBmYWxzZSkgeyB9XHJcbn1cclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAndGRzLWF1dG8tb3B0aW9uJyxcclxuICBleHBvcnRBczogJ3Rkc0F1dG9PcHRpb24nLFxyXG4gIC8vIHByZXNlcnZlV2hpdGVzcGFjZXM6IGZhbHNlLFxyXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxyXG4gIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXHJcbiAgdGVtcGxhdGU6IGBcclxuICAgIDxkaXYgY2xhc3M9XCJ0ZHMtc2VsZWN0LWl0ZW0tb3B0aW9uLWNvbnRlbnQgdy1mdWxsIGZsZXggYnJlYWstd29yZHNcIiBbbmdDbGFzc109XCJ7J3B5LTInOiBzaXplID09PSAnbWQnLFxyXG4gICAgJ3B5LTEuNSc6IHNpemUgPT09ICdzbScsXHJcbiAgICAncHktMi41Jzogc2l6ZSA9PT0gJ2xnJ31cIj4gICAgXHJcbiAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cclxuICAgIDwvZGl2PlxyXG4gIGAsXHJcbiAgaG9zdDoge1xyXG4gICAgcm9sZTogJ21lbnVpdGVtJyxcclxuICAgIGNsYXNzOiAndGRzLXNlbGVjdC1pdGVtIHRkcy1zZWxlY3QtaXRlbS1vcHRpb24gcHgtMyAgdGV4dC1uZXV0cmFsLTEtOTAwIGRhcms6dGV4dC1kLW5ldXRyYWwtMS05MDAgdGV4dC1ib2R5LTIgZm9udC1yZWd1bGFyIGhvdmVyOmJnLW5ldXRyYWwtMy01MCBkYXJrOmhvdmVyOmJnLWQtbmV1dHJhbC0zLTMwMCBmbGV4IHctZnVsbCcsXHJcbiAgICAnW2NsYXNzLnRkcy1zZWxlY3QtaXRlbS1vcHRpb24tZ3JvdXBlZF0nOiAnVERTQXV0b2NvbXBsZXRlT3B0Z3JvdXBDb21wb25lbnQnLFxyXG4gICAgJ1tjbGFzcy50ZHMtc2VsZWN0LWl0ZW0tb3B0aW9uLXNlbGVjdGVkXSc6ICdzZWxlY3RlZCcsXHJcbiAgICAnW2NsYXNzLmJnLW5ldXRyYWwtMy01MF0nOiAnKHNlbGVjdGVkIHx8YWN0aXZlKSAmJiAhZGlzYWJsZWQnLFxyXG4gICAgJ1tjbGFzcy5kYXJrOmJnLWQtbmV1dHJhbC0zLTMwMF0nOiAnKHNlbGVjdGVkIHx8YWN0aXZlKSAmJiAhZGlzYWJsZWQnLFxyXG4gICAgJ1tjbGFzcy50ZHMtc2VsZWN0LWl0ZW0tb3B0aW9uLWFjdGl2ZV0nOiAnYWN0aXZlJywgICAgXHJcbiAgICAnW2NsYXNzLmN1cnNvci1wb2ludGVyXSc6XCIhZGlzYWJsZWRcIixcclxuICAgICdbY2xhc3MuY3Vyc29yLW5vdC1hbGxvd2VkXSc6XCJkaXNhYmxlZFwiLFxyXG4gICAgJ1tjbGFzcy50ZHMtc2VsZWN0LWl0ZW0tb3B0aW9uLWRpc2FibGVkXSc6ICdkaXNhYmxlZCcsXHJcbiAgICAnW2F0dHIuYXJpYS1zZWxlY3RlZF0nOiAnc2VsZWN0ZWQudG9TdHJpbmcoKScsXHJcbiAgICAnW2F0dHIuYXJpYS1kaXNhYmxlZF0nOiAnZGlzYWJsZWQudG9TdHJpbmcoKScsXHJcbiAgICAnKGNsaWNrKSc6ICdzZWxlY3RWaWFJbnRlcmFjdGlvbigpJyxcclxuICAgICcobW91c2VlbnRlciknOiAnb25Nb3VzZUVudGVyKCknLFxyXG4gICAgJyhtb3VzZWRvd24pJzogJyRldmVudC5wcmV2ZW50RGVmYXVsdCgpJ1xyXG4gIH1cclxufSlcclxuZXhwb3J0IGNsYXNzIFREU0F1dG9jb21wbGV0ZU9wdGlvbkNvbXBvbmVudCB7XHJcbiAgc3RhdGljIG5nQWNjZXB0SW5wdXRUeXBlX2Rpc2FibGVkOiBCb29sZWFuSW5wdXQ7XHJcbiAgQElucHV0KCkgc2l6ZTogJ3NtJyB8ICdtZCcgfCAnbGcnID0gJ21kJztcclxuICBASW5wdXQoKSB2YWx1ZTogVERTU2FmZUFueTtcclxuICBASW5wdXQoKSBsYWJlbD86IHN0cmluZztcclxuICBASW5wdXQoKSBASW5wdXRCb29sZWFuKCkgZGlzYWJsZWQgPSBmYWxzZTtcclxuICBAT3V0cHV0KCkgcmVhZG9ubHkgc2VsZWN0aW9uQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxURFNBdXRvT3B0aW9uU2VsZWN0aW9uQ2hhbmdlPigpO1xyXG4gIEBPdXRwdXQoKSByZWFkb25seSBtb3VzZUVudGVyZWQgPSBuZXcgRXZlbnRFbWl0dGVyPFREU0F1dG9jb21wbGV0ZU9wdGlvbkNvbXBvbmVudD4oKTtcclxuXHJcbiAgYWN0aXZlID0gZmFsc2U7XHJcbiAgc2VsZWN0ZWQgPSBmYWxzZTtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIGNoYW5nZURldGVjdG9yUmVmOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgIHByaXZhdGUgZWxlbWVudDogRWxlbWVudFJlZixcclxuICAgIEBPcHRpb25hbCgpXHJcbiAgICBwdWJsaWMgVERTQXV0b2NvbXBsZXRlT3B0Z3JvdXBDb21wb25lbnQ6IFREU0F1dG9jb21wbGV0ZU9wdGdyb3VwQ29tcG9uZW50XHJcbiAgKSB7IH1cclxuXHJcbiAgc2VsZWN0KGVtaXQ6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XHJcbiAgICB0aGlzLnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XHJcbiAgICBpZiAoZW1pdCkge1xyXG4gICAgICB0aGlzLmVtaXRTZWxlY3Rpb25DaGFuZ2VFdmVudCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25Nb3VzZUVudGVyKCk6IHZvaWQge1xyXG4gICAgdGhpcy5tb3VzZUVudGVyZWQuZW1pdCh0aGlzKTtcclxuICB9XHJcblxyXG4gIGRlc2VsZWN0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5zZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcclxuICAgIHRoaXMuZW1pdFNlbGVjdGlvbkNoYW5nZUV2ZW50KCk7XHJcbiAgfVxyXG5cclxuICAvKiogR2l0IGRpc3BsYXkgbGFiZWwgKi9cclxuICBnZXRMYWJlbCgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMubGFiZWwgfHwgdGhpcy52YWx1ZS50b1N0cmluZygpO1xyXG4gIH1cclxuXHJcbiAgLyoqIFNldCBhY3RpdmUgKG9ubHkgc3R5bGVzKSAqL1xyXG4gIHNldEFjdGl2ZVN0eWxlcygpOiB2b2lkIHtcclxuICAgIGlmICghdGhpcy5hY3RpdmUpIHtcclxuICAgICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICB0aGlzLmNoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqIFVuc2V0IGFjdGl2ZSAob25seSBzdHlsZXMpICovXHJcbiAgc2V0SW5hY3RpdmVTdHlsZXMoKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5hY3RpdmUpIHtcclxuICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgdGhpcy5jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNjcm9sbEludG9WaWV3SWZOZWVkZWQoKTogdm9pZCB7XHJcbiAgICBzY3JvbGxJbnRvVmlldyh0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICBzZWxlY3RWaWFJbnRlcmFjdGlvbigpOiB2b2lkIHtcclxuICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xyXG4gICAgICB0aGlzLnNlbGVjdGVkID0gIXRoaXMuc2VsZWN0ZWQ7XHJcbiAgICAgIGlmICh0aGlzLnNlbGVjdGVkKSB7XHJcbiAgICAgICAgdGhpcy5zZXRBY3RpdmVTdHlsZXMoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnNldEluYWN0aXZlU3R5bGVzKCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5lbWl0U2VsZWN0aW9uQ2hhbmdlRXZlbnQodHJ1ZSk7XHJcbiAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGVtaXRTZWxlY3Rpb25DaGFuZ2VFdmVudChpc1VzZXJJbnB1dDogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XHJcbiAgICB0aGlzLnNlbGVjdGlvbkNoYW5nZS5lbWl0KG5ldyBURFNBdXRvT3B0aW9uU2VsZWN0aW9uQ2hhbmdlKHRoaXMsIGlzVXNlcklucHV0KSk7XHJcbiAgfVxyXG59XHJcbiJdfQ==