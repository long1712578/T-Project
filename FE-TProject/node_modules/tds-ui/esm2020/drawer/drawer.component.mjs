import { __decorate } from "tslib";
import { ESCAPE } from '@angular/cdk/keycodes';
import { OverlayConfig } from '@angular/cdk/overlay';
import { CdkPortalOutlet, ComponentPortal, TemplatePortal } from '@angular/cdk/portal';
import { DOCUMENT } from '@angular/common';
import { ChangeDetectionStrategy, Component, ContentChild, EventEmitter, Inject, Injector, Input, Optional, Output, TemplateRef, Type, ViewChild } from '@angular/core';
import { Subject } from 'rxjs';
import { takeUntil } from 'rxjs/operators';
import { InputBoolean, TDSHelperObject, toCssPixel } from 'tds-ui/shared/utility';
import { TDSDrawerContentDirective } from './drawer-content.directive';
import { TDSDrawerRef } from './drawer-ref';
import * as i0 from "@angular/core";
import * as i1 from "@angular/cdk/overlay";
import * as i2 from "@angular/cdk/a11y";
import * as i3 from "@angular/cdk/bidi";
import * as i4 from "@angular/common";
import * as i5 from "tds-ui/core/outlet";
import * as i6 from "tds-ui/button";
import * as i7 from "@angular/cdk/portal";
const _c0 = ["drawerTemplate"];
const _c1 = function (a0, a1) { return { "pointer-events-auto h-full opacity-100 transition-none   animate-drawer": a0, "pointer-events-none h-0 opacity-0 transition-[opacity,height] duration-[0.3s,0s] ease-[linear,ease] delay-[0s,0.3s]": a1 }; };
function TDSDrawerComponent_ng_template_0_div_1_Template(rf, ctx) { if (rf & 1) {
    const _r11 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 13);
    i0.ɵɵlistener("click", function TDSDrawerComponent_ng_template_0_div_1_Template_div_click_0_listener() { i0.ɵɵrestoreView(_r11); const ctx_r10 = i0.ɵɵnextContext(2); return ctx_r10.maskClick(); });
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("ngStyle", ctx_r2.maskStyle)("ngClass", i0.ɵɵpureFunction2(2, _c1, ctx_r2.isOpen, !ctx_r2.isOpen));
} }
function TDSDrawerComponent_ng_template_0_div_5_div_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelement(1, "div", 18);
    i0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r14 = i0.ɵɵnextContext(4);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("innerHTML", ctx_r14.title, i0.ɵɵsanitizeHtml);
} }
function TDSDrawerComponent_ng_template_0_div_5_div_1_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 16);
    i0.ɵɵtemplate(1, TDSDrawerComponent_ng_template_0_div_5_div_1_ng_container_1_Template, 2, 1, "ng-container", 17);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r12 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("tdsStringTemplateOutlet", ctx_r12.title);
} }
function TDSDrawerComponent_ng_template_0_div_5_div_2_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelement(1, "button", 20);
    i0.ɵɵelementContainerEnd();
} }
function TDSDrawerComponent_ng_template_0_div_5_div_2_Template(rf, ctx) { if (rf & 1) {
    const _r18 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 19);
    i0.ɵɵlistener("click", function TDSDrawerComponent_ng_template_0_div_5_div_2_Template_div_click_0_listener() { i0.ɵɵrestoreView(_r18); const ctx_r17 = i0.ɵɵnextContext(3); return ctx_r17.closeClick(); });
    i0.ɵɵtemplate(1, TDSDrawerComponent_ng_template_0_div_5_div_2_ng_container_1_Template, 2, 0, "ng-container", 17);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r13 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("tdsStringTemplateOutlet", ctx_r13.closeIcon);
} }
const _c2 = function (a0) { return { "flex items-center justify-between px-4 py-3.5": a0 }; };
function TDSDrawerComponent_ng_template_0_div_5_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 3);
    i0.ɵɵtemplate(1, TDSDrawerComponent_ng_template_0_div_5_div_1_Template, 2, 1, "div", 14);
    i0.ɵɵtemplate(2, TDSDrawerComponent_ng_template_0_div_5_div_2_Template, 2, 1, "div", 15);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r3 = i0.ɵɵnextContext(2);
    i0.ɵɵclassProp("tds-drawer-header", !!ctx_r3.title)("tds-drawer-header-no-title", !ctx_r3.title);
    i0.ɵɵproperty("ngClass", i0.ɵɵpureFunction1(7, _c2, !!ctx_r3.title));
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngIf", ctx_r3.title);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngIf", ctx_r3.closable);
} }
function TDSDrawerComponent_ng_template_0_ng_template_7_Template(rf, ctx) { }
function TDSDrawerComponent_ng_template_0_ng_container_8_ng_container_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementContainer(0);
} }
function TDSDrawerComponent_ng_template_0_ng_container_8_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, TDSDrawerComponent_ng_template_0_ng_container_8_ng_container_1_ng_container_1_Template, 1, 0, "ng-container", 21);
    i0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r19 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngTemplateOutlet", ctx_r19.content)("ngTemplateOutletContext", ctx_r19.templateContext);
} }
function TDSDrawerComponent_ng_template_0_ng_container_8_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, TDSDrawerComponent_ng_template_0_ng_container_8_ng_container_1_Template, 2, 2, "ng-container", 11);
    i0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r5 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngIf", ctx_r5.isTemplateRef(ctx_r5.content));
} }
function TDSDrawerComponent_ng_template_0_ng_template_9_ng_container_0_ng_template_1_Template(rf, ctx) { }
function TDSDrawerComponent_ng_template_0_ng_template_9_ng_container_0_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, TDSDrawerComponent_ng_template_0_ng_template_9_ng_container_0_ng_template_1_Template, 0, 0, "ng-template", 22);
    i0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r21 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngTemplateOutlet", ctx_r21.contentFromContentChild);
} }
function TDSDrawerComponent_ng_template_0_ng_template_9_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵtemplate(0, TDSDrawerComponent_ng_template_0_ng_template_9_ng_container_0_Template, 2, 1, "ng-container", 11);
} if (rf & 2) {
    const ctx_r7 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("ngIf", ctx_r7.contentFromContentChild && (ctx_r7.isOpen || ctx_r7.inAnimation));
} }
function TDSDrawerComponent_ng_template_0_ng_content_11_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵprojection(0, 0, ["*ngIf", "!(content || contentFromContentChild)"]);
} }
function TDSDrawerComponent_ng_template_0_div_12_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelement(1, "div", 24);
    i0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r23 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("innerHTML", ctx_r23.footer, i0.ɵɵsanitizeHtml);
} }
function TDSDrawerComponent_ng_template_0_div_12_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 23);
    i0.ɵɵtemplate(1, TDSDrawerComponent_ng_template_0_div_12_ng_container_1_Template, 2, 1, "ng-container", 17);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r9 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("tdsStringTemplateOutlet", ctx_r9.footer);
} }
const _c3 = function (a0) { return { "tds-drawer-open delay-[0s] duration-300 transition-transform w-full": a0 }; };
const _c4 = function (a0) { return { "top-0": a0 }; };
const _c5 = function (a0) { return { "h-full": a0 }; };
function TDSDrawerComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 1);
    i0.ɵɵtemplate(1, TDSDrawerComponent_ng_template_0_div_1_Template, 1, 5, "div", 2);
    i0.ɵɵelementStart(2, "div", 3)(3, "div", 4)(4, "div", 5);
    i0.ɵɵtemplate(5, TDSDrawerComponent_ng_template_0_div_5_Template, 3, 9, "div", 6);
    i0.ɵɵelementStart(6, "div", 7);
    i0.ɵɵtemplate(7, TDSDrawerComponent_ng_template_0_ng_template_7_Template, 0, 0, "ng-template", 8);
    i0.ɵɵtemplate(8, TDSDrawerComponent_ng_template_0_ng_container_8_Template, 2, 1, "ng-container", 9);
    i0.ɵɵtemplate(9, TDSDrawerComponent_ng_template_0_ng_template_9_Template, 1, 1, "ng-template", null, 10, i0.ɵɵtemplateRefExtractor);
    i0.ɵɵtemplate(11, TDSDrawerComponent_ng_template_0_ng_content_11_Template, 1, 0, "ng-content", 11);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(12, TDSDrawerComponent_ng_template_0_div_12_Template, 2, 1, "div", 12);
    i0.ɵɵelementEnd()()()();
} if (rf & 2) {
    const _r6 = i0.ɵɵreference(10);
    const ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵstyleProp("transform", ctx_r1.offsetTransform)("transition", ctx_r1.placementChanging ? "none" : null)("z-index", ctx_r1.zIndex);
    i0.ɵɵclassProp("tds-drawer-rtl", ctx_r1.dir === "rtl")("no-mask", !ctx_r1.mask)("tds-drawer-top", ctx_r1.placement === "top")("tds-drawer-bottom", ctx_r1.placement === "bottom")("tds-drawer-right", ctx_r1.placement === "right")("right-0", ctx_r1.placement === "right")("top-0", ctx_r1.isLeftOrRight)("tds-drawer-left", ctx_r1.placement === "left")("left-0", ctx_r1.placement === "left");
    i0.ɵɵproperty("ngClass", i0.ɵɵpureFunction1(53, _c3, ctx_r1.isOpen));
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngIf", ctx_r1.mask);
    i0.ɵɵadvance(1);
    i0.ɵɵclassMapInterpolate1("tds-drawer-content-wrapper absolute h-full transition-[transform,box-shadow] duration-[0.3s,0.3s] ease-[cubic-bezier(0.23, 1, 0.32, 1), cubic-bezier(0.23, 1, 0.32, 1)] delay-[0s,0s] ", ctx_r1.wrapClassName, "");
    i0.ɵɵstyleProp("width", ctx_r1.width)("height", ctx_r1.height)("transform", ctx_r1.transform)("transition", ctx_r1.placementChanging ? "none" : null);
    i0.ɵɵclassProp("right-0", ctx_r1.placement === "right")("left-0", ctx_r1.placement === "left")("top-0", ctx_r1.placement === "top")("bottom-0", ctx_r1.placement === "bottom");
    i0.ɵɵproperty("ngClass", i0.ɵɵpureFunction1(55, _c4, ctx_r1.isLeftOrRight));
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngClass", i0.ɵɵpureFunction1(57, _c5, ctx_r1.isLeftOrRight));
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngIf", ctx_r1.title || ctx_r1.closable);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngStyle", ctx_r1.bodyStyle);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", ctx_r1.content)("ngIfElse", _r6);
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngIf", !(ctx_r1.content || ctx_r1.contentFromContentChild));
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngIf", ctx_r1.footer);
} }
const _c6 = ["*"];
export const DRAWER_ANIMATE_DURATION = 300;
const TDS_CONFIG_MODULE_NAME = 'drawer';
export class TDSDrawerComponent extends TDSDrawerRef {
    constructor(cdr, 
    // tslint:disable-next-line:no-any
    document, renderer, overlay, injector, changeDetectorRef, focusTrapFactory, viewContainerRef, overlayKeyboardDispatcher, directionality) {
        super();
        this.cdr = cdr;
        this.document = document;
        this.renderer = renderer;
        this.overlay = overlay;
        this.injector = injector;
        this.changeDetectorRef = changeDetectorRef;
        this.focusTrapFactory = focusTrapFactory;
        this.viewContainerRef = viewContainerRef;
        this.overlayKeyboardDispatcher = overlayKeyboardDispatcher;
        this.directionality = directionality;
        this.size = null;
        this.closeIcon = 'close';
        this.closable = true;
        this.maskClosable = true;
        this.mask = true;
        this.closeOnNavigation = true;
        this.noAnimation = false;
        this.keyboard = true;
        this.placement = 'right';
        this.maskStyle = {};
        this.bodyStyle = {};
        this.zIndex = 1000;
        this.offsetX = 0;
        this.offsetY = 0;
        this.componentInstance = null;
        this._width = 400;
        this._height = 400;
        this.onViewInit = new EventEmitter();
        this.onClose = new EventEmitter();
        this.visibleChange = new EventEmitter();
        this.destroy$ = new Subject();
        this.placementChanging = false;
        this.placementChangeTimeoutId = -1;
        this.isOpen = false;
        this.inAnimation = false;
        this.templateContext = {
            $implicit: undefined,
            drawerRef: this
        };
        this.onAfterOpen = new Subject();
        this.onAfterClose = new Subject();
        // from service config
        this.direction = undefined;
        this.dir = 'ltr';
    }
    set width(val) {
        this._width = val;
    }
    set height(val) {
        this._height = val;
    }
    get width() {
        return this.isLeftOrRight ? toCssPixel(this.getWidthBySize()) : null;
    }
    get height() {
        return !this.isLeftOrRight ? toCssPixel(this.getHeightBySize()) : null;
    }
    getWidthBySize() {
        if (TDSHelperObject.hasValue(this.size)) {
            let result = 400;
            switch (this.size) {
                case "sm":
                    result = 320;
                    break;
                case "lg":
                    result = 640;
                    break;
                case "xl":
                    result = 780;
                    break;
                //md
                default:
                    result = 400;
                    break;
            }
            return result;
        }
        else {
            return this._width;
        }
    }
    getHeightBySize() {
        if (TDSHelperObject.hasValue(this.size)) {
            let result = 400;
            switch (this.size) {
                case "sm":
                    result = 320;
                    break;
                case "lg":
                    result = 640;
                    break;
                //md
                default:
                    result = 400;
                    break;
            }
            return result;
        }
        else {
            return this._height;
        }
    }
    set visible(value) {
        this.isOpen = value;
    }
    get visible() {
        return this.isOpen;
    }
    get offsetTransform() {
        if (!this.isOpen || this.offsetX + this.offsetY === 0) {
            return null;
        }
        switch (this.placement) {
            case 'left':
                return `translateX(${this.offsetX}px)`;
            case 'right':
                return `translateX(-${this.offsetX}px)`;
            case 'top':
                return `translateY(${this.offsetY}px)`;
            case 'bottom':
                return `translateY(-${this.offsetY}px)`;
        }
    }
    get transform() {
        if (this.isOpen) {
            return null;
        }
        switch (this.placement) {
            case 'left':
                return `translateX(-100%)`;
            case 'right':
                return `translateX(100%)`;
            case 'top':
                return `translateY(-100%)`;
            case 'bottom':
                return `translateY(100%)`;
        }
    }
    get isLeftOrRight() {
        return this.placement === 'left' || this.placement === 'right';
    }
    get afterOpen() {
        return this.onAfterOpen.asObservable();
    }
    get afterClose() {
        return this.onAfterClose.asObservable();
    }
    isTemplateRef(value) {
        return value instanceof TemplateRef;
    }
    ngOnInit() {
        this.directionality.change?.pipe(takeUntil(this.destroy$)).subscribe((direction) => {
            this.dir = direction;
            this.cdr.detectChanges();
        });
        this.dir = this.direction || this.directionality.value;
        this.attachOverlay();
        this.updateOverlayStyle();
        this.updateBodyOverflow();
        this.templateContext = { $implicit: this.contentParams, drawerRef: this };
        this.changeDetectorRef.detectChanges();
    }
    ngAfterViewInit() {
        this.attachBodyContent();
        setTimeout(() => {
            this.onViewInit.emit();
        });
    }
    ngAfterContentInit() {
        if (!(this.contentFromContentChild || this.content)) {
            console.warn('Usage `<ng-content></ng-content>` is deprecated, which will be removed in 12.0.0. Please instead use `<ng-template tdsDrawerContent></ng-template>` to declare the content of the drawer.');
        }
    }
    ngOnChanges(changes) {
        const { placement, visible } = changes;
        if (visible) {
            const value = changes.visible.currentValue;
            if (value) {
                this.open();
            }
            else {
                this.close();
            }
        }
        if (placement && !placement.isFirstChange()) {
            this.triggerPlacementChangeCycleOnce();
        }
    }
    ngOnDestroy() {
        this.destroy$.next();
        this.destroy$.complete();
        clearTimeout(this.placementChangeTimeoutId);
        this.disposeOverlay();
    }
    getAnimationDuration() {
        return this.noAnimation ? 0 : DRAWER_ANIMATE_DURATION;
    }
    // Disable the transition animation temporarily when the placement changing
    triggerPlacementChangeCycleOnce() {
        if (!this.noAnimation) {
            this.placementChanging = true;
            this.changeDetectorRef.markForCheck();
            clearTimeout(this.placementChangeTimeoutId);
            this.placementChangeTimeoutId = setTimeout(() => {
                this.placementChanging = false;
                this.changeDetectorRef.markForCheck();
            }, this.getAnimationDuration());
        }
    }
    close(result) {
        this.isOpen = false;
        this.inAnimation = true;
        this.visibleChange.emit(false);
        this.updateOverlayStyle();
        this.overlayKeyboardDispatcher.remove(this.overlayRef);
        this.changeDetectorRef.detectChanges();
        setTimeout(() => {
            this.updateBodyOverflow();
            this.restoreFocus();
            this.inAnimation = false;
            this.onAfterClose.next(result);
            this.onAfterClose.complete();
            this.componentInstance = null;
        }, this.getAnimationDuration());
    }
    open() {
        this.attachOverlay();
        this.isOpen = true;
        this.inAnimation = true;
        this.visibleChange.emit(true);
        this.overlayKeyboardDispatcher.add(this.overlayRef);
        this.updateOverlayStyle();
        this.updateBodyOverflow();
        this.savePreviouslyFocusedElement();
        this.trapFocus();
        this.changeDetectorRef.detectChanges();
        setTimeout(() => {
            this.inAnimation = false;
            this.changeDetectorRef.detectChanges();
            this.onAfterOpen.next();
        }, this.getAnimationDuration());
    }
    getContentComponent() {
        return this.componentInstance;
    }
    closeClick() {
        this.onClose.emit();
    }
    maskClick() {
        if (this.maskClosable && this.mask) {
            this.onClose.emit();
        }
    }
    attachBodyContent() {
        this.bodyPortalOutlet.dispose();
        if (this.content instanceof Type) {
            const childInjector = Injector.create({
                parent: this.injector,
                providers: [{ provide: TDSDrawerRef, useValue: this }]
            });
            const componentPortal = new ComponentPortal(this.content, null, childInjector);
            const componentRef = this.bodyPortalOutlet.attachComponentPortal(componentPortal);
            this.componentInstance = componentRef.instance;
            Object.assign(componentRef.instance, this.contentParams);
            componentRef.changeDetectorRef.detectChanges();
        }
    }
    attachOverlay() {
        if (!this.overlayRef) {
            this.portal = new TemplatePortal(this.drawerTemplate, this.viewContainerRef);
            this.overlayRef = this.overlay.create(this.getOverlayConfig());
        }
        if (this.overlayRef && !this.overlayRef.hasAttached()) {
            this.overlayRef.attach(this.portal);
            this.overlayRef.keydownEvents()
                .pipe(takeUntil(this.destroy$))
                .subscribe((event) => {
                if (event.keyCode === ESCAPE && this.isOpen && this.keyboard) {
                    this.onClose.emit();
                }
            });
            this.overlayRef
                .detachments()
                .pipe(takeUntil(this.destroy$))
                .subscribe(() => {
                this.disposeOverlay();
            });
        }
    }
    disposeOverlay() {
        this.overlayRef?.dispose();
        this.overlayRef = null;
    }
    getOverlayConfig() {
        return new OverlayConfig({
            disposeOnNavigation: this.closeOnNavigation,
            positionStrategy: this.overlay.position().global(),
            scrollStrategy: this.overlay.scrollStrategies.block()
        });
    }
    updateOverlayStyle() {
        if (this.overlayRef && this.overlayRef.overlayElement) {
            this.renderer.setStyle(this.overlayRef.overlayElement, 'pointer-events', this.isOpen ? 'auto' : 'none');
        }
    }
    updateBodyOverflow() {
        if (this.overlayRef) {
            if (this.isOpen) {
                this.overlayRef.getConfig().scrollStrategy.enable();
            }
            else {
                this.overlayRef.getConfig().scrollStrategy.disable();
            }
        }
    }
    savePreviouslyFocusedElement() {
        if (this.document && !this.previouslyFocusedElement) {
            this.previouslyFocusedElement = this.document.activeElement;
            // We need the extra check, because IE's svg element has no blur method.
            if (this.previouslyFocusedElement && typeof this.previouslyFocusedElement.blur === 'function') {
                this.previouslyFocusedElement.blur();
            }
        }
    }
    trapFocus() {
        if (!this.focusTrap && this.overlayRef && this.overlayRef.overlayElement) {
            this.focusTrap = this.focusTrapFactory.create(this.overlayRef.overlayElement);
            this.focusTrap.focusInitialElement();
        }
    }
    restoreFocus() {
        // We need the extra check, because IE can set the `activeElement` to null in some cases.
        if (this.previouslyFocusedElement && typeof this.previouslyFocusedElement.focus === 'function') {
            this.previouslyFocusedElement.focus();
        }
        if (this.focusTrap) {
            this.focusTrap.destroy();
        }
    }
}
TDSDrawerComponent.ɵfac = function TDSDrawerComponent_Factory(t) { return new (t || TDSDrawerComponent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(DOCUMENT, 8), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i1.Overlay), i0.ɵɵdirectiveInject(i0.Injector), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i2.FocusTrapFactory), i0.ɵɵdirectiveInject(i0.ViewContainerRef), i0.ɵɵdirectiveInject(i1.OverlayKeyboardDispatcher), i0.ɵɵdirectiveInject(i3.Directionality, 8)); };
TDSDrawerComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: TDSDrawerComponent, selectors: [["tds-drawer"]], contentQueries: function TDSDrawerComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        i0.ɵɵcontentQuery(dirIndex, TDSDrawerContentDirective, 7, TemplateRef);
    } if (rf & 2) {
        let _t;
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.contentFromContentChild = _t.first);
    } }, viewQuery: function TDSDrawerComponent_Query(rf, ctx) { if (rf & 1) {
        i0.ɵɵviewQuery(_c0, 7);
        i0.ɵɵviewQuery(CdkPortalOutlet, 5);
    } if (rf & 2) {
        let _t;
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.drawerTemplate = _t.first);
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.bodyPortalOutlet = _t.first);
    } }, inputs: { size: "size", content: "content", closeIcon: "closeIcon", closable: "closable", maskClosable: "maskClosable", mask: "mask", closeOnNavigation: "closeOnNavigation", noAnimation: "noAnimation", keyboard: "keyboard", title: "title", footer: "footer", placement: "placement", maskStyle: "maskStyle", bodyStyle: "bodyStyle", wrapClassName: "wrapClassName", zIndex: "zIndex", offsetX: "offsetX", offsetY: "offsetY", width: "width", height: "height", visible: "visible" }, outputs: { onViewInit: "onViewInit", onClose: "onClose", visibleChange: "visibleChange" }, exportAs: ["tdsDrawer"], features: [i0.ɵɵInheritDefinitionFeature, i0.ɵɵNgOnChangesFeature], ngContentSelectors: _c6, decls: 2, vars: 0, consts: [["drawerTemplate", ""], [1, "tds-drawer", 3, "ngClass"], ["class", "tds-drawer-mask absolute top-0 left-0  w-full bg-black bg-opacity-40  ", 3, "ngStyle", "ngClass", "click", 4, "ngIf"], [3, "ngClass"], [1, "tds-drawer-content", "bg-white", "dark:bg-d-neutral-3-200", "h-full", "w-full", "relative", "overflow-auto", "border-0", "z-10", "text-neutral-1-900", "dark:text-d-neutral-1-900"], [1, "tds-drawer-wrapper-body", "flex", "flex-col", "w-full", 3, "ngClass"], [3, "tds-drawer-header", "tds-drawer-header-no-title", "ngClass", 4, "ngIf"], [1, "tds-drawer-body", "flex-auto", "w-full", "p-4", 3, "ngStyle"], ["cdkPortalOutlet", ""], [4, "ngIf", "ngIfElse"], ["contentElseTemp", ""], [4, "ngIf"], ["class", "tds-drawer-footer w-full ", 4, "ngIf"], [1, "tds-drawer-mask", "absolute", "top-0", "left-0", "w-full", "bg-black", "bg-opacity-40", 3, "ngStyle", "ngClass", "click"], ["class", "tds-drawer-title flex-auto", 4, "ngIf"], ["aria-label", "Close", "class", "tds-drawer-close text-neutral-1-500 dark:text-d-neutral-1-500 focus:outline-none font-semibold rounded-md box-border", "style", "--scroll-bar: 0px;", 3, "click", 4, "ngIf"], [1, "tds-drawer-title", "flex-auto"], [4, "tdsStringTemplateOutlet"], [1, "break-words", "text-header-1", "font-semibold", 3, "innerHTML"], ["aria-label", "Close", 1, "tds-drawer-close", "text-neutral-1-500", "dark:text-d-neutral-1-500", "focus:outline-none", "font-semibold", "rounded-md", "box-border", 2, "--scroll-bar", "0px", 3, "click"], ["tds-button-close", ""], [4, "ngTemplateOutlet", "ngTemplateOutletContext"], [3, "ngTemplateOutlet"], [1, "tds-drawer-footer", "w-full"], [1, "w-full", "p-4", 3, "innerHTML"]], template: function TDSDrawerComponent_Template(rf, ctx) { if (rf & 1) {
        i0.ɵɵprojectionDef();
        i0.ɵɵtemplate(0, TDSDrawerComponent_ng_template_0_Template, 13, 59, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    } }, directives: [i4.NgClass, i4.NgIf, i4.NgStyle, i5.TDSStringTemplateOutletDirective, i6.TDSButtonCloseComponent, i7.CdkPortalOutlet, i4.NgTemplateOutlet], encapsulation: 2, changeDetection: 0 });
__decorate([
    InputBoolean()
], TDSDrawerComponent.prototype, "closable", void 0);
__decorate([
    InputBoolean()
], TDSDrawerComponent.prototype, "maskClosable", void 0);
__decorate([
    InputBoolean()
], TDSDrawerComponent.prototype, "mask", void 0);
__decorate([
    InputBoolean()
], TDSDrawerComponent.prototype, "closeOnNavigation", void 0);
__decorate([
    InputBoolean()
], TDSDrawerComponent.prototype, "noAnimation", void 0);
__decorate([
    InputBoolean()
], TDSDrawerComponent.prototype, "keyboard", void 0);
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(TDSDrawerComponent, [{
        type: Component,
        args: [{
                selector: 'tds-drawer',
                exportAs: 'tdsDrawer',
                template: `
    <ng-template #drawerTemplate>
      <div
        class="tds-drawer "
        [class.tds-drawer-rtl]="dir === 'rtl'"
        [class.no-mask]="!mask"
        [class.tds-drawer-top]="placement === 'top'"
        [class.tds-drawer-bottom]="placement === 'bottom'"
        [class.tds-drawer-right]="placement === 'right'"
        [class.right-0]="placement === 'right'"
        [class.top-0]="isLeftOrRight"
        [class.tds-drawer-left]="placement === 'left'"
        [class.left-0]="placement === 'left'"
        [style.transform]="offsetTransform"
        [style.transition]="placementChanging ? 'none' : null"
        [style.zIndex]="zIndex"
        [ngClass]="{'tds-drawer-open delay-[0s] duration-300 transition-transform w-full':isOpen}"
      >
        <div class="tds-drawer-mask absolute top-0 left-0  w-full bg-black bg-opacity-40  " (click)="maskClick()" *ngIf="mask" [ngStyle]="maskStyle"
        [ngClass]="{'pointer-events-auto h-full opacity-100 transition-none   animate-drawer':isOpen,'pointer-events-none h-0 opacity-0 transition-[opacity,height] duration-[0.3s,0s] ease-[linear,ease] delay-[0s,0.3s]':!isOpen}"
        ></div>
        <div
          class="tds-drawer-content-wrapper absolute h-full transition-[transform,box-shadow] duration-[0.3s,0.3s] ease-[cubic-bezier(0.23, 1, 0.32, 1), cubic-bezier(0.23, 1, 0.32, 1)] delay-[0s,0s] {{ wrapClassName }}"
          [ngClass]="{'top-0':isLeftOrRight}"
          [class.right-0]="placement === 'right'"         
          [class.left-0]="placement === 'left'"
          [class.top-0]="placement === 'top'"
          [class.bottom-0]="placement === 'bottom'"
          [style.width]="width"
          [style.height]="height"
          [style.transform]="transform"
          [style.transition]="placementChanging ? 'none' : null"
        >
          <div class="tds-drawer-content  bg-white dark:bg-d-neutral-3-200 h-full w-full relative overflow-auto border-0 z-10 text-neutral-1-900 dark:text-d-neutral-1-900 ">
            <div class="tds-drawer-wrapper-body flex flex-col  w-full" [ngClass]="{'h-full':isLeftOrRight}">
              <div *ngIf="title || closable" 
              [class.tds-drawer-header]="!!title"
               [class.tds-drawer-header-no-title]="!title" 
               [ngClass]="{'flex items-center justify-between px-4 py-3.5':!!title}"
               >
                <div *ngIf="title" class="tds-drawer-title flex-auto">
                  <ng-container *tdsStringTemplateOutlet="title">
                    <div class="break-words text-header-1 font-semibold  " [innerHTML]="title"></div>
                  </ng-container>
                </div>
                <div *ngIf="closable" (click)="closeClick()" aria-label="Close" class="tds-drawer-close text-neutral-1-500 dark:text-d-neutral-1-500 focus:outline-none font-semibold rounded-md box-border" style="--scroll-bar: 0px;">
                  <ng-container *tdsStringTemplateOutlet="closeIcon; let closeIcon">
                    <button tds-button-close></button>
                  </ng-container>
                </div>
              </div>
              <div class="tds-drawer-body flex-auto w-full p-4" [ngStyle]="bodyStyle">
                <ng-template cdkPortalOutlet></ng-template>
                <ng-container *ngIf="content; else contentElseTemp">
                  <ng-container *ngIf="isTemplateRef(content)">
                    <ng-container *ngTemplateOutlet="$any(content); context: templateContext"></ng-container>
                  </ng-container>
                </ng-container>
                <ng-template #contentElseTemp>
                  <ng-container *ngIf="contentFromContentChild && (isOpen || inAnimation)">
                    <ng-template [ngTemplateOutlet]="contentFromContentChild"></ng-template>
                  </ng-container>
                </ng-template>
                <ng-content *ngIf="!(content || contentFromContentChild)"></ng-content>
              </div>
              <div *ngIf="footer" class="tds-drawer-footer w-full ">
                <ng-container *tdsStringTemplateOutlet="footer">
                  <div class="w-full p-4" [innerHTML]="footer"></div>
                </ng-container>
              </div>
            </div>
          </div>
        </div>
      </div>
    </ng-template>
  `,
                preserveWhitespaces: false,
                changeDetection: ChangeDetectionStrategy.OnPush
            }]
    }], function () { return [{ type: i0.ChangeDetectorRef }, { type: undefined, decorators: [{
                type: Optional
            }, {
                type: Inject,
                args: [DOCUMENT]
            }] }, { type: i0.Renderer2 }, { type: i1.Overlay }, { type: i0.Injector }, { type: i0.ChangeDetectorRef }, { type: i2.FocusTrapFactory }, { type: i0.ViewContainerRef }, { type: i1.OverlayKeyboardDispatcher }, { type: i3.Directionality, decorators: [{
                type: Optional
            }] }]; }, { size: [{
            type: Input
        }], content: [{
            type: Input
        }], closeIcon: [{
            type: Input
        }], closable: [{
            type: Input
        }], maskClosable: [{
            type: Input
        }], mask: [{
            type: Input
        }], closeOnNavigation: [{
            type: Input
        }], noAnimation: [{
            type: Input
        }], keyboard: [{
            type: Input
        }], title: [{
            type: Input
        }], footer: [{
            type: Input
        }], placement: [{
            type: Input
        }], maskStyle: [{
            type: Input
        }], bodyStyle: [{
            type: Input
        }], wrapClassName: [{
            type: Input
        }], zIndex: [{
            type: Input
        }], offsetX: [{
            type: Input
        }], offsetY: [{
            type: Input
        }], width: [{
            type: Input
        }], height: [{
            type: Input
        }], visible: [{
            type: Input
        }], onViewInit: [{
            type: Output
        }], onClose: [{
            type: Output
        }], visibleChange: [{
            type: Output
        }], drawerTemplate: [{
            type: ViewChild,
            args: ['drawerTemplate', { static: true }]
        }], bodyPortalOutlet: [{
            type: ViewChild,
            args: [CdkPortalOutlet, { static: false }]
        }], contentFromContentChild: [{
            type: ContentChild,
            args: [TDSDrawerContentDirective, { static: true, read: TemplateRef }]
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHJhd2VyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL3Rkcy11aS9kcmF3ZXIvZHJhd2VyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBS0EsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQy9DLE9BQU8sRUFBVyxhQUFhLEVBQXlDLE1BQU0sc0JBQXNCLENBQUM7QUFDckcsT0FBTyxFQUFFLGVBQWUsRUFBRSxlQUFlLEVBQUUsY0FBYyxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdkYsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQzNDLE9BQU8sRUFHTCx1QkFBdUIsRUFFdkIsU0FBUyxFQUNULFlBQVksRUFDWixZQUFZLEVBQ1osTUFBTSxFQUNOLFFBQVEsRUFDUixLQUFLLEVBSUwsUUFBUSxFQUNSLE1BQU0sRUFHTixXQUFXLEVBQ1gsSUFBSSxFQUNKLFNBQVMsRUFFVixNQUFNLGVBQWUsQ0FBQztBQUV2QixPQUFPLEVBQWMsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUUzQyxPQUFPLEVBQUUsWUFBWSxFQUFFLGVBQWUsRUFBYyxVQUFVLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUc5RixPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUV2RSxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sY0FBYyxDQUFDOzs7Ozs7Ozs7Ozs7O0lBMkJwQywrQkFFQztJQUZtRiw2S0FBUyxtQkFBVyxJQUFDO0lBRXhHLGlCQUFNOzs7SUFGZ0gsMENBQXFCLHNFQUFBOzs7SUF1QmxJLDZCQUErQztJQUM3QywwQkFBaUY7SUFDbkYsMEJBQWU7OztJQUQwQyxlQUFtQjtJQUFuQiw0REFBbUI7OztJQUY5RSwrQkFBc0Q7SUFDcEQs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cEZhY3RvcnkgfSBmcm9tICdAYW5ndWxhci9jZGsvYTExeSc7XHJcbmltcG9ydCB7IERpcmVjdGlvbiwgRGlyZWN0aW9uYWxpdHkgfSBmcm9tICdAYW5ndWxhci9jZGsvYmlkaSc7XHJcbmltcG9ydCB7IEJvb2xlYW5JbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9jb2VyY2lvbic7XHJcbmltcG9ydCB7IEVTQ0FQRSB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9rZXljb2Rlcyc7XHJcbmltcG9ydCB7IE92ZXJsYXksIE92ZXJsYXlDb25maWcsIE92ZXJsYXlLZXlib2FyZERpc3BhdGNoZXIsIE92ZXJsYXlSZWYgfSBmcm9tICdAYW5ndWxhci9jZGsvb3ZlcmxheSc7XHJcbmltcG9ydCB7IENka1BvcnRhbE91dGxldCwgQ29tcG9uZW50UG9ydGFsLCBUZW1wbGF0ZVBvcnRhbCB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9wb3J0YWwnO1xyXG5pbXBvcnQgeyBET0NVTUVOVCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XHJcbmltcG9ydCB7XHJcbiAgQWZ0ZXJDb250ZW50SW5pdCxcclxuICBBZnRlclZpZXdJbml0LFxyXG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxyXG4gIENoYW5nZURldGVjdG9yUmVmLFxyXG4gIENvbXBvbmVudCxcclxuICBDb250ZW50Q2hpbGQsXHJcbiAgRXZlbnRFbWl0dGVyLFxyXG4gIEluamVjdCxcclxuICBJbmplY3RvcixcclxuICBJbnB1dCxcclxuICBPbkNoYW5nZXMsXHJcbiAgT25EZXN0cm95LFxyXG4gIE9uSW5pdCxcclxuICBPcHRpb25hbCxcclxuICBPdXRwdXQsXHJcbiAgUmVuZGVyZXIyLFxyXG4gIFNpbXBsZUNoYW5nZXMsXHJcbiAgVGVtcGxhdGVSZWYsXHJcbiAgVHlwZSxcclxuICBWaWV3Q2hpbGQsXHJcbiAgVmlld0NvbnRhaW5lclJlZlxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5cclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyB0YWtlVW50aWwgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcbmltcG9ydCB7IE5nU3R5bGVJbnRlcmZhY2UsIFREU0RyYXdlclNpemUgfSBmcm9tICd0ZHMtdWkvY29yZS9jb25maWcnO1xyXG5pbXBvcnQgeyBJbnB1dEJvb2xlYW4sIFREU0hlbHBlck9iamVjdCwgVERTU2FmZUFueSwgdG9Dc3NQaXhlbCB9IGZyb20gJ3Rkcy11aS9zaGFyZWQvdXRpbGl0eSc7XHJcblxyXG5cclxuaW1wb3J0IHsgVERTRHJhd2VyQ29udGVudERpcmVjdGl2ZSB9IGZyb20gJy4vZHJhd2VyLWNvbnRlbnQuZGlyZWN0aXZlJztcclxuaW1wb3J0IHsgVERTRHJhd2VyT3B0aW9uc09mQ29tcG9uZW50LCBURFNEcmF3ZXJQbGFjZW1lbnQgfSBmcm9tICcuL2RyYXdlci1vcHRpb25zJztcclxuaW1wb3J0IHsgVERTRHJhd2VyUmVmIH0gZnJvbSAnLi9kcmF3ZXItcmVmJztcclxuXHJcbmV4cG9ydCBjb25zdCBEUkFXRVJfQU5JTUFURV9EVVJBVElPTiA9IDMwMDtcclxuXHJcbmNvbnN0IFREU19DT05GSUdfTU9EVUxFX05BTUUgPSAnZHJhd2VyJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAndGRzLWRyYXdlcicsXHJcbiAgZXhwb3J0QXM6ICd0ZHNEcmF3ZXInLFxyXG4gIHRlbXBsYXRlOiBgXHJcbiAgICA8bmctdGVtcGxhdGUgI2RyYXdlclRlbXBsYXRlPlxyXG4gICAgICA8ZGl2XHJcbiAgICAgICAgY2xhc3M9XCJ0ZHMtZHJhd2VyIFwiXHJcbiAgICAgICAgW2NsYXNzLnRkcy1kcmF3ZXItcnRsXT1cImRpciA9PT0gJ3J0bCdcIlxyXG4gICAgICAgIFtjbGFzcy5uby1tYXNrXT1cIiFtYXNrXCJcclxuICAgICAgICBbY2xhc3MudGRzLWRyYXdlci10b3BdPVwicGxhY2VtZW50ID09PSAndG9wJ1wiXHJcbiAgICAgICAgW2NsYXNzLnRkcy1kcmF3ZXItYm90dG9tXT1cInBsYWNlbWVudCA9PT0gJ2JvdHRvbSdcIlxyXG4gICAgICAgIFtjbGFzcy50ZHMtZHJhd2VyLXJpZ2h0XT1cInBsYWNlbWVudCA9PT0gJ3JpZ2h0J1wiXHJcbiAgICAgICAgW2NsYXNzLnJpZ2h0LTBdPVwicGxhY2VtZW50ID09PSAncmlnaHQnXCJcclxuICAgICAgICBbY2xhc3MudG9wLTBdPVwiaXNMZWZ0T3JSaWdodFwiXHJcbiAgICAgICAgW2NsYXNzLnRkcy1kcmF3ZXItbGVmdF09XCJwbGFjZW1lbnQgPT09ICdsZWZ0J1wiXHJcbiAgICAgICAgW2NsYXNzLmxlZnQtMF09XCJwbGFjZW1lbnQgPT09ICdsZWZ0J1wiXHJcbiAgICAgICAgW3N0eWxlLnRyYW5zZm9ybV09XCJvZmZzZXRUcmFuc2Zvcm1cIlxyXG4gICAgICAgIFtzdHlsZS50cmFuc2l0aW9uXT1cInBsYWNlbWVudENoYW5naW5nID8gJ25vbmUnIDogbnVsbFwiXHJcbiAgICAgICAgW3N0eWxlLnpJbmRleF09XCJ6SW5kZXhcIlxyXG4gICAgICAgIFtuZ0NsYXNzXT1cInsndGRzLWRyYXdlci1vcGVuIGRlbGF5LVswc10gZHVyYXRpb24tMzAwIHRyYW5zaXRpb24tdHJhbnNmb3JtIHctZnVsbCc6aXNPcGVufVwiXHJcbiAgICAgID5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwidGRzLWRyYXdlci1tYXNrIGFic29sdXRlIHRvcC0wIGxlZnQtMCAgdy1mdWxsIGJnLWJsYWNrIGJnLW9wYWNpdHktNDAgIFwiIChjbGljayk9XCJtYXNrQ2xpY2soKVwiICpuZ0lmPVwibWFza1wiIFtuZ1N0eWxlXT1cIm1hc2tTdHlsZVwiXHJcbiAgICAgICAgW25nQ2xhc3NdPVwieydwb2ludGVyLWV2ZW50cy1hdXRvIGgtZnVsbCBvcGFjaXR5LTEwMCB0cmFuc2l0aW9uLW5vbmUgICBhbmltYXRlLWRyYXdlcic6aXNPcGVuLCdwb2ludGVyLWV2ZW50cy1ub25lIGgtMCBvcGFjaXR5LTAgdHJhbnNpdGlvbi1bb3BhY2l0eSxoZWlnaHRdIGR1cmF0aW9uLVswLjNzLDBzXSBlYXNlLVtsaW5lYXIsZWFzZV0gZGVsYXktWzBzLDAuM3NdJzohaXNPcGVufVwiXHJcbiAgICAgICAgPjwvZGl2PlxyXG4gICAgICAgIDxkaXZcclxuICAgICAgICAgIGNsYXNzPVwidGRzLWRyYXdlci1jb250ZW50LXdyYXBwZXIgYWJzb2x1dGUgaC1mdWxsIHRyYW5zaXRpb24tW3RyYW5zZm9ybSxib3gtc2hhZG93XSBkdXJhdGlvbi1bMC4zcywwLjNzXSBlYXNlLVtjdWJpYy1iZXppZXIoMC4yMywgMSwgMC4zMiwgMSksIGN1YmljLWJlemllcigwLjIzLCAxLCAwLjMyLCAxKV0gZGVsYXktWzBzLDBzXSB7eyB3cmFwQ2xhc3NOYW1lIH19XCJcclxuICAgICAgICAgIFtuZ0NsYXNzXT1cInsndG9wLTAnOmlzTGVmdE9yUmlnaHR9XCJcclxuICAgICAgICAgIFtjbGFzcy5yaWdodC0wXT1cInBsYWNlbWVudCA9PT0gJ3JpZ2h0J1wiICAgICAgICAgXHJcbiAgICAgICAgICBbY2xhc3MubGVmdC0wXT1cInBsYWNlbWVudCA9PT0gJ2xlZnQnXCJcclxuICAgICAgICAgIFtjbGFzcy50b3AtMF09XCJwbGFjZW1lbnQgPT09ICd0b3AnXCJcclxuICAgICAgICAgIFtjbGFzcy5ib3R0b20tMF09XCJwbGFjZW1lbnQgPT09ICdib3R0b20nXCJcclxuICAgICAgICAgIFtzdHlsZS53aWR0aF09XCJ3aWR0aFwiXHJcbiAgICAgICAgICBbc3R5bGUuaGVpZ2h0XT1cImhlaWdodFwiXHJcbiAgICAgICAgICBbc3R5bGUudHJhbnNmb3JtXT1cInRyYW5zZm9ybVwiXHJcbiAgICAgICAgICBbc3R5bGUudHJhbnNpdGlvbl09XCJwbGFjZW1lbnRDaGFuZ2luZyA/ICdub25lJyA6IG51bGxcIlxyXG4gICAgICAgID5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZHMtZHJhd2VyLWNvbnRlbnQgIGJnLXdoaXRlIGRhcms6YmctZC1uZXV0cmFsLTMtMjAwIGgtZnVsbCB3LWZ1bGwgcmVsYXRpdmUgb3ZlcmZsb3ctYXV0byBib3JkZXItMCB6LTEwIHRleHQtbmV1dHJhbC0xLTkwMCBkYXJrOnRleHQtZC1uZXV0cmFsLTEtOTAwIFwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGRzLWRyYXdlci13cmFwcGVyLWJvZHkgZmxleCBmbGV4LWNvbCAgdy1mdWxsXCIgW25nQ2xhc3NdPVwieydoLWZ1bGwnOmlzTGVmdE9yUmlnaHR9XCI+XHJcbiAgICAgICAgICAgICAgPGRpdiAqbmdJZj1cInRpdGxlIHx8IGNsb3NhYmxlXCIgXHJcbiAgICAgICAgICAgICAgW2NsYXNzLnRkcy1kcmF3ZXItaGVhZGVyXT1cIiEhdGl0bGVcIlxyXG4gICAgICAgICAgICAgICBbY2xhc3MudGRzLWRyYXdlci1oZWFkZXItbm8tdGl0bGVdPVwiIXRpdGxlXCIgXHJcbiAgICAgICAgICAgICAgIFtuZ0NsYXNzXT1cInsnZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHB4LTQgcHktMy41JzohIXRpdGxlfVwiXHJcbiAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIDxkaXYgKm5nSWY9XCJ0aXRsZVwiIGNsYXNzPVwidGRzLWRyYXdlci10aXRsZSBmbGV4LWF1dG9cIj5cclxuICAgICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqdGRzU3RyaW5nVGVtcGxhdGVPdXRsZXQ9XCJ0aXRsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJicmVhay13b3JkcyB0ZXh0LWhlYWRlci0xIGZvbnQtc2VtaWJvbGQgIFwiIFtpbm5lckhUTUxdPVwidGl0bGVcIj48L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgKm5nSWY9XCJjbG9zYWJsZVwiIChjbGljayk9XCJjbG9zZUNsaWNrKClcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIiBjbGFzcz1cInRkcy1kcmF3ZXItY2xvc2UgdGV4dC1uZXV0cmFsLTEtNTAwIGRhcms6dGV4dC1kLW5ldXRyYWwtMS01MDAgZm9jdXM6b3V0bGluZS1ub25lIGZvbnQtc2VtaWJvbGQgcm91bmRlZC1tZCBib3gtYm9yZGVyXCIgc3R5bGU9XCItLXNjcm9sbC1iYXI6IDBweDtcIj5cclxuICAgICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqdGRzU3RyaW5nVGVtcGxhdGVPdXRsZXQ9XCJjbG9zZUljb247IGxldCBjbG9zZUljb25cIj5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHRkcy1idXR0b24tY2xvc2U+PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRkcy1kcmF3ZXItYm9keSBmbGV4LWF1dG8gdy1mdWxsIHAtNFwiIFtuZ1N0eWxlXT1cImJvZHlTdHlsZVwiPlxyXG4gICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlIGNka1BvcnRhbE91dGxldD48L25nLXRlbXBsYXRlPlxyXG4gICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImNvbnRlbnQ7IGVsc2UgY29udGVudEVsc2VUZW1wXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJpc1RlbXBsYXRlUmVmKGNvbnRlbnQpXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cIiRhbnkoY29udGVudCk7IGNvbnRleHQ6IHRlbXBsYXRlQ29udGV4dFwiPjwvbmctY29udGFpbmVyPlxyXG4gICAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cclxuICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxyXG4gICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlICNjb250ZW50RWxzZVRlbXA+XHJcbiAgICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJjb250ZW50RnJvbUNvbnRlbnRDaGlsZCAmJiAoaXNPcGVuIHx8IGluQW5pbWF0aW9uKVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdUZW1wbGF0ZU91dGxldF09XCJjb250ZW50RnJvbUNvbnRlbnRDaGlsZFwiPjwvbmctdGVtcGxhdGU+XHJcbiAgICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxyXG4gICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cclxuICAgICAgICAgICAgICAgIDxuZy1jb250ZW50ICpuZ0lmPVwiIShjb250ZW50IHx8IGNvbnRlbnRGcm9tQ29udGVudENoaWxkKVwiPjwvbmctY29udGVudD5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8ZGl2ICpuZ0lmPVwiZm9vdGVyXCIgY2xhc3M9XCJ0ZHMtZHJhd2VyLWZvb3RlciB3LWZ1bGwgXCI+XHJcbiAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyICp0ZHNTdHJpbmdUZW1wbGF0ZU91dGxldD1cImZvb3RlclwiPlxyXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidy1mdWxsIHAtNFwiIFtpbm5lckhUTUxdPVwiZm9vdGVyXCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L25nLXRlbXBsYXRlPlxyXG4gIGAsXHJcbiAgcHJlc2VydmVXaGl0ZXNwYWNlczogZmFsc2UsXHJcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcclxufSlcclxuZXhwb3J0IGNsYXNzIFREU0RyYXdlckNvbXBvbmVudDxUID0gVERTU2FmZUFueSwgUiA9IFREU1NhZmVBbnksIEQgPSBURFNTYWZlQW55PlxyXG4gIGV4dGVuZHMgVERTRHJhd2VyUmVmPFQsIFI+XHJcbiAgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSwgQWZ0ZXJWaWV3SW5pdCwgT25DaGFuZ2VzLCBBZnRlckNvbnRlbnRJbml0LCBURFNEcmF3ZXJPcHRpb25zT2ZDb21wb25lbnQge1xyXG5cclxuICBzdGF0aWMgbmdBY2NlcHRJbnB1dFR5cGVfY2xvc2FibGU6IEJvb2xlYW5JbnB1dDtcclxuICBzdGF0aWMgbmdBY2NlcHRJbnB1dFR5cGVfbWFza0Nsb3NhYmxlOiBCb29sZWFuSW5wdXQ7XHJcbiAgc3RhdGljIG5nQWNjZXB0SW5wdXRUeXBlX21hc2s6IEJvb2xlYW5JbnB1dDtcclxuICBzdGF0aWMgbmdBY2NlcHRJbnB1dFR5cGVfbm9BbmltYXRpb246IEJvb2xlYW5JbnB1dDtcclxuICBzdGF0aWMgbmdBY2NlcHRJbnB1dFR5cGVfa2V5Ym9hcmQ6IEJvb2xlYW5JbnB1dDtcclxuICBzdGF0aWMgbmdBY2NlcHRJbnB1dFR5cGVfY2xvc2VPbk5hdmlnYXRpb246IEJvb2xlYW5JbnB1dDtcclxuICBASW5wdXQoKSBzaXplOiBURFNEcmF3ZXJTaXplID0gbnVsbDtcclxuICBASW5wdXQoKSBjb250ZW50ITogVGVtcGxhdGVSZWY8eyAkaW1wbGljaXQ6IEQ7IGRyYXdlclJlZjogVERTRHJhd2VyUmVmPFI+IH0+IHwgVHlwZTxUPjtcclxuICBASW5wdXQoKSBjbG9zZUljb246IHN0cmluZyB8IFRlbXBsYXRlUmVmPHZvaWQ+ID0gJ2Nsb3NlJztcclxuICBASW5wdXQoKSBASW5wdXRCb29sZWFuKCkgY2xvc2FibGU6IGJvb2xlYW4gPSB0cnVlO1xyXG4gIEBJbnB1dCgpIEBJbnB1dEJvb2xlYW4oKSBtYXNrQ2xvc2FibGU6IGJvb2xlYW4gPSB0cnVlO1xyXG4gIEBJbnB1dCgpIEBJbnB1dEJvb2xlYW4oKSBtYXNrOiBib29sZWFuID0gdHJ1ZTtcclxuICBASW5wdXQoKSBASW5wdXRCb29sZWFuKCkgY2xvc2VPbk5hdmlnYXRpb246IGJvb2xlYW4gPSB0cnVlO1xyXG4gIEBJbnB1dCgpIEBJbnB1dEJvb2xlYW4oKSBub0FuaW1hdGlvbiA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpIEBJbnB1dEJvb2xlYW4oKSBrZXlib2FyZDogYm9vbGVhbiA9IHRydWU7XHJcbiAgQElucHV0KCkgdGl0bGU/OiBzdHJpbmcgfCBUZW1wbGF0ZVJlZjx7fT47XHJcbiAgQElucHV0KCkgZm9vdGVyPzogc3RyaW5nIHwgVGVtcGxhdGVSZWY8e30+O1xyXG4gIEBJbnB1dCgpIHBsYWNlbWVudDogVERTRHJhd2VyUGxhY2VtZW50ID0gJ3JpZ2h0JztcclxuICBASW5wdXQoKSBtYXNrU3R5bGU6IE5nU3R5bGVJbnRlcmZhY2UgPSB7fTtcclxuICBASW5wdXQoKSBib2R5U3R5bGU6IE5nU3R5bGVJbnRlcmZhY2UgPSB7fTtcclxuICBASW5wdXQoKSB3cmFwQ2xhc3NOYW1lPzogc3RyaW5nO1xyXG5cclxuICBASW5wdXQoKSB6SW5kZXggPSAxMDAwO1xyXG4gIEBJbnB1dCgpIG9mZnNldFggPSAwO1xyXG4gIEBJbnB1dCgpIG9mZnNldFkgPSAwO1xyXG4gIHByaXZhdGUgY29tcG9uZW50SW5zdGFuY2U6IFQgfCBudWxsID0gbnVsbDtcclxuICBwcml2YXRlIF93aWR0aDogbnVtYmVyIHwgc3RyaW5nIHwgbnVsbCA9IDQwMDtcclxuICBwcml2YXRlIF9oZWlnaHQ6IG51bWJlciB8IHN0cmluZyB8IG51bGwgPSA0MDA7XHJcbiAgQElucHV0KCkgc2V0IHdpZHRoKHZhbDogbnVtYmVyIHwgc3RyaW5nIHwgbnVsbCkge1xyXG4gICAgdGhpcy5fd2lkdGggPSB2YWw7XHJcbiAgfVxyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IGhlaWdodCh2YWw6IG51bWJlciB8IHN0cmluZyB8IG51bGwpIHtcclxuICAgIHRoaXMuX2hlaWdodCA9IHZhbDtcclxuICB9XHJcbiAgZ2V0IHdpZHRoKCk6IG51bWJlciB8IHN0cmluZyB8IG51bGwge1xyXG4gICAgcmV0dXJuIHRoaXMuaXNMZWZ0T3JSaWdodCA/IHRvQ3NzUGl4ZWwodGhpcy5nZXRXaWR0aEJ5U2l6ZSgpKSA6IG51bGw7XHJcbiAgfVxyXG5cclxuICBnZXQgaGVpZ2h0KCk6IG51bWJlciB8IHN0cmluZyB8IG51bGwge1xyXG4gICAgcmV0dXJuICF0aGlzLmlzTGVmdE9yUmlnaHQgPyB0b0Nzc1BpeGVsKHRoaXMuZ2V0SGVpZ2h0QnlTaXplKCkpIDogbnVsbDtcclxuICB9XHJcbiAgZ2V0V2lkdGhCeVNpemUoKTogbnVtYmVyIHwgc3RyaW5nIHwgbnVsbCB7XHJcbiAgICBpZiAoVERTSGVscGVyT2JqZWN0Lmhhc1ZhbHVlKHRoaXMuc2l6ZSkpIHtcclxuICAgICAgbGV0IHJlc3VsdCA9IDQwMFxyXG4gICAgICBzd2l0Y2ggKHRoaXMuc2l6ZSkge1xyXG4gICAgICAgIGNhc2UgXCJzbVwiOlxyXG4gICAgICAgICAgcmVzdWx0ID0gMzIwO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcImxnXCI6XHJcbiAgICAgICAgICByZXN1bHQgPSA2NDA7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwieGxcIjpcclxuICAgICAgICAgIHJlc3VsdCA9IDc4MDtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIC8vbWRcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgcmVzdWx0ID0gNDAwO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl93aWR0aDtcclxuICAgIH1cclxuICB9XHJcbiAgZ2V0SGVpZ2h0QnlTaXplKCkge1xyXG4gICAgaWYgKFREU0hlbHBlck9iamVjdC5oYXNWYWx1ZSh0aGlzLnNpemUpKSB7XHJcbiAgICAgIGxldCByZXN1bHQgPSA0MDBcclxuICAgICAgc3dpdGNoICh0aGlzLnNpemUpIHtcclxuICAgICAgICBjYXNlIFwic21cIjpcclxuICAgICAgICAgIHJlc3VsdCA9IDMyMDtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJsZ1wiOlxyXG4gICAgICAgICAgcmVzdWx0ID0gNjQwO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgLy9tZFxyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICByZXN1bHQgPSA0MDA7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2hlaWdodDtcclxuICAgIH1cclxuICB9XHJcbiAgQElucHV0KClcclxuICBzZXQgdmlzaWJsZSh2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgdGhpcy5pc09wZW4gPSB2YWx1ZTtcclxuICB9XHJcblxyXG4gIGdldCB2aXNpYmxlKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuaXNPcGVuO1xyXG4gIH1cclxuXHJcbiAgQE91dHB1dCgpIHJlYWRvbmx5IG9uVmlld0luaXQgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XHJcbiAgQE91dHB1dCgpIHJlYWRvbmx5IG9uQ2xvc2UgPSBuZXcgRXZlbnRFbWl0dGVyPE1vdXNlRXZlbnQ+KCk7XHJcbiAgQE91dHB1dCgpIHJlYWRvbmx5IHZpc2libGVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPGJvb2xlYW4+KCk7XHJcblxyXG4gIEBWaWV3Q2hpbGQoJ2RyYXdlclRlbXBsYXRlJywgeyBzdGF0aWM6IHRydWUgfSkgZHJhd2VyVGVtcGxhdGUhOiBUZW1wbGF0ZVJlZjx2b2lkPjtcclxuICBAVmlld0NoaWxkKENka1BvcnRhbE91dGxldCwgeyBzdGF0aWM6IGZhbHNlIH0pIGJvZHlQb3J0YWxPdXRsZXQ/OiBDZGtQb3J0YWxPdXRsZXQ7XHJcbiAgQENvbnRlbnRDaGlsZChURFNEcmF3ZXJDb250ZW50RGlyZWN0aXZlLCB7IHN0YXRpYzogdHJ1ZSwgcmVhZDogVGVtcGxhdGVSZWYgfSkgY29udGVudEZyb21Db250ZW50Q2hpbGQ/OiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG5cclxuICBwcml2YXRlIGRlc3Ryb3kkID0gbmV3IFN1YmplY3Q8dm9pZD4oKTtcclxuICBwcmV2aW91c2x5Rm9jdXNlZEVsZW1lbnQ/OiBIVE1MRWxlbWVudDtcclxuICBwbGFjZW1lbnRDaGFuZ2luZyA9IGZhbHNlO1xyXG4gIHBsYWNlbWVudENoYW5nZVRpbWVvdXRJZDogYW55ID0gLTE7XHJcbiAgY29udGVudFBhcmFtcz86IEQ7IC8vIG9ubHkgc2VydmljZVxyXG4gIG92ZXJsYXlSZWY/OiBPdmVybGF5UmVmIHwgbnVsbDtcclxuICBwb3J0YWw/OiBUZW1wbGF0ZVBvcnRhbDtcclxuICBmb2N1c1RyYXA/OiBGb2N1c1RyYXA7XHJcbiAgaXNPcGVuID0gZmFsc2U7XHJcbiAgaW5BbmltYXRpb24gPSBmYWxzZTtcclxuICB0ZW1wbGF0ZUNvbnRleHQ6IHsgJGltcGxpY2l0OiBEIHwgdW5kZWZpbmVkOyBkcmF3ZXJSZWY6IFREU0RyYXdlclJlZjxULCBSPiB9ID0ge1xyXG4gICAgJGltcGxpY2l0OiB1bmRlZmluZWQsXHJcbiAgICBkcmF3ZXJSZWY6IHRoaXMgYXMgVERTRHJhd2VyUmVmPFQsIFI+XHJcbiAgfTtcclxuXHJcbiAgZ2V0IG9mZnNldFRyYW5zZm9ybSgpOiBzdHJpbmcgfCBudWxsIHtcclxuICAgIGlmICghdGhpcy5pc09wZW4gfHwgdGhpcy5vZmZzZXRYICsgdGhpcy5vZmZzZXRZID09PSAwKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgc3dpdGNoICh0aGlzLnBsYWNlbWVudCkge1xyXG4gICAgICBjYXNlICdsZWZ0JzpcclxuICAgICAgICByZXR1cm4gYHRyYW5zbGF0ZVgoJHt0aGlzLm9mZnNldFh9cHgpYDtcclxuICAgICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICAgIHJldHVybiBgdHJhbnNsYXRlWCgtJHt0aGlzLm9mZnNldFh9cHgpYDtcclxuICAgICAgY2FzZSAndG9wJzpcclxuICAgICAgICByZXR1cm4gYHRyYW5zbGF0ZVkoJHt0aGlzLm9mZnNldFl9cHgpYDtcclxuICAgICAgY2FzZSAnYm90dG9tJzpcclxuICAgICAgICByZXR1cm4gYHRyYW5zbGF0ZVkoLSR7dGhpcy5vZmZzZXRZfXB4KWA7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXQgdHJhbnNmb3JtKCk6IHN0cmluZyB8IG51bGwge1xyXG4gICAgaWYgKHRoaXMuaXNPcGVuKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHN3aXRjaCAodGhpcy5wbGFjZW1lbnQpIHtcclxuICAgICAgY2FzZSAnbGVmdCc6XHJcbiAgICAgICAgcmV0dXJuIGB0cmFuc2xhdGVYKC0xMDAlKWA7XHJcbiAgICAgIGNhc2UgJ3JpZ2h0JzpcclxuICAgICAgICByZXR1cm4gYHRyYW5zbGF0ZVgoMTAwJSlgO1xyXG4gICAgICBjYXNlICd0b3AnOlxyXG4gICAgICAgIHJldHVybiBgdHJhbnNsYXRlWSgtMTAwJSlgO1xyXG4gICAgICBjYXNlICdib3R0b20nOlxyXG4gICAgICAgIHJldHVybiBgdHJhbnNsYXRlWSgxMDAlKWA7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcblxyXG4gIGdldCBpc0xlZnRPclJpZ2h0KCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMucGxhY2VtZW50ID09PSAnbGVmdCcgfHwgdGhpcy5wbGFjZW1lbnQgPT09ICdyaWdodCc7XHJcbiAgfVxyXG5cclxuICBvbkFmdGVyT3BlbiA9IG5ldyBTdWJqZWN0PHZvaWQ+KCk7XHJcbiAgb25BZnRlckNsb3NlID0gbmV3IFN1YmplY3Q8Uj4oKTtcclxuXHJcbiAgZ2V0IGFmdGVyT3BlbigpOiBPYnNlcnZhYmxlPHZvaWQ+IHtcclxuICAgIHJldHVybiB0aGlzLm9uQWZ0ZXJPcGVuLmFzT2JzZXJ2YWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGFmdGVyQ2xvc2UoKTogT2JzZXJ2YWJsZTxSPiB7XHJcbiAgICByZXR1cm4gdGhpcy5vbkFmdGVyQ2xvc2UuYXNPYnNlcnZhYmxlKCk7XHJcbiAgfVxyXG5cclxuICBpc1RlbXBsYXRlUmVmKHZhbHVlOiB7fSk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgVGVtcGxhdGVSZWY7XHJcbiAgfVxyXG5cclxuICAvLyBmcm9tIHNlcnZpY2UgY29uZmlnXHJcbiAgZGlyZWN0aW9uPzogRGlyZWN0aW9uID0gdW5kZWZpbmVkO1xyXG5cclxuICBkaXI6IERpcmVjdGlvbiA9ICdsdHInO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1hbnlcclxuICAgIEBPcHRpb25hbCgpIEBJbmplY3QoRE9DVU1FTlQpIHByaXZhdGUgZG9jdW1lbnQ6IGFueSxcclxuXHJcbiAgICBwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjIsXHJcbiAgICBwcml2YXRlIG92ZXJsYXk6IE92ZXJsYXksXHJcbiAgICBwcml2YXRlIGluamVjdG9yOiBJbmplY3RvcixcclxuICAgIHByaXZhdGUgY2hhbmdlRGV0ZWN0b3JSZWY6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgcHJpdmF0ZSBmb2N1c1RyYXBGYWN0b3J5OiBGb2N1c1RyYXBGYWN0b3J5LFxyXG4gICAgcHJpdmF0ZSB2aWV3Q29udGFpbmVyUmVmOiBWaWV3Q29udGFpbmVyUmVmLFxyXG4gICAgcHJpdmF0ZSBvdmVybGF5S2V5Ym9hcmREaXNwYXRjaGVyOiBPdmVybGF5S2V5Ym9hcmREaXNwYXRjaGVyLFxyXG4gICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSBkaXJlY3Rpb25hbGl0eTogRGlyZWN0aW9uYWxpdHlcclxuICApIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpOiB2b2lkIHtcclxuICAgIHRoaXMuZGlyZWN0aW9uYWxpdHkuY2hhbmdlPy5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSkuc3Vic2NyaWJlKChkaXJlY3Rpb246IERpcmVjdGlvbikgPT4ge1xyXG4gICAgICB0aGlzLmRpciA9IGRpcmVjdGlvbjtcclxuICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLmRpciA9IHRoaXMuZGlyZWN0aW9uIHx8IHRoaXMuZGlyZWN0aW9uYWxpdHkudmFsdWU7XHJcblxyXG4gICAgdGhpcy5hdHRhY2hPdmVybGF5KCk7XHJcbiAgICB0aGlzLnVwZGF0ZU92ZXJsYXlTdHlsZSgpO1xyXG4gICAgdGhpcy51cGRhdGVCb2R5T3ZlcmZsb3coKTtcclxuICAgIHRoaXMudGVtcGxhdGVDb250ZXh0ID0geyAkaW1wbGljaXQ6IHRoaXMuY29udGVudFBhcmFtcywgZHJhd2VyUmVmOiB0aGlzIGFzIFREU0RyYXdlclJlZjxULCBSPiB9O1xyXG4gICAgdGhpcy5jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgfVxyXG5cclxuICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLmF0dGFjaEJvZHlDb250ZW50KCk7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdGhpcy5vblZpZXdJbml0LmVtaXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgbmdBZnRlckNvbnRlbnRJbml0KCk6IHZvaWQge1xyXG4gICAgaWYgKCEodGhpcy5jb250ZW50RnJvbUNvbnRlbnRDaGlsZCB8fCB0aGlzLmNvbnRlbnQpKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybihcclxuICAgICAgICAnVXNhZ2UgYDxuZy1jb250ZW50PjwvbmctY29udGVudD5gIGlzIGRlcHJlY2F0ZWQsIHdoaWNoIHdpbGwgYmUgcmVtb3ZlZCBpbiAxMi4wLjAuIFBsZWFzZSBpbnN0ZWFkIHVzZSBgPG5nLXRlbXBsYXRlIHRkc0RyYXdlckNvbnRlbnQ+PC9uZy10ZW1wbGF0ZT5gIHRvIGRlY2xhcmUgdGhlIGNvbnRlbnQgb2YgdGhlIGRyYXdlci4nXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XHJcbiAgICBjb25zdCB7IHBsYWNlbWVudCwgdmlzaWJsZSB9ID0gY2hhbmdlcztcclxuICAgIGlmICh2aXNpYmxlKSB7XHJcbiAgICAgIGNvbnN0IHZhbHVlID0gY2hhbmdlcy52aXNpYmxlLmN1cnJlbnRWYWx1ZTtcclxuICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5vcGVuKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAocGxhY2VtZW50ICYmICFwbGFjZW1lbnQuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgIHRoaXMudHJpZ2dlclBsYWNlbWVudENoYW5nZUN5Y2xlT25jZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICB0aGlzLmRlc3Ryb3kkLm5leHQoKTtcclxuICAgIHRoaXMuZGVzdHJveSQuY29tcGxldGUoKTtcclxuICAgIGNsZWFyVGltZW91dCh0aGlzLnBsYWNlbWVudENoYW5nZVRpbWVvdXRJZCk7XHJcbiAgICB0aGlzLmRpc3Bvc2VPdmVybGF5KCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldEFuaW1hdGlvbkR1cmF0aW9uKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5ub0FuaW1hdGlvbiA/IDAgOiBEUkFXRVJfQU5JTUFURV9EVVJBVElPTjtcclxuICB9XHJcblxyXG4gIC8vIERpc2FibGUgdGhlIHRyYW5zaXRpb24gYW5pbWF0aW9uIHRlbXBvcmFyaWx5IHdoZW4gdGhlIHBsYWNlbWVudCBjaGFuZ2luZ1xyXG4gIHByaXZhdGUgdHJpZ2dlclBsYWNlbWVudENoYW5nZUN5Y2xlT25jZSgpOiB2b2lkIHtcclxuICAgIGlmICghdGhpcy5ub0FuaW1hdGlvbikge1xyXG4gICAgICB0aGlzLnBsYWNlbWVudENoYW5naW5nID0gdHJ1ZTtcclxuICAgICAgdGhpcy5jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucGxhY2VtZW50Q2hhbmdlVGltZW91dElkKTtcclxuICAgICAgdGhpcy5wbGFjZW1lbnRDaGFuZ2VUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICB0aGlzLnBsYWNlbWVudENoYW5naW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgfSwgdGhpcy5nZXRBbmltYXRpb25EdXJhdGlvbigpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNsb3NlKHJlc3VsdD86IFIpOiB2b2lkIHtcclxuICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XHJcbiAgICB0aGlzLmluQW5pbWF0aW9uID0gdHJ1ZTtcclxuICAgIHRoaXMudmlzaWJsZUNoYW5nZS5lbWl0KGZhbHNlKTtcclxuICAgIHRoaXMudXBkYXRlT3ZlcmxheVN0eWxlKCk7XHJcbiAgICB0aGlzLm92ZXJsYXlLZXlib2FyZERpc3BhdGNoZXIucmVtb3ZlKHRoaXMub3ZlcmxheVJlZiEpO1xyXG4gICAgdGhpcy5jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdGhpcy51cGRhdGVCb2R5T3ZlcmZsb3coKTtcclxuICAgICAgdGhpcy5yZXN0b3JlRm9jdXMoKTtcclxuICAgICAgdGhpcy5pbkFuaW1hdGlvbiA9IGZhbHNlO1xyXG4gICAgICB0aGlzLm9uQWZ0ZXJDbG9zZS5uZXh0KHJlc3VsdCk7XHJcbiAgICAgIHRoaXMub25BZnRlckNsb3NlLmNvbXBsZXRlKCk7XHJcbiAgICAgIHRoaXMuY29tcG9uZW50SW5zdGFuY2UgPSBudWxsO1xyXG4gICAgfSwgdGhpcy5nZXRBbmltYXRpb25EdXJhdGlvbigpKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKTogdm9pZCB7XHJcbiAgICB0aGlzLmF0dGFjaE92ZXJsYXkoKTtcclxuICAgIHRoaXMuaXNPcGVuID0gdHJ1ZTtcclxuICAgIHRoaXMuaW5BbmltYXRpb24gPSB0cnVlO1xyXG4gICAgdGhpcy52aXNpYmxlQ2hhbmdlLmVtaXQodHJ1ZSk7XHJcbiAgICB0aGlzLm92ZXJsYXlLZXlib2FyZERpc3BhdGNoZXIuYWRkKHRoaXMub3ZlcmxheVJlZiEpO1xyXG4gICAgdGhpcy51cGRhdGVPdmVybGF5U3R5bGUoKTtcclxuICAgIHRoaXMudXBkYXRlQm9keU92ZXJmbG93KCk7XHJcbiAgICB0aGlzLnNhdmVQcmV2aW91c2x5Rm9jdXNlZEVsZW1lbnQoKTtcclxuICAgIHRoaXMudHJhcEZvY3VzKCk7XHJcbiAgICB0aGlzLmNoYW5nZURldGVjdG9yUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB0aGlzLmluQW5pbWF0aW9uID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICB0aGlzLm9uQWZ0ZXJPcGVuLm5leHQoKTtcclxuICAgIH0sIHRoaXMuZ2V0QW5pbWF0aW9uRHVyYXRpb24oKSk7XHJcbiAgfVxyXG5cclxuICBnZXRDb250ZW50Q29tcG9uZW50KCk6IFQgfCBudWxsIHtcclxuICAgIHJldHVybiB0aGlzLmNvbXBvbmVudEluc3RhbmNlO1xyXG4gIH1cclxuXHJcbiAgY2xvc2VDbGljaygpOiB2b2lkIHtcclxuICAgIHRoaXMub25DbG9zZS5lbWl0KCk7XHJcbiAgfVxyXG5cclxuICBtYXNrQ2xpY2soKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5tYXNrQ2xvc2FibGUgJiYgdGhpcy5tYXNrKSB7XHJcbiAgICAgIHRoaXMub25DbG9zZS5lbWl0KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGF0dGFjaEJvZHlDb250ZW50KCk6IHZvaWQge1xyXG4gICAgdGhpcy5ib2R5UG9ydGFsT3V0bGV0IS5kaXNwb3NlKCk7XHJcblxyXG4gICAgaWYgKHRoaXMuY29udGVudCBpbnN0YW5jZW9mIFR5cGUpIHtcclxuICAgICAgY29uc3QgY2hpbGRJbmplY3RvciA9IEluamVjdG9yLmNyZWF0ZSh7XHJcbiAgICAgICAgcGFyZW50OiB0aGlzLmluamVjdG9yLFxyXG4gICAgICAgIHByb3ZpZGVyczogW3sgcHJvdmlkZTogVERTRHJhd2VyUmVmLCB1c2VWYWx1ZTogdGhpcyB9XVxyXG4gICAgICB9KTtcclxuICAgICAgY29uc3QgY29tcG9uZW50UG9ydGFsID0gbmV3IENvbXBvbmVudFBvcnRhbDxUPih0aGlzLmNvbnRlbnQsIG51bGwsIGNoaWxkSW5qZWN0b3IpO1xyXG4gICAgICBjb25zdCBjb21wb25lbnRSZWYgPSB0aGlzLmJvZHlQb3J0YWxPdXRsZXQhLmF0dGFjaENvbXBvbmVudFBvcnRhbChjb21wb25lbnRQb3J0YWwpO1xyXG4gICAgICB0aGlzLmNvbXBvbmVudEluc3RhbmNlID0gY29tcG9uZW50UmVmLmluc3RhbmNlO1xyXG4gICAgICBPYmplY3QuYXNzaWduKGNvbXBvbmVudFJlZi5pbnN0YW5jZSEsIHRoaXMuY29udGVudFBhcmFtcyk7XHJcbiAgICAgIGNvbXBvbmVudFJlZi5jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGF0dGFjaE92ZXJsYXkoKTogdm9pZCB7XHJcbiAgICBpZiAoIXRoaXMub3ZlcmxheVJlZikge1xyXG4gICAgICB0aGlzLnBvcnRhbCA9IG5ldyBUZW1wbGF0ZVBvcnRhbCh0aGlzLmRyYXdlclRlbXBsYXRlLCB0aGlzLnZpZXdDb250YWluZXJSZWYpO1xyXG4gICAgICB0aGlzLm92ZXJsYXlSZWYgPSB0aGlzLm92ZXJsYXkuY3JlYXRlKHRoaXMuZ2V0T3ZlcmxheUNvbmZpZygpKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5vdmVybGF5UmVmICYmICF0aGlzLm92ZXJsYXlSZWYuaGFzQXR0YWNoZWQoKSkge1xyXG4gICAgICB0aGlzLm92ZXJsYXlSZWYuYXR0YWNoKHRoaXMucG9ydGFsKTtcclxuICAgICAgdGhpcy5vdmVybGF5UmVmIS5rZXlkb3duRXZlbnRzKClcclxuICAgICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXHJcbiAgICAgICAgLnN1YnNjcmliZSgoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBFU0NBUEUgJiYgdGhpcy5pc09wZW4gJiYgdGhpcy5rZXlib2FyZCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uQ2xvc2UuZW1pdCgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB0aGlzLm92ZXJsYXlSZWZcclxuICAgICAgICAuZGV0YWNobWVudHMoKVxyXG4gICAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcclxuICAgICAgICAuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICAgIHRoaXMuZGlzcG9zZU92ZXJsYXkoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZGlzcG9zZU92ZXJsYXkoKTogdm9pZCB7XHJcbiAgICB0aGlzLm92ZXJsYXlSZWY/LmRpc3Bvc2UoKTtcclxuICAgIHRoaXMub3ZlcmxheVJlZiA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldE92ZXJsYXlDb25maWcoKTogT3ZlcmxheUNvbmZpZyB7XHJcbiAgICByZXR1cm4gbmV3IE92ZXJsYXlDb25maWcoe1xyXG4gICAgICBkaXNwb3NlT25OYXZpZ2F0aW9uOiB0aGlzLmNsb3NlT25OYXZpZ2F0aW9uLFxyXG4gICAgICBwb3NpdGlvblN0cmF0ZWd5OiB0aGlzLm92ZXJsYXkucG9zaXRpb24oKS5nbG9iYWwoKSxcclxuICAgICAgc2Nyb2xsU3RyYXRlZ3k6IHRoaXMub3ZlcmxheS5zY3JvbGxTdHJhdGVnaWVzLmJsb2NrKClcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB1cGRhdGVPdmVybGF5U3R5bGUoKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5vdmVybGF5UmVmICYmIHRoaXMub3ZlcmxheVJlZi5vdmVybGF5RWxlbWVudCkge1xyXG4gICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMub3ZlcmxheVJlZi5vdmVybGF5RWxlbWVudCwgJ3BvaW50ZXItZXZlbnRzJywgdGhpcy5pc09wZW4gPyAnYXV0bycgOiAnbm9uZScpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB1cGRhdGVCb2R5T3ZlcmZsb3coKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5vdmVybGF5UmVmKSB7XHJcbiAgICAgIGlmICh0aGlzLmlzT3Blbikge1xyXG4gICAgICAgIHRoaXMub3ZlcmxheVJlZi5nZXRDb25maWcoKS5zY3JvbGxTdHJhdGVneSEuZW5hYmxlKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5vdmVybGF5UmVmLmdldENvbmZpZygpLnNjcm9sbFN0cmF0ZWd5IS5kaXNhYmxlKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNhdmVQcmV2aW91c2x5Rm9jdXNlZEVsZW1lbnQoKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5kb2N1bWVudCAmJiAhdGhpcy5wcmV2aW91c2x5Rm9jdXNlZEVsZW1lbnQpIHtcclxuICAgICAgdGhpcy5wcmV2aW91c2x5Rm9jdXNlZEVsZW1lbnQgPSB0aGlzLmRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgIC8vIFdlIG5lZWQgdGhlIGV4dHJhIGNoZWNrLCBiZWNhdXNlIElFJ3Mgc3ZnIGVsZW1lbnQgaGFzIG5vIGJsdXIgbWV0aG9kLlxyXG4gICAgICBpZiAodGhpcy5wcmV2aW91c2x5Rm9jdXNlZEVsZW1lbnQgJiYgdHlwZW9mIHRoaXMucHJldmlvdXNseUZvY3VzZWRFbGVtZW50LmJsdXIgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB0aGlzLnByZXZpb3VzbHlGb2N1c2VkRWxlbWVudC5ibHVyKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgdHJhcEZvY3VzKCk6IHZvaWQge1xyXG4gICAgaWYgKCF0aGlzLmZvY3VzVHJhcCAmJiB0aGlzLm92ZXJsYXlSZWYgJiYgdGhpcy5vdmVybGF5UmVmLm92ZXJsYXlFbGVtZW50KSB7XHJcbiAgICAgIHRoaXMuZm9jdXNUcmFwID0gdGhpcy5mb2N1c1RyYXBGYWN0b3J5LmNyZWF0ZSh0aGlzLm92ZXJsYXlSZWYhLm92ZXJsYXlFbGVtZW50KTtcclxuICAgICAgdGhpcy5mb2N1c1RyYXAuZm9jdXNJbml0aWFsRWxlbWVudCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZXN0b3JlRm9jdXMoKTogdm9pZCB7XHJcbiAgICAvLyBXZSBuZWVkIHRoZSBleHRyYSBjaGVjaywgYmVjYXVzZSBJRSBjYW4gc2V0IHRoZSBgYWN0aXZlRWxlbWVudGAgdG8gbnVsbCBpbiBzb21lIGNhc2VzLlxyXG4gICAgaWYgKHRoaXMucHJldmlvdXNseUZvY3VzZWRFbGVtZW50ICYmIHR5cGVvZiB0aGlzLnByZXZpb3VzbHlGb2N1c2VkRWxlbWVudC5mb2N1cyA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICB0aGlzLnByZXZpb3VzbHlGb2N1c2VkRWxlbWVudC5mb2N1cygpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZm9jdXNUcmFwKSB7XHJcbiAgICAgIHRoaXMuZm9jdXNUcmFwLmRlc3Ryb3koKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl19