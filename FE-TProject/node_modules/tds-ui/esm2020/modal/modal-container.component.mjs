import { CdkPortalOutlet } from '@angular/cdk/portal';
import { DOCUMENT } from '@angular/common';
import { ChangeDetectionStrategy, Component, Inject, Optional, ViewChild } from '@angular/core';
import { ANIMATION_MODULE_TYPE } from '@angular/platform-browser/animations';
import { TDSHelperObject } from 'tds-ui/shared/utility';
import { TDSModalAnimations } from './modal-animations';
import { BaseModalContainerComponent } from './modal-container';
import * as i0 from "@angular/core";
import * as i1 from "@angular/cdk/a11y";
import * as i2 from "@angular/cdk/overlay";
import * as i3 from "tds-ui/core/config";
import * as i4 from "./modal-types";
const _c0 = ["modalElement"];
function TDSModalContainerComponent_div_4_div_1_Template(rf, ctx) { if (rf & 1) {
    const _r7 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 11);
    i0.ɵɵlistener("click", function TDSModalContainerComponent_div_4_div_1_Template_div_click_0_listener() { i0.ɵɵrestoreView(_r7); const ctx_r6 = i0.ɵɵnextContext(2); return ctx_r6.onCloseClick(); });
    i0.ɵɵelementEnd();
} }
function TDSModalContainerComponent_div_4_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 8);
    i0.ɵɵtemplate(1, TDSModalContainerComponent_div_4_div_1_Template, 1, 0, "div", 9);
    i0.ɵɵelement(2, "div", 10);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngIf", ctx_r1.config.closable);
} }
function TDSModalContainerComponent_ng_template_6_Template(rf, ctx) { }
function TDSModalContainerComponent_div_7_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelement(0, "div", 12);
} if (rf & 2) {
    const ctx_r3 = i0.ɵɵnextContext();
    i0.ɵɵproperty("innerHTML", ctx_r3.config.content, i0.ɵɵsanitizeHtml);
} }
function TDSModalContainerComponent_div_8_Template(rf, ctx) { if (rf & 1) {
    const _r9 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 13);
    i0.ɵɵlistener("cancelTriggered", function TDSModalContainerComponent_div_8_Template_div_cancelTriggered_0_listener() { i0.ɵɵrestoreView(_r9); const ctx_r8 = i0.ɵɵnextContext(); return ctx_r8.onCloseClick(); })("okTriggered", function TDSModalContainerComponent_div_8_Template_div_okTriggered_0_listener() { i0.ɵɵrestoreView(_r9); const ctx_r10 = i0.ɵɵnextContext(); return ctx_r10.onOkClick(); });
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r4 = i0.ɵɵnextContext();
    i0.ɵɵproperty("modalRef", ctx_r4.modalRef);
} }
const _c1 = function (a0) { return { "top-24": a0 }; };
const _c2 = function (a0) { return { "max-h-[calc(100vh-148px)] overflow-auto tds-custom-scroll": a0 }; };
export class TDSModalContainerComponent extends BaseModalContainerComponent {
    constructor(elementRef, focusTrapFactory, cdr, render, overlayRef, tdsConfigService, config, document, animationType) {
        super(elementRef, focusTrapFactory, cdr, render, overlayRef, tdsConfigService, config, document, animationType);
        this.config = config;
    }
    get width() {
        let result = 520;
        if (TDSHelperObject.hasValue(this.config)) {
            if (TDSHelperObject.hasValue(this.config.size)) {
                switch (this.config.size) {
                    case "sm":
                        result = 300;
                        break;
                    case "md":
                        result = 500;
                        break;
                    case "lg":
                        result = 800;
                        break;
                    case "xl":
                        result = 1140;
                        break;
                    default:
                        result = 500;
                        break;
                }
                return result;
            }
            else {
                return this.config?.width;
            }
        }
        return result;
    }
}
TDSModalContainerComponent.ɵfac = function TDSModalContainerComponent_Factory(t) { return new (t || TDSModalContainerComponent)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.FocusTrapFactory), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i2.OverlayRef), i0.ɵɵdirectiveInject(i3.TDSConfigService), i0.ɵɵdirectiveInject(i4.ModalOptions), i0.ɵɵdirectiveInject(DOCUMENT, 8), i0.ɵɵdirectiveInject(ANIMATION_MODULE_TYPE, 8)); };
TDSModalContainerComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: TDSModalContainerComponent, selectors: [["tds-modal-container"]], viewQuery: function TDSModalContainerComponent_Query(rf, ctx) { if (rf & 1) {
        i0.ɵɵviewQuery(CdkPortalOutlet, 7);
        i0.ɵɵviewQuery(_c0, 7);
    } if (rf & 2) {
        let _t;
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.portalOutlet = _t.first);
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.modalElementRef = _t.first);
    } }, hostAttrs: ["tabindex", "-1", "role", "dialog"], hostVars: 12, hostBindings: function TDSModalContainerComponent_HostBindings(rf, ctx) { if (rf & 1) {
        i0.ɵɵsyntheticHostListener("@modalContainer.start", function TDSModalContainerComponent_animation_modalContainer_start_HostBindingHandler($event) { return ctx.onAnimationStart($event); })("@modalContainer.done", function TDSModalContainerComponent_animation_modalContainer_done_HostBindingHandler($event) { return ctx.onAnimationDone($event); });
        i0.ɵɵlistener("click", function TDSModalContainerComponent_click_HostBindingHandler($event) { return ctx.onContainerClick($event); })("mouseup", function TDSModalContainerComponent_mouseup_HostBindingHandler() { return ctx.onMouseup(); });
    } if (rf & 2) {
        i0.ɵɵsyntheticHostProperty("@.disabled", ctx.config.noAnimation)("@modalContainer", ctx.state);
        i0.ɵɵclassMap(ctx.config.wrapClassName ? "tds-modal-wrap fixed top-0 left-0 right-0 bottom-0 overflow-auto outline-none " + ctx.config.wrapClassName : "tds-modal-wrap fixed top-0 left-0 right-0 bottom-0 overflow-auto outline-none");
        i0.ɵɵstyleProp("z-index", ctx.config.zindex);
        i0.ɵɵclassProp("tds-modal-wrap-rtl", ctx.dir === "rtl")("tds-modal-centered", ctx.config.centered)("flex", ctx.config.centered);
    } }, exportAs: ["tdsModalContainer"], features: [i0.ɵɵInheritDefinitionFeature], decls: 9, vars: 18, consts: [["role", "document", 3, "ngClass", "ngStyle", "mousedown"], ["modalElement", ""], [1, "tds-modal-content", "pointer-events-auto"], ["class", "w-full p-3 pl-4 flex  flex-row-reverse items-center justify-between border-b  border-neutral-2-200 dark:border-d-neutral-2-200", 4, "ngIf"], [1, "tds-modal-body", "p-4", 3, "ngStyle", "ngClass"], ["cdkPortalOutlet", ""], [3, "innerHTML", 4, "ngIf"], ["tds-modal-footer", "", 3, "modalRef", "cancelTriggered", "okTriggered", 4, "ngIf"], [1, "w-full", "p-3", "pl-4", "flex", "flex-row-reverse", "items-center", "justify-between", "border-b", "border-neutral-2-200", "dark:border-d-neutral-2-200"], ["class", "justify-self-end pl-2", "tds-modal-close", "", 3, "click", 4, "ngIf"], ["tds-modal-title", "", 1, "flex-auto", "tds-modal-title"], ["tds-modal-close", "", 1, "justify-self-end", "pl-2", 3, "click"], [3, "innerHTML"], ["tds-modal-footer", "", 3, "modalRef", "cancelTriggered", "okTriggered"]], template: function TDSModalContainerComponent_Template(rf, ctx) { if (rf & 1) {
        i0.ɵɵelementStart(0, "div", 0, 1);
        i0.ɵɵlistener("mousedown", function TDSModalContainerComponent_Template_div_mousedown_0_listener() { return ctx.onMousedown(); });
        i0.ɵɵpipe(2, "tdsToCssUnit");
        i0.ɵɵelementStart(3, "div", 2);
        i0.ɵɵtemplate(4, TDSModalContainerComponent_div_4_Template, 3, 1, "div", 3);
        i0.ɵɵelementStart(5, "div", 4);
        i0.ɵɵtemplate(6, TDSModalContainerComponent_ng_template_6_Template, 0, 0, "ng-template", 5);
        i0.ɵɵtemplate(7, TDSModalContainerComponent_div_7_Template, 1, 1, "div", 6);
        i0.ɵɵelementEnd();
        i0.ɵɵtemplate(8, TDSModalContainerComponent_div_8_Template, 1, 1, "div", 7);
        i0.ɵɵelementEnd()();
    } if (rf & 2) {
        i0.ɵɵclassMapInterpolate1("tds-modal bg-white dark:bg-d-neutral-3-300 text-neutral-1-900 dark:text-d-neutral-1-900 rounded-md border-box pointer-events-none relative my-auto mx-auto ", ctx.config.className, "");
        i0.ɵɵstyleProp("width", i0.ɵɵpipeBind1(2, 12, ctx.width));
        i0.ɵɵproperty("ngClass", i0.ɵɵpureFunction1(14, _c1, !ctx.config.centered))("ngStyle", ctx.config.style);
        i0.ɵɵadvance(4);
        i0.ɵɵproperty("ngIf", ctx.config.title);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngStyle", ctx.config.bodyStyle)("ngClass", i0.ɵɵpureFunction1(16, _c2, ctx.config.centered));
        i0.ɵɵadvance(2);
        i0.ɵɵproperty("ngIf", ctx.isStringContent);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngIf", ctx.config.footer !== null);
    } }, encapsulation: 2, data: { animation: [TDSModalAnimations.modalContainer] } });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(TDSModalContainerComponent, [{
        type: Component,
        args: [{
                selector: 'tds-modal-container',
                exportAs: 'tdsModalContainer',
                template: `
    <div
      #modalElement
      role="document"
      class="tds-modal bg-white dark:bg-d-neutral-3-300 text-neutral-1-900 dark:text-d-neutral-1-900 rounded-md border-box pointer-events-none relative my-auto mx-auto {{config.className!}}"
      (mousedown)="onMousedown()"
      [ngClass]="{'top-24':!config.centered}"
      [ngStyle]="config.style!"
      [style.width]="width! | tdsToCssUnit"
    >  
      <div class="tds-modal-content pointer-events-auto" >
        <div class="w-full p-3 pl-4 flex  flex-row-reverse items-center justify-between border-b  border-neutral-2-200 dark:border-d-neutral-2-200"  *ngIf="config.title">       
        <div class="justify-self-end pl-2" *ngIf="config.closable" tds-modal-close (click)="onCloseClick()"></div>
        <div class="flex-auto tds-modal-title"  tds-modal-title></div>
        
        </div>
        
        <div class="tds-modal-body p-4" [ngStyle]="config.bodyStyle!" [ngClass]="{'max-h-[calc(100vh-148px)] overflow-auto tds-custom-scroll':config.centered}">
          <ng-template cdkPortalOutlet></ng-template>
          <div *ngIf="isStringContent" [innerHTML]="config.content"></div>
         
        </div>
        
        <div
          *ngIf="config.footer !== null"
          tds-modal-footer
          [modalRef]="modalRef"
          (cancelTriggered)="onCloseClick()"
          (okTriggered)="onOkClick()"
        ></div>
      </div>
    </div>
  `,
                animations: [TDSModalAnimations.modalContainer],
                // Using OnPush for modal caused footer can not to detect changes. we can fix it when 8.x.
                changeDetection: ChangeDetectionStrategy.Default,
                host: {
                    tabindex: '-1',
                    role: 'dialog',
                    '[class]': 'config.wrapClassName ? "tds-modal-wrap fixed top-0 left-0 right-0 bottom-0 overflow-auto outline-none " + config.wrapClassName : "tds-modal-wrap fixed top-0 left-0 right-0 bottom-0 overflow-auto outline-none"',
                    '[class.tds-modal-wrap-rtl]': `dir === 'rtl'`,
                    '[class.tds-modal-centered]': 'config.centered',
                    '[class.flex]': 'config.centered',
                    '[style.zIndex]': 'config.zindex',
                    '[@.disabled]': 'config.noAnimation',
                    '[@modalContainer]': 'state',
                    '(@modalContainer.start)': 'onAnimationStart($event)',
                    '(@modalContainer.done)': 'onAnimationDone($event)',
                    '(click)': 'onContainerClick($event)',
                    '(mouseup)': 'onMouseup()'
                }
            }]
    }], function () { return [{ type: i0.ElementRef }, { type: i1.FocusTrapFactory }, { type: i0.ChangeDetectorRef }, { type: i0.Renderer2 }, { type: i2.OverlayRef }, { type: i3.TDSConfigService }, { type: i4.ModalOptions }, { type: undefined, decorators: [{
                type: Optional
            }, {
                type: Inject,
                args: [DOCUMENT]
            }] }, { type: undefined, decorators: [{
                type: Optional
            }, {
                type: Inject,
                args: [ANIMATION_MODULE_TYPE]
            }] }]; }, { portalOutlet: [{
            type: ViewChild,
            args: [CdkPortalOutlet, { static: true }]
        }], modalElementRef: [{
            type: ViewChild,
            args: ['modalElement', { static: true }]
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kYWwtY29udGFpbmVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL3Rkcy11aS9tb2RhbC9tb2RhbC1jb250YWluZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN0RCxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDM0MsT0FBTyxFQUFFLHVCQUF1QixFQUFxQixTQUFTLEVBQWMsTUFBTSxFQUFFLFFBQVEsRUFBYSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDMUksT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0sc0NBQXNDLENBQUM7QUFFN0UsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBRXhELE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQ3hELE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLG1CQUFtQixDQUFDOzs7Ozs7Ozs7SUFrQnhELCtCQUFvRztJQUF6QiwyS0FBUyxxQkFBYyxJQUFDO0lBQUMsaUJBQU07OztJQUQxRyw4QkFBa0s7SUFDbEssaUZBQTBHO0lBQzFHLDBCQUE4RDtJQUU5RCxpQkFBTTs7O0lBSDhCLGVBQXFCO0lBQXJCLDZDQUFxQjs7OztJQU92RCwwQkFBZ0U7OztJQUFuQyxvRUFBNEI7Ozs7SUFJM0QsK0JBTUM7SUFGQyx3TEFBbUIscUJBQWMsSUFBQyxvS0FDbkIsbUJBQVcsSUFEUTtJQUVuQyxpQkFBTTs7O0lBSEwsMENBQXFCOzs7O0FBMEIvQixNQUFNLE9BQU8sMEJBQTJCLFNBQVEsMkJBQTJCO0lBR3pFLFlBQ0UsVUFBc0IsRUFDdEIsZ0JBQWtDLEVBQ2xDLEdBQXNCLEVBQ3RCLE1BQWlCLEVBQ2pCLFVBQXNCLEVBQ3RCLGdCQUFrQyxFQUMzQixNQUFvQixFQUNHLFFB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QVE7O3NCQUMzQixRQUFROztzQkFBSSxNQUFNO3VCQUFDLHFCQUFxQjt3QkFYRyxZQUFZO2tCQUF6RCxTQUFTO21CQUFDLGVBQWUsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7WUFDQyxlQUFlO2tCQUEzRCxTQUFTO21CQUFDLGNBQWMsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuaW1wb3J0IHsgRm9jdXNUcmFwRmFjdG9yeSB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9hMTF5JztcclxuaW1wb3J0IHsgT3ZlcmxheVJlZiB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9vdmVybGF5JztcclxuaW1wb3J0IHsgQ2RrUG9ydGFsT3V0bGV0IH0gZnJvbSAnQGFuZ3VsYXIvY2RrL3BvcnRhbCc7XHJcbmltcG9ydCB7IERPQ1VNRU5UIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcclxuaW1wb3J0IHsgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENoYW5nZURldGVjdG9yUmVmLCBDb21wb25lbnQsIEVsZW1lbnRSZWYsIEluamVjdCwgT3B0aW9uYWwsIFJlbmRlcmVyMiwgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEFOSU1BVElPTl9NT0RVTEVfVFlQRSB9IGZyb20gJ0Bhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXIvYW5pbWF0aW9ucyc7XHJcbmltcG9ydCB7IFREU0NvbmZpZ1NlcnZpY2UgfSBmcm9tICd0ZHMtdWkvY29yZS9jb25maWcnO1xyXG5pbXBvcnQgeyBURFNIZWxwZXJPYmplY3QgfSBmcm9tICd0ZHMtdWkvc2hhcmVkL3V0aWxpdHknO1xyXG5cclxuaW1wb3J0IHsgVERTTW9kYWxBbmltYXRpb25zIH0gZnJvbSAnLi9tb2RhbC1hbmltYXRpb25zJztcclxuaW1wb3J0IHsgQmFzZU1vZGFsQ29udGFpbmVyQ29tcG9uZW50IH0gZnJvbSAnLi9tb2RhbC1jb250YWluZXInO1xyXG5pbXBvcnQgeyBNb2RhbE9wdGlvbnMgfSBmcm9tICcuL21vZGFsLXR5cGVzJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAndGRzLW1vZGFsLWNvbnRhaW5lcicsXHJcbiAgZXhwb3J0QXM6ICd0ZHNNb2RhbENvbnRhaW5lcicsXHJcbiAgdGVtcGxhdGU6IGBcclxuICAgIDxkaXZcclxuICAgICAgI21vZGFsRWxlbWVudFxyXG4gICAgICByb2xlPVwiZG9jdW1lbnRcIlxyXG4gICAgICBjbGFzcz1cInRkcy1tb2RhbCBiZy13aGl0ZSBkYXJrOmJnLWQtbmV1dHJhbC0zLTMwMCB0ZXh0LW5ldXRyYWwtMS05MDAgZGFyazp0ZXh0LWQtbmV1dHJhbC0xLTkwMCByb3VuZGVkLW1kIGJvcmRlci1ib3ggcG9pbnRlci1ldmVudHMtbm9uZSByZWxhdGl2ZSBteS1hdXRvIG14LWF1dG8ge3tjb25maWcuY2xhc3NOYW1lIX19XCJcclxuICAgICAgKG1vdXNlZG93bik9XCJvbk1vdXNlZG93bigpXCJcclxuICAgICAgW25nQ2xhc3NdPVwieyd0b3AtMjQnOiFjb25maWcuY2VudGVyZWR9XCJcclxuICAgICAgW25nU3R5bGVdPVwiY29uZmlnLnN0eWxlIVwiXHJcbiAgICAgIFtzdHlsZS53aWR0aF09XCJ3aWR0aCEgfCB0ZHNUb0Nzc1VuaXRcIlxyXG4gICAgPiAgXHJcbiAgICAgIDxkaXYgY2xhc3M9XCJ0ZHMtbW9kYWwtY29udGVudCBwb2ludGVyLWV2ZW50cy1hdXRvXCIgPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ3LWZ1bGwgcC0zIHBsLTQgZmxleCAgZmxleC1yb3ctcmV2ZXJzZSBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIGJvcmRlci1iICBib3JkZXItbmV1dHJhbC0yLTIwMCBkYXJrOmJvcmRlci1kLW5ldXRyYWwtMi0yMDBcIiAgKm5nSWY9XCJjb25maWcudGl0bGVcIj4gICAgICAgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImp1c3RpZnktc2VsZi1lbmQgcGwtMlwiICpuZ0lmPVwiY29uZmlnLmNsb3NhYmxlXCIgdGRzLW1vZGFsLWNsb3NlIChjbGljayk9XCJvbkNsb3NlQ2xpY2soKVwiPjwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4LWF1dG8gdGRzLW1vZGFsLXRpdGxlXCIgIHRkcy1tb2RhbC10aXRsZT48L2Rpdj5cclxuICAgICAgICBcclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwidGRzLW1vZGFsLWJvZHkgcC00XCIgW25nU3R5bGVdPVwiY29uZmlnLmJvZHlTdHlsZSFcIiBbbmdDbGFzc109XCJ7J21heC1oLVtjYWxjKDEwMHZoLTE0OHB4KV0gb3ZlcmZsb3ctYXV0byB0ZHMtY3VzdG9tLXNjcm9sbCc6Y29uZmlnLmNlbnRlcmVkfVwiPlxyXG4gICAgICAgICAgPG5nLXRlbXBsYXRlIGNka1BvcnRhbE91dGxldD48L25nLXRlbXBsYXRlPlxyXG4gICAgICAgICAgPGRpdiAqbmdJZj1cImlzU3RyaW5nQ29udGVudFwiIFtpbm5lckhUTUxdPVwiY29uZmlnLmNvbnRlbnRcIj48L2Rpdj5cclxuICAgICAgICAgXHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgXHJcbiAgICAgICAgPGRpdlxyXG4gICAgICAgICAgKm5nSWY9XCJjb25maWcuZm9vdGVyICE9PSBudWxsXCJcclxuICAgICAgICAgIHRkcy1tb2RhbC1mb290ZXJcclxuICAgICAgICAgIFttb2RhbFJlZl09XCJtb2RhbFJlZlwiXHJcbiAgICAgICAgICAoY2FuY2VsVHJpZ2dlcmVkKT1cIm9uQ2xvc2VDbGljaygpXCJcclxuICAgICAgICAgIChva1RyaWdnZXJlZCk9XCJvbk9rQ2xpY2soKVwiXHJcbiAgICAgICAgPjwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIGAsXHJcbiAgYW5pbWF0aW9uczogW1REU01vZGFsQW5pbWF0aW9ucy5tb2RhbENvbnRhaW5lcl0sXHJcbiAgLy8gVXNpbmcgT25QdXNoIGZvciBtb2RhbCBjYXVzZWQgZm9vdGVyIGNhbiBub3QgdG8gZGV0ZWN0IGNoYW5nZXMuIHdlIGNhbiBmaXggaXQgd2hlbiA4LnguXHJcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5EZWZhdWx0LFxyXG4gIGhvc3Q6IHtcclxuICAgIHRhYmluZGV4OiAnLTEnLFxyXG4gICAgcm9sZTogJ2RpYWxvZycsXHJcbiAgICAnW2NsYXNzXSc6ICdjb25maWcud3JhcENsYXNzTmFtZSA/IFwidGRzLW1vZGFsLXdyYXAgZml4ZWQgdG9wLTAgbGVmdC0wIHJpZ2h0LTAgYm90dG9tLTAgb3ZlcmZsb3ctYXV0byBvdXRsaW5lLW5vbmUgXCIgKyBjb25maWcud3JhcENsYXNzTmFtZSA6IFwidGRzLW1vZGFsLXdyYXAgZml4ZWQgdG9wLTAgbGVmdC0wIHJpZ2h0LTAgYm90dG9tLTAgb3ZlcmZsb3ctYXV0byBvdXRsaW5lLW5vbmVcIicsXHJcbiAgICAnW2NsYXNzLnRkcy1tb2RhbC13cmFwLXJ0bF0nOiBgZGlyID09PSAncnRsJ2AsXHJcbiAgICAnW2NsYXNzLnRkcy1tb2RhbC1jZW50ZXJlZF0nOiAnY29uZmlnLmNlbnRlcmVkJyxcclxuICAgICdbY2xhc3MuZmxleF0nOiAnY29uZmlnLmNlbnRlcmVkJyxcclxuICAgICdbc3R5bGUuekluZGV4XSc6ICdjb25maWcuemluZGV4JyxcclxuICAgICdbQC5kaXNhYmxlZF0nOiAnY29uZmlnLm5vQW5pbWF0aW9uJyxcclxuICAgICdbQG1vZGFsQ29udGFpbmVyXSc6ICdzdGF0ZScsXHJcbiAgICAnKEBtb2RhbENvbnRhaW5lci5zdGFydCknOiAnb25BbmltYXRpb25TdGFydCgkZXZlbnQpJyxcclxuICAgICcoQG1vZGFsQ29udGFpbmVyLmRvbmUpJzogJ29uQW5pbWF0aW9uRG9uZSgkZXZlbnQpJyxcclxuICAgICcoY2xpY2spJzogJ29uQ29udGFpbmVyQ2xpY2soJGV2ZW50KScsXHJcbiAgICAnKG1vdXNldXApJzogJ29uTW91c2V1cCgpJ1xyXG4gIH1cclxufSlcclxuZXhwb3J0IGNsYXNzIFREU01vZGFsQ29udGFpbmVyQ29tcG9uZW50IGV4dGVuZHMgQmFzZU1vZGFsQ29udGFpbmVyQ29tcG9uZW50IHtcclxuICBAVmlld0NoaWxkKENka1BvcnRhbE91dGxldCwgeyBzdGF0aWM6IHRydWUgfSkgcG9ydGFsT3V0bGV0ITogQ2RrUG9ydGFsT3V0bGV0O1xyXG4gIEBWaWV3Q2hpbGQoJ21vZGFsRWxlbWVudCcsIHsgc3RhdGljOiB0cnVlIH0pIG1vZGFsRWxlbWVudFJlZiE6IEVsZW1lbnRSZWY8SFRNTERpdkVsZW1lbnQ+O1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgZWxlbWVudFJlZjogRWxlbWVudFJlZixcclxuICAgIGZvY3VzVHJhcEZhY3Rvcnk6IEZvY3VzVHJhcEZhY3RvcnksXHJcbiAgICBjZHI6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgcmVuZGVyOiBSZW5kZXJlcjIsXHJcbiAgICBvdmVybGF5UmVmOiBPdmVybGF5UmVmLFxyXG4gICAgdGRzQ29uZmlnU2VydmljZTogVERTQ29uZmlnU2VydmljZSxcclxuICAgIHB1YmxpYyBjb25maWc6IE1vZGFsT3B0aW9ucyxcclxuICAgIEBPcHRpb25hbCgpIEBJbmplY3QoRE9DVU1FTlQpIGRvY3VtZW50OiBhbnksXHJcbiAgICBAT3B0aW9uYWwoKSBASW5qZWN0KEFOSU1BVElPTl9NT0RVTEVfVFlQRSkgYW5pbWF0aW9uVHlwZTogc3RyaW5nXHJcbiAgKSB7XHJcbiAgICBzdXBlcihlbGVtZW50UmVmLCBmb2N1c1RyYXBGYWN0b3J5LCBjZHIsIHJlbmRlciwgb3ZlcmxheVJlZiwgdGRzQ29uZmlnU2VydmljZSwgY29uZmlnLCBkb2N1bWVudCwgYW5pbWF0aW9uVHlwZSk7XHJcbiAgfVxyXG4gIGdldCB3aWR0aCgpOiBzdHJpbmcgfCBudW1iZXIgfCB1bmRlZmluZWQge1xyXG4gICAgbGV0IHJlc3VsdCA9IDUyMDtcclxuICAgIGlmIChURFNIZWxwZXJPYmplY3QuaGFzVmFsdWUodGhpcy5jb25maWcpKSB7XHJcbiAgICAgIGlmIChURFNIZWxwZXJPYmplY3QuaGFzVmFsdWUodGhpcy5jb25maWcuc2l6ZSkpIHtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMuY29uZmlnLnNpemUpIHtcclxuICAgICAgICAgIGNhc2UgXCJzbVwiOlxyXG4gICAgICAgICAgICByZXN1bHQgPSAzMDA7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBcIm1kXCI6XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IDUwMDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFwibGdcIjpcclxuICAgICAgICAgICAgcmVzdWx0ID0gODAwO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgXCJ4bFwiOlxyXG4gICAgICAgICAgICByZXN1bHQgPSAxMTQwO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IDUwMDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnPy53aWR0aDtcclxuICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxufVxyXG4iXX0=