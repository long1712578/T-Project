import { __decorate } from "tslib";
import { coerceBooleanProperty } from '@angular/cdk/coercion';
import { CdkOverlayOrigin } from '@angular/cdk/overlay';
import { ChangeDetectionStrategy, Component, EventEmitter, forwardRef, Host, Inject, Input, Optional, Output, Self, ViewChild, ViewEncapsulation } from '@angular/core';
import { isValid } from 'date-fns';
import { of, Subject } from 'rxjs';
import { map, takeUntil } from 'rxjs/operators';
import { InputBoolean } from 'tds-ui/shared/utility';
import { slideMotion } from 'tds-ui/core/animation';
import { TDSFormFieldControl, TDS_FORM_FIELD } from 'tds-ui/form-field';
import { isNil } from 'tds-ui/core/util';
import * as i0 from "@angular/core";
import * as i1 from "tds-ui/i18n";
import * as i2 from "@angular/cdk/platform";
import * as i3 from "@angular/cdk/bidi";
import * as i4 from "@angular/forms";
import * as i5 from "@angular/common";
import * as i6 from "tds-ui/core/outlet";
import * as i7 from "@angular/cdk/overlay";
import * as i8 from "./time-picker-panel.component";
import * as i9 from "tds-ui/form-field";
const _c0 = ["inputElement"];
const _c1 = function (a0, a1, a2) { return { "px-1": a0, "px-1.5": a1, "px-2": a2 }; };
function TDSTimePickerComponent_div_5_Template(rf, ctx) { if (rf & 1) {
    const _r5 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 8);
    i0.ɵɵlistener("click", function TDSTimePickerComponent_div_5_Template_div_click_0_listener($event) { i0.ɵɵrestoreView(_r5); const ctx_r4 = i0.ɵɵnextContext(); return ctx_r4.onClickClearBtn($event); });
    i0.ɵɵelement(1, "span", 9);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵproperty("ngClass", i0.ɵɵpureFunction3(1, _c1, ctx_r1.size === "sm", ctx_r1.size === "md", ctx_r1.size === "lg"));
} }
function TDSTimePickerComponent_ng_container_7_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelement(1, "span", 10);
    i0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const suffixIcon_r6 = ctx.$implicit;
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngClass", suffixIcon_r6);
} }
function TDSTimePickerComponent_ng_template_8_Template(rf, ctx) { if (rf & 1) {
    const _r8 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 11)(1, "div", 12)(2, "div", 13)(3, "tds-time-picker-panel", 14);
    i0.ɵɵlistener("ngModelChange", function TDSTimePickerComponent_ng_template_8_Template_tds_time_picker_panel_ngModelChange_3_listener($event) { i0.ɵɵrestoreView(_r8); const ctx_r7 = i0.ɵɵnextContext(); return ctx_r7.value = $event; })("ngModelChange", function TDSTimePickerComponent_ng_template_8_Template_tds_time_picker_panel_ngModelChange_3_listener($event) { i0.ɵɵrestoreView(_r8); const ctx_r9 = i0.ɵɵnextContext(); return ctx_r9.onPanelValueChange($event); })("closePanel", function TDSTimePickerComponent_ng_template_8_Template_tds_time_picker_panel_closePanel_3_listener() { i0.ɵɵrestoreView(_r8); const ctx_r10 = i0.ɵɵnextContext(); return ctx_r10.setCurrentValueAndClose(); });
    i0.ɵɵpipe(4, "async");
    i0.ɵɵelementEnd()()()();
} if (rf & 2) {
    const ctx_r3 = i0.ɵɵnextContext();
    i0.ɵɵproperty("@slideMotion", "enter");
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngClass", ctx_r3.popupClassName)("format", ctx_r3.format)("hourStep", ctx_r3.hourStep)("minuteStep", ctx_r3.minuteStep)("secondStep", ctx_r3.secondStep)("disabledHours", ctx_r3.disabledHours)("disabledMinutes", ctx_r3.disabledMinutes)("disabledSeconds", ctx_r3.disabledSeconds)("placeHolder", ctx_r3.placeholder || i0.ɵɵpipeBind1(4, 19, ctx_r3.i18nPlaceHolder$))("hideDisabledOptions", ctx_r3.hideDisabledOptions)("use12Hours", ctx_r3.use12Hours)("defaultOpenValue", ctx_r3.defaultOpenValue)("addOn", ctx_r3.addOn)("clearText", ctx_r3.clearText)("nowText", ctx_r3.nowText)("okText", ctx_r3.okText)("allowEmpty", ctx_r3.allowEmpty)("ngModel", ctx_r3.value);
} }
const _c2 = function (a0) { return { "border border-neutral-2-200 dark:border-d-neutral-2-200 rounded": a0 }; };
const _c3 = function (a0, a1, a2) { return { "pl-2.5 py-1": a0, "pl-3 py-1.5": a1, "pl-4 py-2": a2 }; };
export class TDSTimePickerComponent {
    constructor(
    // public tdsConfigService: TDSConfigService,
    i18n, element, renderer, cdr, dateHelper, platform, elementRef, directionality, _formField, ngControl) {
        this.i18n = i18n;
        this.element = element;
        this.renderer = renderer;
        this.cdr = cdr;
        this.dateHelper = dateHelper;
        this.platform = platform;
        this.elementRef = elementRef;
        this.directionality = directionality;
        this._formField = _formField;
        this.ngControl = ngControl;
        this.destroy$ = new Subject();
        this.isInit = false;
        this.focused = false;
        this.inputValue = '';
        this.value = null;
        this.preValue = null;
        this.i18nPlaceHolder$ = of(undefined);
        this.overlayPositions = [
            {
                originX: 'start',
                originY: 'bottom',
                overlayX: 'start',
                overlayY: 'top',
                offsetY: 3
            }
        ];
        this.dir = 'ltr';
        this.parentIsFormField = false;
        this.tdsId = null;
        this._size = "md";
        this.hourStep = 1;
        this.minuteStep = 1;
        this.secondStep = 1;
        this.clearText = 'clear';
        this.nowText = '';
        this.okText = '';
        this.popupClassName = '';
        this.placeholder = 'hh:mm a';
        this.format = 'hh:mm a';
        this.isOpen = false;
        this.use12Hours = true;
        this.suffixIcon = 'tdsi-time-line';
        this.openChange = new EventEmitter();
        this.hideDisabledOptions = false;
        this.allowEmpty = true;
        this.disabled = false;
        this.autoFocus = false;
        this.backdrop = false;
        this.id = null;
        this.stateChanges = new Subject();
        this._required = false;
        // TODO: move to host after View Engine deprecation
        this.elementRef.nativeElement.classList.add('tds-picker');
        if (this.ngControl != null) {
            this.ngControl.valueAccessor = this;
        }
        if (this._formField) {
            // this.size = this._formField.size;
            this.parentIsFormField = true;
        }
    }
    get size() {
        return this._size;
    }
    set size(value) {
        if (this._size != value) {
            this._size = value;
            this.stateChanges.next();
        }
    }
    get empty() {
        return false;
    }
    get required() {
        return this._required;
    }
    set required(value) {
        this._required = coerceBooleanProperty(value);
        this.stateChanges.next();
    }
    emitValue(value) {
        this.setValue(value, true);
        if (this._onChange) {
            this._onChange(this.value);
        }
        if (this._onTouched) {
            this._onTouched();
        }
    }
    setValue(value, syncPreValue = false) {
        if (syncPreValue) {
            this.preValue = isValid(value) ? new Date(value) : null;
        }
        this.value = isValid(value) ? new Date(value) : null;
        this.setInputValue(value);
    }
    setInputValue(value) {
        this.inputValue = this.dateHelper.format(value, this.format);
        this.cdr.markForCheck();
    }
    open() {
        if (this.disabled || this.isOpen) {
            return;
        }
        this.focus();
        this.isOpen = true;
        this.openChange.emit(this.isOpen);
    }
    close() {
        this.isOpen = false;
        this.cdr.markForCheck();
        this.openChange.emit(this.isOpen);
    }
    updateAutoFocus() {
        if (this.isInit && !this.disabled) {
            if (this.autoFocus) {
                this.renderer.setAttribute(this.inputRef.nativeElement, 'autofocus', 'autofocus');
            }
            else {
                this.renderer.removeAttribute(this.inputRef.nativeElement, 'autofocus');
            }
        }
    }
    onClickClearBtn(event) {
        event.stopPropagation();
        this.emitValue(null);
    }
    onClickOutside(event) {
        if (!this.element.nativeElement.contains(event.target)) {
            this.setCurrentValueAndClose();
        }
    }
    onFocus(value) {
        this.focused = value;
    }
    focus() {
        if (this.inputRef.nativeElement) {
            this.inputRef.nativeElement.focus();
        }
    }
    blur() {
        if (this.inputRef.nativeElement) {
            this.inputRef.nativeElement.blur();
        }
    }
    onKeyupEsc() {
        this.setValue(this.preValue);
    }
    onKeyupEnter() {
        if (this.isOpen && isValid(this.value)) {
            this.setCurrentValueAndClose();
        }
        else if (!this.isOpen) {
            this.open();
        }
    }
    onInputChange(str) {
        if (!this.platform.TRIDENT && document.activeElement === this.inputRef.nativeElement) {
            this.open();
            this.parseTimeString(str);
        }
    }
    onPanelValueChange(value) {
        this.setValue(value);
        this.focus();
    }
    setCurrentValueAndClose() {
        this.emitValue(this.value);
        this.close();
    }
    ngOnInit() {
        this.inputSize = Math.max(8, this.format.length) + 2;
        this.origin = new CdkOverlayOrigin(this.element);
        //cập nhật input value khi local change
        this.i18n.localeChange.pipe(takeUntil(this.destroy$)).subscribe(() => {
            if (this.value) {
                this.setInputValue(this.value);
            }
        });
        this.i18nPlaceHolder$ = this.i18n.localeChange.pipe(map((locale) => locale.TimePicker.placeholder));
        this.dir = this.directionality.value;
        this.directionality.change?.pipe(takeUntil(this.destroy$)).subscribe((direction) => {
            this.dir = direction;
        });
    }
    ngOnDestroy() {
        this.destroy$.next();
        this.destroy$.complete();
    }
    ngOnChanges(changes) {
        const { use12Hours, format, disabled, autoFocus } = changes;
        if (use12Hours && !use12Hours.previousValue && use12Hours.currentValue && !format) {
            this.format = 'h:mm a';
        }
        if (disabled) {
            const value = disabled.currentValue;
            const input = this.inputRef.nativeElement;
            if (value) {
                this.renderer.setAttribute(input, 'disabled', '');
            }
            else {
                this.renderer.removeAttribute(input, 'disabled');
            }
        }
        if (autoFocus) {
            this.updateAutoFocus();
        }
    }
    parseTimeString(str) {
        const value = this.dateHelper.parseTime(str, this.format) || null;
        if (isValid(value)) {
            this.value = value;
            this.cdr.markForCheck();
        }
    }
    ngAfterViewInit() {
        this.isInit = true;
        this.updateAutoFocus();
    }
    writeValue(time) {
        let result;
        if (time instanceof Date) {
            result = time;
        }
        else if (isNil(time)) {
            result = null;
        }
        else {
            console.warn('Non-Date type is not recommended for time-picker, use "Date" type.');
            result = new Date(time);
        }
        this.setValue(result, true);
    }
    registerOnChange(fn) {
        this._onChange = fn;
    }
    registerOnTouched(fn) {
        this._onTouched = fn;
    }
    setDisabledState(isDisabled) {
        this.disabled = isDisabled;
        this.cdr.markForCheck();
    }
    get errorState() {
        return this.ngControl && this.ngControl.errors !== null && !!this.ngControl.touched;
    }
    setDescribedByIds(ids) {
        // if (ids.length) {
        //   this._elementRef.nativeElement.setAttribute('aria-describedby', ids.join(' '));
        // } else {
        //   this._elementRef.nativeElement.removeAttribute('aria-describedby');
        // }
    }
    onContainerClick(e) {
        // e.preventDefault();
        // e.stopPropagation();
    }
}
TDSTimePickerComponent.ɵfac = function TDSTimePickerComponent_Factory(t) { return new (t || TDSTimePickerComponent)(i0.ɵɵdirectiveInject(i1.TDSI18nService), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i1.DateHelperService), i0.ɵɵdirectiveInject(i2.Platform), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i3.Directionality, 8), i0.ɵɵdirectiveInject(TDS_FORM_FIELD, 9), i0.ɵɵdirectiveInject(i4.NgControl, 10)); };
TDSTimePickerComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: TDSTimePickerComponent, selectors: [["tds-time-picker"]], viewQuery: function TDSTimePickerComponent_Query(rf, ctx) { if (rf & 1) {
        i0.ɵɵviewQuery(_c0, 7);
    } if (rf & 2) {
        let _t;
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.inputRef = _t.first);
    } }, hostAttrs: [1, "w-full", "block", "relative", "box-border", "m-0", "p-0"], hostVars: 6, hostBindings: function TDSTimePickerComponent_HostBindings(rf, ctx) { if (rf & 1) {
        i0.ɵɵlistener("click", function TDSTimePickerComponent_click_HostBindingHandler() { return ctx.open(); });
    } if (rf & 2) {
        i0.ɵɵclassProp("tds-picker-disabled", ctx.disabled)("tds-picker-focused", ctx.focused)("tds-picker-rtl", ctx.dir === "rtl");
    } }, inputs: { tdsId: "tdsId", size: "size", hourStep: "hourStep", minuteStep: "minuteStep", secondStep: "secondStep", clearText: "clearText", nowText: "nowText", okText: "okText", popupClassName: "popupClassName", placeholder: "placeholder", addOn: "addOn", defaultOpenValue: "defaultOpenValue", disabledHours: "disabledHours", disabledMinutes: "disabledMinutes", disabledSeconds: "disabledSeconds", format: "format", isOpen: "isOpen", use12Hours: "use12Hours", suffixIcon: "suffixIcon", hideDisabledOptions: "hideDisabledOptions", allowEmpty: "allowEmpty", disabled: "disabled", autoFocus: "autoFocus", backdrop: "backdrop", id: "id", required: "required" }, outputs: { openChange: "openChange" }, exportAs: ["tdsTimePicker"], features: [i0.ɵɵProvidersFeature([
            // { provide: NG_VALUE_ACCESSOR, useExisting: TDSTimePickerComponent, multi: true }
            {
                provide: TDSFormFieldControl,
                useExisting: forwardRef(() => TDSTimePickerComponent)
            }
        ]), i0.ɵɵNgOnChangesFeature], decls: 9, vars: 27, consts: [[1, "tds-picker-input", "flex", "items-stretch", "w-full", "group", 3, "ngClass"], [1, "flex-auto", "flex", "items-center", 3, "ngClass"], ["type", "text", 1, "text-body-2", "font-regular", "dark:text-d-neutral-1-40", "text-neutral-1-40", "focus:outline-none", "focus:ring-transparent", "focus:border-transparent", "shadow-none", "border-0", "bg-transparent", "text-current", "pl-0", "pb-0", "pt-0", "m-0", "w-full", "outline-none", "box-border", 3, "placeholder", "ngModel", "disabled", "ngModelChange", "focus", "blur", "keyup.enter", "keyup.escape"], ["inputElement", ""], ["class", "tds-picker-clear flex items-center cursor-pointer", 3, "ngClass", "click", 4, "ngIf"], [1, "tds-picker-suffix", "text-neutral-1-900", "dark:text-d-neutral-1-900", "group-hover:bg-neutral-3-50", "dark:group-hover:bg-d-neutral-3-300", "flex", "items-center", "group-hover:border-transparent", 2, "border-top-right-radius", "0.2rem", "border-bottom-right-radius", "0.2rem", 3, "ngClass"], [4, "tdsStringTemplateOutlet"], ["cdkConnectedOverlay", "", 3, "cdkConnectedOverlayHasBackdrop", "cdkConnectedOverlayPositions", "cdkConnectedOverlayOrigin", "cdkConnectedOverlayOpen", "cdkConnectedOverlayOffsetY", "cdkConnectedOverlayTransformOriginOn", "detach", "overlayOutsideClick"], [1, "tds-picker-clear", "flex", "items-center", "cursor-pointer", 3, "ngClass", "click"], [1, "tdsi-close-fill", "text-base", "leading-4", "text-neutral-1-500", "dark:text-d-neutral-1-500"], [1, "text-lg", "leading-5", "text-neutral-1-900", "dark:text-d-neutral-1-900", 3, "ngClass"], [1, "tds-picker-dropdown"], [1, "tds-picker-panel-container"], ["tabindex", "-1", 1, "tds-picker-panel"], [3, "ngClass", "format", "hourStep", "minuteStep", "secondStep", "disabledHours", "disabledMinutes", "disabledSeconds", "placeHolder", "hideDisabledOptions", "use12Hours", "defaultOpenValue", "addOn", "clearText", "nowText", "okText", "allowEmpty", "ngModel", "ngModelChange", "closePanel"]], template: function TDSTimePickerComponent_Template(rf, ctx) { if (rf & 1) {
        i0.ɵɵelementStart(0, "div", 0)(1, "div", 1)(2, "input", 2, 3);
        i0.ɵɵlistener("ngModelChange", function TDSTimePickerComponent_Template_input_ngModelChange_2_listener($event) { return ctx.inputValue = $event; })("focus", function TDSTimePickerComponent_Template_input_focus_2_listener() { return ctx.onFocus(true); })("blur", function TDSTimePickerComponent_Template_input_blur_2_listener() { return ctx.onFocus(false); })("keyup.enter", function TDSTimePickerComponent_Template_input_keyup_enter_2_listener() { return ctx.onKeyupEnter(); })("keyup.escape", function TDSTimePickerComponent_Template_input_keyup_escape_2_listener() { return ctx.onKeyupEsc(); })("ngModelChange", function TDSTimePickerComponent_Template_input_ngModelChange_2_listener($event) { return ctx.onInputChange($event); });
        i0.ɵɵpipe(4, "async");
        i0.ɵɵelementEnd()();
        i0.ɵɵtemplate(5, TDSTimePickerComponent_div_5_Template, 2, 5, "div", 4);
        i0.ɵɵelementStart(6, "div", 5);
        i0.ɵɵtemplate(7, TDSTimePickerComponent_ng_container_7_Template, 2, 1, "ng-container", 6);
        i0.ɵɵelementEnd()();
        i0.ɵɵtemplate(8, TDSTimePickerComponent_ng_template_8_Template, 5, 21, "ng-template", 7);
        i0.ɵɵlistener("detach", function TDSTimePickerComponent_Template_ng_template_detach_8_listener() { return ctx.close(); })("overlayOutsideClick", function TDSTimePickerComponent_Template_ng_template_overlayOutsideClick_8_listener($event) { return ctx.onClickOutside($event); });
    } if (rf & 2) {
        i0.ɵɵproperty("ngClass", i0.ɵɵpureFunction1(17, _c2, !ctx.parentIsFormField));
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngClass", i0.ɵɵpureFunction3(19, _c3, ctx.size === "sm", ctx.size === "md", ctx.size === "lg"));
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("placeholder", ctx.placeholder || i0.ɵɵpipeBind1(4, 15, ctx.i18nPlaceHolder$))("ngModel", ctx.inputValue)("disabled", ctx.disabled);
        i0.ɵɵattribute("id", ctx.tdsId);
        i0.ɵɵadvance(3);
        i0.ɵɵproperty("ngIf", ctx.allowEmpty && !ctx.disabled && ctx.value);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngClass", i0.ɵɵpureFunction3(23, _c1, ctx.size === "sm", ctx.size === "md", ctx.size === "lg"));
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("tdsStringTemplateOutlet", ctx.suffixIcon);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("cdkConnectedOverlayHasBackdrop", ctx.backdrop)("cdkConnectedOverlayPositions", ctx.overlayPositions)("cdkConnectedOverlayOrigin", ctx.origin)("cdkConnectedOverlayOpen", ctx.isOpen)("cdkConnectedOverlayOffsetY", -2)("cdkConnectedOverlayTransformOriginOn", ".tds-picker-dropdown");
    } }, directives: [i5.NgClass, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel, i5.NgIf, i6.TDSStringTemplateOutletDirective, i7.CdkConnectedOverlay, i8.TDSTimePickerPanelComponent], pipes: [i5.AsyncPipe], encapsulation: 2, data: { animation: [slideMotion] }, changeDetection: 0 });
__decorate([
    InputBoolean()
], TDSTimePickerComponent.prototype, "use12Hours", void 0);
__decorate([
    InputBoolean()
], TDSTimePickerComponent.prototype, "hideDisabledOptions", void 0);
__decorate([
    InputBoolean()
], TDSTimePickerComponent.prototype, "allowEmpty", void 0);
__decorate([
    InputBoolean()
], TDSTimePickerComponent.prototype, "disabled", void 0);
__decorate([
    InputBoolean()
], TDSTimePickerComponent.prototype, "autoFocus", void 0);
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(TDSTimePickerComponent, [{
        type: Component,
        args: [{
                encapsulation: ViewEncapsulation.None,
                changeDetection: ChangeDetectionStrategy.OnPush,
                selector: 'tds-time-picker',
                exportAs: 'tdsTimePicker',
                template: `
  <div class="tds-picker-input flex items-stretch w-full group" 
  [ngClass]="{ 'border border-neutral-2-200 dark:border-d-neutral-2-200 rounded':!parentIsFormField}">
  <div class="flex-auto flex items-center" [ngClass]="{
    'pl-2.5 py-1':size ==='sm', 
    'pl-3 py-1.5':size ==='md' ,                                              
    'pl-4 py-2':size ==='lg'        
  }">
  <input
  class="text-body-2 font-regular dark:text-d-neutral-1-40 text-neutral-1-40 focus:outline-none focus:ring-transparent focus:border-transparent shadow-none border-0 bg-transparent text-current pl-0 pb-0 pt-0 m-0 w-full outline-none  box-border"
  #inputElement [attr.id]="tdsId" type="text" [placeholder]="placeholder || (i18nPlaceHolder$ | async)"
  [(ngModel)]="inputValue" [disabled]="disabled" (focus)="onFocus(true)" (blur)="onFocus(false)"
  (keyup.enter)="onKeyupEnter()" (keyup.escape)="onKeyupEsc()" (ngModelChange)="onInputChange($event)" />
    </div>
    <div *ngIf="allowEmpty && !disabled && value" class="tds-picker-clear flex items-center cursor-pointer" (click)="onClickClearBtn($event)"
    [ngClass]="{
    'px-1':size ==='sm',
    'px-1.5':size ==='md',                                          
    'px-2':size ==='lg'
  }">
    <span class="tdsi-close-fill text-base leading-4 text-neutral-1-500 dark:text-d-neutral-1-500"></span>
  </div>
  <div
    class="tds-picker-suffix text-neutral-1-900 dark:text-d-neutral-1-900  group-hover:bg-neutral-3-50 dark:group-hover:bg-d-neutral-3-300 flex items-center  group-hover:border-transparent"
    style="border-top-right-radius: 0.2rem;border-bottom-right-radius: 0.2rem;" [ngClass]="{
      'px-1':size ==='sm',
      'px-1.5':size ==='md',                                          
      'px-2':size ==='lg'
  }">
    <ng-container *tdsStringTemplateOutlet="suffixIcon; let suffixIcon">
      <span [ngClass]="suffixIcon" class="text-lg leading-5 text-neutral-1-900 dark:text-d-neutral-1-900"></span>
    </ng-container>
  </div>
   
  </div>
  
  <ng-template cdkConnectedOverlay [cdkConnectedOverlayHasBackdrop]="backdrop"
    [cdkConnectedOverlayPositions]="overlayPositions" [cdkConnectedOverlayOrigin]="origin"
    [cdkConnectedOverlayOpen]="isOpen" [cdkConnectedOverlayOffsetY]="-2"
    [cdkConnectedOverlayTransformOriginOn]="'.tds-picker-dropdown'" (detach)="close()"
    (overlayOutsideClick)="onClickOutside($event)">
    <div [@slideMotion]="'enter'" class="tds-picker-dropdown">
      <div class="tds-picker-panel-container">
        <div tabindex="-1" class="tds-picker-panel">
          <tds-time-picker-panel [ngClass]="popupClassName" [format]="format" [hourStep]="hourStep"
            [minuteStep]="minuteStep" [secondStep]="secondStep" [disabledHours]="disabledHours"
            [disabledMinutes]="disabledMinutes" [disabledSeconds]="disabledSeconds"
            [placeHolder]="placeholder || (i18nPlaceHolder$ | async)" [hideDisabledOptions]="hideDisabledOptions"
            [use12Hours]="use12Hours" [defaultOpenValue]="defaultOpenValue" [addOn]="addOn" [clearText]="clearText"
            [nowText]="nowText" [okText]="okText" [allowEmpty]="allowEmpty" [(ngModel)]="value"
            (ngModelChange)="onPanelValueChange($event)" (closePanel)="setCurrentValueAndClose()"></tds-time-picker-panel>
        </div>
      </div>
    </div>
  </ng-template>
  `,
                host: {
                    '[class.tds-picker-disabled]': `disabled`,
                    '[class.tds-picker-focused]': `focused`,
                    '[class.tds-picker-rtl]': `dir === 'rtl'`,
                    '(click)': 'open()',
                    'class': 'w-full block relative box-border m-0 p-0',
                },
                animations: [slideMotion],
                providers: [
                    // { provide: NG_VALUE_ACCESSOR, useExisting: TDSTimePickerComponent, multi: true }
                    {
                        provide: TDSFormFieldControl,
                        useExisting: forwardRef(() => TDSTimePickerComponent)
                    }
                ]
            }]
    }], function () { return [{ type: i1.TDSI18nService }, { type: i0.ElementRef }, { type: i0.Renderer2 }, { type: i0.ChangeDetectorRef }, { type: i1.DateHelperService }, { type: i2.Platform }, { type: i0.ElementRef }, { type: i3.Directionality, decorators: [{
                type: Optional
            }] }, { type: i9.TDSFormField, decorators: [{
                type: Optional
            }, {
                type: Inject,
                args: [TDS_FORM_FIELD]
            }, {
                type: Host
            }] }, { type: i4.NgControl, decorators: [{
                type: Optional
            }, {
                type: Self
            }] }]; }, { inputRef: [{
            type: ViewChild,
            args: ['inputElement', { static: true }]
        }], tdsId: [{
            type: Input
        }], size: [{
            type: Input
        }], hourStep: [{
            type: Input
        }], minuteStep: [{
            type: Input
        }], secondStep: [{
            type: Input
        }], clearText: [{
            type: Input
        }], nowText: [{
            type: Input
        }], okText: [{
            type: Input
        }], popupClassName: [{
            type: Input
        }], placeholder: [{
            type: Input
        }], addOn: [{
            type: Input
        }], defaultOpenValue: [{
            type: Input
        }], disabledHours: [{
            type: Input
        }], disabledMinutes: [{
            type: Input
        }], disabledSeconds: [{
            type: Input
        }], format: [{
            type: Input
        }], isOpen: [{
            type: Input
        }], use12Hours: [{
            type: Input
        }], suffixIcon: [{
            type: Input
        }], openChange: [{
            type: Output
        }], hideDisabledOptions: [{
            type: Input
        }], allowEmpty: [{
            type: Input
        }], disabled: [{
            type: Input
        }], autoFocus: [{
            type: Input
        }], backdrop: [{
            type: Input
        }], id: [{
            type: Input
        }], required: [{
            type: Input
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGltZS1waWNrZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvdGRzLXVpL3RpbWUtcGlja2VyL3RpbWUtcGlja2VyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBR0EsT0FBTyxFQUFnQixxQkFBcUIsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQzVFLE9BQU8sRUFBRSxnQkFBZ0IsRUFBMEIsTUFBTSxzQkFBc0IsQ0FBQztBQUVoRixPQUFPLEVBRUwsdUJBQXVCLEVBRXZCLFNBQVMsRUFFVCxZQUFZLEVBQ1osVUFBVSxFQUNWLElBQUksRUFDSixNQUFNLEVBQ04sS0FBSyxFQUlMLFFBQVEsRUFDUixNQUFNLEVBRU4sSUFBSSxFQUdKLFNBQVMsRUFDVCxpQkFBaUIsRUFDbEIsTUFBTSxlQUFlLENBQUM7QUFFdkIsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUNuQyxPQUFPLEVBQWMsRUFBRSxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMvQyxPQUFPLEVBQUUsR0FBRyxFQUFFLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ2hELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUVyRCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDcEQsT0FBTyxFQUFnQixtQkFBbUIsRUFBRSxjQUFjLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUV0RixPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7Ozs7Ozs7Ozs7Ozs7OztJQXFCckMsOEJBS0M7SUFMdUcsc0tBQVMsOEJBQXVCLElBQUM7SUFNekksMEJBQXNHO0lBQ3hHLGlCQUFNOzs7SUFOSixzSEFJQTs7O0lBVUEsNkJBQW9FO0lBQ2xFLDJCQUEyRztJQUM3RywwQkFBZTs7O0lBRFAsZUFBc0I7SUFBdEIsdUNBQXNCOzs7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dHkgfSBmcm9tICdAYW5ndWxhci9jZGsvYmlkaSc7XHJcbmltcG9ydCB7IEJvb2xlYW5JbnB1dCwgY29lcmNlQm9vbGVhblByb3BlcnR5IH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2NvZXJjaW9uJztcclxuaW1wb3J0IHsgQ2RrT3ZlcmxheU9yaWdpbiwgQ29ubmVjdGlvblBvc2l0aW9uUGFpciB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9vdmVybGF5JztcclxuaW1wb3J0IHsgUGxhdGZvcm0gfSBmcm9tICdAYW5ndWxhci9jZGsvcGxhdGZvcm0nO1xyXG5pbXBvcnQge1xyXG4gIEFmdGVyVmlld0luaXQsXHJcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXHJcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgQ29tcG9uZW50LFxyXG4gIEVsZW1lbnRSZWYsXHJcbiAgRXZlbnRFbWl0dGVyLFxyXG4gIGZvcndhcmRSZWYsXHJcbiAgSG9zdCxcclxuICBJbmplY3QsXHJcbiAgSW5wdXQsXHJcbiAgT25DaGFuZ2VzLFxyXG4gIE9uRGVzdHJveSxcclxuICBPbkluaXQsXHJcbiAgT3B0aW9uYWwsXHJcbiAgT3V0cHV0LFxyXG4gIFJlbmRlcmVyMixcclxuICBTZWxmLFxyXG4gIFNpbXBsZUNoYW5nZXMsXHJcbiAgVGVtcGxhdGVSZWYsXHJcbiAgVmlld0NoaWxkLFxyXG4gIFZpZXdFbmNhcHN1bGF0aW9uXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBOZ0NvbnRyb2wgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7IGlzVmFsaWQgfSBmcm9tICdkYXRlLWZucyc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUsIG9mLCBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IG1hcCwgdGFrZVVudGlsIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5pbXBvcnQgeyBJbnB1dEJvb2xlYW4gfSBmcm9tICd0ZHMtdWkvc2hhcmVkL3V0aWxpdHknO1xyXG5pbXBvcnQgeyBCdXR0b25TaXplIH0gZnJvbSBcInRkcy11aS9jb3JlL2NvbmZpZ1wiO1xyXG5pbXBvcnQgeyBzbGlkZU1vdGlvbiB9IGZyb20gJ3Rkcy11aS9jb3JlL2FuaW1hdGlvbic7XHJcbmltcG9ydCB7IFREU0Zvcm1GaWVsZCwgVERTRm9ybUZpZWxkQ29udHJvbCwgVERTX0ZPUk1fRklFTEQgfSBmcm9tICd0ZHMtdWkvZm9ybS1maWVsZCc7XHJcbmltcG9ydCB7IERhdGVIZWxwZXJTZXJ2aWNlLCBURFNJMThuSW50ZXJmYWNlLCBURFNJMThuU2VydmljZSB9IGZyb20gJ3Rkcy11aS9pMThuJztcclxuaW1wb3J0IHsgaXNOaWwgfSBmcm9tICd0ZHMtdWkvY29yZS91dGlsJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXHJcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXHJcbiAgc2VsZWN0b3I6ICd0ZHMtdGltZS1waWNrZXInLFxyXG4gIGV4cG9ydEFzOiAndGRzVGltZVBpY2tlcicsXHJcbiAgdGVtcGxhdGU6IGBcclxuICA8ZGl2IGNsYXNzPVwidGRzLXBpY2tlci1pbnB1dCBmbGV4IGl0ZW1zLXN0cmV0Y2ggdy1mdWxsIGdyb3VwXCIgXHJcbiAgW25nQ2xhc3NdPVwieyAnYm9yZGVyIGJvcmRlci1uZXV0cmFsLTItMjAwIGRhcms6Ym9yZGVyLWQtbmV1dHJhbC0yLTIwMCByb3VuZGVkJzohcGFyZW50SXNGb3JtRmllbGR9XCI+XHJcbiAgPGRpdiBjbGFzcz1cImZsZXgtYXV0byBmbGV4IGl0ZW1zLWNlbnRlclwiIFtuZ0NsYXNzXT1cIntcclxuICAgICdwbC0yLjUgcHktMSc6c2l6ZSA9PT0nc20nLCBcclxuICAgICdwbC0zIHB5LTEuNSc6c2l6ZSA9PT0nbWQnICwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAncGwtNCBweS0yJzpzaXplID09PSdsZycgICAgICAgIFxyXG4gIH1cIj5cclxuICA8aW5wdXRcclxuICBjbGFzcz1cInRleHQtYm9keS0yIGZvbnQtcmVndWxhciBkYXJrOnRleHQtZC1uZXV0cmFsLTEtNDAgdGV4dC1uZXV0cmFsLTEtNDAgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctdHJhbnNwYXJlbnQgZm9jdXM6Ym9yZGVyLXRyYW5zcGFyZW50IHNoYWRvdy1ub25lIGJvcmRlci0wIGJnLXRyYW5zcGFyZW50IHRleHQtY3VycmVudCBwbC0wIHBiLTAgcHQtMCBtLTAgdy1mdWxsIG91dGxpbmUtbm9uZSAgYm94LWJvcmRlclwiXHJcbiAgI2lucHV0RWxlbWVudCBbYXR0ci5pZF09XCJ0ZHNJZFwiIHR5cGU9XCJ0ZXh0XCIgW3BsYWNlaG9sZGVyXT1cInBsYWNlaG9sZGVyIHx8IChpMThuUGxhY2VIb2xkZXIkIHwgYXN5bmMpXCJcclxuICBbKG5nTW9kZWwpXT1cImlucHV0VmFsdWVcIiBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIiAoZm9jdXMpPVwib25Gb2N1cyh0cnVlKVwiIChibHVyKT1cIm9uRm9jdXMoZmFsc2UpXCJcclxuICAoa2V5dXAuZW50ZXIpPVwib25LZXl1cEVudGVyKClcIiAoa2V5dXAuZXNjYXBlKT1cIm9uS2V5dXBFc2MoKVwiIChuZ01vZGVsQ2hhbmdlKT1cIm9uSW5wdXRDaGFuZ2UoJGV2ZW50KVwiIC8+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxkaXYgKm5nSWY9XCJhbGxvd0VtcHR5ICYmICFkaXNhYmxlZCAmJiB2YWx1ZVwiIGNsYXNzPVwidGRzLXBpY2tlci1jbGVhciBmbGV4IGl0ZW1zLWNlbnRlciBjdXJzb3ItcG9pbnRlclwiIChjbGljayk9XCJvbkNsaWNrQ2xlYXJCdG4oJGV2ZW50KVwiXHJcbiAgICBbbmdDbGFzc109XCJ7XHJcbiAgICAncHgtMSc6c2l6ZSA9PT0nc20nLFxyXG4gICAgJ3B4LTEuNSc6c2l6ZSA9PT0nbWQnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgJ3B4LTInOnNpemUgPT09J2xnJ1xyXG4gIH1cIj5cclxuICAgIDxzcGFuIGNsYXNzPVwidGRzaS1jbG9zZS1maWxsIHRleHQtYmFzZSBsZWFkaW5nLTQgdGV4dC1uZXV0cmFsLTEtNTAwIGRhcms6dGV4dC1kLW5ldXRyYWwtMS01MDBcIj48L3NwYW4+XHJcbiAgPC9kaXY+XHJcbiAgPGRpdlxyXG4gICAgY2xhc3M9XCJ0ZHMtcGlja2VyLXN1ZmZpeCB0ZXh0LW5ldXRyYWwtMS05MDAgZGFyazp0ZXh0LWQtbmV1dHJhbC0xLTkwMCAgZ3JvdXAtaG92ZXI6YmctbmV1dHJhbC0zLTUwIGRhcms6Z3JvdXAtaG92ZXI6YmctZC1uZXV0cmFsLTMtMzAwIGZsZXggaXRlbXMtY2VudGVyICBncm91cC1ob3Zlcjpib3JkZXItdHJhbnNwYXJlbnRcIlxyXG4gICAgc3R5bGU9XCJib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogMC4ycmVtO2JvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiAwLjJyZW07XCIgW25nQ2xhc3NdPVwie1xyXG4gICAgICAncHgtMSc6c2l6ZSA9PT0nc20nLFxyXG4gICAgICAncHgtMS41JzpzaXplID09PSdtZCcsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICdweC0yJzpzaXplID09PSdsZydcclxuICB9XCI+XHJcbiAgICA8bmctY29udGFpbmVyICp0ZHNTdHJpbmdUZW1wbGF0ZU91dGxldD1cInN1ZmZpeEljb247IGxldCBzdWZmaXhJY29uXCI+XHJcbiAgICAgIDxzcGFuIFtuZ0NsYXNzXT1cInN1ZmZpeEljb25cIiBjbGFzcz1cInRleHQtbGcgbGVhZGluZy01IHRleHQtbmV1dHJhbC0xLTkwMCBkYXJrOnRleHQtZC1uZXV0cmFsLTEtOTAwXCI+PC9zcGFuPlxyXG4gICAgPC9uZy1jb250YWluZXI+XHJcbiAgPC9kaXY+XHJcbiAgIFxyXG4gIDwvZGl2PlxyXG4gIFxyXG4gIDxuZy10ZW1wbGF0ZSBjZGtDb25uZWN0ZWRPdmVybGF5IFtjZGtDb25uZWN0ZWRPdmVybGF5SGFzQmFja2Ryb3BdPVwiYmFja2Ryb3BcIlxyXG4gICAgW2Nka0Nvbm5lY3RlZE92ZXJsYXlQb3NpdGlvbnNdPVwib3ZlcmxheVBvc2l0aW9uc1wiIFtjZGtDb25uZWN0ZWRPdmVybGF5T3JpZ2luXT1cIm9yaWdpblwiXHJcbiAgICBbY2RrQ29ubmVjdGVkT3ZlcmxheU9wZW5dPVwiaXNPcGVuXCIgW2Nka0Nvbm5lY3RlZE92ZXJsYXlPZmZzZXRZXT1cIi0yXCJcclxuICAgIFtjZGtDb25uZWN0ZWRPdmVybGF5VHJhbnNmb3JtT3JpZ2luT25dPVwiJy50ZHMtcGlja2VyLWRyb3Bkb3duJ1wiIChkZXRhY2gpPVwiY2xvc2UoKVwiXHJcbiAgICAob3ZlcmxheU91dHNpZGVDbGljayk9XCJvbkNsaWNrT3V0c2lkZSgkZXZlbnQpXCI+XHJcbiAgICA8ZGl2IFtAc2xpZGVNb3Rpb25dPVwiJ2VudGVyJ1wiIGNsYXNzPVwidGRzLXBpY2tlci1kcm9wZG93blwiPlxyXG4gICAgICA8ZGl2IGNsYXNzPVwidGRzLXBpY2tlci1wYW5lbC1jb250YWluZXJcIj5cclxuICAgICAgICA8ZGl2IHRhYmluZGV4PVwiLTFcIiBjbGFzcz1cInRkcy1waWNrZXItcGFuZWxcIj5cclxuICAgICAgICAgIDx0ZHMtdGltZS1waWNrZXItcGFuZWwgW25nQ2xhc3NdPVwicG9wdXBDbGFzc05hbWVcIiBbZm9ybWF0XT1cImZvcm1hdFwiIFtob3VyU3RlcF09XCJob3VyU3RlcFwiXHJcbiAgICAgICAgICAgIFttaW51dGVTdGVwXT1cIm1pbnV0ZVN0ZXBcIiBbc2Vjb25kU3RlcF09XCJzZWNvbmRTdGVwXCIgW2Rpc2FibGVkSG91cnNdPVwiZGlzYWJsZWRIb3Vyc1wiXHJcbiAgICAgICAgICAgIFtkaXNhYmxlZE1pbnV0ZXNdPVwiZGlzYWJsZWRNaW51dGVzXCIgW2Rpc2FibGVkU2Vjb25kc109XCJkaXNhYmxlZFNlY29uZHNcIlxyXG4gICAgICAgICAgICBbcGxhY2VIb2xkZXJdPVwicGxhY2Vob2xkZXIgfHwgKGkxOG5QbGFjZUhvbGRlciQgfCBhc3luYylcIiBbaGlkZURpc2FibGVkT3B0aW9uc109XCJoaWRlRGlzYWJsZWRPcHRpb25zXCJcclxuICAgICAgICAgICAgW3VzZTEySG91cnNdPVwidXNlMTJIb3Vyc1wiIFtkZWZhdWx0T3BlblZhbHVlXT1cImRlZmF1bHRPcGVuVmFsdWVcIiBbYWRkT25dPVwiYWRkT25cIiBbY2xlYXJUZXh0XT1cImNsZWFyVGV4dFwiXHJcbiAgICAgICAgICAgIFtub3dUZXh0XT1cIm5vd1RleHRcIiBbb2tUZXh0XT1cIm9rVGV4dFwiIFthbGxvd0VtcHR5XT1cImFsbG93RW1wdHlcIiBbKG5nTW9kZWwpXT1cInZhbHVlXCJcclxuICAgICAgICAgICAgKG5nTW9kZWxDaGFuZ2UpPVwib25QYW5lbFZhbHVlQ2hhbmdlKCRldmVudClcIiAoY2xvc2VQYW5lbCk9XCJzZXRDdXJyZW50VmFsdWVBbmRDbG9zZSgpXCI+PC90ZHMtdGltZS1waWNrZXItcGFuZWw+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgPC9uZy10ZW1wbGF0ZT5cclxuICBgLFxyXG4gIGhvc3Q6IHtcclxuICAgICdbY2xhc3MudGRzLXBpY2tlci1kaXNhYmxlZF0nOiBgZGlzYWJsZWRgLFxyXG4gICAgJ1tjbGFzcy50ZHMtcGlja2VyLWZvY3VzZWRdJzogYGZvY3VzZWRgLFxyXG4gICAgJ1tjbGFzcy50ZHMtcGlja2VyLXJ0bF0nOiBgZGlyID09PSAncnRsJ2AsXHJcbiAgICAnKGNsaWNrKSc6ICdvcGVuKCknLFxyXG4gICAgJ2NsYXNzJzogJ3ctZnVsbCBibG9jayByZWxhdGl2ZSBib3gtYm9yZGVyIG0tMCBwLTAnLFxyXG4gIH0sXHJcbiAgYW5pbWF0aW9uczogW3NsaWRlTW90aW9uXSxcclxuICBwcm92aWRlcnM6IFtcclxuICAgIC8vIHsgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsIHVzZUV4aXN0aW5nOiBURFNUaW1lUGlja2VyQ29tcG9uZW50LCBtdWx0aTogdHJ1ZSB9XHJcbiAgICB7XHJcbiAgICAgIHByb3ZpZGU6IFREU0Zvcm1GaWVsZENvbnRyb2wsXHJcbiAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IFREU1RpbWVQaWNrZXJDb21wb25lbnQpXHJcbiAgICB9XHJcbiAgXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgVERTVGltZVBpY2tlckNvbXBvbmVudCBpbXBsZW1lbnRzIFREU0Zvcm1GaWVsZENvbnRyb2w8YW55PiwgQ29udHJvbFZhbHVlQWNjZXNzb3IsIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCwgT25DaGFuZ2VzLCBPbkRlc3Ryb3kge1xyXG5cclxuICBzdGF0aWMgbmdBY2NlcHRJbnB1dFR5cGVfdXNlMTJIb3VyczogQm9vbGVhbklucHV0O1xyXG4gIHN0YXRpYyBuZ0FjY2VwdElucHV0VHlwZV9oaWRlRGlzYWJsZWRPcHRpb25zOiBCb29sZWFuSW5wdXQ7XHJcbiAgc3RhdGljIG5nQWNjZXB0SW5wdXRUeXBlX2FsbG93RW1wdHk6IEJvb2xlYW5JbnB1dDtcclxuICBzdGF0aWMgbmdBY2NlcHRJbnB1dFR5cGVfZGlzYWJsZWQ6IEJvb2xlYW5JbnB1dDtcclxuICBzdGF0aWMgbmdBY2NlcHRJbnB1dFR5cGVfYXV0b0ZvY3VzOiBCb29sZWFuSW5wdXQ7XHJcblxyXG4gIHByaXZhdGUgX29uQ2hhbmdlPzogKHZhbHVlOiBEYXRlIHwgbnVsbCkgPT4gdm9pZDtcclxuICBwcml2YXRlIF9vblRvdWNoZWQ/OiAoKSA9PiB2b2lkO1xyXG4gIHByaXZhdGUgZGVzdHJveSQgPSBuZXcgU3ViamVjdDx2b2lkPigpO1xyXG4gIGlzSW5pdCA9IGZhbHNlO1xyXG4gIGZvY3VzZWQgPSBmYWxzZTtcclxuICBpbnB1dFZhbHVlOiBzdHJpbmcgPSAnJztcclxuICB2YWx1ZTogRGF0ZSB8IG51bGwgPSBudWxsO1xyXG4gIHByZVZhbHVlOiBEYXRlIHwgbnVsbCA9IG51bGw7XHJcbiAgb3JpZ2luITogQ2RrT3ZlcmxheU9yaWdpbjtcclxuICBpbnB1dFNpemU/OiBudW1iZXI7XHJcbiAgaTE4blBsYWNlSG9sZGVyJDogT2JzZXJ2YWJsZTxzdHJpbmcgfCB1bmRlZmluZWQ+ID0gb2YodW5kZWZpbmVkKTtcclxuICBvdmVybGF5UG9zaXRpb25zOiBDb25uZWN0aW9uUG9zaXRpb25QYWlyW10gPSBbXHJcbiAgICB7XHJcbiAgICAgIG9yaWdpblg6ICdzdGFydCcsXHJcbiAgICAgIG9yaWdpblk6ICdib3R0b20nLFxyXG4gICAgICBvdmVybGF5WDogJ3N0YXJ0JyxcclxuICAgICAgb3ZlcmxheVk6ICd0b3AnLFxyXG4gICAgICBvZmZzZXRZOiAzXHJcbiAgICB9XHJcbiAgXTtcclxuICBkaXI6IERpcmVjdGlvbiA9ICdsdHInO1xyXG4gIHBhcmVudElzRm9ybUZpZWxkOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gIEBWaWV3Q2hpbGQoJ2lucHV0RWxlbWVudCcsIHsgc3RhdGljOiB0cnVlIH0pIGlucHV0UmVmITogRWxlbWVudFJlZjxIVE1MSW5wdXRFbGVtZW50PjtcclxuICBASW5wdXQoKSB0ZHNJZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcbiAgQElucHV0KClcclxuICBnZXQgc2l6ZSgpOiBCdXR0b25TaXplIHtcclxuICAgIHJldHVybiB0aGlzLl9zaXplO1xyXG4gIH1cclxuICBzZXQgc2l6ZSh2YWx1ZTogQnV0dG9uU2l6ZSkge1xyXG4gICAgaWYgKHRoaXMuX3NpemUgIT0gdmFsdWUpIHtcclxuICAgICAgdGhpcy5fc2l6ZSA9IHZhbHVlO1xyXG4gICAgICB0aGlzLnN0YXRlQ2hhbmdlcy5uZXh0KCk7XHJcbiAgICB9XHJcblxyXG4gIH1cclxuICBwcml2YXRlIF9zaXplOiBCdXR0b25TaXplID0gXCJtZFwiO1xyXG4gIEBJbnB1dCgpIGhvdXJTdGVwOiBudW1iZXIgPSAxO1xyXG4gIEBJbnB1dCgpIG1pbnV0ZVN0ZXA6IG51bWJlciA9IDE7XHJcbiAgQElucHV0KCkgc2Vjb25kU3RlcDogbnVtYmVyID0gMTtcclxuICBASW5wdXQoKSBjbGVhclRleHQ6IHN0cmluZyA9ICdjbGVhcic7XHJcbiAgQElucHV0KCkgbm93VGV4dDogc3RyaW5nID0gJyc7XHJcbiAgQElucHV0KCkgb2tUZXh0OiBzdHJpbmcgPSAnJztcclxuICBASW5wdXQoKSBwb3B1cENsYXNzTmFtZTogc3RyaW5nID0gJyc7XHJcbiAgQElucHV0KCkgcGxhY2Vob2xkZXIgPSAnaGg6bW0gYSc7XHJcbiAgQElucHV0KCkgYWRkT24/OiBUZW1wbGF0ZVJlZjx2b2lkPjtcclxuICBASW5wdXQoKSBkZWZhdWx0T3BlblZhbHVlPzogRGF0ZTtcclxuICBASW5wdXQoKSBkaXNhYmxlZEhvdXJzPzogKCkgPT4gbnVtYmVyW107XHJcbiAgQElucHV0KCkgZGlzYWJsZWRNaW51dGVzPzogKGhvdXI6IG51bWJlcikgPT4gbnVtYmVyW107XHJcbiAgQElucHV0KCkgZGlzYWJsZWRTZWNvbmRzPzogKGhvdXI6IG51bWJlciwgbWludXRlOiBudW1iZXIpID0+IG51bWJlcltdO1xyXG4gIEBJbnB1dCgpIGZvcm1hdDogc3RyaW5nID0gJ2hoOm1tIGEnO1xyXG4gIEBJbnB1dCgpIGlzT3BlbiA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpIEBJbnB1dEJvb2xlYW4oKSB1c2UxMkhvdXJzOiBib29sZWFuID0gdHJ1ZTtcclxuICBASW5wdXQoKSBzdWZmaXhJY29uOiBzdHJpbmcgfCBUZW1wbGF0ZVJlZjxhbnk+ID0gJ3Rkc2ktdGltZS1saW5lJztcclxuXHJcbiAgQE91dHB1dCgpIHJlYWRvbmx5IG9wZW5DaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPGJvb2xlYW4+KCk7XHJcblxyXG4gIEBJbnB1dCgpIEBJbnB1dEJvb2xlYW4oKSBoaWRlRGlzYWJsZWRPcHRpb25zID0gZmFsc2U7XHJcbiAgQElucHV0KCkgQElucHV0Qm9vbGVhbigpIGFsbG93RW1wdHk6IGJvb2xlYW4gPSB0cnVlO1xyXG4gIEBJbnB1dCgpIEBJbnB1dEJvb2xlYW4oKSBkaXNhYmxlZCA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpIEBJbnB1dEJvb2xlYW4oKSBhdXRvRm9jdXMgPSBmYWxzZTtcclxuICBASW5wdXQoKSBiYWNrZHJvcCA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpIGlkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxuICBzdGF0ZUNoYW5nZXMgPSBuZXcgU3ViamVjdDx2b2lkPigpO1xyXG4gIGdldCBlbXB0eSgpIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbiAgQElucHV0KClcclxuICBnZXQgcmVxdWlyZWQoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWlyZWQ7XHJcbiAgfVxyXG4gIHNldCByZXF1aXJlZCh2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgdGhpcy5fcmVxdWlyZWQgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkodmFsdWUpO1xyXG4gICAgdGhpcy5zdGF0ZUNoYW5nZXMubmV4dCgpO1xyXG4gIH1cclxuICBwcml2YXRlIF9yZXF1aXJlZCA9IGZhbHNlO1xyXG4gIGVtaXRWYWx1ZSh2YWx1ZTogRGF0ZSB8IG51bGwpOiB2b2lkIHtcclxuICAgIHRoaXMuc2V0VmFsdWUodmFsdWUsIHRydWUpO1xyXG5cclxuICAgIGlmICh0aGlzLl9vbkNoYW5nZSkge1xyXG4gICAgICB0aGlzLl9vbkNoYW5nZSh0aGlzLnZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5fb25Ub3VjaGVkKSB7XHJcbiAgICAgIHRoaXMuX29uVG91Y2hlZCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0VmFsdWUodmFsdWU6IERhdGUgfCBudWxsLCBzeW5jUHJlVmFsdWU6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xyXG4gICAgaWYgKHN5bmNQcmVWYWx1ZSkge1xyXG4gICAgICB0aGlzLnByZVZhbHVlID0gaXNWYWxpZCh2YWx1ZSkgPyBuZXcgRGF0ZSh2YWx1ZSEpIDogbnVsbDtcclxuICAgIH1cclxuICAgIHRoaXMudmFsdWUgPSBpc1ZhbGlkKHZhbHVlKSA/IG5ldyBEYXRlKHZhbHVlISkgOiBudWxsO1xyXG4gICAgdGhpcy5zZXRJbnB1dFZhbHVlKHZhbHVlKTtcclxuICB9XHJcbiAgc2V0SW5wdXRWYWx1ZSh2YWx1ZTogRGF0ZSB8IG51bGwsKSB7XHJcbiAgICB0aGlzLmlucHV0VmFsdWUgPSB0aGlzLmRhdGVIZWxwZXIuZm9ybWF0KHZhbHVlLCB0aGlzLmZvcm1hdCk7XHJcbiAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcclxuICB9XHJcbiAgb3BlbigpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLmRpc2FibGVkIHx8IHRoaXMuaXNPcGVuKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuZm9jdXMoKTtcclxuICAgIHRoaXMuaXNPcGVuID0gdHJ1ZTtcclxuICAgIHRoaXMub3BlbkNoYW5nZS5lbWl0KHRoaXMuaXNPcGVuKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCk6IHZvaWQge1xyXG4gICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcclxuICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xyXG4gICAgdGhpcy5vcGVuQ2hhbmdlLmVtaXQodGhpcy5pc09wZW4pO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlQXV0b0ZvY3VzKCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuaXNJbml0ICYmICF0aGlzLmRpc2FibGVkKSB7XHJcbiAgICAgIGlmICh0aGlzLmF1dG9Gb2N1cykge1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0QXR0cmlidXRlKHRoaXMuaW5wdXRSZWYubmF0aXZlRWxlbWVudCwgJ2F1dG9mb2N1cycsICdhdXRvZm9jdXMnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUF0dHJpYnV0ZSh0aGlzLmlucHV0UmVmLm5hdGl2ZUVsZW1lbnQsICdhdXRvZm9jdXMnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25DbGlja0NsZWFyQnRuKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XHJcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIHRoaXMuZW1pdFZhbHVlKG51bGwpO1xyXG4gIH1cclxuXHJcbiAgb25DbGlja091dHNpZGUoZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcclxuICAgIGlmICghdGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQuY29udGFpbnMoZXZlbnQudGFyZ2V0KSkge1xyXG4gICAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZUFuZENsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbkZvY3VzKHZhbHVlOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICB0aGlzLmZvY3VzZWQgPSB2YWx1ZTtcclxuICB9XHJcblxyXG4gIGZvY3VzKCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuaW5wdXRSZWYubmF0aXZlRWxlbWVudCkge1xyXG4gICAgICB0aGlzLmlucHV0UmVmLm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGJsdXIoKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5pbnB1dFJlZi5uYXRpdmVFbGVtZW50KSB7XHJcbiAgICAgIHRoaXMuaW5wdXRSZWYubmF0aXZlRWxlbWVudC5ibHVyKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbktleXVwRXNjKCk6IHZvaWQge1xyXG4gICAgdGhpcy5zZXRWYWx1ZSh0aGlzLnByZVZhbHVlKTtcclxuICB9XHJcblxyXG4gIG9uS2V5dXBFbnRlcigpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLmlzT3BlbiAmJiBpc1ZhbGlkKHRoaXMudmFsdWUpKSB7XHJcbiAgICAgIHRoaXMuc2V0Q3VycmVudFZhbHVlQW5kQ2xvc2UoKTtcclxuICAgIH0gZWxzZSBpZiAoIXRoaXMuaXNPcGVuKSB7XHJcbiAgICAgIHRoaXMub3BlbigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25JbnB1dENoYW5nZShzdHI6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgaWYgKCF0aGlzLnBsYXRmb3JtLlRSSURFTlQgJiYgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gdGhpcy5pbnB1dFJlZi5uYXRpdmVFbGVtZW50KSB7XHJcbiAgICAgIHRoaXMub3BlbigpO1xyXG4gICAgICB0aGlzLnBhcnNlVGltZVN0cmluZyhzdHIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25QYW5lbFZhbHVlQ2hhbmdlKHZhbHVlOiBEYXRlKTogdm9pZCB7XHJcbiAgICB0aGlzLnNldFZhbHVlKHZhbHVlKTtcclxuICAgIHRoaXMuZm9jdXMoKTtcclxuICB9XHJcblxyXG4gIHNldEN1cnJlbnRWYWx1ZUFuZENsb3NlKCk6IHZvaWQge1xyXG4gICAgdGhpcy5lbWl0VmFsdWUodGhpcy52YWx1ZSk7XHJcbiAgICB0aGlzLmNsb3NlKCk7XHJcbiAgfVxyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIC8vIHB1YmxpYyB0ZHNDb25maWdTZXJ2aWNlOiBURFNDb25maWdTZXJ2aWNlLFxyXG4gICAgcHJvdGVjdGVkIGkxOG46IFREU0kxOG5TZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBlbGVtZW50OiBFbGVtZW50UmVmLFxyXG4gICAgcHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIyLFxyXG4gICAgcHJpdmF0ZSBjZHI6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgcHJpdmF0ZSBkYXRlSGVscGVyOiBEYXRlSGVscGVyU2VydmljZSxcclxuICAgIHByaXZhdGUgcGxhdGZvcm06IFBsYXRmb3JtLFxyXG4gICAgcHJpdmF0ZSBlbGVtZW50UmVmOiBFbGVtZW50UmVmLFxyXG4gICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSBkaXJlY3Rpb25hbGl0eTogRGlyZWN0aW9uYWxpdHksXHJcbiAgICBAT3B0aW9uYWwoKSBASW5qZWN0KFREU19GT1JNX0ZJRUxEKSBASG9zdCgpIHB1YmxpYyBfZm9ybUZpZWxkOiBURFNGb3JtRmllbGQsXHJcbiAgICBAT3B0aW9uYWwoKSBAU2VsZigpIHB1YmxpYyBuZ0NvbnRyb2w6IE5nQ29udHJvbCxcclxuICApIHtcclxuICAgIC8vIFRPRE86IG1vdmUgdG8gaG9zdCBhZnRlciBWaWV3IEVuZ2luZSBkZXByZWNhdGlvblxyXG4gICAgdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgndGRzLXBpY2tlcicpO1xyXG4gICAgaWYgKHRoaXMubmdDb250cm9sICE9IG51bGwpIHtcclxuICAgICAgdGhpcy5uZ0NvbnRyb2wudmFsdWVBY2Nlc3NvciA9IHRoaXM7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5fZm9ybUZpZWxkKSB7XHJcbiAgICAgIC8vIHRoaXMuc2l6ZSA9IHRoaXMuX2Zvcm1GaWVsZC5zaXplO1xyXG4gICAgICB0aGlzLnBhcmVudElzRm9ybUZpZWxkID0gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5pbnB1dFNpemUgPSBNYXRoLm1heCg4LCB0aGlzLmZvcm1hdC5sZW5ndGgpICsgMjtcclxuICAgIHRoaXMub3JpZ2luID0gbmV3IENka092ZXJsYXlPcmlnaW4odGhpcy5lbGVtZW50KTtcclxuICAgIC8vY+G6rXAgbmjhuq10IGlucHV0IHZhbHVlIGtoaSBsb2NhbCBjaGFuZ2VcclxuICAgIHRoaXMuaTE4bi5sb2NhbGVDaGFuZ2UucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLnZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5zZXRJbnB1dFZhbHVlKHRoaXMudmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICAgfSk7XHJcbiAgIFxyXG4gICAgdGhpcy5pMThuUGxhY2VIb2xkZXIkID0gdGhpcy5pMThuLmxvY2FsZUNoYW5nZS5waXBlKG1hcCgobG9jYWxlOiBURFNJMThuSW50ZXJmYWNlKSA9PiBsb2NhbGUuVGltZVBpY2tlci5wbGFjZWhvbGRlcikpO1xyXG4gICAgdGhpcy5kaXIgPSB0aGlzLmRpcmVjdGlvbmFsaXR5LnZhbHVlO1xyXG4gICAgdGhpcy5kaXJlY3Rpb25hbGl0eS5jaGFuZ2U/LnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKS5zdWJzY3JpYmUoKGRpcmVjdGlvbjogRGlyZWN0aW9uKSA9PiB7XHJcbiAgICAgIHRoaXMuZGlyID0gZGlyZWN0aW9uO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcclxuICAgIHRoaXMuZGVzdHJveSQubmV4dCgpO1xyXG4gICAgdGhpcy5kZXN0cm95JC5jb21wbGV0ZSgpO1xyXG4gIH1cclxuXHJcbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xyXG4gICAgY29uc3QgeyB1c2UxMkhvdXJzLCBmb3JtYXQsIGRpc2FibGVkLCBhdXRvRm9jdXMgfSA9IGNoYW5nZXM7XHJcbiAgICBpZiAodXNlMTJIb3VycyAmJiAhdXNlMTJIb3Vycy5wcmV2aW91c1ZhbHVlICYmIHVzZTEySG91cnMuY3VycmVudFZhbHVlICYmICFmb3JtYXQpIHtcclxuICAgICAgdGhpcy5mb3JtYXQgPSAnaDptbSBhJztcclxuICAgIH1cclxuICAgIGlmIChkaXNhYmxlZCkge1xyXG4gICAgICBjb25zdCB2YWx1ZSA9IGRpc2FibGVkLmN1cnJlbnRWYWx1ZTtcclxuICAgICAgY29uc3QgaW5wdXQgPSB0aGlzLmlucHV0UmVmLm5hdGl2ZUVsZW1lbnQgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRBdHRyaWJ1dGUoaW5wdXQsICdkaXNhYmxlZCcsICcnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUF0dHJpYnV0ZShpbnB1dCwgJ2Rpc2FibGVkJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChhdXRvRm9jdXMpIHtcclxuICAgICAgdGhpcy51cGRhdGVBdXRvRm9jdXMoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHBhcnNlVGltZVN0cmluZyhzdHI6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLmRhdGVIZWxwZXIucGFyc2VUaW1lKHN0ciwgdGhpcy5mb3JtYXQpIHx8IG51bGw7XHJcbiAgICBpZiAoaXNWYWxpZCh2YWx1ZSkpIHtcclxuICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcclxuICAgIHRoaXMuaXNJbml0ID0gdHJ1ZTtcclxuICAgIHRoaXMudXBkYXRlQXV0b0ZvY3VzKCk7XHJcbiAgfVxyXG5cclxuICB3cml0ZVZhbHVlKHRpbWU6IERhdGUgfCBudWxsIHwgdW5kZWZpbmVkKTogdm9pZCB7XHJcbiAgICBsZXQgcmVzdWx0OiBEYXRlIHwgbnVsbDtcclxuXHJcbiAgICBpZiAodGltZSBpbnN0YW5jZW9mIERhdGUpIHtcclxuICAgICAgcmVzdWx0ID0gdGltZTtcclxuICAgIH0gZWxzZSBpZiAoaXNOaWwodGltZSkpIHtcclxuICAgICAgcmVzdWx0ID0gbnVsbDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignTm9uLURhdGUgdHlwZSBpcyBub3QgcmVjb21tZW5kZWQgZm9yIHRpbWUtcGlja2VyLCB1c2UgXCJEYXRlXCIgdHlwZS4nKTtcclxuICAgICAgcmVzdWx0ID0gbmV3IERhdGUodGltZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zZXRWYWx1ZShyZXN1bHQsIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgcmVnaXN0ZXJPbkNoYW5nZShmbjogKHRpbWU6IERhdGUgfCBudWxsKSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICB0aGlzLl9vbkNoYW5nZSA9IGZuO1xyXG4gIH1cclxuXHJcbiAgcmVnaXN0ZXJPblRvdWNoZWQoZm46ICgpID0+IHZvaWQpOiB2b2lkIHtcclxuICAgIHRoaXMuX29uVG91Y2hlZCA9IGZuO1xyXG4gIH1cclxuXHJcbiAgc2V0RGlzYWJsZWRTdGF0ZShpc0Rpc2FibGVkOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICB0aGlzLmRpc2FibGVkID0gaXNEaXNhYmxlZDtcclxuICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xyXG4gIH1cclxuICBnZXQgZXJyb3JTdGF0ZSgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLm5nQ29udHJvbCAmJiB0aGlzLm5nQ29udHJvbC5lcnJvcnMgIT09IG51bGwgJiYgISF0aGlzLm5nQ29udHJvbC50b3VjaGVkO1xyXG4gIH1cclxuICBzZXREZXNjcmliZWRCeUlkcyhpZHM6IHN0cmluZ1tdKSB7XHJcbiAgICAvLyBpZiAoaWRzLmxlbmd0aCkge1xyXG4gICAgLy8gICB0aGlzLl9lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWRlc2NyaWJlZGJ5JywgaWRzLmpvaW4oJyAnKSk7XHJcbiAgICAvLyB9IGVsc2Uge1xyXG4gICAgLy8gICB0aGlzLl9lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWRlc2NyaWJlZGJ5Jyk7XHJcbiAgICAvLyB9XHJcbiAgfVxyXG4gIG9uQ29udGFpbmVyQ2xpY2soZTogTW91c2VFdmVudCkge1xyXG4gICAgLy8gZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgLy8gZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgfVxyXG59XHJcbiJdfQ==