/**
 * List of classes to add to MatButton instances based on host attributes to
 * style as different variants.
 */
export const BUTTON_HOST_ATTRIBUTES = [
    'tds-button',
    'tds-flat-button',
    'ta-icon-button',
    'ta-raised-button',
    'ta-stroked-button',
];
/** List of classes to add to buttons instances based on host attribute selector. */
export const HOST_SELECTOR_TMT_CLASS_PAIR = [
    {
        selector: 'tds-button',
        tmtClasses: ['focus:outline-none', 'font-semibold', 'box-border', 'ring-opacity-20', 'focus:ring', 'whitespace-nowrap'],
    },
    {
        selector: 'tds-flat-button',
        tmtClasses: ['focus:outline-none', 'rounded-md', 'font-semibold', 'box-border', 'ring-opacity-20', 'focus:ring', 'whitespace-nowrap'],
    },
    {
        selector: 'tds-button-icon',
        tmtClasses: ['focus:outline-none', 'font-semibold', 'border', 'box-border', 'ring-opacity-20', 'focus:ring', 'whitespace-nowrap'],
    },
];
/** Mixin to augment a directive with a `color` property. */
export function mixinButtonColor(base, defaultColor, defaultButtonType) {
    return class extends base {
        constructor(...args) {
            super(...args);
            this.defaultColor = defaultColor;
            this.defaultButtonType = defaultButtonType;
            // Set the default color that can be specified from the mixin.
            this.buttonType = defaultButtonType;
            this.color = defaultColor;
        }
        get buttonType() {
            return this._buttonType;
        }
        set buttonType(val) {
            this._buttonType = val;
        }
        get color() { return this._color; }
        set color(value) {
            if (this.buttonType) {
                const colorPalette = value || this.defaultColor;
                if (colorPalette !== this._color) {
                    if (this._color) {
                        const lstClass = this.getActiveBackgroundColor(this.color);
                        lstClass.forEach(cl => {
                            this._elementRef.nativeElement.classList.remove(cl);
                        });
                    }
                    if (colorPalette) {
                        const lstClass = this.getActiveBackgroundColor(colorPalette);
                        lstClass.forEach(cl => {
                            this._elementRef.nativeElement.classList.add(cl);
                        });
                    }
                    this._color = colorPalette;
                }
            }
        }
        getActiveBackgroundColor(color) {
            let result = [];
            switch (this.buttonType) {
                case "tds-button":
                    result = this.p_DefaultClass(color);
                    break;
                case "tds-flat-button":
                    result = this.p_FlatClass(color);
                    break;
                case "tds-button-icon":
                    result = this.p_ButtonIconClass(color);
                    break;
                default:
                    result = this.p_DefaultClass(color);
                    break;
            }
            return result;
        }
        p_DefaultClass(color) {
            let result = [];
            switch (color) {
                case "primary":
                    result = ['text-white', `ring-primary-1`, `border-primary-1`, `bg-primary-1`, `hover:bg-primary-2`, `focus:bg-primary-1`, `hover:border-primary-2`, `focus:border-primary-1`, `disabled:border-primary-1`, `disabled:bg-primary-1`, 'disabled:opacity-65'];
                    break;
                case "secondary":
                    result = ['text-neutral-1-900', 'dark:text-d-neutral-1-900', 'text-body-2', 'ring-primary-1', 'border-neutral-2-200', 'dark:border-d-neutral-2-200', 'bg-white', 'hover:bg-neutral-3-50', 'focus:bg-white', 'dark:focus:bg-d-neutral-3-300', 'focus:border-primary-1', 'dark:focus:border-primary-1', 'disabled:text-neutral-1-300', 'disabled:border-neutral-2-200', 'disabled:bg-neutral-3-50',
                        'dark:disabled:text-d-neutral-1-300', 'dark:disabled:border-d-neutral-2-200', 'dark:disabled:bg-d-neutral-3-200',
                        'dark:bg-d-neutral-3-300', 'dark:hover:bg-d-neutral-3-400'];
                    break;
                case 'info':
                    result = ['text-white', `ring-info-400`, `border-info-400`, `bg-info-400`, `hover:bg-info-500`, `focus:bg-info-400`, `hover:border-info-500`, `focus:border-info-400`, `disabled:border-info-400`, `disabled:bg-info-400`, 'disabled:opacity-65'];
                    break;
                case 'success':
                    result = ['text-white', `ring-success-400`, `border-success-400`, `bg-success-400`, `hover:bg-success-500`, `focus:bg-success-400`, `hover:border-success-500`, `focus:border-success-400`, `disabled:border-success-400`, `disabled:bg-success-400`, 'disabled:opacity-65'];
                    break;
                case 'warning':
                    result = ['text-white', `ring-warning-400`, `border-warning-400`, `bg-warning-400`, `hover:bg-warning-500`, `focus:bg-warning-400`, `hover:border-warning-500`, `focus:border-warning-400`, `disabled:border-warning-400`, `disabled:bg-warning-400`, 'disabled:opacity-65'];
                    break;
                case 'error':
                    result = ['text-white', `ring-error-400`, `border-error-400`, `bg-error-400`, `hover:bg-error-500`, `focus:bg-error-400`, `hover:border-error-500`, `focus:border-error-400`, `disabled:border-error-400`, `disabled:bg-error-400`, 'disabled:opacity-65'];
                    break;
                default:
                    result = ['text-white', `ring-${color}-400`, `border-${color}-400`, `bg-${color}-400`, `hover:bg-${color}-500`, `focus:bg-${color}-400`, `hover:border-${color}-500`, `focus:border-${color}-400`, `disabled:border-${color}-400`, `disabled:bg-${color}-400`, 'disabled:opacity-65'];
                    break;
            }
            return result;
        }
        p_ButtonIconClass(color) {
            let result = [];
            switch (color) {
                case "primary":
                    result = ['text-white', `ring-primary-1`, `border-primary-1`, `bg-primary-1`, `hover:bg-primary-2`, `hover:border-primary-2`, `focus:bg-primary-1`, `focus:border-primary-1`, `disabled:border-primary-1`, `disabled:bg-primary-1`, 'disabled:opacity-65'];
                    break;
                case "secondary":
                    result = ['text-neutral-1-500', 'ring-primary-1', 'border-neutral-2-200', 'bg-white', 'hover:bg-neutral-3-50', 'focus:bg-white', 'focus:border-primary-1', 'disabled:text-neutral-1-300', 'disabled:border-neutral-2-200', 'disabled:bg-neutral-3-50',
                        'dark:text-d-neutral-1-500', 'dark:border-d-neutral-2-200', 'dark:bg-d-neutral-3-200', 'dark:hover:bg-d-neutral-3-400', 'dark:focus:bg-d-neutral-3-300', 'dark:focus:border-primary-1', 'dark:disabled:text-d-neutral-1-300', 'dark:disabled:border-d-neutral-2-200', 'disabled:bg-d-neutral-3-200',
                    ];
                    break;
                default:
                    result = ['text-white', `ring-${color}-400`, `border-${color}-400`, `bg-${color}-400`, `hover:border-${color}-500`, `hover:bg-${color}-500`, `focus:bg-${color}-400`, `focus:border-${color}-400`, `disabled:border-${color}-400`, `disabled:bg-${color}-400`, 'disabled:opacity-65'];
                    break;
            }
            return result;
        }
        p_FlatClass(color) {
            let result = [];
            // switch (color) {
            //     default:
            result = [`text-body-2`, `focus:bg-neutral-3-50`, `ring-primary-1`, 'disabled:opacity-65', 'text-neutral-1-900', 'dark:text-d-neutral-1-900', 'dark:hover:bg-d-neutral-3-200', `dark:focus:bg-d-neutral-3-50`];
            //         break;
            // }
            return result;
        }
    };
}
export function mixinButtonSize(base, defaultSize) {
    return class extends base {
        constructor(...args) {
            super(...args);
            this.defaultSize = defaultSize;
            // Set the default color that can be specified from the mixin.
            this.size = defaultSize;
        }
        get size() { return this._size; }
        set size(value) {
            const _size = value || this.defaultSize;
            if (_size !== this._size) {
                if (this._size) {
                    const lstClass = this.getClassbySize(this._size);
                    lstClass.forEach(cl => {
                        this._elementRef.nativeElement.classList.remove(cl);
                    });
                }
                if (_size) {
                    const lstClass = this.getClassbySize(_size);
                    lstClass.forEach(cl => {
                        this._elementRef.nativeElement.classList.add(cl);
                    });
                }
                this._size = defaultSize;
            }
        }
        getClassbySize(size) {
            let result = [];
            switch (size) {
                case "sm":
                    result = ['py-1', 'px-2.5', 'text-body-2', 'h-sm'];
                    break;
                case "md":
                    result = ['py-1.5', 'px-3', 'text-body-2', 'h-md'];
                    break;
                case "lg":
                    result = ['py-2', 'px-4', 'text-body-2', 'h-lg'];
                    break;
            }
            return result;
        }
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnV0dG9uLmNvbG9yLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvdGRzLXVpL2J1dHRvbi9idXR0b24uY29sb3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBU0E7OztHQUdHO0FBQ0gsTUFBTSxDQUFDLE1BQU0sc0JBQXNCLEdBQUc7SUFDbEMsWUFBWTtJQUNaLGlCQUFpQjtJQUNqQixnQkFBZ0I7SUFDaEIsa0JBQWtCO0lBQ2xCLG1CQUFtQjtDQUN0QixDQUFDO0FBRUYsb0ZBQW9GO0FBQ3BGLE1BQU0sQ0FBQyxNQUFNLDRCQUE0QixHQUFxRDtJQUMxRjtRQUNJLFFBQVEsRUFBRSxZQUFZO1FBQ3RCLFVBQVUsRUFBRSxDQUFDLG9CQUFvQixFQUFFLGVBQWUsRUFBRSxZQUFZLEVBQUUsaUJBQWlCLEVBQUUsWUFBWSxFQUFFLG1CQUFtQixDQUFDO0tBQzFIO0lBQ0Q7UUFDSSxRQUFRLEVBQUUsaUJBQWlCO1FBQzNCLFVBQVUsRUFBRSxDQUFDLG9CQUFvQixFQUFFLFlBQVksRUFBRSxlQUFlLEVBQUUsWUFBWSxFQUFFLGlCQUFpQixFQUFFLFlBQVksRUFBRSxtQkFBbUIsQ0FBQztLQUN4STtJQUNEO1FBQ0ksUUFBUSxFQUFFLGlCQUFpQjtRQUMzQixVQUFVLEVBQUUsQ0FBQyxvQkFBb0IsRUFBRSxlQUFlLEVBQUUsUUFBUSxFQUFFLFlBQVksRUFBRSxpQkFBaUIsRUFBRSxZQUFZLEVBQUUsbUJBQW1CLENBQUM7S0FDcEk7Q0FFSixDQUFDO0FBaUJGLDREQUE0RDtBQUM1RCxNQUFNLFVBQVUsZ0JBQWdCLENBQzVCLElBQU8sRUFBRSxZQUE4QixFQUFFLGlCQUE4QjtJQUN2RSxPQUFPLEtBQU0sU0FBUSxJQUFJO1FBa0NyQixZQUFZLEdBQUcsSUFBVztZQUN0QixLQUFLLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztZQWhDbkIsaUJBQVksR0FBRyxZQUFZLENBQUM7WUFDNUIsc0JBQWlCLEdBQUcsaUJBQWlC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bXBvcnQgeyBCdXR0b25TaXplIH0gZnJvbSAndGRzLXVpL2NvcmUvY29uZmlnJztcclxuaW1wb3J0IHtcclxuICAgIENvbnN0cnVjdG9yLFxyXG4gICAgSGFzRWxlbWVudFJlZiwgICAgXHJcbiAgICBURFNUaGVtZVBhbGV0dGVcclxufSBmcm9tICd0ZHMtdWkvc2hhcmVkL2NvbW1vbic7XHJcbmltcG9ydCB7IFREU1NhZmVBbnkgfSBmcm9tICd0ZHMtdWkvc2hhcmVkL3V0aWxpdHknO1xyXG5cclxuLyoqXHJcbiAqIExpc3Qgb2YgY2xhc3NlcyB0byBhZGQgdG8gTWF0QnV0dG9uIGluc3RhbmNlcyBiYXNlZCBvbiBob3N0IGF0dHJpYnV0ZXMgdG9cclxuICogc3R5bGUgYXMgZGlmZmVyZW50IHZhcmlhbnRzLlxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IEJVVFRPTl9IT1NUX0FUVFJJQlVURVMgPSBbXHJcbiAgICAndGRzLWJ1dHRvbicsXHJcbiAgICAndGRzLWZsYXQtYnV0dG9uJyxcclxuICAgICd0YS1pY29uLWJ1dHRvbicsXHJcbiAgICAndGEtcmFpc2VkLWJ1dHRvbicsXHJcbiAgICAndGEtc3Ryb2tlZC1idXR0b24nLFxyXG5dO1xyXG5cclxuLyoqIExpc3Qgb2YgY2xhc3NlcyB0byBhZGQgdG8gYnV0dG9ucyBpbnN0YW5jZXMgYmFzZWQgb24gaG9zdCBhdHRyaWJ1dGUgc2VsZWN0b3IuICovXHJcbmV4cG9ydCBjb25zdCBIT1NUX1NFTEVDVE9SX1RNVF9DTEFTU19QQUlSOiB7IHNlbGVjdG9yOiBCdXR0b25UeXBlLCB0bXRDbGFzc2VzOiBzdHJpbmdbXSB9W10gPSBbXHJcbiAgICB7XHJcbiAgICAgICAgc2VsZWN0b3I6ICd0ZHMtYnV0dG9uJyxcclxuICAgICAgICB0bXRDbGFzc2VzOiBbJ2ZvY3VzOm91dGxpbmUtbm9uZScsICdmb250LXNlbWlib2xkJywgJ2JveC1ib3JkZXInLCAncmluZy1vcGFjaXR5LTIwJywgJ2ZvY3VzOnJpbmcnLCAnd2hpdGVzcGFjZS1ub3dyYXAnXSxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgc2VsZWN0b3I6ICd0ZHMtZmxhdC1idXR0b24nLFxyXG4gICAgICAgIHRtdENsYXNzZXM6IFsnZm9jdXM6b3V0bGluZS1ub25lJywgJ3JvdW5kZWQtbWQnLCAnZm9udC1zZW1pYm9sZCcsICdib3gtYm9yZGVyJywgJ3Jpbmctb3BhY2l0eS0yMCcsICdmb2N1czpyaW5nJywgJ3doaXRlc3BhY2Utbm93cmFwJ10sXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIHNlbGVjdG9yOiAndGRzLWJ1dHRvbi1pY29uJyxcclxuICAgICAgICB0bXRDbGFzc2VzOiBbJ2ZvY3VzOm91dGxpbmUtbm9uZScsICdmb250LXNlbWlib2xkJywgJ2JvcmRlcicsICdib3gtYm9yZGVyJywgJ3Jpbmctb3BhY2l0eS0yMCcsICdmb2N1czpyaW5nJywgJ3doaXRlc3BhY2Utbm93cmFwJ10sXHJcbiAgICB9LFxyXG5cclxuXTtcclxuXHJcbmV4cG9ydCB0eXBlIEJ1dHRvblR5cGUgPSAndGRzLWJ1dHRvbicgfCAndGRzLWZsYXQtYnV0dG9uJyB8ICd0ZHMtYnV0dG9uLWljb24nIHwgdW5kZWZpbmVkO1xyXG5leHBvcnQgaW50ZXJmYWNlIENhbkJ1dHRvbkNvbG9yIHtcclxuICAgIGJ1dHRvblR5cGU6IEJ1dHRvblR5cGU7XHJcbiAgICBkZWZhdWx0QnV0dG9uVHlwZTogQnV0dG9uVHlwZSB8IHVuZGVmaW5lZDtcclxuICAgIC8qKiBUaGVtZSBjb2xvciBwYWxldHRlIGZvciB0aGUgY29tcG9uZW50LiAqL1xyXG4gICAgY29sb3I6IFREU1RoZW1lUGFsZXR0ZTtcclxuXHJcbiAgICAvKiogRGVmYXVsdCBjb2xvciB0byBmYWxsIGJhY2sgdG8gaWYgbm8gdmFsdWUgaXMgc2V0LiAqL1xyXG4gICAgZGVmYXVsdENvbG9yOiBURFNUaGVtZVBhbGV0dGUgfCB1bmRlZmluZWQ7XHJcblxyXG59XHJcblxyXG4vKiogQGRvY3MtcHJpdmF0ZSAqL1xyXG5leHBvcnQgdHlwZSBDYW5CdXR0b25Db2xvckN0b3IgPSBDb25zdHJ1Y3RvcjxDYW5CdXR0b25Db2xvcj47XHJcblxyXG4vKiogTWl4aW4gdG8gYXVnbWVudCBhIGRpcmVjdGl2ZSB3aXRoIGEgYGNvbG9yYCBwcm9wZXJ0eS4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIG1peGluQnV0dG9uQ29sb3I8VCBleHRlbmRzIENvbnN0cnVjdG9yPEhhc0VsZW1lbnRSZWY+PihcclxuICAgIGJhc2U6IFQsIGRlZmF1bHRDb2xvcj86IFREU1RoZW1lUGFsZXR0ZSwgZGVmYXVsdEJ1dHRvblR5cGU/OiBCdXR0b25UeXBlKTogQ2FuQnV0dG9uQ29sb3JDdG9yICYgVCB7XHJcbiAgICByZXR1cm4gY2xhc3MgZXh0ZW5kcyBiYXNlIHtcclxuICAgICAgICBwcml2YXRlIF9jb2xvcjogVERTVGhlbWVQYWxldHRlO1xyXG4gICAgICAgIHByaXZhdGUgX2J1dHRvblR5cGU6IEJ1dHRvblR5cGU7XHJcbiAgICAgICAgZGVmYXVsdENvbG9yID0gZGVmYXVsdENvbG9yO1xyXG4gICAgICAgIGRlZmF1bHRCdXR0b25UeXBlID0gZGVmYXVsdEJ1dHRvblR5cGU7XHJcbiAgICAgICAgZ2V0IGJ1dHRvblR5cGUoKTogQnV0dG9uVHlwZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9idXR0b25UeXBlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZXQgYnV0dG9uVHlwZSh2YWw6IEJ1dHRvblR5cGUpIHtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uVHlwZSA9IHZhbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZ2V0IGNvbG9yKCk6IFREU1RoZW1lUGFsZXR0ZSB7IHJldHVybiB0aGlzLl9jb2xvcjsgfVxyXG4gICAgICAgIHNldCBjb2xvcih2YWx1ZTogVERTVGhlbWVQYWxldHRlKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5idXR0b25UeXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb2xvclBhbGV0dGUgPSB2YWx1ZSB8fCB0aGlzLmRlZmF1bHRDb2xvcjtcclxuICAgICAgICAgICAgICAgIGlmIChjb2xvclBhbGV0dGUgIT09IHRoaXMuX2NvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2NvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxzdENsYXNzID0gdGhpcy5nZXRBY3RpdmVCYWNrZ3JvdW5kQ29sb3IodGhpcy5jb2xvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxzdENsYXNzLmZvckVhY2goY2wgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY2wpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbG9yUGFsZXR0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsc3RDbGFzcyA9IHRoaXMuZ2V0QWN0aXZlQmFja2dyb3VuZENvbG9yKGNvbG9yUGFsZXR0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxzdENsYXNzLmZvckVhY2goY2wgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LmNsYXNzTGlzdC5hZGQoY2wpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29sb3IgPSBjb2xvclBhbGV0dGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKC4uLmFyZ3M6IGFueVtdKSB7XHJcbiAgICAgICAgICAgIHN1cGVyKC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICAvLyBTZXQgdGhlIGRlZmF1bHQgY29sb3IgdGhhdCBjYW4gYmUgc3BlY2lmaWVkIGZyb20gdGhlIG1peGluLlxyXG5cclxuICAgICAgICAgICAgdGhpcy5idXR0b25UeXBlID0gZGVmYXVsdEJ1dHRvblR5cGU7XHJcbiAgICAgICAgICAgIHRoaXMuY29sb3IgPSBkZWZhdWx0Q29sb3I7XHJcblxyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgZ2V0QWN0aXZlQmFja2dyb3VuZENvbG9yKGNvbG9yOiBURFNUaGVtZVBhbGV0dGUgfCBURFNTYWZlQW55KSB7XHJcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBbXTtcclxuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmJ1dHRvblR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJ0ZHMtYnV0dG9uXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wX0RlZmF1bHRDbGFzcyhjb2xvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwidGRzLWZsYXQtYnV0dG9uXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wX0ZsYXRDbGFzcyhjb2xvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwidGRzLWJ1dHRvbi1pY29uXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wX0J1dHRvbkljb25DbGFzcyhjb2xvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucF9EZWZhdWx0Q2xhc3MoY29sb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByaXZhdGUgcF9EZWZhdWx0Q2xhc3MoY29sb3I6IHN0cmluZykge1xyXG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gW107XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKGNvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwicHJpbWFyeVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFsndGV4dC13aGl0ZScsIGByaW5nLXByaW1hcnktMWAsIGBib3JkZXItcHJpbWFyeS0xYCwgYGJnLXByaW1hcnktMWAsIGBob3ZlcjpiZy1wcmltYXJ5LTJgLCBgZm9jdXM6YmctcHJpbWFyeS0xYCwgYGhvdmVyOmJvcmRlci1wcmltYXJ5LTJgLCBgZm9jdXM6Ym9yZGVyLXByaW1hcnktMWAsIGBkaXNhYmxlZDpib3JkZXItcHJpbWFyeS0xYCwgYGRpc2FibGVkOmJnLXByaW1hcnktMWAsICdkaXNhYmxlZDpvcGFjaXR5LTY1J107XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwic2Vjb25kYXJ5XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gWyd0ZXh0LW5ldXRyYWwtMS05MDAnLCdkYXJrOnRleHQtZC1uZXV0cmFsLTEtOTAwJywndGV4dC1ib2R5LTInLCAncmluZy1wcmltYXJ5LTEnLCAnYm9yZGVyLW5ldXRyYWwtMi0yMDAnLCdkYXJrOmJvcmRlci1kLW5ldXRyYWwtMi0yMDAnLCAgJ2JnLXdoaXRlJywgJ2hvdmVyOmJnLW5ldXRyYWwtMy01MCcsICdmb2N1czpiZy13aGl0ZScsICdkYXJrOmZvY3VzOmJnLWQtbmV1dHJhbC0zLTMwMCcsJ2ZvY3VzOmJvcmRlci1wcmltYXJ5LTEnLCAnZGFyazpmb2N1czpib3JkZXItcHJpbWFyeS0xJywgJ2Rpc2FibGVkOnRleHQtbmV1dHJhbC0xLTMwMCcsICdkaXNhYmxlZDpib3JkZXItbmV1dHJhbC0yLTIwMCcsICdkaXNhYmxlZDpiZy1uZXV0cmFsLTMtNTAnLFxyXG4gICAgICAgICAgICAgICAgICAgICdkYXJrOmRpc2FibGVkOnRleHQtZC1uZXV0cmFsLTEtMzAwJywgJ2Rhcms6ZGlzYWJsZWQ6Ym9yZGVyLWQtbmV1dHJhbC0yLTIwMCcsICdkYXJrOmRpc2FibGVkOmJnLWQtbmV1dHJhbC0zLTIwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2Rhcms6YmctZC1uZXV0cmFsLTMtMzAwJywnZGFyazpob3ZlcjpiZy1kLW5ldXRyYWwtMy00MDAnXTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2luZm8nOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFsndGV4dC13aGl0ZScsIGByaW5nLWluZm8tNDAwYCwgYGJvcmRlci1pbmZvLTQwMGAsIGBiZy1pbmZvLTQwMGAsIGBob3ZlcjpiZy1pbmZvLTUwMGAsIGBmb2N1czpiZy1pbmZvLTQwMGAsIGBob3Zlcjpib3JkZXItaW5mby01MDBgLCBgZm9jdXM6Ym9yZGVyLWluZm8tNDAwYCwgYGRpc2FibGVkOmJvcmRlci1pbmZvLTQwMGAsIGBkaXNhYmxlZDpiZy1pbmZvLTQwMGAsICdkaXNhYmxlZDpvcGFjaXR5LTY1J107XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdzdWNjZXNzJzpcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBbJ3RleHQtd2hpdGUnLCBgcmluZy1zdWNjZXNzLTQwMGAsIGBib3JkZXItc3VjY2Vzcy00MDBgLCBgYmctc3VjY2Vzcy00MDBgLCBgaG92ZXI6Ymctc3VjY2Vzcy01MDBgLCBgZm9jdXM6Ymctc3VjY2Vzcy00MDBgLCBgaG92ZXI6Ym9yZGVyLXN1Y2Nlc3MtNTAwYCwgYGZvY3VzOmJvcmRlci1zdWNjZXNzLTQwMGAsIGBkaXNhYmxlZDpib3JkZXItc3VjY2Vzcy00MDBgLCBgZGlzYWJsZWQ6Ymctc3VjY2Vzcy00MDBgLCAnZGlzYWJsZWQ6b3BhY2l0eS02NSddO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnd2FybmluZyc6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gWyd0ZXh0LXdoaXRlJywgYHJpbmctd2FybmluZy00MDBgLCBgYm9yZGVyLXdhcm5pbmctNDAwYCwgYGJnLXdhcm5pbmctNDAwYCwgYGhvdmVyOmJnLXdhcm5pbmctNTAwYCwgYGZvY3VzOmJnLXdhcm5pbmctNDAwYCwgYGhvdmVyOmJvcmRlci13YXJuaW5nLTUwMGAsIGBmb2N1czpib3JkZXItd2FybmluZy00MDBgLCBgZGlzYWJsZWQ6Ym9yZGVyLXdhcm5pbmctNDAwYCwgYGRpc2FibGVkOmJnLXdhcm5pbmctNDAwYCwgJ2Rpc2FibGVkOm9wYWNpdHktNjUnXTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2Vycm9yJzpcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBbJ3RleHQtd2hpdGUnLCBgcmluZy1lcnJvci00MDBgLCBgYm9yZGVyLWVycm9yLTQwMGAsIGBiZy1lcnJvci00MDBgLCBgaG92ZXI6YmctZXJyb3ItNTAwYCwgYGZvY3VzOmJnLWVycm9yLTQwMGAsIGBob3Zlcjpib3JkZXItZXJyb3ItNTAwYCwgYGZvY3VzOmJvcmRlci1lcnJvci00MDBgLCBgZGlzYWJsZWQ6Ym9yZGVyLWVycm9yLTQwMGAsIGBkaXNhYmxlZDpiZy1lcnJvci00MDBgLCAnZGlzYWJsZWQ6b3BhY2l0eS02NSddO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBbJ3RleHQtd2hpdGUnLCBgcmluZy0ke2NvbG9yfS00MDBgLCBgYm9yZGVyLSR7Y29sb3J9LTQwMGAsIGBiZy0ke2NvbG9yfS00MDBgLCBgaG92ZXI6YmctJHtjb2xvcn0tNTAwYCwgYGZvY3VzOmJnLSR7Y29sb3J9LTQwMGAsIGBob3Zlcjpib3JkZXItJHtjb2xvcn0tNTAwYCwgYGZvY3VzOmJvcmRlci0ke2NvbG9yfS00MDBgLCBgZGlzYWJsZWQ6Ym9yZGVyLSR7Y29sb3J9LTQwMGAsIGBkaXNhYmxlZDpiZy0ke2NvbG9yfS00MDBgLCAnZGlzYWJsZWQ6b3BhY2l0eS02NSddO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByaXZhdGUgcF9CdXR0b25JY29uQ2xhc3MoY29sb3I6IHN0cmluZykge1xyXG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gW107XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKGNvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwicHJpbWFyeVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFsndGV4dC13aGl0ZScsIGByaW5nLXByaW1hcnktMWAsIGBib3JkZXItcHJpbWFyeS0xYCwgYGJnLXByaW1hcnktMWAsIGBob3ZlcjpiZy1wcmltYXJ5LTJgLCBgaG92ZXI6Ym9yZGVyLXByaW1hcnktMmAsIGBmb2N1czpiZy1wcmltYXJ5LTFgLCBgZm9jdXM6Ym9yZGVyLXByaW1hcnktMWAsIGBkaXNhYmxlZDpib3JkZXItcHJpbWFyeS0xYCwgYGRpc2FibGVkOmJnLXByaW1hcnktMWAsICdkaXNhYmxlZDpvcGFjaXR5LTY1J107XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwic2Vjb25kYXJ5XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gWyd0ZXh0LW5ldXRyYWwtMS01MDAnLCAncmluZy1wcmltYXJ5LTEnLCAnYm9yZGVyLW5ldXRyYWwtMi0yMDAnLCAnYmctd2hpdGUnLCdob3ZlcjpiZy1uZXV0cmFsLTMtNTAnLCAnZm9jdXM6Ymctd2hpdGUnLCAnZm9jdXM6Ym9yZGVyLXByaW1hcnktMScsICdkaXNhYmxlZDp0ZXh0LW5ldXRyYWwtMS0zMDAnLCAnZGlzYWJsZWQ6Ym9yZGVyLW5ldXRyYWwtMi0yMDAnLCAnZGlzYWJsZWQ6YmctbmV1dHJhbC0zLTUwJyxcclxuICAgICAgICAgICAgICAgICAgICAnZGFyazp0ZXh0LWQtbmV1dHJhbC0xLTUwMCcsJ2Rhcms6Ym9yZGVyLWQtbmV1dHJhbC0yLTIwMCcsICdkYXJrOmJnLWQtbmV1dHJhbC0zLTIwMCcsICdkYXJrOmhvdmVyOmJnLWQtbmV1dHJhbC0zLTQwMCcsICdkYXJrOmZvY3VzOmJnLWQtbmV1dHJhbC0zLTMwMCcsICdkYXJrOmZvY3VzOmJvcmRlci1wcmltYXJ5LTEnLCAnZGFyazpkaXNhYmxlZDp0ZXh0LWQtbmV1dHJhbC0xLTMwMCcsICdkYXJrOmRpc2FibGVkOmJvcmRlci1kLW5ldXRyYWwtMi0yMDAnLCAnZGlzYWJsZWQ6YmctZC1uZXV0cmFsLTMtMjAwJywgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBbJ3RleHQtd2hpdGUnLCBgcmluZy0ke2NvbG9yfS00MDBgLCBgYm9yZGVyLSR7Y29sb3J9LTQwMGAsIGBiZy0ke2NvbG9yfS00MDBgLCBgaG92ZXI6Ym9yZGVyLSR7Y29sb3J9LTUwMGAsIGBob3ZlcjpiZy0ke2NvbG9yfS01MDBgLCBgZm9jdXM6YmctJHtjb2xvcn0tNDAwYCwgYGZvY3VzOmJvcmRlci0ke2NvbG9yfS00MDBgLCBgZGlzYWJsZWQ6Ym9yZGVyLSR7Y29sb3J9LTQwMGAsIGBkaXNhYmxlZDpiZy0ke2NvbG9yfS00MDBgLCAnZGlzYWJsZWQ6b3BhY2l0eS02NSddO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByaXZhdGUgcF9GbGF0Q2xhc3MoY29sb3I6IHN0cmluZykge1xyXG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gW107XHJcbiAgICAgICAgICAgIC8vIHN3aXRjaCAoY29sb3IpIHtcclxuXHJcbiAgICAgICAgICAgIC8vICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXN1bHQgPSBbYHRleHQtYm9keS0yYCwgYGZvY3VzOmJnLW5ldXRyYWwtMy01MGAsIGByaW5nLXByaW1hcnktMWAsICdkaXNhYmxlZDpvcGFjaXR5LTY1JywgJ3RleHQtbmV1dHJhbC0xLTkwMCcsJ2Rhcms6dGV4dC1kLW5ldXRyYWwtMS05MDAnLCdkYXJrOmhvdmVyOmJnLWQtbmV1dHJhbC0zLTIwMCcsYGRhcms6Zm9jdXM6YmctZC1uZXV0cmFsLTMtNTBgXTtcclxuICAgICAgICAgICAgLy8gICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2FuQnV0dG9uU2l6ZSB7XHJcblxyXG5cclxuICAgIC8qKiBzaXplIGZvciB0aGUgY29tcG9uZW50LiAqL1xyXG4gICAgc2l6ZTogQnV0dG9uU2l6ZTtcclxuXHJcbiAgICAvKiogRGVmYXVsdCBzaXplIHRvIGZhbGwgYmFjayB0byBpZiBubyB2YWx1ZSBpcyBzZXQuICovXHJcbiAgICBkZWZhdWx0U2l6ZTogQnV0dG9uU2l6ZSB8IHVuZGVmaW5lZDtcclxuXHJcbn1cclxuZXhwb3J0IHR5cGUgQ2FuQnV0dG9uU2l6ZUN0b3IgPSBDb25zdHJ1Y3RvcjxDYW5CdXR0b25TaXplPjtcclxuZXhwb3J0IGZ1bmN0aW9uIG1peGluQnV0dG9uU2l6ZTxUIGV4dGVuZHMgQ29uc3RydWN0b3I8SGFzRWxlbWVudFJlZj4+KFxyXG4gICAgYmFzZTogVCwgZGVmYXVsdFNpemU/OiBCdXR0b25TaXplKTogQ2FuQnV0dG9uU2l6ZUN0b3IgJiBUIHtcclxuICAgIHJldHVybiBjbGFzcyBleHRlbmRzIGJhc2Uge1xyXG4gICAgICAgIHByaXZhdGUgX3NpemU6IEJ1dHRvblNpemU7XHJcbiAgICAgICAgZGVmYXVsdFNpemUgPSBkZWZhdWx0U2l6ZTtcclxuXHJcbiAgICAgICAgZ2V0IHNpemUoKTogQnV0dG9uU2l6ZSB7IHJldHVybiB0aGlzLl9zaXplOyB9XHJcbiAgICAgICAgc2V0IHNpemUodmFsdWU6IEJ1dHRvblNpemUpIHtcclxuICAgICAgICAgICAgY29uc3QgX3NpemUgPSB2YWx1ZSB8fCB0aGlzLmRlZmF1bHRTaXplO1xyXG4gICAgICAgICAgICBpZiAoX3NpemUgIT09IHRoaXMuX3NpemUpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9zaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbHN0Q2xhc3MgPSB0aGlzLmdldENsYXNzYnlTaXplKHRoaXMuX3NpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxzdENsYXNzLmZvckVhY2goY2wgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoX3NpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsc3RDbGFzcyA9IHRoaXMuZ2V0Q2xhc3NieVNpemUoX3NpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxzdENsYXNzLmZvckVhY2goY2wgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zaXplID0gZGVmYXVsdFNpemU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKC4uLmFyZ3M6IGFueVtdKSB7XHJcbiAgICAgICAgICAgIHN1cGVyKC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICAvLyBTZXQgdGhlIGRlZmF1bHQgY29sb3IgdGhhdCBjYW4gYmUgc3BlY2lmaWVkIGZyb20gdGhlIG1peGluLlxyXG4gICAgICAgICAgICB0aGlzLnNpemUgPSBkZWZhdWx0U2l6ZTtcclxuXHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBnZXRDbGFzc2J5U2l6ZShzaXplOiBCdXR0b25TaXplKTogQXJyYXk8c3RyaW5nPiB7XHJcbiAgICAgICAgICAgIGxldCByZXN1bHQ6IEFycmF5PHN0cmluZz4gPSBbXTtcclxuICAgICAgICAgICAgc3dpdGNoIChzaXplKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwic21cIjpcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBbJ3B5LTEnLCAncHgtMi41JywgJ3RleHQtYm9keS0yJywgJ2gtc20nXVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIm1kXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gWydweS0xLjUnLCAncHgtMycsICd0ZXh0LWJvZHktMicsICdoLW1kJ11cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJsZ1wiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFsncHktMicsICdweC00JywgJ3RleHQtYm9keS0yJywgJ2gtbGcnXVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0iXX0=