import { __decorate } from "tslib";
import { ChangeDetectionStrategy, Component, ContentChildren, Directive, Input, Optional, ViewEncapsulation } from '@angular/core';
import { merge, Subject } from 'rxjs';
import { map, mergeMap, startWith, switchMap, takeUntil } from 'rxjs/operators';
import { InputBoolean } from 'tds-ui/shared/utility';
import { TDSInputDirective } from './input.directive';
import * as i0 from "@angular/core";
import * as i1 from "@angular/cdk/a11y";
import * as i2 from "@angular/cdk/bidi";
import * as i3 from "@angular/common";
import * as i4 from "./input-group-slot.component";
function TDSInputGroupComponent_span_0_span_1_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelement(0, "span", 7);
} if (rf & 2) {
    const ctx_r7 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("icon", ctx_r7.tdsAddOnBeforeIcon)("template", ctx_r7.tdsAddOnBefore);
} }
function TDSInputGroupComponent_span_0_span_2_ng_template_1_Template(rf, ctx) { }
function TDSInputGroupComponent_span_0_span_2_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "span", 8);
    i0.ɵɵtemplate(1, TDSInputGroupComponent_span_0_span_2_ng_template_1_Template, 0, 0, "ng-template", 9);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r8 = i0.ɵɵnextContext(2);
    const _r3 = i0.ɵɵreference(4);
    i0.ɵɵclassProp("tds-input-affix-wrapper-disabled", ctx_r8.disabled)("tds-input-affix-wrapper-sm", ctx_r8.isSmall)("tds-input-affix-wrapper-lg", ctx_r8.isLarge);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngTemplateOutlet", _r3);
} }
function TDSInputGroupComponent_span_0_span_3_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelement(0, "span", 7);
} if (rf & 2) {
    const ctx_r9 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("icon", ctx_r9.tdsAddOnAfterIcon)("template", ctx_r9.tdsAddOnAfter);
} }
function TDSInputGroupComponent_span_0_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "span", 4);
    i0.ɵɵtemplate(1, TDSInputGroupComponent_span_0_span_1_Template, 1, 2, "span", 5);
    i0.ɵɵtemplate(2, TDSInputGroupComponent_span_0_span_2_Template, 2, 7, "span", 6);
    i0.ɵɵtemplate(3, TDSInputGroupComponent_span_0_span_3_Template, 1, 2, "span", 5);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r0 = i0.ɵɵnextContext();
    const _r5 = i0.ɵɵreference(6);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngIf", ctx_r0.tdsAddOnBefore || ctx_r0.tdsAddOnBeforeIcon);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngIf", ctx_r0.isAffix)("ngIfElse", _r5);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngIf", ctx_r0.tdsAddOnAfter || ctx_r0.tdsAddOnAfterIcon);
} }
function TDSInputGroupComponent_ng_template_1_ng_template_0_ng_template_0_Template(rf, ctx) { }
function TDSInputGroupComponent_ng_template_1_ng_template_0_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵtemplate(0, TDSInputGroupComponent_ng_template_1_ng_template_0_ng_template_0_Template, 0, 0, "ng-template", 9);
} if (rf & 2) {
    i0.ɵɵnextContext(2);
    const _r3 = i0.ɵɵreference(4);
    i0.ɵɵproperty("ngTemplateOutlet", _r3);
} }
function TDSInputGroupComponent_ng_template_1_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵtemplate(0, TDSInputGroupComponent_ng_template_1_ng_template_0_Template, 1, 1, "ng-template", 10);
} if (rf & 2) {
    const ctx_r2 = i0.ɵɵnextContext();
    const _r5 = i0.ɵɵreference(6);
    i0.ɵɵproperty("ngIf", ctx_r2.isAffix)("ngIfElse", _r5);
} }
function TDSInputGroupComponent_ng_template_3_span_0_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelement(0, "span", 13);
} if (rf & 2) {
    const ctx_r13 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("icon", ctx_r13.tdsPrefixIcon)("template", ctx_r13.tdsPrefix);
} }
function TDSInputGroupComponent_ng_template_3_ng_template_1_Template(rf, ctx) { }
function TDSInputGroupComponent_ng_template_3_span_2_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelement(0, "span", 14);
} if (rf & 2) {
    const ctx_r15 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("icon", ctx_r15.tdsSuffixIcon)("template", ctx_r15.tdsSuffix);
} }
function TDSInputGroupComponent_ng_template_3_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵtemplate(0, TDSInputGroupComponent_ng_template_3_span_0_Template, 1, 2, "span", 11);
    i0.ɵɵtemplate(1, TDSInputGroupComponent_ng_template_3_ng_template_1_Template, 0, 0, "ng-template", 9);
    i0.ɵɵtemplate(2, TDSInputGroupComponent_ng_template_3_span_2_Template, 1, 2, "span", 12);
} if (rf & 2) {
    const ctx_r4 = i0.ɵɵnextContext();
    const _r5 = i0.ɵɵreference(6);
    i0.ɵɵproperty("ngIf", ctx_r4.tdsPrefix || ctx_r4.tdsPrefixIcon);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngTemplateOutlet", _r5);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngIf", ctx_r4.tdsSuffix || ctx_r4.tdsSuffixIcon);
} }
function TDSInputGroupComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵprojection(0);
} }
const _c0 = ["*"];
export class TDSInputGroupWhitSuffixOrPrefixDirective {
    constructor(elementRef) {
        this.elementRef = elementRef;
    }
}
TDSInputGroupWhitSuffixOrPrefixDirective.ɵfac = function TDSInputGroupWhitSuffixOrPrefixDirective_Factory(t) { return new (t || TDSInputGroupWhitSuffixOrPrefixDirective)(i0.ɵɵdirectiveInject(i0.ElementRef)); };
TDSInputGroupWhitSuffixOrPrefixDirective.ɵdir = /*@__PURE__*/ i0.ɵɵdefineDirective({ type: TDSInputGroupWhitSuffixOrPrefixDirective, selectors: [["tds-input-group", "tdsSuffix", ""], ["tds-input-group", "tdsPrefix", ""]] });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(TDSInputGroupWhitSuffixOrPrefixDirective, [{
        type: Directive,
        args: [{
                selector: `tds-input-group[tdsSuffix], tds-input-group[tdsPrefix]`
            }]
    }], function () { return [{ type: i0.ElementRef }]; }, null); })();
export class TDSInputGroupComponent {
    constructor(focusMonitor, elementRef, cdr, directionality) {
        this.focusMonitor = focusMonitor;
        this.elementRef = elementRef;
        this.cdr = cdr;
        this.directionality = directionality;
        this.tdsAddOnBeforeIcon = null;
        this.tdsAddOnAfterIcon = null;
        this.tdsPrefixIcon = null;
        this.tdsSuffixIcon = null;
        this.tdsSize = 'md';
        this.tdsSearch = false;
        this.tdsCompact = false;
        this.isLarge = false;
        this.isSmall = false;
        this.isAffix = false;
        this.isAddOn = false;
        this.focused = false;
        this.disabled = false;
        this.dir = 'ltr';
        this.destroy$ = new Subject();
    }
    updateChildrenInputSize() {
        if (this.listOfTDSInputDirective) {
            this.listOfTDSInputDirective.forEach(item => (item.tdsSize = this.tdsSize));
        }
    }
    ngOnInit() {
        this.focusMonitor
            .monitor(this.elementRef, true)
            .pipe(takeUntil(this.destroy$))
            .subscribe(focusOrigin => {
            this.focused = !!focusOrigin;
            this.cdr.markForCheck();
        });
        this.dir = this.directionality.value;
        this.directionality.change?.pipe(takeUntil(this.destroy$)).subscribe((direction) => {
            this.dir = direction;
        });
    }
    ngAfterContentInit() {
        this.updateChildrenInputSize();
        const listOfInputChange$ = this.listOfTDSInputDirective.changes.pipe(startWith(this.listOfTDSInputDirective));
        listOfInputChange$
            .pipe(switchMap(list => merge(...[listOfInputChange$, ...list.map((input) => input.disabled$)])), mergeMap(() => listOfInputChange$), map(list => list.some((input) => input.disabled)), takeUntil(this.destroy$))
            .subscribe(disabled => {
            this.disabled = disabled;
            this.cdr.markForCheck();
        });
    }
    ngOnChanges(changes) {
        const { tdsSize, tdsSuffix, tdsPrefix, tdsPrefixIcon, tdsSuffixIcon, tdsAddOnAfter, tdsAddOnBefore, tdsAddOnAfterIcon, tdsAddOnBeforeIcon } = changes;
        if (tdsSize) {
            this.updateChildrenInputSize();
            this.isLarge = this.tdsSize === 'xl';
            this.isSmall = this.tdsSize === 'sm';
        }
        if (tdsSuffix || tdsPrefix || tdsPrefixIcon || tdsSuffixIcon) {
            this.isAffix = !!(this.tdsSuffix || this.tdsPrefix || this.tdsPrefixIcon || this.tdsSuffixIcon);
        }
        if (tdsAddOnAfter || tdsAddOnBefore || tdsAddOnAfterIcon || tdsAddOnBeforeIcon) {
            this.isAddOn = !!(this.tdsAddOnAfter || this.tdsAddOnBefore || this.tdsAddOnAfterIcon || this.tdsAddOnBeforeIcon);
        }
    }
    ngOnDestroy() {
        this.focusMonitor.stopMonitoring(this.elementRef);
        this.destroy$.next();
        this.destroy$.complete();
    }
}
TDSInputGroupComponent.ɵfac = function TDSInputGroupComponent_Factory(t) { return new (t || TDSInputGroupComponent)(i0.ɵɵdirectiveInject(i1.FocusMonitor), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i2.Directionality, 8)); };
TDSInputGroupComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: TDSInputGroupComponent, selectors: [["tds-input-group"]], contentQueries: function TDSInputGroupComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        i0.ɵɵcontentQuery(dirIndex, TDSInputDirective, 4);
    } if (rf & 2) {
        let _t;
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.listOfTDSInputDirective = _t);
    } }, hostVars: 40, hostBindings: function TDSInputGroupComponent_HostBindings(rf, ctx) { if (rf & 2) {
        i0.ɵɵclassProp("tds-input-group-compact", ctx.tdsCompact)("tds-input-search-enter-button", ctx.tdsSearch)("tds-input-search", ctx.tdsSearch)("tds-input-search-rtl", ctx.dir === "rtl")("tds-input-search-sm", ctx.tdsSearch && ctx.isSmall)("tds-input-search-large", ctx.tdsSearch && ctx.isLarge)("tds-input-group-wrapper", ctx.isAddOn)("tds-input-group-wrapper-rtl", ctx.dir === "rtl")("tds-input-group-wrapper-lg", ctx.isAddOn && ctx.isLarge)("tds-input-group-wrapper-sm", ctx.isAddOn && ctx.isSmall)("tds-input-affix-wrapper", ctx.isAffix && !ctx.isAddOn)("tds-input-affix-wrapper-rtl", ctx.dir === "rtl")("tds-input-affix-wrapper-focused", ctx.isAffix && ctx.focused)("tds-input-affix-wrapper-disabled", ctx.isAffix && ctx.disabled)("tds-input-affix-wrapper-lg", ctx.isAffix && !ctx.isAddOn && ctx.isLarge)("tds-input-affix-wrapper-sm", ctx.isAffix && !ctx.isAddOn && ctx.isSmall)("tds-input-group", !ctx.isAffix && !ctx.isAddOn)("tds-input-group-rtl", ctx.dir === "rtl")("tds-input-group-lg", !ctx.isAffix && !ctx.isAddOn && ctx.isLarge)("tds-input-group-sm", !ctx.isAffix && !ctx.isAddOn && ctx.isSmall);
    } }, inputs: { tdsAddOnBeforeIcon: "tdsAddOnBeforeIcon", tdsAddOnAfterIcon: "tdsAddOnAfterIcon", tdsPrefixIcon: "tdsPrefixIcon", tdsSuffixIcon: "tdsSuffixIcon", tdsAddOnBefore: "tdsAddOnBefore", tdsAddOnAfter: "tdsAddOnAfter", tdsPrefix: "tdsPrefix", tdsSuffix: "tdsSuffix", tdsSize: "tdsSize", tdsSearch: "tdsSearch", tdsCompact: "tdsCompact" }, exportAs: ["tdsInputGroup"], features: [i0.ɵɵNgOnChangesFeature], ngContentSelectors: _c0, decls: 7, vars: 2, consts: [["class", "tds-input-wrapper tds-input-group", 4, "ngIf", "ngIfElse"], ["noAddOnTemplate", ""], ["affixTemplate", ""], ["contentTemplate", ""], [1, "tds-input-wrapper", "tds-input-group"], ["tds-input-group-slot", "", "type", "addon", 3, "icon", "template", 4, "ngIf"], ["class", "tds-input-affix-wrapper", 3, "tds-input-affix-wrapper-disabled", "tds-input-affix-wrapper-sm", "tds-input-affix-wrapper-lg", 4, "ngIf", "ngIfElse"], ["tds-input-group-slot", "", "type", "addon", 3, "icon", "template"], [1, "tds-input-affix-wrapper"], [3, "ngTemplateOutlet"], [3, "ngIf", "ngIfElse"], ["tds-input-group-slot", "", "type", "prefix", 3, "icon", "template", 4, "ngIf"], ["tds-input-group-slot", "", "type", "suffix", 3, "icon", "template", 4, "ngIf"], ["tds-input-group-slot", "", "type", "prefix", 3, "icon", "template"], ["tds-input-group-slot", "", "type", "suffix", 3, "icon", "template"]], template: function TDSInputGroupComponent_Template(rf, ctx) { if (rf & 1) {
        i0.ɵɵprojectionDef();
        i0.ɵɵtemplate(0, TDSInputGroupComponent_span_0_Template, 4, 4, "span", 0);
        i0.ɵɵtemplate(1, TDSInputGroupComponent_ng_template_1_Template, 1, 2, "ng-template", null, 1, i0.ɵɵtemplateRefExtractor);
        i0.ɵɵtemplate(3, TDSInputGroupComponent_ng_template_3_Template, 3, 3, "ng-template", null, 2, i0.ɵɵtemplateRefExtractor);
        i0.ɵɵtemplate(5, TDSInputGroupComponent_ng_template_5_Template, 1, 0, "ng-template", null, 3, i0.ɵɵtemplateRefExtractor);
    } if (rf & 2) {
        const _r1 = i0.ɵɵreference(2);
        i0.ɵɵproperty("ngIf", ctx.isAddOn)("ngIfElse", _r1);
    } }, directives: [i3.NgIf, i4.TDSInputGroupSlotComponent, i3.NgTemplateOutlet], encapsulation: 2, changeDetection: 0 });
__decorate([
    InputBoolean()
], TDSInputGroupComponent.prototype, "tdsSearch", void 0);
__decorate([
    InputBoolean()
], TDSInputGroupComponent.prototype, "tdsCompact", void 0);
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(TDSInputGroupComponent, [{
        type: Component,
        args: [{
                selector: 'tds-input-group',
                exportAs: 'tdsInputGroup',
                preserveWhitespaces: false,
                encapsulation: ViewEncapsulation.None,
                changeDetection: ChangeDetectionStrategy.OnPush,
                template: `
    <span class="tds-input-wrapper tds-input-group" *ngIf="isAddOn; else noAddOnTemplate">
      <span
        *ngIf="tdsAddOnBefore || tdsAddOnBeforeIcon"
        tds-input-group-slot
        type="addon"
        [icon]="tdsAddOnBeforeIcon"
        [template]="tdsAddOnBefore"
      ></span>
      <span
        *ngIf="isAffix; else contentTemplate"
        class="tds-input-affix-wrapper"
        [class.tds-input-affix-wrapper-disabled]="disabled"
        [class.tds-input-affix-wrapper-sm]="isSmall"
        [class.tds-input-affix-wrapper-lg]="isLarge"
      >
        <ng-template [ngTemplateOutlet]="affixTemplate"></ng-template>
      </span>
      <span
        *ngIf="tdsAddOnAfter || tdsAddOnAfterIcon"
        tds-input-group-slot
        type="addon"
        [icon]="tdsAddOnAfterIcon"
        [template]="tdsAddOnAfter"
      ></span>
    </span>
    <ng-template #noAddOnTemplate>
      <ng-template [ngIf]="isAffix" [ngIfElse]="contentTemplate">
        <ng-template [ngTemplateOutlet]="affixTemplate"></ng-template>
      </ng-template>
    </ng-template>
    <ng-template #affixTemplate>
      <span
        *ngIf="tdsPrefix || tdsPrefixIcon"
        tds-input-group-slot
        type="prefix"
        [icon]="tdsPrefixIcon"
        [template]="tdsPrefix"
      ></span>
      <ng-template [ngTemplateOutlet]="contentTemplate"></ng-template>
      <span
        *ngIf="tdsSuffix || tdsSuffixIcon"
        tds-input-group-slot
        type="suffix"
        [icon]="tdsSuffixIcon"
        [template]="tdsSuffix"
      ></span>
    </ng-template>
    <ng-template #contentTemplate>
      <ng-content></ng-content>
    </ng-template>
  `,
                host: {
                    '[class.tds-input-group-compact]': `tdsCompact`,
                    '[class.tds-input-search-enter-button]': `tdsSearch`,
                    '[class.tds-input-search]': `tdsSearch`,
                    '[class.tds-input-search-rtl]': `dir === 'rtl'`,
                    '[class.tds-input-search-sm]': `tdsSearch && isSmall`,
                    '[class.tds-input-search-large]': `tdsSearch && isLarge`,
                    '[class.tds-input-group-wrapper]': `isAddOn`,
                    '[class.tds-input-group-wrapper-rtl]': `dir === 'rtl'`,
                    '[class.tds-input-group-wrapper-lg]': `isAddOn && isLarge`,
                    '[class.tds-input-group-wrapper-sm]': `isAddOn && isSmall`,
                    '[class.tds-input-affix-wrapper]': `isAffix && !isAddOn`,
                    '[class.tds-input-affix-wrapper-rtl]': `dir === 'rtl'`,
                    '[class.tds-input-affix-wrapper-focused]': `isAffix && focused`,
                    '[class.tds-input-affix-wrapper-disabled]': `isAffix && disabled`,
                    '[class.tds-input-affix-wrapper-lg]': `isAffix && !isAddOn && isLarge`,
                    '[class.tds-input-affix-wrapper-sm]': `isAffix && !isAddOn && isSmall`,
                    '[class.tds-input-group]': `!isAffix && !isAddOn`,
                    '[class.tds-input-group-rtl]': `dir === 'rtl'`,
                    '[class.tds-input-group-lg]': `!isAffix && !isAddOn && isLarge`,
                    '[class.tds-input-group-sm]': `!isAffix && !isAddOn && isSmall`
                }
            }]
    }], function () { return [{ type: i1.FocusMonitor }, { type: i0.ElementRef }, { type: i0.ChangeDetectorRef }, { type: i2.Directionality, decorators: [{
                type: Optional
            }] }]; }, { listOfTDSInputDirective: [{
            type: ContentChildren,
            args: [TDSInputDirective]
        }], tdsAddOnBeforeIcon: [{
            type: Input
        }], tdsAddOnAfterIcon: [{
            type: Input
        }], tdsPrefixIcon: [{
            type: Input
        }], tdsSuffixIcon: [{
            type: Input
        }], tdsAddOnBefore: [{
            type: Input
        }], tdsAddOnAfter: [{
            type: Input
        }], tdsPrefix: [{
            type: Input
        }], tdsSuffix: [{
            type: Input
        }], tdsSize: [{
            type: Input
        }], tdsSearch: [{
            type: Input
        }], tdsCompact: [{
            type: Input
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXQtZ3JvdXAuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvdGRzLXVpL2lucHV0L2lucHV0LWdyb3VwLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBS0EsT0FBTyxFQUVMLHVCQUF1QixFQUV2QixTQUFTLEVBQ1QsZUFBZSxFQUNmLFNBQVMsRUFFVCxLQUFLLEVBSUwsUUFBUSxFQUlSLGlCQUFpQixFQUNsQixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUN0QyxPQUFPLEVBQUUsR0FBRyxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRWhGLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUdyRCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQzs7Ozs7OztJQWlCaEQsMEJBTVE7OztJQUZOLGdEQUEyQixtQ0FBQTs7OztJQUc3QiwrQkFNQztJQUNDLHFHQUE4RDtJQUNoRSxpQkFBTzs7OztJQUxMLG1FQUFtRCw4Q0FBQSw4Q0FBQTtJQUl0QyxlQUFrQztJQUFsQyxzQ0FBa0M7OztJQUVqRCwwQkFNUTs7O0lBRk4sK0NBQTBCLGtDQUFBOzs7SUFyQjlCLCtCQUFzRjtJQUNwRixnRkFNUTtJQUNSLGdGQVFPO0lBQ1AsZ0ZBTVE7SUFDVixpQkFBTzs7OztJQXRCRixlQUEwQztJQUExQyx5RUFBMEM7SUFPMUMsZUFBZTtJQUFmLHFDQUFlLGlCQUFBO0lBU2YsZUFBd0M7SUFBeEMsdUVBQXdDOzs7O0lBU3pDLG1IQUE4RDs7OztJQUFqRCxzQ0FBa0M7OztJQURqRCxzR0FFYzs7OztJQUZELHFDQUFnQixpQkFBQTs7O0lBSzdCLDJCQU1ROzs7SUFGTiw0Q0FBc0IsK0JBQUE7Ozs7SUFJ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QkFDcEQsMEJBQTBCLEVBQUUsV0FBVztvQkFDdkMsOEJBQThCLEVBQUUsZUFBZTtvQkFDL0MsNkJBQTZCLEVBQUUsc0JBQXNCO29CQUNyRCxnQ0FBZ0MsRUFBRSxzQkFBc0I7b0JBQ3hELGlDQUFpQyxFQUFFLFNBQVM7b0JBQzVDLHFDQUFxQyxFQUFFLGVBQWU7b0JBQ3RELG9DQUFvQyxFQUFFLG9CQUFvQjtvQkFDMUQsb0NBQW9DLEVBQUUsb0JBQW9CO29CQUMxRCxpQ0FBaUMsRUFBRSxxQkFBcUI7b0JBQ3hELHFDQUFxQyxFQUFFLGVBQWU7b0JBQ3RELHlDQUF5QyxFQUFFLG9CQUFvQjtvQkFDL0QsMENBQTBDLEVBQUUscUJBQXFCO29CQUNqRSxvQ0FBb0MsRUFBRSxnQ0FBZ0M7b0JBQ3RFLG9DQUFvQyxFQUFFLGdDQUFnQztvQkFDdEUseUJBQXlCLEVBQUUsc0JBQXNCO29CQUNqRCw2QkFBNkIsRUFBRSxlQUFlO29CQUM5Qyw0QkFBNEIsRUFBRSxpQ0FBaUM7b0JBQy9ELDRCQUE0QixFQUFFLGlDQUFpQztpQkFDaEU7YUFDRjs7c0JBOEJJLFFBQVE7d0JBekJ5Qix1QkFBdUI7a0JBQTFELGVBQWU7bUJBQUMsaUJBQWlCO1lBQ3pCLGtCQUFrQjtrQkFBMUIsS0FBSztZQUNHLGlCQUFpQjtrQkFBekIsS0FBSztZQUNHLGFBQWE7a0JBQXJCLEtBQUs7WUFDRyxhQUFhO2tCQUFyQixLQUFLO1lBQ0csY0FBYztrQkFBdEIsS0FBSztZQUNHLGFBQWE7a0JBQXJCLEtBQUs7WUFDRyxTQUFTO2tCQUFqQixLQUFLO1lBQ0csU0FBUztrQkFBakIsS0FBSztZQUNHLE9BQU87a0JBQWYsS0FBSztZQUNtQixTQUFTO2tCQUFqQyxLQUFLO1lBQ21CLFVBQVU7a0JBQWxDLEtBQUsiLCJzb3VyY2VzQ29udGVudCI6WyJcblxuaW1wb3J0IHsgRm9jdXNNb25pdG9yIH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2ExMXknO1xuaW1wb3J0IHsgRGlyZWN0aW9uLCBEaXJlY3Rpb25hbGl0eSB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9iaWRpJztcbmltcG9ydCB7IEJvb2xlYW5JbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9jb2VyY2lvbic7XG5pbXBvcnQge1xuICBBZnRlckNvbnRlbnRJbml0LFxuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gIENvbXBvbmVudCxcbiAgQ29udGVudENoaWxkcmVuLFxuICBEaXJlY3RpdmUsXG4gIEVsZW1lbnRSZWYsXG4gIElucHV0LFxuICBPbkNoYW5nZXMsXG4gIE9uRGVzdHJveSxcbiAgT25Jbml0LFxuICBPcHRpb25hbCxcbiAgUXVlcnlMaXN0LFxuICBTaW1wbGVDaGFuZ2VzLFxuICBUZW1wbGF0ZVJlZixcbiAgVmlld0VuY2Fwc3VsYXRpb25cbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBtZXJnZSwgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgbWFwLCBtZXJnZU1hcCwgc3RhcnRXaXRoLCBzd2l0Y2hNYXAsIHRha2VVbnRpbCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IEJ1dHRvblNpemUgfSBmcm9tICd0ZHMtdWkvY29yZS9jb25maWcnO1xuaW1wb3J0IHsgSW5wdXRCb29sZWFuIH0gZnJvbSAndGRzLXVpL3NoYXJlZC91dGlsaXR5JztcblxuXG5pbXBvcnQgeyBURFNJbnB1dERpcmVjdGl2ZSB9IGZyb20gJy4vaW5wdXQuZGlyZWN0aXZlJztcblxuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiBgdGRzLWlucHV0LWdyb3VwW3Rkc1N1ZmZpeF0sIHRkcy1pbnB1dC1ncm91cFt0ZHNQcmVmaXhdYFxufSlcbmV4cG9ydCBjbGFzcyBURFNJbnB1dEdyb3VwV2hpdFN1ZmZpeE9yUHJlZml4RGlyZWN0aXZlIHtcbiAgY29uc3RydWN0b3IocHVibGljIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYpIHt9XG59XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3Rkcy1pbnB1dC1ncm91cCcsXG4gIGV4cG9ydEFzOiAndGRzSW5wdXRHcm91cCcsXG4gIHByZXNlcnZlV2hpdGVzcGFjZXM6IGZhbHNlLFxuICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgdGVtcGxhdGU6IGBcbiAgICA8c3BhbiBjbGFzcz1cInRkcy1pbnB1dC13cmFwcGVyIHRkcy1pbnB1dC1ncm91cFwiICpuZ0lmPVwiaXNBZGRPbjsgZWxzZSBub0FkZE9uVGVtcGxhdGVcIj5cbiAgICAgIDxzcGFuXG4gICAgICAgICpuZ0lmPVwidGRzQWRkT25CZWZvcmUgfHwgdGRzQWRkT25CZWZvcmVJY29uXCJcbiAgICAgICAgdGRzLWlucHV0LWdyb3VwLXNsb3RcbiAgICAgICAgdHlwZT1cImFkZG9uXCJcbiAgICAgICAgW2ljb25dPVwidGRzQWRkT25CZWZvcmVJY29uXCJcbiAgICAgICAgW3RlbXBsYXRlXT1cInRkc0FkZE9uQmVmb3JlXCJcbiAgICAgID48L3NwYW4+XG4gICAgICA8c3BhblxuICAgICAgICAqbmdJZj1cImlzQWZmaXg7IGVsc2UgY29udGVudFRlbXBsYXRlXCJcbiAgICAgICAgY2xhc3M9XCJ0ZHMtaW5wdXQtYWZmaXgtd3JhcHBlclwiXG4gICAgICAgIFtjbGFzcy50ZHMtaW5wdXQtYWZmaXgtd3JhcHBlci1kaXNhYmxlZF09XCJkaXNhYmxlZFwiXG4gICAgICAgIFtjbGFzcy50ZHMtaW5wdXQtYWZmaXgtd3JhcHBlci1zbV09XCJpc1NtYWxsXCJcbiAgICAgICAgW2NsYXNzLnRkcy1pbnB1dC1hZmZpeC13cmFwcGVyLWxnXT1cImlzTGFyZ2VcIlxuICAgICAgPlxuICAgICAgICA8bmctdGVtcGxhdGUgW25nVGVtcGxhdGVPdXRsZXRdPVwiYWZmaXhUZW1wbGF0ZVwiPjwvbmctdGVtcGxhdGU+XG4gICAgICA8L3NwYW4+XG4gICAgICA8c3BhblxuICAgICAgICAqbmdJZj1cInRkc0FkZE9uQWZ0ZXIgfHwgdGRzQWRkT25BZnRlckljb25cIlxuICAgICAgICB0ZHMtaW5wdXQtZ3JvdXAtc2xvdFxuICAgICAgICB0eXBlPVwiYWRkb25cIlxuICAgICAgICBbaWNvbl09XCJ0ZHNBZGRPbkFmdGVySWNvblwiXG4gICAgICAgIFt0ZW1wbGF0ZV09XCJ0ZHNBZGRPbkFmdGVyXCJcbiAgICAgID48L3NwYW4+XG4gICAgPC9zcGFuPlxuICAgIDxuZy10ZW1wbGF0ZSAjbm9BZGRPblRlbXBsYXRlPlxuICAgICAgPG5nLXRlbXBsYXRlIFtuZ0lmXT1cImlzQWZmaXhcIiBbbmdJZkVsc2VdPVwiY29udGVudFRlbXBsYXRlXCI+XG4gICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdUZW1wbGF0ZU91dGxldF09XCJhZmZpeFRlbXBsYXRlXCI+PC9uZy10ZW1wbGF0ZT5cbiAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgPC9uZy10ZW1wbGF0ZT5cbiAgICA8bmctdGVtcGxhdGUgI2FmZml4VGVtcGxhdGU+XG4gICAgICA8c3BhblxuICAgICAgICAqbmdJZj1cInRkc1ByZWZpeCB8fCB0ZHNQcmVmaXhJY29uXCJcbiAgICAgICAgdGRzLWlucHV0LWdyb3VwLXNsb3RcbiAgICAgICAgdHlwZT1cInByZWZpeFwiXG4gICAgICAgIFtpY29uXT1cInRkc1ByZWZpeEljb25cIlxuICAgICAgICBbdGVtcGxhdGVdPVwidGRzUHJlZml4XCJcbiAgICAgID48L3NwYW4+XG4gICAgICA8bmctdGVtcGxhdGUgW25nVGVtcGxhdGVPdXRsZXRdPVwiY29udGVudFRlbXBsYXRlXCI+PC9uZy10ZW1wbGF0ZT5cbiAgICAgIDxzcGFuXG4gICAgICAgICpuZ0lmPVwidGRzU3VmZml4IHx8IHRkc1N1ZmZpeEljb25cIlxuICAgICAgICB0ZHMtaW5wdXQtZ3JvdXAtc2xvdFxuICAgICAgICB0eXBlPVwic3VmZml4XCJcbiAgICAgICAgW2ljb25dPVwidGRzU3VmZml4SWNvblwiXG4gICAgICAgIFt0ZW1wbGF0ZV09XCJ0ZHNTdWZmaXhcIlxuICAgICAgPjwvc3Bhbj5cbiAgICA8L25nLXRlbXBsYXRlPlxuICAgIDxuZy10ZW1wbGF0ZSAjY29udGVudFRlbXBsYXRlPlxuICAgICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxuICAgIDwvbmctdGVtcGxhdGU+XG4gIGAsXG4gIGhvc3Q6IHtcbiAgICAnW2NsYXNzLnRkcy1pbnB1dC1ncm91cC1jb21wYWN0XSc6IGB0ZHNDb21wYWN0YCxcbiAgICAnW2NsYXNzLnRkcy1pbnB1dC1zZWFyY2gtZW50ZXItYnV0dG9uXSc6IGB0ZHNTZWFyY2hgLFxuICAgICdbY2xhc3MudGRzLWlucHV0LXNlYXJjaF0nOiBgdGRzU2VhcmNoYCxcbiAgICAnW2NsYXNzLnRkcy1pbnB1dC1zZWFyY2gtcnRsXSc6IGBkaXIgPT09ICdydGwnYCxcbiAgICAnW2NsYXNzLnRkcy1pbnB1dC1zZWFyY2gtc21dJzogYHRkc1NlYXJjaCAmJiBpc1NtYWxsYCxcbiAgICAnW2NsYXNzLnRkcy1pbnB1dC1zZWFyY2gtbGFyZ2VdJzogYHRkc1NlYXJjaCAmJiBpc0xhcmdlYCxcbiAgICAnW2NsYXNzLnRkcy1pbnB1dC1ncm91cC13cmFwcGVyXSc6IGBpc0FkZE9uYCxcbiAgICAnW2NsYXNzLnRkcy1pbnB1dC1ncm91cC13cmFwcGVyLXJ0bF0nOiBgZGlyID09PSAncnRsJ2AsXG4gICAgJ1tjbGFzcy50ZHMtaW5wdXQtZ3JvdXAtd3JhcHBlci1sZ10nOiBgaXNBZGRPbiAmJiBpc0xhcmdlYCxcbiAgICAnW2NsYXNzLnRkcy1pbnB1dC1ncm91cC13cmFwcGVyLXNtXSc6IGBpc0FkZE9uICYmIGlzU21hbGxgLFxuICAgICdbY2xhc3MudGRzLWlucHV0LWFmZml4LXdyYXBwZXJdJzogYGlzQWZmaXggJiYgIWlzQWRkT25gLFxuICAgICdbY2xhc3MudGRzLWlucHV0LWFmZml4LXdyYXBwZXItcnRsXSc6IGBkaXIgPT09ICdydGwnYCxcbiAgICAnW2NsYXNzLnRkcy1pbnB1dC1hZmZpeC13cmFwcGVyLWZvY3VzZWRdJzogYGlzQWZmaXggJiYgZm9jdXNlZGAsXG4gICAgJ1tjbGFzcy50ZHMtaW5wdXQtYWZmaXgtd3JhcHBlci1kaXNhYmxlZF0nOiBgaXNBZmZpeCAmJiBkaXNhYmxlZGAsXG4gICAgJ1tjbGFzcy50ZHMtaW5wdXQtYWZmaXgtd3JhcHBlci1sZ10nOiBgaXNBZmZpeCAmJiAhaXNBZGRPbiAmJiBpc0xhcmdlYCxcbiAgICAnW2NsYXNzLnRkcy1pbnB1dC1hZmZpeC13cmFwcGVyLXNtXSc6IGBpc0FmZml4ICYmICFpc0FkZE9uICYmIGlzU21hbGxgLFxuICAgICdbY2xhc3MudGRzLWlucHV0LWdyb3VwXSc6IGAhaXNBZmZpeCAmJiAhaXNBZGRPbmAsXG4gICAgJ1tjbGFzcy50ZHMtaW5wdXQtZ3JvdXAtcnRsXSc6IGBkaXIgPT09ICdydGwnYCxcbiAgICAnW2NsYXNzLnRkcy1pbnB1dC1ncm91cC1sZ10nOiBgIWlzQWZmaXggJiYgIWlzQWRkT24gJiYgaXNMYXJnZWAsXG4gICAgJ1tjbGFzcy50ZHMtaW5wdXQtZ3JvdXAtc21dJzogYCFpc0FmZml4ICYmICFpc0FkZE9uICYmIGlzU21hbGxgXG4gIH1cbn0pXG5leHBvcnQgY2xhc3MgVERTSW5wdXRHcm91cENvbXBvbmVudCBpbXBsZW1lbnRzIEFmdGVyQ29udGVudEluaXQsIE9uQ2hhbmdlcywgT25Jbml0LCBPbkRlc3Ryb3kge1xuICBzdGF0aWMgbmdBY2NlcHRJbnB1dFR5cGVfdGRzU2VhcmNoOiBCb29sZWFuSW5wdXQ7XG4gIHN0YXRpYyBuZ0FjY2VwdElucHV0VHlwZV90ZHNDb21wYWN0OiBCb29sZWFuSW5wdXQ7XG5cbiAgQENvbnRlbnRDaGlsZHJlbihURFNJbnB1dERpcmVjdGl2ZSkgbGlzdE9mVERTSW5wdXREaXJlY3RpdmUhOiBRdWVyeUxpc3Q8VERTSW5wdXREaXJlY3RpdmU+O1xuICBASW5wdXQoKSB0ZHNBZGRPbkJlZm9yZUljb24/OiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgQElucHV0KCkgdGRzQWRkT25BZnRlckljb24/OiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgQElucHV0KCkgdGRzUHJlZml4SWNvbj86IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBASW5wdXQoKSB0ZHNTdWZmaXhJY29uPzogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIEBJbnB1dCgpIHRkc0FkZE9uQmVmb3JlPzogc3RyaW5nIHwgVGVtcGxhdGVSZWY8dm9pZD47XG4gIEBJbnB1dCgpIHRkc0FkZE9uQWZ0ZXI/OiBzdHJpbmcgfCBUZW1wbGF0ZVJlZjx2b2lkPjtcbiAgQElucHV0KCkgdGRzUHJlZml4Pzogc3RyaW5nIHwgVGVtcGxhdGVSZWY8dm9pZD47XG4gIEBJbnB1dCgpIHRkc1N1ZmZpeD86IHN0cmluZyB8IFRlbXBsYXRlUmVmPHZvaWQ+O1xuICBASW5wdXQoKSB0ZHNTaXplOiBCdXR0b25TaXplID0gJ21kJztcbiAgQElucHV0KCkgQElucHV0Qm9vbGVhbigpIHRkc1NlYXJjaCA9IGZhbHNlO1xuICBASW5wdXQoKSBASW5wdXRCb29sZWFuKCkgdGRzQ29tcGFjdCA9IGZhbHNlO1xuICBpc0xhcmdlID0gZmFsc2U7XG4gIGlzU21hbGwgPSBmYWxzZTtcbiAgaXNBZmZpeCA9IGZhbHNlO1xuICBpc0FkZE9uID0gZmFsc2U7XG4gIGZvY3VzZWQgPSBmYWxzZTtcbiAgZGlzYWJsZWQgPSBmYWxzZTtcbiAgZGlyOiBEaXJlY3Rpb24gPSAnbHRyJztcbiAgcHJpdmF0ZSBkZXN0cm95JCA9IG5ldyBTdWJqZWN0PHZvaWQ+KCk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBmb2N1c01vbml0b3I6IEZvY3VzTW9uaXRvcixcbiAgICBwcml2YXRlIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYsXG4gICAgcHJpdmF0ZSBjZHI6IENoYW5nZURldGVjdG9yUmVmLFxuICAgIEBPcHRpb25hbCgpIHByaXZhdGUgZGlyZWN0aW9uYWxpdHk6IERpcmVjdGlvbmFsaXR5XG4gICkge31cblxuICB1cGRhdGVDaGlsZHJlbklucHV0U2l6ZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5saXN0T2ZURFNJbnB1dERpcmVjdGl2ZSkge1xuICAgICAgdGhpcy5saXN0T2ZURFNJbnB1dERpcmVjdGl2ZS5mb3JFYWNoKGl0ZW0gPT4gKGl0ZW0udGRzU2l6ZSA9IHRoaXMudGRzU2l6ZSkpO1xuICAgIH1cbiAgfVxuXG4gIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIHRoaXMuZm9jdXNNb25pdG9yXG4gICAgICAubW9uaXRvcih0aGlzLmVsZW1lbnRSZWYsIHRydWUpXG4gICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAuc3Vic2NyaWJlKGZvY3VzT3JpZ2luID0+IHtcbiAgICAgICAgdGhpcy5mb2N1c2VkID0gISFmb2N1c09yaWdpbjtcbiAgICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XG4gICAgICB9KTtcblxuICAgIHRoaXMuZGlyID0gdGhpcy5kaXJlY3Rpb25hbGl0eS52YWx1ZTtcbiAgICB0aGlzLmRpcmVjdGlvbmFsaXR5LmNoYW5nZT8ucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpLnN1YnNjcmliZSgoZGlyZWN0aW9uOiBEaXJlY3Rpb24pID0+IHtcbiAgICAgIHRoaXMuZGlyID0gZGlyZWN0aW9uO1xuICAgIH0pO1xuICB9XG5cbiAgbmdBZnRlckNvbnRlbnRJbml0KCk6IHZvaWQge1xuICAgIHRoaXMudXBkYXRlQ2hpbGRyZW5JbnB1dFNpemUoKTtcbiAgICBjb25zdCBsaXN0T2ZJbnB1dENoYW5nZSQgPSB0aGlzLmxpc3RPZlREU0lucHV0RGlyZWN0aXZlLmNoYW5nZXMucGlwZShzdGFydFdpdGgodGhpcy5saXN0T2ZURFNJbnB1dERpcmVjdGl2ZSkpO1xuICAgIGxpc3RPZklucHV0Q2hhbmdlJFxuICAgICAgLnBpcGUoXG4gICAgICAgIHN3aXRjaE1hcChsaXN0ID0+IG1lcmdlKC4uLltsaXN0T2ZJbnB1dENoYW5nZSQsIC4uLmxpc3QubWFwKChpbnB1dDogVERTSW5wdXREaXJlY3RpdmUpID0+IGlucHV0LmRpc2FibGVkJCldKSksXG4gICAgICAgIG1lcmdlTWFwKCgpID0+IGxpc3RPZklucHV0Q2hhbmdlJCksXG4gICAgICAgIG1hcChsaXN0ID0+IGxpc3Quc29tZSgoaW5wdXQ6IFREU0lucHV0RGlyZWN0aXZlKSA9PiBpbnB1dC5kaXNhYmxlZCkpLFxuICAgICAgICB0YWtlVW50aWwodGhpcy5kZXN0cm95JClcbiAgICAgIClcbiAgICAgIC5zdWJzY3JpYmUoZGlzYWJsZWQgPT4ge1xuICAgICAgICB0aGlzLmRpc2FibGVkID0gZGlzYWJsZWQ7XG4gICAgICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xuICAgICAgfSk7XG4gIH1cbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xuICAgIGNvbnN0IHtcbiAgICAgIHRkc1NpemUsXG4gICAgICB0ZHNTdWZmaXgsXG4gICAgICB0ZHNQcmVmaXgsXG4gICAgICB0ZHNQcmVmaXhJY29uLFxuICAgICAgdGRzU3VmZml4SWNvbixcbiAgICAgIHRkc0FkZE9uQWZ0ZXIsXG4gICAgICB0ZHNBZGRPbkJlZm9yZSxcbiAgICAgIHRkc0FkZE9uQWZ0ZXJJY29uLFxuICAgICAgdGRzQWRkT25CZWZvcmVJY29uXG4gICAgfSA9IGNoYW5nZXM7XG4gICAgaWYgKHRkc1NpemUpIHtcbiAgICAgIHRoaXMudXBkYXRlQ2hpbGRyZW5JbnB1dFNpemUoKTtcbiAgICAgIHRoaXMuaXNMYXJnZSA9IHRoaXMudGRzU2l6ZSA9PT0gJ3hsJztcbiAgICAgIHRoaXMuaXNTbWFsbCA9IHRoaXMudGRzU2l6ZSA9PT0gJ3NtJztcbiAgICB9XG4gICAgaWYgKHRkc1N1ZmZpeCB8fCB0ZHNQcmVmaXggfHwgdGRzUHJlZml4SWNvbiB8fCB0ZHNTdWZmaXhJY29uKSB7XG4gICAgICB0aGlzLmlzQWZmaXggPSAhISh0aGlzLnRkc1N1ZmZpeCB8fCB0aGlzLnRkc1ByZWZpeCB8fCB0aGlzLnRkc1ByZWZpeEljb24gfHwgdGhpcy50ZHNTdWZmaXhJY29uKTtcbiAgICB9XG4gICAgaWYgKHRkc0FkZE9uQWZ0ZXIgfHwgdGRzQWRkT25CZWZvcmUgfHwgdGRzQWRkT25BZnRlckljb24gfHwgdGRzQWRkT25CZWZvcmVJY29uKSB7XG4gICAgICB0aGlzLmlzQWRkT24gPSAhISh0aGlzLnRkc0FkZE9uQWZ0ZXIgfHwgdGhpcy50ZHNBZGRPbkJlZm9yZSB8fCB0aGlzLnRkc0FkZE9uQWZ0ZXJJY29uIHx8IHRoaXMudGRzQWRkT25CZWZvcmVJY29uKTtcbiAgICB9XG4gIH1cbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy5mb2N1c01vbml0b3Iuc3RvcE1vbml0b3JpbmcodGhpcy5lbGVtZW50UmVmKTtcbiAgICB0aGlzLmRlc3Ryb3kkLm5leHQoKTtcbiAgICB0aGlzLmRlc3Ryb3kkLmNvbXBsZXRlKCk7XG4gIH1cbn1cbiJdfQ==