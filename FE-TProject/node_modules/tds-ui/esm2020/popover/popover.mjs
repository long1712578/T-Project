import { __decorate } from "tslib";
import { ChangeDetectionStrategy, Component, Directive, EventEmitter, Input, Optional, Output, TemplateRef, ViewEncapsulation } from '@angular/core';
import { zoomBigMotion } from 'tds-ui/core/animation';
import { InputBoolean } from 'tds-ui/shared/utility';
import { isTooltipEmpty, TDSTooltipBaseDirective, TDSToolTipComponent } from 'tds-ui/tooltip';
import * as i0 from "@angular/core";
import * as i1 from "@angular/cdk/bidi";
import * as i2 from "@angular/cdk/overlay";
import * as i3 from "@angular/common";
import * as i4 from "tds-ui/core/outlet";
function TDSPopoverComponent_ng_template_0_div_6_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtext(1);
    i0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r5 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance(1);
    i0.ɵɵtextInterpolate(ctx_r5.title);
} }
function TDSPopoverComponent_ng_template_0_div_6_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 12);
    i0.ɵɵtemplate(1, TDSPopoverComponent_ng_template_0_div_6_ng_container_1_Template, 2, 1, "ng-container", 10);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("tdsStringTemplateOutlet", ctx_r2.title);
} }
function TDSPopoverComponent_ng_template_0_ng_container_9_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtext(1);
    i0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r3 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(1);
    i0.ɵɵtextInterpolate(ctx_r3.content);
} }
function TDSPopoverComponent_ng_template_0_div_10_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtext(1);
    i0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r6 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance(1);
    i0.ɵɵtextInterpolate(ctx_r6.footer);
} }
const _c0 = function (a0) { return { "pt-8": a0 }; };
function TDSPopoverComponent_ng_template_0_div_10_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 13);
    i0.ɵɵtemplate(1, TDSPopoverComponent_ng_template_0_div_10_ng_container_1_Template, 2, 1, "ng-container", 10);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r4 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("ngClass", i0.ɵɵpureFunction1(2, _c0, ctx_r4.isFooterString));
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("tdsStringTemplateOutlet", ctx_r4.footer);
} }
const _c1 = function (a0, a1, a2, a3) { return { "pt-2.5": a0, "pr-2.5": a1, "pl-2.5": a2, "pb-2.5": a3 }; };
function TDSPopoverComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 2)(1, "div", 3)(2, "div", 4);
    i0.ɵɵelement(3, "span", 5);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div", 6)(5, "div");
    i0.ɵɵtemplate(6, TDSPopoverComponent_ng_template_0_div_6_Template, 2, 1, "div", 7);
    i0.ɵɵelementStart(7, "div", 8)(8, "div", 9);
    i0.ɵɵtemplate(9, TDSPopoverComponent_ng_template_0_ng_container_9_Template, 2, 1, "ng-container", 10);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(10, TDSPopoverComponent_ng_template_0_div_10_Template, 2, 4, "div", 11);
    i0.ɵɵelementEnd()()()()();
} if (rf & 2) {
    const ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵproperty("ngClass", ctx_r1._classMap)("ngStyle", ctx_r1.overlayStyle)("@zoomBigMotion", "active");
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngClass", i0.ɵɵpureFunction4(9, _c1, ctx_r1._isBottom(), ctx_r1._isLeft(), ctx_r1._isRight(), ctx_r1._isTop()));
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngStyle", ctx_r1._contentStyleArrow);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngStyle", ctx_r1._contentStyleArrowContent);
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngIf", ctx_r1.title);
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("tdsStringTemplateOutlet", ctx_r1.content);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngIf", ctx_r1.footer);
} }
export class TDSPopoverDirective extends TDSTooltipBaseDirective {
    constructor(elementRef, hostView, resolver, renderer) {
        super(elementRef, hostView, resolver, renderer);
        this.trigger = 'hover';
        this.placement = 'top';
        this.popoverBackdrop = false;
        this.autoClose = true;
        // tslint:disable-next-line:no-output-rename
        this.visibleChange = new EventEmitter();
        this.componentRef = this.hostView.createComponent(TDSPopoverComponent);
    }
    getProxyPropertyMap() {
        return {
            popoverBackdrop: ['backdrop', () => this.popoverBackdrop],
            autoClose: ['autoClose', () => this.autoClose],
            ...super.getProxyPropertyMap()
        };
    }
}
TDSPopoverDirective.ɵfac = function TDSPopoverDirective_Factory(t) { return new (t || TDSPopoverDirective)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.ViewContainerRef), i0.ɵɵdirectiveInject(i0.ComponentFactoryResolver), i0.ɵɵdirectiveInject(i0.Renderer2)); };
TDSPopoverDirective.ɵdir = /*@__PURE__*/ i0.ɵɵdefineDirective({ type: TDSPopoverDirective, selectors: [["", "tds-popover", ""]], hostVars: 2, hostBindings: function TDSPopoverDirective_HostBindings(rf, ctx) { if (rf & 2) {
        i0.ɵɵclassProp("tds-popover-open", ctx.visible);
    } }, inputs: { title: ["popoverTitle", "title"], content: ["popoverContent", "content"], footer: ["popoverFooter", "footer"], directiveTitle: ["tds-popover", "directiveTitle"], trigger: ["popoverTrigger", "trigger"], placement: ["popoverPlacement", "placement"], origin: ["popoverOrigin", "origin"], visible: ["popoverVisible", "visible"], mouseEnterDelay: ["popoverMouseEnterDelay", "mouseEnterDelay"], mouseLeaveDelay: ["popoverMouseLeaveDelay", "mouseLeaveDelay"], overlayClassName: ["popoverOverlayClassName", "overlayClassName"], overlayStyle: ["popoverOverlayStyle", "overlayStyle"], popoverBackdrop: "popoverBackdrop", autoClose: ["popoverAutoClose", "autoClose"] }, outputs: { visibleChange: "popoverVisibleChange" }, exportAs: ["tdsPopover"], features: [i0.ɵɵInheritDefinitionFeature] });
__decorate([
    InputBoolean()
], TDSPopoverDirective.prototype, "popoverBackdrop", void 0);
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(TDSPopoverDirective, [{
        type: Directive,
        args: [{
                selector: '[tds-popover]',
                exportAs: 'tdsPopover',
                host: {
                    '[class.tds-popover-open]': 'visible'
                }
            }]
    }], function () { return [{ type: i0.ElementRef }, { type: i0.ViewContainerRef }, { type: i0.ComponentFactoryResolver }, { type: i0.Renderer2 }]; }, { title: [{
            type: Input,
            args: ['popoverTitle']
        }], content: [{
            type: Input,
            args: ['popoverContent']
        }], footer: [{
            type: Input,
            args: ['popoverFooter']
        }], directiveTitle: [{
            type: Input,
            args: ['tds-popover']
        }], trigger: [{
            type: Input,
            args: ['popoverTrigger']
        }], placement: [{
            type: Input,
            args: ['popoverPlacement']
        }], origin: [{
            type: Input,
            args: ['popoverOrigin']
        }], visible: [{
            type: Input,
            args: ['popoverVisible']
        }], mouseEnterDelay: [{
            type: Input,
            args: ['popoverMouseEnterDelay']
        }], mouseLeaveDelay: [{
            type: Input,
            args: ['popoverMouseLeaveDelay']
        }], overlayClassName: [{
            type: Input,
            args: ['popoverOverlayClassName']
        }], overlayStyle: [{
            type: Input,
            args: ['popoverOverlayStyle']
        }], popoverBackdrop: [{
            type: Input
        }], autoClose: [{
            type: Input,
            args: ['popoverAutoClose']
        }], visibleChange: [{
            type: Output,
            args: ['popoverVisibleChange']
        }] }); })();
export class TDSPopoverComponent extends TDSToolTipComponent {
    constructor(cdr, directionality) {
        super(cdr, directionality);
        this._prefix = 'tds-popover';
        this._classPopopverContent = {};
    }
    get hasBackdrop() {
        return this.trigger === 'click' ? this.backdrop : false;
    }
    get isFooterString() {
        return !isTooltipEmpty(this.footer) && !(this.footer instanceof TemplateRef);
    }
    isEmpty() {
        return isTooltipEmpty(this.title) && isTooltipEmpty(this.content);
    }
    updateStyles() {
        const isColorPreset = this.color;
        this._classMap = {
            [this.overlayClassName]: true,
            [`${this._prefix}-placement-${this.preferredPlacement}`]: true,
            [`${this._prefix}-${this.color}`]: isColorPreset,
        };
        this.styleArrow();
    }
    styleArrow() {
        let borderTransparent = '8px solid transparent';
        // let borderColor = '8px solid #fff';
        if (this.preferredPlacement.indexOf("top") > -1) {
            this._contentStyleArrowContent = {
                width: '0',
                height: '0',
                borderLeft: borderTransparent,
                borderRight: borderTransparent,
                borderBottom: 0,
            };
        }
        if (this.preferredPlacement.indexOf("bottom") > -1) {
            this._contentStyleArrowContent = {
                width: '0',
                height: '0',
                borderLeft: borderTransparent,
                borderRight: borderTransparent,
                borderTop: 0,
            };
        }
        if (this.preferredPlacement.indexOf("left") > -1) {
            this._contentStyleArrowContent = {
                width: '0',
                height: '0',
                borderTop: borderTransparent,
                borderRight: 0,
                borderBottom: borderTransparent,
            };
        }
        if (this.preferredPlacement.indexOf("right") > -1) {
            this._contentStyleArrowContent = {
                width: '0',
                height: '0',
                borderTop: borderTransparent,
                borderLeft: 0,
                borderBottom: borderTransparent,
            };
        }
        switch (this.preferredPlacement) {
            //#region top
            case "top":
                this._contentStyleArrow = {
                    bottom: '2px',
                    left: '50%',
                    transform: 'translateX(-50%)',
                };
                break;
            case "topLeft":
                this._contentStyleArrow = {
                    bottom: '2px',
                    left: '10px',
                };
                break;
            case "topRight":
                this._contentStyleArrow = {
                    bottom: '2px',
                    right: '10px',
                };
                break;
            //#endregion
            //#region bottom
            case "bottom":
                this._contentStyleArrow = {
                    top: '2px',
                    left: '50%',
                    transform: 'translateX(-50%)',
                };
                break;
            case "bottomLeft":
                this._contentStyleArrow = {
                    top: '2px',
                    left: '10px',
                };
                break;
            case "bottomRight":
                this._contentStyleArrow = {
                    top: '2px',
                    right: '10px',
                };
                break;
            //#endregion
            //#region left
            case "left":
                this._contentStyleArrow = {
                    right: '2px',
                    top: '50%',
                    transform: 'translateY(-50%)',
                };
                break;
            case "leftTop":
                this._contentStyleArrow = {
                    right: '2px',
                    top: '10px'
                };
                break;
            case "leftBottom":
                this._contentStyleArrow = {
                    right: '2px',
                    bottom: '10px'
                };
                break;
            //#endregion
            //#region right
            case "right":
                this._contentStyleArrow = {
                    left: '2px',
                    top: '50%',
                    transform: 'translateY(-50%)',
                };
                break;
            case "rightTop":
                this._contentStyleArrow = {
                    left: '2px',
                    top: '10px'
                };
                break;
            case "rightBottom":
                this._contentStyleArrow = {
                    left: '2px',
                    bottom: '10px'
                };
                break;
            ////#endregion
            default:
                this._contentStyleArrow = {
                    bottom: '2px',
                    left: '50%',
                    transform: 'translateX(-50%)',
                };
                break;
        }
    }
    _isTop() {
        return this.preferredPlacement.indexOf("top") > -1;
    }
    _isLeft() {
        return this.preferredPlacement.indexOf("left") > -1;
    }
    _isRight() {
        return this.preferredPlacement.indexOf("right") > -1;
    }
    _isBottom() {
        return this.preferredPlacement.indexOf("bottom") > -1;
    }
}
TDSPopoverComponent.ɵfac = function TDSPopoverComponent_Factory(t) { return new (t || TDSPopoverComponent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i1.Directionality, 8)); };
TDSPopoverComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: TDSPopoverComponent, selectors: [["tds-popover"]], exportAs: ["tdsPopoverComponent"], features: [i0.ɵɵInheritDefinitionFeature], decls: 2, vars: 5, consts: [["cdkConnectedOverlay", "", 3, "cdkConnectedOverlayHasBackdrop", "cdkConnectedOverlayOrigin", "cdkConnectedOverlayPositions", "cdkConnectedOverlayOpen", "cdkConnectedOverlayPush", "overlayOutsideClick", "detach", "positionChange"], ["overlay", "cdkConnectedOverlay"], [1, "tds-popover", "relative", 3, "ngClass", "ngStyle"], [1, "tds-popover-content", "relative", 3, "ngClass"], [1, "tds-popover-arrow", "absolute", "block", "bg-transparent", "pointer-events-none", 3, "ngStyle"], [1, "tds-popover-arrow-content", "block", "border-8", "border-white", "dark:border-d-neutral-3-300", 3, "ngStyle"], ["role", "tooltip", 1, "tds-popover-inner", "shadow-1-xl", "bg-white", "dark:bg-d-neutral-3-300", "rounded-md"], ["class", "tds-popover-title font-semibold text-neutral-1-900 dark:text-d-neutral-1-900 text-title-1 p-4 border-b border-neutral-2-200 dark:border-d-neutral-2-200", 4, "ngIf"], [1, "p-4"], [1, "tds-popover-inner-content", "text-neutral-1-900", "dark:text-d-neutral-1-900"], [4, "tdsStringTemplateOutlet"], ["class", "tds-popover-inner-footer", 3, "ngClass", 4, "ngIf"], [1, "tds-popover-title", "font-semibold", "text-neutral-1-900", "dark:text-d-neutral-1-900", "text-title-1", "p-4", "border-b", "border-neutral-2-200", "dark:border-d-neutral-2-200"], [1, "tds-popover-inner-footer", 3, "ngClass"]], template: function TDSPopoverComponent_Template(rf, ctx) { if (rf & 1) {
        i0.ɵɵtemplate(0, TDSPopoverComponent_ng_template_0_Template, 11, 14, "ng-template", 0, 1, i0.ɵɵtemplateRefExtractor);
        i0.ɵɵlistener("overlayOutsideClick", function TDSPopoverComponent_Template_ng_template_overlayOutsideClick_0_listener($event) { return ctx.onClickOutside($event); })("detach", function TDSPopoverComponent_Template_ng_template_detach_0_listener() { return ctx.hide(); })("positionChange", function TDSPopoverComponent_Template_ng_template_positionChange_0_listener($event) { return ctx.onPositionChange($event); });
    } if (rf & 2) {
        i0.ɵɵproperty("cdkConnectedOverlayHasBackdrop", ctx.hasBackdrop)("cdkConnectedOverlayOrigin", ctx.origin)("cdkConnectedOverlayPositions", ctx._positions)("cdkConnectedOverlayOpen", ctx._visible)("cdkConnectedOverlayPush", true);
    } }, directives: [i2.CdkConnectedOverlay, i3.NgClass, i3.NgStyle, i3.NgIf, i4.TDSStringTemplateOutletDirective], encapsulation: 2, data: { animation: [zoomBigMotion] }, changeDetection: 0 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(TDSPopoverComponent, [{
        type: Component,
        args: [{
                selector: 'tds-popover',
                exportAs: 'tdsPopoverComponent',
                animations: [zoomBigMotion],
                changeDetection: ChangeDetectionStrategy.OnPush,
                encapsulation: ViewEncapsulation.None,
                preserveWhitespaces: false,
                template: `
    <ng-template
      #overlay="cdkConnectedOverlay"
      cdkConnectedOverlay
      [cdkConnectedOverlayHasBackdrop]="hasBackdrop"
      [cdkConnectedOverlayOrigin]="origin"
      [cdkConnectedOverlayPositions]="_positions"
      [cdkConnectedOverlayOpen]="_visible"
      [cdkConnectedOverlayPush]="true"
      (overlayOutsideClick)="onClickOutside($event)"
      (detach)="hide()"
      (positionChange)="onPositionChange($event)"
    >
      <div
        class="tds-popover relative "    
        [ngClass]="_classMap"
        [ngStyle]="overlayStyle"
        [@zoomBigMotion]="'active'"
      >
        <div class="tds-popover-content relative"  [ngClass]="
        {
          'pt-2.5': _isBottom(),
          'pr-2.5': _isLeft(),
          'pl-2.5': _isRight(),
          'pb-2.5': _isTop()
        }">
          <div class="tds-popover-arrow absolute block bg-transparent pointer-events-none"
          [ngStyle]="_contentStyleArrow" >
            <span class="tds-popover-arrow-content block border-8 border-white  dark:border-d-neutral-3-300" [ngStyle]="_contentStyleArrowContent"></span>
          </div>
          <div class="tds-popover-inner  shadow-1-xl bg-white dark:bg-d-neutral-3-300 rounded-md" role="tooltip">
            <div>
              <div class="tds-popover-title font-semibold text-neutral-1-900 dark:text-d-neutral-1-900 text-title-1 p-4 border-b border-neutral-2-200 dark:border-d-neutral-2-200" *ngIf="title">
                <ng-container *tdsStringTemplateOutlet="title">{{ title }}</ng-container>
              </div>
              <div class="p-4">
                <div class="tds-popover-inner-content text-neutral-1-900 dark:text-d-neutral-1-900 ">
                  <ng-container *tdsStringTemplateOutlet="content">{{ content }}</ng-container>
                </div>
                <div *ngIf="footer" class="tds-popover-inner-footer" [ngClass]="{'pt-8':isFooterString}">
                  <ng-container *tdsStringTemplateOutlet="footer">{{ footer }}</ng-container>
                </div>
              </div>            
            </div>
          </div>
        </div>
      </div>
    </ng-template>
  `
            }]
    }], function () { return [{ type: i0.ChangeDetectorRef }, { type: i1.Directionality, decorators: [{
                type: Optional
            }] }]; }, null); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9wb3Zlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL3Rkcy11aS9wb3BvdmVyL3BvcG92ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUdBLE9BQU8sRUFDTCx1QkFBdUIsRUFFdkIsU0FBUyxFQUlULFNBQVMsRUFFVCxZQUFZLEVBRVosS0FBSyxFQUNMLFFBQVEsRUFDUixNQUFNLEVBRU4sV0FBVyxFQUVYLGlCQUFpQixFQUNsQixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFFdEQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQ3JELE9BQU8sRUFBRSxjQUFjLEVBQXNCLHVCQUF1QixFQUFFLG1CQUFtQixFQUFxQixNQUFNLGdCQUFnQixDQUFDOzs7Ozs7O0lBNEZySCw2QkFBK0M7SUFBQSxZQUFXO0lBQUEsMEJBQWU7OztJQUExQixlQUFXO0lBQVgsa0NBQVc7OztJQUQ1RCwrQkFBbUw7SUFDakwsMkdBQXlFO0lBQzNFLGlCQUFNOzs7SUFEVyxlQUE4QjtJQUE5QixzREFBOEI7OztJQUkzQyw2QkFBaUQ7SUFBQSxZQUFhO0lBQUEsMEJBQWU7OztJQUE1QixlQUFhO0lBQWIsb0NBQWE7OztJQUc5RCw2QkFBZ0Q7SUFBQSxZQUFZO0lBQUEsMEJBQWU7OztJQUEzQixlQUFZO0lBQVosbUNBQVk7Ozs7SUFEOUQsK0JBQXlGO0lBQ3ZGLDRHQUEyRTtJQUM3RSxpQkFBTTs7O0lBRitDLDJFQUFtQztJQUN2RSxlQUErQjtJQUEvQix1REFBK0I7Ozs7SUEzQjFELDhCQUtDLGFBQUEsYUFBQTtJQVVLLDBCQUE4STtJQUNoSixpQkFBTTtJQUNOLDhCQUF1RyxVQUFBO0lBRW5HLGtGQUVNO0lBQ04sOEJBQWlCLGFBQUE7SUFFYixxR0FBNkU7SUFDL0UsaUJBQU07SUFDTixxRkFFTTtJQUNSLGlCQUFNLEVBQUEsRUFBQSxF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Q0FBQSxnREFBQSx5Q0FBQSxpQ0FBQTswSkFSdEMsQ0FBQyxhQUFhLENBQUM7dUZBc0RoQixtQkFBbUI7Y0F6RC9CLFNBQVM7ZUFBQztnQkFDVCxRQUFRLEVBQUUsYUFBYTtnQkFDdkIsUUFBUSxFQUFFLHFCQUFxQjtnQkFDL0IsVUFBVSxFQUFFLENBQUMsYUFBYSxDQUFDO2dCQUMzQixlQUFlLEVBQUUsdUJBQXVCLENBQUMsTUFBTTtnQkFDL0MsYUFBYSxFQUFFLGlCQUFpQixDQUFDLElBQUk7Z0JBQ3JDLG1CQUFtQixFQUFFLEtBQUs7Z0JBQzFCLFFBQVEsRUFBRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBZ0RUO2FBQ0Y7O3NCQU1JLFFBQVEiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuXHJcbmltcG9ydCB7IERpcmVjdGlvbmFsaXR5IH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2JpZGknO1xyXG5pbXBvcnQge1xyXG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxyXG4gIENoYW5nZURldGVjdG9yUmVmLFxyXG4gIENvbXBvbmVudCxcclxuICBDb21wb25lbnRGYWN0b3J5LFxyXG4gIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcclxuICBDb21wb25lbnRSZWYsXHJcbiAgRGlyZWN0aXZlLFxyXG4gIEVsZW1lbnRSZWYsXHJcbiAgRXZlbnRFbWl0dGVyLFxyXG4gIEhvc3QsXHJcbiAgSW5wdXQsXHJcbiAgT3B0aW9uYWwsXHJcbiAgT3V0cHV0LFxyXG4gIFJlbmRlcmVyMixcclxuICBUZW1wbGF0ZVJlZixcclxuICBWaWV3Q29udGFpbmVyUmVmLFxyXG4gIFZpZXdFbmNhcHN1bGF0aW9uXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IHpvb21CaWdNb3Rpb24gfSBmcm9tICd0ZHMtdWkvY29yZS9hbmltYXRpb24nO1xyXG5pbXBvcnQgeyBOZ0NsYXNzSW50ZXJmYWNlLCBOZ1N0eWxlSW50ZXJmYWNlLCBURFNUU1R5cGUgfSBmcm9tICd0ZHMtdWkvY29yZS9jb25maWcnO1xyXG5pbXBvcnQgeyBJbnB1dEJvb2xlYW4gfSBmcm9tICd0ZHMtdWkvc2hhcmVkL3V0aWxpdHknO1xyXG5pbXBvcnQgeyBpc1Rvb2x0aXBFbXB0eSwgVERTUHJvcGVydHlNYXBwaW5nLCBURFNUb29sdGlwQmFzZURpcmVjdGl2ZSwgVERTVG9vbFRpcENvbXBvbmVudCwgVERTVG9vbHRpcFRyaWdnZXIgfSBmcm9tICd0ZHMtdWkvdG9vbHRpcCc7XHJcblxyXG5ARGlyZWN0aXZlKHtcclxuICBzZWxlY3RvcjogJ1t0ZHMtcG9wb3Zlcl0nLFxyXG4gIGV4cG9ydEFzOiAndGRzUG9wb3ZlcicsXHJcbiAgaG9zdDoge1xyXG4gICAgJ1tjbGFzcy50ZHMtcG9wb3Zlci1vcGVuXSc6ICd2aXNpYmxlJ1xyXG4gIH1cclxufSlcclxuZXhwb3J0IGNsYXNzIFREU1BvcG92ZXJEaXJlY3RpdmUgZXh0ZW5kcyBURFNUb29sdGlwQmFzZURpcmVjdGl2ZSB7XHJcbiAgLy8gcmVhZG9ubHkgX3Rkc01vZHVsZU5hbWU6IFREU0NvbmZpZ0tleSA9IFREU19DT05GSUdfTU9EVUxFX05BTUU7XHJcblxyXG4gIEBJbnB1dCgncG9wb3ZlclRpdGxlJykgb3ZlcnJpZGUgdGl0bGU/OiBURFNUU1R5cGU7XHJcbiAgQElucHV0KCdwb3BvdmVyQ29udGVudCcpIG92ZXJyaWRlIGNvbnRlbnQ/OiBURFNUU1R5cGU7XHJcbiAgQElucHV0KCdwb3BvdmVyRm9vdGVyJykgb3ZlcnJpZGUgZm9vdGVyPzogVERTVFNUeXBlO1xyXG4gIEBJbnB1dCgndGRzLXBvcG92ZXInKSBvdmVycmlkZSBkaXJlY3RpdmVUaXRsZT86IFREU1RTVHlwZSB8IG51bGw7XHJcbiAgQElucHV0KCdwb3BvdmVyVHJpZ2dlcicpIG92ZXJyaWRlIHRyaWdnZXI/OiBURFNUb29sdGlwVHJpZ2dlciA9ICdob3Zlcic7XHJcbiAgQElucHV0KCdwb3BvdmVyUGxhY2VtZW50Jykgb3ZlcnJpZGUgcGxhY2VtZW50Pzogc3RyaW5nIHwgc3RyaW5nW10gPSAndG9wJztcclxuICBASW5wdXQoJ3BvcG92ZXJPcmlnaW4nKSBvdmVycmlkZSBvcmlnaW4/OiBFbGVtZW50UmVmPEhUTUxFbGVtZW50PjtcclxuICBASW5wdXQoJ3BvcG92ZXJWaXNpYmxlJykgb3ZlcnJpZGUgdmlzaWJsZT86IGJvb2xlYW47XHJcbiAgQElucHV0KCdwb3BvdmVyTW91c2VFbnRlckRlbGF5Jykgb3ZlcnJpZGUgbW91c2VFbnRlckRlbGF5PzogbnVtYmVyO1xyXG4gIEBJbnB1dCgncG9wb3Zlck1vdXNlTGVhdmVEZWxheScpIG92ZXJyaWRlIG1vdXNlTGVhdmVEZWxheT86IG51bWJlcjtcclxuICBASW5wdXQoJ3BvcG92ZXJPdmVybGF5Q2xhc3NOYW1lJykgb3ZlcnJpZGUgb3ZlcmxheUNsYXNzTmFtZT86IHN0cmluZztcclxuICBASW5wdXQoJ3BvcG92ZXJPdmVybGF5U3R5bGUnKSBvdmVycmlkZSBvdmVybGF5U3R5bGU/OiBOZ1N0eWxlSW50ZXJmYWNlO1xyXG4gIEBJbnB1dCgpIEBJbnB1dEJvb2xlYW4oKSAgcG9wb3ZlckJhY2tkcm9wPzogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIEBJbnB1dCgncG9wb3ZlckF1dG9DbG9zZScpIGF1dG9DbG9zZT86IGJvb2xlYW4gPSB0cnVlO1xyXG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1vdXRwdXQtcmVuYW1lXHJcbiAgQE91dHB1dCgncG9wb3ZlclZpc2libGVDaGFuZ2UnKSByZWFkb25seSB2aXNpYmxlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxib29sZWFuPigpO1xyXG5cclxuICBjb21wb25lbnRSZWY6IENvbXBvbmVudFJlZjxURFNQb3BvdmVyQ29tcG9uZW50PiA9IHRoaXMuaG9zdFZpZXcuY3JlYXRlQ29tcG9uZW50KFREU1BvcG92ZXJDb21wb25lbnQpO1xyXG4gIHByb3RlY3RlZCBnZXRQcm94eVByb3BlcnR5TWFwKCk6IFREU1Byb3BlcnR5TWFwcGluZyB7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcG9wb3ZlckJhY2tkcm9wOiBbJ2JhY2tkcm9wJywgKCkgPT4gdGhpcy5wb3BvdmVyQmFja2Ryb3BdLFxyXG4gICAgICBhdXRvQ2xvc2U6IFsnYXV0b0Nsb3NlJywgKCkgPT4gdGhpcy5hdXRvQ2xvc2VdLFxyXG4gICAgICAuLi5zdXBlci5nZXRQcm94eVByb3BlcnR5TWFwKClcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYsXHJcbiAgICBob3N0VmlldzogVmlld0NvbnRhaW5lclJlZixcclxuICAgIHJlc29sdmVyOiBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXHJcbiAgICByZW5kZXJlcjogUmVuZGVyZXIyLFxyXG4gICAgLy8gQEhvc3QoKSBAT3B0aW9uYWwoKSBwdWJsaWMgbm9BbmltYXRpb24/OiBURFNOb0FuaW1hdGlvbkRpcmVjdGl2ZSxcclxuICAgIC8vIHRkc0NvbmZpZ1NlcnZpY2U/OiBURFNDb25maWdTZXJ2aWNlXHJcbiAgKSB7XHJcbiAgICBzdXBlcihlbGVtZW50UmVmLCBob3N0VmlldywgcmVzb2x2ZXIsIHJlbmRlcmVyKTtcclxuICB9XHJcblxyXG59XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ3Rkcy1wb3BvdmVyJyxcclxuICBleHBvcnRBczogJ3Rkc1BvcG92ZXJDb21wb25lbnQnLFxyXG4gIGFuaW1hdGlvbnM6IFt6b29tQmlnTW90aW9uXSxcclxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcclxuICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxyXG4gIHByZXNlcnZlV2hpdGVzcGFjZXM6IGZhbHNlLFxyXG4gIHRlbXBsYXRlOiBgXHJcbiAgICA8bmctdGVtcGxhdGVcclxuICAgICAgI292ZXJsYXk9XCJjZGtDb25uZWN0ZWRPdmVybGF5XCJcclxuICAgICAgY2RrQ29ubmVjdGVkT3ZlcmxheVxyXG4gICAgICBbY2RrQ29ubmVjdGVkT3ZlcmxheUhhc0JhY2tkcm9wXT1cImhhc0JhY2tkcm9wXCJcclxuICAgICAgW2Nka0Nvbm5lY3RlZE92ZXJsYXlPcmlnaW5dPVwib3JpZ2luXCJcclxuICAgICAgW2Nka0Nvbm5lY3RlZE92ZXJsYXlQb3NpdGlvbnNdPVwiX3Bvc2l0aW9uc1wiXHJcbiAgICAgIFtjZGtDb25uZWN0ZWRPdmVybGF5T3Blbl09XCJfdmlzaWJsZVwiXHJcbiAgICAgIFtjZGtDb25uZWN0ZWRPdmVybGF5UHVzaF09XCJ0cnVlXCJcclxuICAgICAgKG92ZXJsYXlPdXRzaWRlQ2xpY2spPVwib25DbGlja091dHNpZGUoJGV2ZW50KVwiXHJcbiAgICAgIChkZXRhY2gpPVwiaGlkZSgpXCJcclxuICAgICAgKHBvc2l0aW9uQ2hhbmdlKT1cIm9uUG9zaXRpb25DaGFuZ2UoJGV2ZW50KVwiXHJcbiAgICA+XHJcbiAgICAgIDxkaXZcclxuICAgICAgICBjbGFzcz1cInRkcy1wb3BvdmVyIHJlbGF0aXZlIFwiICAgIFxyXG4gICAgICAgIFtuZ0NsYXNzXT1cIl9jbGFzc01hcFwiXHJcbiAgICAgICAgW25nU3R5bGVdPVwib3ZlcmxheVN0eWxlXCJcclxuICAgICAgICBbQHpvb21CaWdNb3Rpb25dPVwiJ2FjdGl2ZSdcIlxyXG4gICAgICA+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInRkcy1wb3BvdmVyLWNvbnRlbnQgcmVsYXRpdmVcIiAgW25nQ2xhc3NdPVwiXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgJ3B0LTIuNSc6IF9pc0JvdHRvbSgpLFxyXG4gICAgICAgICAgJ3ByLTIuNSc6IF9pc0xlZnQoKSxcclxuICAgICAgICAgICdwbC0yLjUnOiBfaXNSaWdodCgpLFxyXG4gICAgICAgICAgJ3BiLTIuNSc6IF9pc1RvcCgpXHJcbiAgICAgICAgfVwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInRkcy1wb3BvdmVyLWFycm93IGFic29sdXRlIGJsb2NrIGJnLXRyYW5zcGFyZW50IHBvaW50ZXItZXZlbnRzLW5vbmVcIlxyXG4gICAgICAgICAgW25nU3R5bGVdPVwiX2NvbnRlbnRTdHlsZUFycm93XCIgPlxyXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRkcy1wb3BvdmVyLWFycm93LWNvbnRlbnQgYmxvY2sgYm9yZGVyLTggYm9yZGVyLXdoaXRlICBkYXJrOmJvcmRlci1kLW5ldXRyYWwtMy0zMDBcIiBbbmdTdHlsZV09XCJfY29udGVudFN0eWxlQXJyb3dDb250ZW50XCI+PC9zcGFuPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidGRzLXBvcG92ZXItaW5uZXIgIHNoYWRvdy0xLXhsIGJnLXdoaXRlIGRhcms6YmctZC1uZXV0cmFsLTMtMzAwIHJvdW5kZWQtbWRcIiByb2xlPVwidG9vbHRpcFwiPlxyXG4gICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZHMtcG9wb3Zlci10aXRsZSBmb250LXNlbWlib2xkIHRleHQtbmV1dHJhbC0xLTkwMCBkYXJrOnRleHQtZC1uZXV0cmFsLTEtOTAwIHRleHQtdGl0bGUtMSBwLTQgYm9yZGVyLWIgYm9yZGVyLW5ldXRyYWwtMi0yMDAgZGFyazpib3JkZXItZC1uZXV0cmFsLTItMjAwXCIgKm5nSWY9XCJ0aXRsZVwiPlxyXG4gICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqdGRzU3RyaW5nVGVtcGxhdGVPdXRsZXQ9XCJ0aXRsZVwiPnt7IHRpdGxlIH19PC9uZy1jb250YWluZXI+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInAtNFwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRkcy1wb3BvdmVyLWlubmVyLWNvbnRlbnQgdGV4dC1uZXV0cmFsLTEtOTAwIGRhcms6dGV4dC1kLW5ldXRyYWwtMS05MDAgXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXIgKnRkc1N0cmluZ1RlbXBsYXRlT3V0bGV0PVwiY29udGVudFwiPnt7IGNvbnRlbnQgfX08L25nLWNvbnRhaW5lcj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiAqbmdJZj1cImZvb3RlclwiIGNsYXNzPVwidGRzLXBvcG92ZXItaW5uZXItZm9vdGVyXCIgW25nQ2xhc3NdPVwieydwdC04Jzppc0Zvb3RlclN0cmluZ31cIj5cclxuICAgICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqdGRzU3RyaW5nVGVtcGxhdGVPdXRsZXQ9XCJmb290ZXJcIj57eyBmb290ZXIgfX08L25nLWNvbnRhaW5lcj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvZGl2PiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvbmctdGVtcGxhdGU+XHJcbiAgYFxyXG59KVxyXG5leHBvcnQgY2xhc3MgVERTUG9wb3ZlckNvbXBvbmVudCBleHRlbmRzIFREU1Rvb2xUaXBDb21wb25lbnQge1xyXG4gIF9wcmVmaXggPSAndGRzLXBvcG92ZXInO1xyXG4gIF9jbGFzc1BvcG9wdmVyQ29udGVudDogTmdDbGFzc0ludGVyZmFjZSA9IHt9O1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgIEBPcHRpb25hbCgpIGRpcmVjdGlvbmFsaXR5OiBEaXJlY3Rpb25hbGl0eSxcclxuICAgIC8vIEBIb3N0KCkgQE9wdGlvbmFsKCkgcHVibGljIG5vQW5pbWF0aW9uPzogVERTTm9BbmltYXRpb25EaXJlY3RpdmVcclxuICApIHtcclxuICAgIHN1cGVyKGNkciwgZGlyZWN0aW9uYWxpdHkpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGhhc0JhY2tkcm9wKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMudHJpZ2dlciA9PT0gJ2NsaWNrJyA/IHRoaXMuYmFja2Ryb3AgOiBmYWxzZTtcclxuICB9XHJcbiAgZ2V0IGlzRm9vdGVyU3RyaW5nKCkge1xyXG4gICAgcmV0dXJuICFpc1Rvb2x0aXBFbXB0eSh0aGlzLmZvb3RlcikgJiYgISh0aGlzLmZvb3RlciBpbnN0YW5jZW9mIFRlbXBsYXRlUmVmKTtcclxuICB9XHJcbiAgcHJvdGVjdGVkIGlzRW1wdHkoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gaXNUb29sdGlwRW1wdHkodGhpcy50aXRsZSkgJiYgaXNUb29sdGlwRW1wdHkodGhpcy5jb250ZW50KTtcclxuICB9XHJcbiAgdXBkYXRlU3R5bGVzKCk6IHZvaWQge1xyXG4gICAgY29uc3QgaXNDb2xvclByZXNldCA9IHRoaXMuY29sb3I7XHJcbiAgICB0aGlzLl9jbGFzc01hcCA9IHtcclxuICAgICAgW3RoaXMub3ZlcmxheUNsYXNzTmFtZV06IHRydWUsXHJcbiAgICAgIFtgJHt0aGlzLl9wcmVmaXh9LXBsYWNlbWVudC0ke3RoaXMucHJlZmVycmVkUGxhY2VtZW50fWBdOiB0cnVlLFxyXG4gICAgICBbYCR7dGhpcy5fcHJlZml4fS0ke3RoaXMuY29sb3J9YF06IGlzQ29sb3JQcmVzZXQsXHJcblxyXG4gICAgfTtcclxuICAgIHRoaXMuc3R5bGVBcnJvdygpO1xyXG4gIH1cclxuICBzdHlsZUFycm93KCkge1xyXG4gICAgbGV0IGJvcmRlclRyYW5zcGFyZW50ID0gJzhweCBzb2xpZCB0cmFuc3BhcmVudCc7XHJcbiAgICAvLyBsZXQgYm9yZGVyQ29sb3IgPSAnOHB4IHNvbGlkICNmZmYnO1xyXG4gICAgaWYgKHRoaXMucHJlZmVycmVkUGxhY2VtZW50LmluZGV4T2YoXCJ0b3BcIikgPiAtMSkge1xyXG4gICAgICB0aGlzLl9jb250ZW50U3R5bGVBcnJvd0NvbnRlbnQgPSB7XHJcbiAgICAgICAgd2lkdGg6ICcwJyxcclxuICAgICAgICBoZWlnaHQ6ICcwJyxcclxuICAgICAgICBib3JkZXJMZWZ0OiBib3JkZXJUcmFuc3BhcmVudCxcclxuICAgICAgICBib3JkZXJSaWdodDogYm9yZGVyVHJhbnNwYXJlbnQsXHJcbiAgICAgICAgYm9yZGVyQm90dG9tOiAwLFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5wcmVmZXJyZWRQbGFjZW1lbnQuaW5kZXhPZihcImJvdHRvbVwiKSA+IC0xKSB7XHJcbiAgICAgIHRoaXMuX2NvbnRlbnRTdHlsZUFycm93Q29udGVudCA9IHtcclxuICAgICAgICB3aWR0aDogJzAnLFxyXG4gICAgICAgIGhlaWdodDogJzAnLFxyXG4gICAgICAgIGJvcmRlckxlZnQ6IGJvcmRlclRyYW5zcGFyZW50LFxyXG4gICAgICAgIGJvcmRlclJpZ2h0OiBib3JkZXJUcmFuc3BhcmVudCxcclxuICAgICAgICBib3JkZXJUb3A6IDAsXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICh0aGlzLnByZWZlcnJlZFBsYWNlbWVudC5pbmRleE9mKFwibGVmdFwiKSA+IC0xKSB7XHJcbiAgICAgIHRoaXMuX2NvbnRlbnRTdHlsZUFycm93Q29udGVudCA9IHtcclxuICAgICAgICB3aWR0aDogJzAnLFxyXG4gICAgICAgIGhlaWdodDogJzAnLFxyXG4gICAgICAgIGJvcmRlclRvcDogYm9yZGVyVHJhbnNwYXJlbnQsXHJcbiAgICAgICAgYm9yZGVyUmlnaHQ6IDAsXHJcbiAgICAgICAgYm9yZGVyQm90dG9tOiBib3JkZXJUcmFuc3BhcmVudCxcclxuXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICh0aGlzLnByZWZlcnJlZFBsYWNlbWVudC5pbmRleE9mKFwicmlnaHRcIikgPiAtMSkge1xyXG4gICAgICB0aGlzLl9jb250ZW50U3R5bGVBcnJvd0NvbnRlbnQgPSB7XHJcbiAgICAgICAgd2lkdGg6ICcwJyxcclxuICAgICAgICBoZWlnaHQ6ICcwJyxcclxuICAgICAgICBib3JkZXJUb3A6IGJvcmRlclRyYW5zcGFyZW50LFxyXG4gICAgICAgIGJvcmRlckxlZnQ6IDAsXHJcbiAgICAgICAgYm9yZGVyQm90dG9tOiBib3JkZXJUcmFuc3BhcmVudCxcclxuXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHN3aXRjaCAodGhpcy5wcmVmZXJyZWRQbGFjZW1lbnQpIHtcclxuICAgICAgLy8jcmVnaW9uIHRvcFxyXG4gICAgICBjYXNlIFwidG9wXCI6XHJcbiAgICAgICAgdGhpcy5fY29udGVudFN0eWxlQXJyb3cgPSB7XHJcbiAgICAgICAgICBib3R0b206ICcycHgnLFxyXG4gICAgICAgICAgbGVmdDogJzUwJScsXHJcbiAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKC01MCUpJyxcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJ0b3BMZWZ0XCI6XHJcbiAgICAgICAgdGhpcy5fY29udGVudFN0eWxlQXJyb3cgPSB7XHJcbiAgICAgICAgICBib3R0b206ICcycHgnLFxyXG4gICAgICAgICAgbGVmdDogJzEwcHgnLFxyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcInRvcFJpZ2h0XCI6XHJcbiAgICAgICAgdGhpcy5fY29udGVudFN0eWxlQXJyb3cgPSB7XHJcbiAgICAgICAgICBib3R0b206ICcycHgnLFxyXG4gICAgICAgICAgcmlnaHQ6ICcxMHB4JyxcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIC8vI2VuZHJlZ2lvblxyXG4gICAgICAvLyNyZWdpb24gYm90dG9tXHJcbiAgICAgIGNhc2UgXCJib3R0b21cIjpcclxuICAgICAgICB0aGlzLl9jb250ZW50U3R5bGVBcnJvdyA9IHtcclxuICAgICAgICAgIHRvcDogJzJweCcsXHJcbiAgICAgICAgICBsZWZ0OiAnNTAlJyxcclxuICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoLTUwJSknLFxyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcImJvdHRvbUxlZnRcIjpcclxuICAgICAgICB0aGlzLl9jb250ZW50U3R5bGVBcnJvdyA9IHtcclxuICAgICAgICAgIHRvcDogJzJweCcsXHJcbiAgICAgICAgICBsZWZ0OiAnMTBweCcsXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiYm90dG9tUmlnaHRcIjpcclxuICAgICAgICB0aGlzLl9jb250ZW50U3R5bGVBcnJvdyA9IHtcclxuICAgICAgICAgIHRvcDogJzJweCcsXHJcbiAgICAgICAgICByaWdodDogJzEwcHgnLFxyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgLy8jZW5kcmVnaW9uXHJcbiAgICAgIC8vI3JlZ2lvbiBsZWZ0XHJcbiAgICAgIGNhc2UgXCJsZWZ0XCI6XHJcbiAgICAgICAgdGhpcy5fY29udGVudFN0eWxlQXJyb3cgPSB7XHJcbiAgICAgICAgICByaWdodDogJzJweCcsXHJcbiAgICAgICAgICB0b3A6ICc1MCUnLFxyXG4gICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlWSgtNTAlKScsXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwibGVmdFRvcFwiOlxyXG4gICAgICAgIHRoaXMuX2NvbnRlbnRTdHlsZUFycm93ID0ge1xyXG4gICAgICAgICAgcmlnaHQ6ICcycHgnLFxyXG4gICAgICAgICAgdG9wOiAnMTBweCdcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJsZWZ0Qm90dG9tXCI6XHJcbiAgICAgICAgdGhpcy5fY29udGVudFN0eWxlQXJyb3cgPSB7XHJcbiAgICAgICAgICByaWdodDogJzJweCcsXHJcbiAgICAgICAgICBib3R0b206ICcxMHB4J1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgLy8jZW5kcmVnaW9uXHJcbiAgICAgIC8vI3JlZ2lvbiByaWdodFxyXG4gICAgICBjYXNlIFwicmlnaHRcIjpcclxuICAgICAgICB0aGlzLl9jb250ZW50U3R5bGVBcnJvdyA9IHtcclxuICAgICAgICAgIGxlZnQ6ICcycHgnLFxyXG4gICAgICAgICAgdG9wOiAnNTAlJyxcclxuICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVkoLTUwJSknLFxyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcInJpZ2h0VG9wXCI6XHJcbiAgICAgICAgdGhpcy5fY29udGVudFN0eWxlQXJyb3cgPSB7XHJcbiAgICAgICAgICBsZWZ0OiAnMnB4JyxcclxuICAgICAgICAgIHRvcDogJzEwcHgnXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwicmlnaHRCb3R0b21cIjpcclxuICAgICAgICB0aGlzLl9jb250ZW50U3R5bGVBcnJvdyA9IHtcclxuICAgICAgICAgIGxlZnQ6ICcycHgnLFxyXG4gICAgICAgICAgYm90dG9tOiAnMTBweCdcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIC8vLy8jZW5kcmVnaW9uXHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgdGhpcy5fY29udGVudFN0eWxlQXJyb3cgPSB7XHJcbiAgICAgICAgICBib3R0b206ICcycHgnLFxyXG4gICAgICAgICAgbGVmdDogJzUwJScsXHJcbiAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKC01MCUpJyxcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcblxyXG4gIH1cclxuICBfaXNUb3AoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wcmVmZXJyZWRQbGFjZW1lbnQuaW5kZXhPZihcInRvcFwiKSA+IC0xO1xyXG4gIH1cclxuICBfaXNMZWZ0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMucHJlZmVycmVkUGxhY2VtZW50LmluZGV4T2YoXCJsZWZ0XCIpID4gLTE7XHJcbiAgfVxyXG4gIF9pc1JpZ2h0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMucHJlZmVycmVkUGxhY2VtZW50LmluZGV4T2YoXCJyaWdodFwiKSA+IC0xO1xyXG4gIH1cclxuICBfaXNCb3R0b20oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wcmVmZXJyZWRQbGFjZW1lbnQuaW5kZXhPZihcImJvdHRvbVwiKSA+IC0xO1xyXG4gIH1cclxuXHJcbn1cclxuIl19