import { __decorate } from "tslib";
import { ChangeDetectionStrategy, Component, EventEmitter, Input, Output, ViewChild, ViewEncapsulation } from '@angular/core';
import { WithConfig } from 'tds-ui/core/config';
import { InputNumber, TDSHelperString } from 'tds-ui/shared/utility';
import * as i0 from "@angular/core";
import * as i1 from "tds-ui/core/config";
import * as i2 from "@angular/cdk/platform";
import * as i3 from "@angular/common";
const _c0 = ["textEl"];
function TDSAvatarComponent_i_0_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelement(0, "i");
} if (rf & 2) {
    const ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵclassMap(ctx_r0.icon);
} }
function TDSAvatarComponent_img_1_Template(rf, ctx) { if (rf & 1) {
    const _r7 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "img", 6);
    i0.ɵɵlistener("error", function TDSAvatarComponent_img_1_Template_img_error_0_listener($event) { i0.ɵɵrestoreView(_r7); const ctx_r6 = i0.ɵɵnextContext(); return ctx_r6.imgError($event); });
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵproperty("src", ctx_r1.tdsSrc, i0.ɵɵsanitizeUrl);
    i0.ɵɵattribute("srcset", ctx_r1.tdsSrcSet, i0.ɵɵsanitizeUrl)("alt", ctx_r1.alt);
} }
function TDSAvatarComponent_span_2_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "span", 7, 8);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r2.text);
} }
function TDSAvatarComponent__svg_svg_3_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵnamespaceSVG();
    i0.ɵɵelementStart(0, "svg", 9);
    i0.ɵɵelement(1, "path", 10)(2, "path", 11)(3, "path", 12);
    i0.ɵɵelementEnd();
} }
function TDSAvatarComponent__svg_svg_4_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵnamespaceSVG();
    i0.ɵɵelementStart(0, "svg", 13);
    i0.ɵɵelement(1, "rect", 14)(2, "path", 15)(3, "path", 16);
    i0.ɵɵelementEnd();
} }
function TDSAvatarComponent_img_5_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelement(0, "img", 17);
} if (rf & 2) {
    const ctx_r5 = i0.ɵɵnextContext();
    i0.ɵɵproperty("src", ctx_r5.tdsSrcPlaceholder, i0.ɵɵsanitizeUrl);
    i0.ɵɵattribute("srcset", ctx_r5.tdsSrcPlaceholder, i0.ɵɵsanitizeUrl)("alt", ctx_r5.alt);
} }
const TDS_CONFIG_MODULE_NAME = 'avatar';
export class TDSAvatarComponent {
    constructor(tdsConfigService, elementRef, cdr, platform) {
        this.tdsConfigService = tdsConfigService;
        this.elementRef = elementRef;
        this.cdr = cdr;
        this.platform = platform;
        this._tdsModuleName = TDS_CONFIG_MODULE_NAME;
        this.shape = 'circle';
        this.size = 'md';
        this.gap = 4;
        this.isAvatar = true;
        this.error = new EventEmitter();
        this.showPlaceholder = false;
        this.hasText = false;
        this.hasSrc = true;
        this.hasIcon = false;
        this.textStyles = {};
        this.classMap = {};
        this.customSize = null;
        this.el = this.elementRef.nativeElement;
        // TODO: move to host after View Engine deprecation
        this.elementRef.nativeElement.classList.add('tds-avatar');
    }
    get hasTdsSrc() {
        return TDSHelperString.hasValueString(this.tdsSrc);
    }
    imgError($event) {
        this.error.emit($event);
        if (!$event.defaultPrevented) {
            this.hasSrc = false;
            this.hasIcon = false;
            this.hasText = false;
            this.showPlaceholder = false;
            if (TDSHelperString.hasValueString(this.icon)) {
                this.hasIcon = true;
            }
            else if (TDSHelperString.hasValueString(this.text)) {
                this.hasText = true;
            }
            else {
                this.showPlaceholder = true;
            }
            this.cdr.detectChanges();
            this.setSizeStyle();
            this.notifyCalc();
        }
    }
    ngOnChanges() {
        this.hasText = !TDSHelperString.hasValueString(this.tdsSrc) && TDSHelperString.hasValueString(this.text);
        this.hasIcon = !TDSHelperString.hasValueString(this.tdsSrc) && TDSHelperString.hasValueString(this.icon);
        this.hasSrc = TDSHelperString.hasValueString(this.tdsSrc);
        this.showPlaceholder = !this.hasIcon && !this.hasSrc && !this.hasText;
        this.setSizeStyle();
        this.notifyCalc();
        this.buildClsCss();
        // this.buildClsIcon();
    }
    calcStringSize() {
        if (!TDSHelperString.hasValueString(this.text)) {
            return;
        }
        const childrenWidth = this.textEl.nativeElement.offsetWidth;
        const avatarWidth = this.el.getBoundingClientRect().width;
        const offset = this.gap * 2 < avatarWidth ? this.gap * 2 : 8;
        const scale = avatarWidth - offset < childrenWidth ? (avatarWidth - offset) / childrenWidth : 1;
        this.textStyles = {
            'transform-origin': `0 center`,
            transform: `scale(${scale}) translateX(-50%)`
        };
        if (this.customSize) {
            Object.assign(this.textStyles, {
                lineHeight: this.customSize
            });
        }
        this.cdr.detectChanges();
    }
    notifyCalc() {
        // If use ngAfterViewChecked, always demands more computations, so......
        if (this.platform.isBrowser) {
            setTimeout(() => {
                this.calcStringSize();
            });
        }
    }
    setSizeStyle() {
        if (typeof this.size === 'number') {
            this.customSize = `${this.size}px`;
        }
        else {
            this.customSize = null;
        }
        this.cdr.markForCheck();
    }
    buildClsCss() {
        this.classMap = {};
        let defaulClass = {
            "h-6": this.size === 'sm',
            "w-6": this.size === 'sm',
            "h-9": this.size === 'md',
            "w-9": this.size === 'md',
            "h-12": this.size === 'lg',
            "w-12": this.size === 'lg',
            "h-16": this.size === 'xl',
            "w-16": this.size === 'xl',
            "box-border": true,
            "m-0": true,
            "p-0": true,
            "relative": true,
            "inline-flex": true,
            "items-center": true,
            "justify-center": true,
            "overflow-hidden": true,
            "align-middle": true,
            "text-center": true,
            "whitespace-nowrap": true,
            "text-base": this.size === 'sm',
            "text-lg": this.size === 'md',
            "text-2xl": this.size === 'lg',
            "text-4xl": this.size === 'xl',
        };
        if (this.shape != "circle") {
            if (typeof this.size != "number")
                this.classMap = {
                    "rounded-md": this.size === 'sm',
                    "rounded-lg": this.size === 'md',
                    "rounded-10": this.size === 'lg',
                    "rounded-xl": this.size === 'xl',
                    ...defaulClass
                    // 
                };
            else {
                this.classMap = defaulClass;
            }
        }
        else {
            this.classMap = {
                "rounded-full": true,
                ...defaulClass
            };
        }
    }
    get hasTdsSrcPlaceholder() {
        return TDSHelperString.hasValueString(this.tdsSrcPlaceholder);
    }
    get element() {
        return this.el;
    }
}
TDSAvatarComponent.ɵfac = function TDSAvatarComponent_Factory(t) { return new (t || TDSAvatarComponent)(i0.ɵɵdirectiveInject(i1.TDSConfigService), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i2.Platform)); };
TDSAvatarComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: TDSAvatarComponent, selectors: [["tds-avatar"]], viewQuery: function TDSAvatarComponent_Query(rf, ctx) { if (rf & 1) {
        i0.ɵɵviewQuery(_c0, 5);
    } if (rf & 2) {
        let _t;
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.textEl = _t.first);
    } }, hostVars: 22, hostBindings: function TDSAvatarComponent_HostBindings(rf, ctx) { if (rf & 2) {
        i0.ɵɵclassMap(ctx.classMap);
        i0.ɵɵstyleProp("width", ctx.customSize)("height", ctx.customSize)("line-height", ctx.customSize)("font-size", ctx.hasIcon && ctx.customSize ? ctx.size / 2 : null, "px");
        i0.ɵɵclassProp("tds-avatar-lg", ctx.size === "lg")("tds-avatar-sm", ctx.size === "sm")("tds-avatar-square", ctx.shape === "square")("tds-avatar-circle", ctx.shape === "circle")("tds-avatar-icon", ctx.icon)("tds-avatar-image", ctx.hasSrc);
    } }, inputs: { shape: "shape", size: "size", gap: "gap", isAvatar: "isAvatar", text: "text", tdsSrc: "tdsSrc", tdsSrcSet: "tdsSrcSet", tdsSrcPlaceholder: "tdsSrcPlaceholder", alt: "alt", icon: "icon" }, outputs: { error: "error" }, exportAs: ["tdsAvatar"], features: [i0.ɵɵNgOnChangesFeature], decls: 6, vars: 6, consts: [[3, "class", 4, "ngIf"], [3, "src", "error", 4, "ngIf"], ["class", "tds-avatar-string", 4, "ngIf"], ["viewBox", "0 0 36 36", "class", "w-full h-full", "fill", "none", "xmlns", "http://www.w3.org/2000/svg", 4, "ngIf"], ["class", "w-full h-full", "xmlns", "http://www.w3.org/2000/svg", "viewBox", "0 0 480 480", "fill", "none", 4, "ngIf"], [3, "src", 4, "ngIf"], [3, "src", "error"], [1, "tds-avatar-string"], ["textEl", ""], ["viewBox", "0 0 36 36", "fill", "none", "xmlns", "http://www.w3.org/2000/svg", 1, "w-full", "h-full"], ["d", "M36 0H0V36H36V0Z", "fill", "#F2F4F7"], ["d", "M18 23.03C12.6318 23.0301 7.42685 24.876 3.258 28.258C2.07431 29.241 0.983696 30.3309 0 31.514L0 36H36V31.237C34.9771 30.1771 33.889 29.1822 32.742 28.258C28.5732 24.876 23.3682 23.0301 18 23.03Z", "fill", "#D0D7DE"], ["d", "M18 19.8C19.335 19.8 20.6401 19.4041 21.7501 18.6624C22.8601 17.9207 23.7253 16.8665 24.2362 15.6331C24.7471 14.3997 24.8808 13.0425 24.6203 11.7331C24.3598 10.4238 23.717 9.22102 22.773 8.27702C21.829 7.33302 20.6262 6.69014 19.3169 6.42969C18.0075 6.16924 16.6503 6.30291 15.4169 6.8138C14.1835 7.3247 13.1293 8.18986 12.3876 9.29989C11.6459 10.4099 11.25 11.715 11.25 13.05C11.25 14.8402 11.9612 16.5571 13.227 17.823C14.4929 19.0888 16.2098 19.8 18 19.8Z", "fill", "#D0D7DE"], ["xmlns", "http://www.w3.org/2000/svg", "viewBox", "0 0 480 480", "fill", "none", 1, "w-full", "h-full"], ["fill", "#E9EDF2", 1, "w-full", "h-full"], ["d", "M195.249 231.124C205.01 231.124 212.948 223.163 212.948 213.373C212.948 203.584 205.01 195.623 195.249 195.623C185.487 195.623 177.548 203.584 177.548 213.373C177.548 223.163 185.487 231.124 195.249 231.124Z", "fill", "#A1ACB8"], ["d", "M305.874 169H173.124C160.93 169 151 178.958 151 191.188V288.812C151 301.042 160.93 311 173.124 311H305.874C318.07 311 328 301.042 328 288.812V191.188C328 178.958 318.07 169 305.874 169ZM173.124 186.75H305.874C308.318 186.75 310.3 188.738 310.3 191.188V254.192L282.343 221.478C279.378 217.99 275.085 216.126 270.475 216.021C265.89 216.047 261.59 218.088 258.652 221.621L225.782 261.184L215.074 250.472C209.021 244.402 199.17 244.402 193.126 250.472L168.7 274.958V191.188C168.7 188.738 170.682 186.75 173.124 186.75Z", "fill", "#A1ACB8"], [3, "src"]], template: function TDSAvatarComponent_Template(rf, ctx) { if (rf & 1) {
        i0.ɵɵtemplate(0, TDSAvatarComponent_i_0_Template, 1, 2, "i", 0);
        i0.ɵɵtemplate(1, TDSAvatarComponent_img_1_Template, 1, 3, "img", 1);
        i0.ɵɵtemplate(2, TDSAvatarComponent_span_2_Template, 3, 1, "span", 2);
        i0.ɵɵtemplate(3, TDSAvatarComponent__svg_svg_3_Template, 4, 0, "svg", 3);
        i0.ɵɵtemplate(4, TDSAvatarComponent__svg_svg_4_Template, 4, 0, "svg", 4);
        i0.ɵɵtemplate(5, TDSAvatarComponent_img_5_Template, 1, 3, "img", 5);
    } if (rf & 2) {
        i0.ɵɵproperty("ngIf", ctx.icon && ctx.hasIcon);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngIf", ctx.tdsSrc && ctx.hasSrc);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngIf", ctx.text && ctx.hasText);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngIf", ctx.showPlaceholder && !ctx.hasTdsSrcPlaceholder && ctx.isAvatar);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngIf", ctx.showPlaceholder && !ctx.hasTdsSrcPlaceholder && !ctx.isAvatar);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngIf", ctx.showPlaceholder && ctx.hasTdsSrcPlaceholder);
    } }, directives: [i3.NgIf], encapsulation: 2, changeDetection: 0 });
__decorate([
    WithConfig()
], TDSAvatarComponent.prototype, "shape", void 0);
__decorate([
    WithConfig()
], TDSAvatarComponent.prototype, "size", void 0);
__decorate([
    WithConfig(),
    InputNumber()
], TDSAvatarComponent.prototype, "gap", void 0);
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(TDSAvatarComponent, [{
        type: Component,
        args: [{
                selector: 'tds-avatar',
                exportAs: 'tdsAvatar',
                template: `
  <i [class]="icon"  *ngIf="icon && hasIcon" ></i>
  <img *ngIf="tdsSrc && hasSrc" [src]="tdsSrc" [attr.srcset]="tdsSrcSet" [attr.alt]="alt" (error)="imgError($event)" />
  <span class="tds-avatar-string" #textEl *ngIf="text && hasText">{{ text }}</span>  
  <svg *ngIf="showPlaceholder && !hasTdsSrcPlaceholder && isAvatar" viewBox="0 0 36 36"  class="w-full h-full" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M36 0H0V36H36V0Z" fill="#F2F4F7"/>
<path d="M18 23.03C12.6318 23.0301 7.42685 24.876 3.258 28.258C2.07431 29.241 0.983696 30.3309 0 31.514L0 36H36V31.237C34.9771 30.1771 33.889 29.1822 32.742 28.258C28.5732 24.876 23.3682 23.0301 18 23.03Z" fill="#D0D7DE"/>
<path d="M18 19.8C19.335 19.8 20.6401 19.4041 21.7501 18.6624C22.8601 17.9207 23.7253 16.8665 24.2362 15.6331C24.7471 14.3997 24.8808 13.0425 24.6203 11.7331C24.3598 10.4238 23.717 9.22102 22.773 8.27702C21.829 7.33302 20.6262 6.69014 19.3169 6.42969C18.0075 6.16924 16.6503 6.30291 15.4169 6.8138C14.1835 7.3247 13.1293 8.18986 12.3876 9.29989C11.6459 10.4099 11.25 11.715 11.25 13.05C11.25 14.8402 11.9612 16.5571 13.227 17.823C14.4929 19.0888 16.2098 19.8 18 19.8Z" fill="#D0D7DE"/>
</svg>  
<svg *ngIf="showPlaceholder && !hasTdsSrcPlaceholder && !isAvatar" class="w-full h-full"   xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 480 480" fill="none">
<rect class="w-full h-full"  fill="#E9EDF2"/>
<path d="M195.249 231.124C205.01 231.124 212.948 223.163 212.948 213.373C212.948 203.584 205.01 195.623 195.249 195.623C185.487 195.623 177.548 203.584 177.548 213.373C177.548 223.163 185.487 231.124 195.249 231.124Z" fill="#A1ACB8"/>
<path d="M305.874 169H173.124C160.93 169 151 178.958 151 191.188V288.812C151 301.042 160.93 311 173.124 311H305.874C318.07 311 328 301.042 328 288.812V191.188C328 178.958 318.07 169 305.874 169ZM173.124 186.75H305.874C308.318 186.75 310.3 188.738 310.3 191.188V254.192L282.343 221.478C279.378 217.99 275.085 216.126 270.475 216.021C265.89 216.047 261.59 218.088 258.652 221.621L225.782 261.184L215.074 250.472C209.021 244.402 199.17 244.402 193.126 250.472L168.7 274.958V191.188C168.7 188.738 170.682 186.75 173.124 186.75Z" fill="#A1ACB8"/>
</svg>
<img *ngIf="showPlaceholder && hasTdsSrcPlaceholder" [src]="tdsSrcPlaceholder" [attr.srcset]="tdsSrcPlaceholder" [attr.alt]="alt"/>
  `,
                host: {
                    '[class.tds-avatar-lg]': `size === 'lg'`,
                    '[class.tds-avatar-sm]': `size === 'sm'`,
                    '[class.tds-avatar-square]': `shape === 'square'`,
                    '[class.tds-avatar-circle]': `shape === 'circle'`,
                    '[class.tds-avatar-icon]': `icon`,
                    '[class.tds-avatar-image]': `hasSrc `,
                    '[style.width]': 'customSize',
                    '[style.height]': 'customSize',
                    '[style.line-height]': 'customSize',
                    // size type is number when customSize is true
                    '[style.font-size.px]': '(hasIcon && customSize) ? $any(size) / 2 : null',
                    "[class]": 'classMap'
                },
                preserveWhitespaces: false,
                changeDetection: ChangeDetectionStrategy.OnPush,
                encapsulation: ViewEncapsulation.None
            }]
    }], function () { return [{ type: i1.TDSConfigService }, { type: i0.ElementRef }, { type: i0.ChangeDetectorRef }, { type: i2.Platform }]; }, { shape: [{
            type: Input
        }], size: [{
            type: Input
        }], gap: [{
            type: Input
        }], isAvatar: [{
            type: Input
        }], text: [{
            type: Input
        }], tdsSrc: [{
            type: Input
        }], tdsSrcSet: [{
            type: Input
        }], tdsSrcPlaceholder: [{
            type: Input
        }], alt: [{
            type: Input
        }], icon: [{
            type: Input
        }], error: [{
            type: Output
        }], textEl: [{
            type: ViewChild,
            args: ['textEl', { static: false }]
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXZhdGFyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL3Rkcy11aS9hdmF0YXIvYXZhdGFyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBSUEsT0FBTyxFQUNMLHVCQUF1QixFQUV2QixTQUFTLEVBRVQsWUFBWSxFQUNaLEtBQUssRUFFTCxNQUFNLEVBQ04sU0FBUyxFQUNULGlCQUFpQixFQUNsQixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQXNFLFVBQVUsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQ3BILE9BQU8sRUFBRSxXQUFXLEVBQUUsZUFBZSxFQUFFLE1BQU0sdUJBQXVCLENBQUM7Ozs7Ozs7SUFRbkUsb0JBQWdEOzs7SUFBN0MsMEJBQWM7Ozs7SUFDakIsOEJBQXFIO0lBQTdCLGtLQUFTLHVCQUFnQixJQUFDO0lBQWxILGlCQUFxSDs7O0lBQXZGLHFEQUFjO0lBQUMsNERBQXlCLG1CQUFBOzs7SUFDdEUsa0NBQWdFO0lBQUEsWUFBVTtJQUFBLGlCQUFPOzs7SUFBakIsZUFBVTtJQUFWLGlDQUFVOzs7SUFDMUUsbUJBQTRKO0lBQTVKLDhCQUE0SjtJQUM5SiwyQkFBMkMsZUFBQSxlQUFBO0lBRzNDLGlCQUFNOzs7SUFDTixtQkFBaUs7SUFBakssK0JBQWlLO0lBQ2pLLDJCQUE2QyxlQUFBLGVBQUE7SUFHN0MsaUJBQU07OztJQUNOLDBCQUFtSTs7O0lBQTlFLGdFQUF5QjtJQUFDLG9FQUFpQyxtQkFBQTs7QUFuQmhILE1BQU0sc0JBQXNCLEdBQWlCLFFBQVEsQ0FBQztBQXVDdEQsTUFBTSxPQUFPLGtCQUFrQjtJQTBCN0IsWUFDUyxnQkFBa0MsRUFDakMsVUFBc0IsRUFDdEIsR0FBc0IsRUFDdEIsUUFBa0I7UUFIbkIscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFrQjtRQUNqQyxlQUFVLEdBQVYsVUFBVSxDQUFZO1FBQ3RCLFFBQUcsR0FBSCxHQUFHLENB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QUFTO21CQUFDLFFBQVEsRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuXHJcbmltcG9ydCB7IE51bWJlcklucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2NvZXJjaW9uJztcclxuaW1wb3J0IHsgUGxhdGZvcm0gfSBmcm9tICdAYW5ndWxhci9jZGsvcGxhdGZvcm0nO1xyXG5pbXBvcnQge1xyXG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxyXG4gIENoYW5nZURldGVjdG9yUmVmLFxyXG4gIENvbXBvbmVudCxcclxuICBFbGVtZW50UmVmLFxyXG4gIEV2ZW50RW1pdHRlcixcclxuICBJbnB1dCxcclxuICBPbkNoYW5nZXMsXHJcbiAgT3V0cHV0LFxyXG4gIFZpZXdDaGlsZCxcclxuICBWaWV3RW5jYXBzdWxhdGlvblxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBOZ0NsYXNzSW50ZXJmYWNlLCBOZ1N0eWxlSW50ZXJmYWNlLCBURFNDb25maWdLZXksIFREU0NvbmZpZ1NlcnZpY2UsIFdpdGhDb25maWcgfSBmcm9tICd0ZHMtdWkvY29yZS9jb25maWcnO1xyXG5pbXBvcnQgeyBJbnB1dE51bWJlciwgVERTSGVscGVyU3RyaW5nIH0gZnJvbSAndGRzLXVpL3NoYXJlZC91dGlsaXR5JztcclxuXHJcbmNvbnN0IFREU19DT05GSUdfTU9EVUxFX05BTUU6IFREU0NvbmZpZ0tleSA9ICdhdmF0YXInO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICd0ZHMtYXZhdGFyJyxcclxuICBleHBvcnRBczogJ3Rkc0F2YXRhcicsXHJcbiAgdGVtcGxhdGU6IGBcclxuICA8aSBbY2xhc3NdPVwiaWNvblwiICAqbmdJZj1cImljb24gJiYgaGFzSWNvblwiID48L2k+XHJcbiAgPGltZyAqbmdJZj1cInRkc1NyYyAmJiBoYXNTcmNcIiBbc3JjXT1cInRkc1NyY1wiIFthdHRyLnNyY3NldF09XCJ0ZHNTcmNTZXRcIiBbYXR0ci5hbHRdPVwiYWx0XCIgKGVycm9yKT1cImltZ0Vycm9yKCRldmVudClcIiAvPlxyXG4gIDxzcGFuIGNsYXNzPVwidGRzLWF2YXRhci1zdHJpbmdcIiAjdGV4dEVsICpuZ0lmPVwidGV4dCAmJiBoYXNUZXh0XCI+e3sgdGV4dCB9fTwvc3Bhbj4gIFxyXG4gIDxzdmcgKm5nSWY9XCJzaG93UGxhY2Vob2xkZXIgJiYgIWhhc1Rkc1NyY1BsYWNlaG9sZGVyICYmIGlzQXZhdGFyXCIgdmlld0JveD1cIjAgMCAzNiAzNlwiICBjbGFzcz1cInctZnVsbCBoLWZ1bGxcIiBmaWxsPVwibm9uZVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj5cclxuPHBhdGggZD1cIk0zNiAwSDBWMzZIMzZWMFpcIiBmaWxsPVwiI0YyRjRGN1wiLz5cclxuPHBhdGggZD1cIk0xOCAyMy4wM0MxMi42MzE4IDIzLjAzMDEgNy40MjY4NSAyNC44NzYgMy4yNTggMjguMjU4QzIuMDc0MzEgMjkuMjQxIDAuOTgzNjk2IDMwLjMzMDkgMCAzMS41MTRMMCAzNkgzNlYzMS4yMzdDMzQuOTc3MSAzMC4xNzcxIDMzLjg4OSAyOS4xODIyIDMyLjc0MiAyOC4yNThDMjguNTczMiAyNC44NzYgMjMuMzY4MiAyMy4wMzAxIDE4IDIzLjAzWlwiIGZpbGw9XCIjRDBEN0RFXCIvPlxyXG48cGF0aCBkPVwiTTE4IDE5LjhDMTkuMzM1IDE5LjggMjAuNjQwMSAxOS40MDQxIDIxLjc1MDEgMTguNjYyNEMyMi44NjAxIDE3LjkyMDcgMjMuNzI1MyAxNi44NjY1IDI0LjIzNjIgMTUuNjMzMUMyNC43NDcxIDE0LjM5OTcgMjQuODgwOCAxMy4wNDI1IDI0LjYyMDMgMTEuNzMzMUMyNC4zNTk4IDEwLjQyMzggMjMuNzE3IDkuMjIxMDIgMjIuNzczIDguMjc3MDJDMjEuODI5IDcuMzMzMDIgMjAuNjI2MiA2LjY5MDE0IDE5LjMxNjkgNi40Mjk2OUMxOC4wMDc1IDYuMTY5MjQgMTYuNjUwMyA2LjMwMjkxIDE1LjQxNjkgNi44MTM4QzE0LjE4MzUgNy4zMjQ3IDEzLjEyOTMgOC4xODk4NiAxMi4zODc2IDkuMjk5ODlDMTEuNjQ1OSAxMC40MDk5IDExLjI1IDExLjcxNSAxMS4yNSAxMy4wNUMxMS4yNSAxNC44NDAyIDExLjk2MTIgMTYuNTU3MSAxMy4yMjcgMTcuODIzQzE0LjQ5MjkgMTkuMDg4OCAxNi4yMDk4IDE5LjggMTggMTkuOFpcIiBmaWxsPVwiI0QwRDdERVwiLz5cclxuPC9zdmc+ICBcclxuPHN2ZyAqbmdJZj1cInNob3dQbGFjZWhvbGRlciAmJiAhaGFzVGRzU3JjUGxhY2Vob2xkZXIgJiYgIWlzQXZhdGFyXCIgY2xhc3M9XCJ3LWZ1bGwgaC1mdWxsXCIgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgIHZpZXdCb3g9XCIwIDAgNDgwIDQ4MFwiIGZpbGw9XCJub25lXCI+XHJcbjxyZWN0IGNsYXNzPVwidy1mdWxsIGgtZnVsbFwiICBmaWxsPVwiI0U5RURGMlwiLz5cclxuPHBhdGggZD1cIk0xOTUuMjQ5IDIzMS4xMjRDMjA1LjAxIDIzMS4xMjQgMjEyLjk0OCAyMjMuMTYzIDIxMi45NDggMjEzLjM3M0MyMTIuOTQ4IDIwMy41ODQgMjA1LjAxIDE5NS42MjMgMTk1LjI0OSAxOTUuNjIzQzE4NS40ODcgMTk1LjYyMyAxNzcuNTQ4IDIwMy41ODQgMTc3LjU0OCAyMTMuMzczQzE3Ny41NDggMjIzLjE2MyAxODUuNDg3IDIzMS4xMjQgMTk1LjI0OSAyMzEuMTI0WlwiIGZpbGw9XCIjQTFBQ0I4XCIvPlxyXG48cGF0aCBkPVwiTTMwNS44NzQgMTY5SDE3My4xMjRDMTYwLjkzIDE2OSAxNTEgMTc4Ljk1OCAxNTEgMTkxLjE4OFYyODguODEyQzE1MSAzMDEuMDQyIDE2MC45MyAzMTEgMTczLjEyNCAzMTFIMzA1Ljg3NEMzMTguMDcgMzExIDMyOCAzMDEuMDQyIDMyOCAyODguODEyVjE5MS4xODhDMzI4IDE3OC45NTggMzE4LjA3IDE2OSAzMDUuODc0IDE2OVpNMTczLjEyNCAxODYuNzVIMzA1Ljg3NEMzMDguMzE4IDE4Ni43NSAzMTAuMyAxODguNzM4IDMxMC4zIDE5MS4xODhWMjU0LjE5MkwyODIuMzQzIDIyMS40NzhDMjc5LjM3OCAyMTcuOTkgMjc1LjA4NSAyMTYuMTI2IDI3MC40NzUgMjE2LjAyMUMyNjUuODkgMjE2LjA0NyAyNjEuNTkgMjE4LjA4OCAyNTguNjUyIDIyMS42MjFMMjI1Ljc4MiAyNjEuMTg0TDIxNS4wNzQgMjUwLjQ3MkMyMDkuMDIxIDI0NC40MDIgMTk5LjE3IDI0NC40MDIgMTkzLjEyNiAyNTAuNDcyTDE2OC43IDI3NC45NThWMTkxLjE4OEMxNjguNyAxODguNzM4IDE3MC42ODIgMTg2Ljc1IDE3My4xMjQgMTg2Ljc1WlwiIGZpbGw9XCIjQTFBQ0I4XCIvPlxyXG48L3N2Zz5cclxuPGltZyAqbmdJZj1cInNob3dQbGFjZWhvbGRlciAmJiBoYXNUZHNTcmNQbGFjZWhvbGRlclwiIFtzcmNdPVwidGRzU3JjUGxhY2Vob2xkZXJcIiBbYXR0ci5zcmNzZXRdPVwidGRzU3JjUGxhY2Vob2xkZXJcIiBbYXR0ci5hbHRdPVwiYWx0XCIvPlxyXG4gIGAsXHJcbiAgaG9zdDoge1xyXG4gICAgJ1tjbGFzcy50ZHMtYXZhdGFyLWxnXSc6IGBzaXplID09PSAnbGcnYCxcclxuICAgICdbY2xhc3MudGRzLWF2YXRhci1zbV0nOiBgc2l6ZSA9PT0gJ3NtJ2AsXHJcbiAgICAnW2NsYXNzLnRkcy1hdmF0YXItc3F1YXJlXSc6IGBzaGFwZSA9PT0gJ3NxdWFyZSdgLFxyXG4gICAgJ1tjbGFzcy50ZHMtYXZhdGFyLWNpcmNsZV0nOiBgc2hhcGUgPT09ICdjaXJjbGUnYCxcclxuICAgICdbY2xhc3MudGRzLWF2YXRhci1pY29uXSc6IGBpY29uYCxcclxuICAgICdbY2xhc3MudGRzLWF2YXRhci1pbWFnZV0nOiBgaGFzU3JjIGAsXHJcbiAgICAnW3N0eWxlLndpZHRoXSc6ICdjdXN0b21TaXplJyxcclxuICAgICdbc3R5bGUuaGVpZ2h0XSc6ICdjdXN0b21TaXplJyxcclxuICAgICdbc3R5bGUubGluZS1oZWlnaHRdJzogJ2N1c3RvbVNpemUnLFxyXG4gICAgLy8gc2l6ZSB0eXBlIGlzIG51bWJlciB3aGVuIGN1c3RvbVNpemUgaXMgdHJ1ZVxyXG4gICAgJ1tzdHlsZS5mb250LXNpemUucHhdJzogJyhoYXNJY29uICYmIGN1c3RvbVNpemUpID8gJGFueShzaXplKSAvIDIgOiBudWxsJyxcclxuICAgIFwiW2NsYXNzXVwiOiAnY2xhc3NNYXAnXHJcbiAgfSxcclxuICBwcmVzZXJ2ZVdoaXRlc3BhY2VzOiBmYWxzZSxcclxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcclxuICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBURFNBdmF0YXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkNoYW5nZXMge1xyXG4gIHN0YXRpYyBuZ0FjY2VwdElucHV0VHlwZV9nYXA6IE51bWJlcklucHV0O1xyXG5cclxuICByZWFkb25seSBfdGRzTW9kdWxlTmFtZTogVERTQ29uZmlnS2V5ID0gVERTX0NPTkZJR19NT0RVTEVfTkFNRTtcclxuICBASW5wdXQoKSBAV2l0aENvbmZpZygpIHNoYXBlOiAnc3F1YXJlJyB8ICdjaXJjbGUnID0gJ2NpcmNsZSc7XHJcbiAgQElucHV0KCkgQFdpdGhDb25maWcoKSBzaXplOiAnbWQnIHwgJ2xnJyB8ICdzbScgfCAneGwnIHwgbnVtYmVyID0gJ21kJztcclxuICBASW5wdXQoKSBAV2l0aENvbmZpZygpIEBJbnB1dE51bWJlcigpIGdhcCA9IDQ7XHJcbiAgQElucHV0KCkgaXNBdmF0YXI6IGJvb2xlYW4gPSB0cnVlO1xyXG4gIEBJbnB1dCgpIHRleHQ/OiBzdHJpbmc7XHJcbiAgQElucHV0KCkgdGRzU3JjPzogc3RyaW5nO1xyXG4gIEBJbnB1dCgpIHRkc1NyY1NldD86IHN0cmluZztcclxuICBASW5wdXQoKSB0ZHNTcmNQbGFjZWhvbGRlcj86IHN0cmluZztcclxuICBASW5wdXQoKSBhbHQ/OiBzdHJpbmc7XHJcbiAgQElucHV0KCkgaWNvbj86IHN0cmluZztcclxuICBAT3V0cHV0KCkgcmVhZG9ubHkgZXJyb3IgPSBuZXcgRXZlbnRFbWl0dGVyPEV2ZW50PigpO1xyXG4gIHNob3dQbGFjZWhvbGRlcjogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIGhhc1RleHQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBoYXNTcmM6IGJvb2xlYW4gPSB0cnVlO1xyXG4gIGhhc0ljb246IGJvb2xlYW4gPSBmYWxzZTtcclxuICB0ZXh0U3R5bGVzOiBOZ1N0eWxlSW50ZXJmYWNlID0ge307XHJcbiAgY2xhc3NNYXA6IE5nQ2xhc3NJbnRlcmZhY2UgPSB7fTtcclxuICBjdXN0b21TaXplOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxuICBAVmlld0NoaWxkKCd0ZXh0RWwnLCB7IHN0YXRpYzogZmFsc2UgfSkgdGV4dEVsPzogRWxlbWVudFJlZjtcclxuXHJcbiAgcHJpdmF0ZSBlbDogSFRNTEVsZW1lbnQgPSB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudDtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwdWJsaWMgdGRzQ29uZmlnU2VydmljZTogVERTQ29uZmlnU2VydmljZSxcclxuICAgIHByaXZhdGUgZWxlbWVudFJlZjogRWxlbWVudFJlZixcclxuICAgIHByaXZhdGUgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgIHByaXZhdGUgcGxhdGZvcm06IFBsYXRmb3JtXHJcbiAgKSB7XHJcbiAgICAvLyBUT0RPOiBtb3ZlIHRvIGhvc3QgYWZ0ZXIgVmlldyBFbmdpbmUgZGVwcmVjYXRpb25cclxuICAgIHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3Rkcy1hdmF0YXInKTtcclxuICB9XHJcbiAgZ2V0IGhhc1Rkc1NyYygpIHtcclxuICAgIHJldHVybiBURFNIZWxwZXJTdHJpbmcuaGFzVmFsdWVTdHJpbmcodGhpcy50ZHNTcmMpO1xyXG4gIH1cclxuICBpbWdFcnJvcigkZXZlbnQ6IEV2ZW50KTogdm9pZCB7XHJcbiAgICB0aGlzLmVycm9yLmVtaXQoJGV2ZW50KTtcclxuICAgIGlmICghJGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHtcclxuICAgICAgdGhpcy5oYXNTcmMgPSBmYWxzZTtcclxuICAgICAgdGhpcy5oYXNJY29uID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuaGFzVGV4dCA9IGZhbHNlO1xyXG4gICAgICB0aGlzLnNob3dQbGFjZWhvbGRlciA9IGZhbHNlO1xyXG4gICAgICBpZiAoVERTSGVscGVyU3RyaW5nLmhhc1ZhbHVlU3RyaW5nKHRoaXMuaWNvbikpIHtcclxuICAgICAgICB0aGlzLmhhc0ljb24gPSB0cnVlO1xyXG4gICAgICB9IGVsc2UgaWYgKFREU0hlbHBlclN0cmluZy5oYXNWYWx1ZVN0cmluZyh0aGlzLnRleHQpKSB7XHJcbiAgICAgICAgdGhpcy5oYXNUZXh0ID0gdHJ1ZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnNob3dQbGFjZWhvbGRlciA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICB0aGlzLnNldFNpemVTdHlsZSgpO1xyXG4gICAgICB0aGlzLm5vdGlmeUNhbGMoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5nT25DaGFuZ2VzKCk6IHZvaWQge1xyXG4gICAgdGhpcy5oYXNUZXh0ID0gIVREU0hlbHBlclN0cmluZy5oYXNWYWx1ZVN0cmluZyh0aGlzLnRkc1NyYykgJiYgVERTSGVscGVyU3RyaW5nLmhhc1ZhbHVlU3RyaW5nKHRoaXMudGV4dCk7XHJcbiAgICB0aGlzLmhhc0ljb24gPSAhVERTSGVscGVyU3RyaW5nLmhhc1ZhbHVlU3RyaW5nKHRoaXMudGRzU3JjKSAmJiBURFNIZWxwZXJTdHJpbmcuaGFzVmFsdWVTdHJpbmcodGhpcy5pY29uKTtcclxuICAgIHRoaXMuaGFzU3JjID0gVERTSGVscGVyU3RyaW5nLmhhc1ZhbHVlU3RyaW5nKHRoaXMudGRzU3JjKTtcclxuICAgIHRoaXMuc2hvd1BsYWNlaG9sZGVyID0gIXRoaXMuaGFzSWNvbiAmJiAhdGhpcy5oYXNTcmMgJiYgIXRoaXMuaGFzVGV4dDtcclxuICAgIHRoaXMuc2V0U2l6ZVN0eWxlKCk7XHJcbiAgICB0aGlzLm5vdGlmeUNhbGMoKTtcclxuICAgIHRoaXMuYnVpbGRDbHNDc3MoKTtcclxuICAgIC8vIHRoaXMuYnVpbGRDbHNJY29uKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNhbGNTdHJpbmdTaXplKCk6IHZvaWQge1xyXG4gICAgaWYgKCFURFNIZWxwZXJTdHJpbmcuaGFzVmFsdWVTdHJpbmcodGhpcy50ZXh0KSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY2hpbGRyZW5XaWR0aCA9IHRoaXMudGV4dEVsIS5uYXRpdmVFbGVtZW50Lm9mZnNldFdpZHRoO1xyXG4gICAgY29uc3QgYXZhdGFyV2lkdGggPSB0aGlzLmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xyXG4gICAgY29uc3Qgb2Zmc2V0ID0gdGhpcy5nYXAgKiAyIDwgYXZhdGFyV2lkdGggPyB0aGlzLmdhcCAqIDIgOiA4O1xyXG4gICAgY29uc3Qgc2NhbGUgPSBhdmF0YXJXaWR0aCAtIG9mZnNldCA8IGNoaWxkcmVuV2lkdGggPyAoYXZhdGFyV2lkdGggLSBvZmZzZXQpIC8gY2hpbGRyZW5XaWR0aCA6IDE7XHJcblxyXG4gICAgdGhpcy50ZXh0U3R5bGVzID0ge1xyXG4gICAgICAndHJhbnNmb3JtLW9yaWdpbic6IGAwIGNlbnRlcmAsXHJcbiAgICAgIHRyYW5zZm9ybTogYHNjYWxlKCR7c2NhbGV9KSB0cmFuc2xhdGVYKC01MCUpYFxyXG4gICAgfTtcclxuICAgIGlmICh0aGlzLmN1c3RvbVNpemUpIHtcclxuICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLnRleHRTdHlsZXMsIHtcclxuICAgICAgICBsaW5lSGVpZ2h0OiB0aGlzLmN1c3RvbVNpemVcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG5vdGlmeUNhbGMoKTogdm9pZCB7XHJcbiAgICAvLyBJZiB1c2UgbmdBZnRlclZpZXdDaGVja2VkLCBhbHdheXMgZGVtYW5kcyBtb3JlIGNvbXB1dGF0aW9ucywgc28uLi4uLi5cclxuICAgIGlmICh0aGlzLnBsYXRmb3JtLmlzQnJvd3Nlcikge1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICB0aGlzLmNhbGNTdHJpbmdTaXplKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZXRTaXplU3R5bGUoKTogdm9pZCB7XHJcbiAgICBpZiAodHlwZW9mIHRoaXMuc2l6ZSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgdGhpcy5jdXN0b21TaXplID0gYCR7dGhpcy5zaXplfXB4YDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuY3VzdG9tU2l6ZSA9IG51bGw7XHJcbiAgICB9XHJcbiAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcclxuICB9XHJcbiAgYnVpbGRDbHNDc3MoKSB7XHJcbiAgICB0aGlzLmNsYXNzTWFwID0ge307XHJcbiAgICBsZXQgZGVmYXVsQ2xhc3MgPSB7XHJcbiAgICAgIFwiaC02XCI6IHRoaXMuc2l6ZSA9PT0gJ3NtJyxcclxuICAgICAgXCJ3LTZcIjogdGhpcy5zaXplID09PSAnc20nLFxyXG4gICAgICBcImgtOVwiOiB0aGlzLnNpemUgPT09ICdtZCcsXHJcbiAgICAgIFwidy05XCI6IHRoaXMuc2l6ZSA9PT0gJ21kJyxcclxuICAgICAgXCJoLTEyXCI6IHRoaXMuc2l6ZSA9PT0gJ2xnJyxcclxuICAgICAgXCJ3LTEyXCI6IHRoaXMuc2l6ZSA9PT0gJ2xnJyxcclxuICAgICAgXCJoLTE2XCI6IHRoaXMuc2l6ZSA9PT0gJ3hsJyxcclxuICAgICAgXCJ3LTE2XCI6IHRoaXMuc2l6ZSA9PT0gJ3hsJyxcclxuICAgICAgXCJib3gtYm9yZGVyXCI6IHRydWUsXHJcbiAgICAgIFwibS0wXCI6IHRydWUsXHJcbiAgICAgIFwicC0wXCI6IHRydWUsXHJcbiAgICAgIFwicmVsYXRpdmVcIjogdHJ1ZSxcclxuICAgICAgXCJpbmxpbmUtZmxleFwiOiB0cnVlLFxyXG4gICAgICBcIml0ZW1zLWNlbnRlclwiOiB0cnVlLFxyXG4gICAgICBcImp1c3RpZnktY2VudGVyXCI6IHRydWUsXHJcbiAgICAgIFwib3ZlcmZsb3ctaGlkZGVuXCI6IHRydWUsXHJcbiAgICAgIFwiYWxpZ24tbWlkZGxlXCI6IHRydWUsXHJcbiAgICAgIFwidGV4dC1jZW50ZXJcIjogdHJ1ZSxcclxuICAgICAgXCJ3aGl0ZXNwYWNlLW5vd3JhcFwiOiB0cnVlLFxyXG4gICAgICBcInRleHQtYmFzZVwiOiB0aGlzLnNpemUgPT09ICdzbScsXHJcbiAgICAgIFwidGV4dC1sZ1wiOiB0aGlzLnNpemUgPT09ICdtZCcsXHJcbiAgICAgIFwidGV4dC0yeGxcIjogdGhpcy5zaXplID09PSAnbGcnLFxyXG4gICAgICBcInRleHQtNHhsXCI6IHRoaXMuc2l6ZSA9PT0gJ3hsJyxcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnNoYXBlICE9IFwiY2lyY2xlXCIpIHtcclxuICAgICAgaWYgKHR5cGVvZiB0aGlzLnNpemUgIT0gXCJudW1iZXJcIilcclxuICAgICAgICB0aGlzLmNsYXNzTWFwID0ge1xyXG4gICAgICAgICAgXCJyb3VuZGVkLW1kXCI6IHRoaXMuc2l6ZSA9PT0gJ3NtJyxcclxuICAgICAgICAgIFwicm91bmRlZC1sZ1wiOiB0aGlzLnNpemUgPT09ICdtZCcsXHJcbiAgICAgICAgICBcInJvdW5kZWQtMTBcIjogdGhpcy5zaXplID09PSAnbGcnLFxyXG4gICAgICAgICAgXCJyb3VuZGVkLXhsXCI6IHRoaXMuc2l6ZSA9PT0gJ3hsJyxcclxuICAgICAgICAgIC4uLmRlZmF1bENsYXNzXHJcbiAgICAgICAgICAvLyBcclxuICAgICAgICB9O1xyXG4gICAgICBlbHNlIHtcclxuICAgICAgICB0aGlzLmNsYXNzTWFwID0gZGVmYXVsQ2xhc3M7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuY2xhc3NNYXAgPSB7XHJcbiAgICAgICAgXCJyb3VuZGVkLWZ1bGxcIjogdHJ1ZSxcclxuICAgICAgICAuLi5kZWZhdWxDbGFzc1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH1cclxuICBnZXQgaGFzVGRzU3JjUGxhY2Vob2xkZXIoKXtcclxuICAgIHJldHVybiBURFNIZWxwZXJTdHJpbmcuaGFzVmFsdWVTdHJpbmcodGhpcy50ZHNTcmNQbGFjZWhvbGRlcik7XHJcbiAgfVxyXG5nZXQgZWxlbWVudCgpXHJcbntcclxuICByZXR1cm4gdGhpcy5lbDtcclxufVxyXG59XHJcbiJdfQ==