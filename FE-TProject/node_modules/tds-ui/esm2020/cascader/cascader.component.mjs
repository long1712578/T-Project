import { __decorate } from "tslib";
import { BACKSPACE, DOWN_ARROW, ENTER, ESCAPE, LEFT_ARROW, RIGHT_ARROW, UP_ARROW } from '@angular/cdk/keycodes';
import { CdkConnectedOverlay } from '@angular/cdk/overlay';
import { ChangeDetectionStrategy, Component, EventEmitter, forwardRef, Host, HostListener, Input, Optional, Output, ViewChild, ViewChildren, ViewEncapsulation } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { fromEvent, Subject } from 'rxjs';
import { startWith, takeUntil } from 'rxjs/operators';
import { InputBoolean } from 'tds-ui/shared/utility';
import { TDSCascaderOptionComponent } from './cascader-li.component';
import { TDSCascaderService } from './cascader.service';
import { WithConfig } from 'tds-ui/core/config';
import { slideMotion } from 'tds-ui/core/animation';
import { DEFAULT_CASCADER_POSITIONS } from 'tds-ui/core/overlay';
import { toArray } from 'tds-ui/core/util';
import * as i0 from "@angular/core";
import * as i1 from "./cascader.service";
import * as i2 from "tds-ui/core/config";
import * as i3 from "tds-ui/i18n";
import * as i4 from "@angular/cdk/bidi";
import * as i5 from "tds-ui/core/no-animation";
import * as i6 from "@angular/cdk/overlay";
import * as i7 from "@angular/common";
import * as i8 from "@angular/forms";
import * as i9 from "tds-ui/core/outlet";
import * as i10 from "tds-ui/progress-spinner";
import * as i11 from "tds-ui/core/overlay";
import * as i12 from "tds-ui/empty";
import * as i13 from "./cascader-li.component";
const _c0 = ["selectContainer"];
const _c1 = ["input"];
const _c2 = ["menu"];
function TDSCascaderComponent_ng_container_3_div_7_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtext(1);
    i0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r10 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance(1);
    i0.ɵɵtextInterpolate1("", ctx_r10.labelRenderText, " ");
} }
function TDSCascaderComponent_ng_container_3_div_7_ng_template_2_ng_template_0_Template(rf, ctx) { }
function TDSCascaderComponent_ng_container_3_div_7_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵtemplate(0, TDSCascaderComponent_ng_container_3_div_7_ng_template_2_ng_template_0_Template, 0, 0, "ng-template", 17);
} if (rf & 2) {
    const ctx_r12 = i0.ɵɵnextContext(3);
    i0.ɵɵproperty("ngTemplateOutlet", ctx_r12.tdsLabelRender)("ngTemplateOutletContext", ctx_r12.labelRenderContext);
} }
function TDSCascaderComponent_ng_container_3_div_7_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 14);
    i0.ɵɵtemplate(1, TDSCascaderComponent_ng_container_3_div_7_ng_container_1_Template, 2, 1, "ng-container", 15);
    i0.ɵɵtemplate(2, TDSCascaderComponent_ng_container_3_div_7_ng_template_2_Template, 1, 2, "ng-template", null, 16, i0.ɵɵtemplateRefExtractor);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const _r11 = i0.ɵɵreference(3);
    const ctx_r6 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("title", ctx_r6.labelRenderText);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngIf", !ctx_r6.isLabelRenderTemplate)("ngIfElse", _r11);
} }
const _c3 = function (a0, a1) { return { "invisible": a0, "visible": a1 }; };
function TDSCascaderComponent_ng_container_3_div_8_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 18)(1, "div", 19);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd()();
} if (rf & 2) {
    const ctx_r7 = i0.ɵɵnextContext(2);
    i0.ɵɵclassMap(i0.ɵɵpureFunction2(3, _c3, ctx_r7.inputValue, !ctx_r7.inputValue));
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", ctx_r7.showPlaceholder ? ctx_r7.tdsPlaceHolder || ctx_r7.locale.placeholder : null, " ");
} }
function TDSCascaderComponent_ng_container_3_div_9_Template(rf, ctx) { if (rf & 1) {
    const _r15 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 20)(1, "i", 21);
    i0.ɵɵlistener("click", function TDSCascaderComponent_ng_container_3_div_9_Template_i_click_1_listener($event) { i0.ɵɵrestoreView(_r15); const ctx_r14 = i0.ɵɵnextContext(2); return ctx_r14.clearSelection($event); });
    i0.ɵɵelementEnd()();
} }
function TDSCascaderComponent_ng_container_3_div_10_ng_container_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelement(1, "span");
    i0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r18 = i0.ɵɵnextContext(4);
    i0.ɵɵadvance(1);
    i0.ɵɵclassMap(ctx_r18.tdsSuffixIcon);
} }
function TDSCascaderComponent_ng_container_3_div_10_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, TDSCascaderComponent_ng_container_3_div_10_ng_container_1_ng_container_1_Template, 2, 2, "ng-container", 23);
    i0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r16 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("tdsStringTemplateOutlet", ctx_r16.tdsSuffixIcon);
} }
function TDSCascaderComponent_ng_container_3_div_10_span_2_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "span");
    i0.ɵɵelement(1, "tds-spinner", 24);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("color", "primary");
} }
function TDSCascaderComponent_ng_container_3_div_10_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 22);
    i0.ɵɵtemplate(1, TDSCascaderComponent_ng_container_3_div_10_ng_container_1_Template, 2, 1, "ng-container", 2);
    i0.ɵɵtemplate(2, TDSCascaderComponent_ng_container_3_div_10_span_2_Template, 2, 1, "span", 2);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r9 = i0.ɵɵnextContext(2);
    i0.ɵɵclassMap(ctx_r9.tdsClassArrow);
    i0.ɵɵclassProp("tds-select-arrow-loading", ctx_r9.isLoading);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngIf", !ctx_r9.isLoading);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngIf", ctx_r9.isLoading);
} }
const _c4 = function (a0) { return { "opacity-0 w-0 h-0": a0 }; };
const _c5 = function (a0, a1) { return { "opacity-0 w-0 h-0": a0, "w-full h-full": a1 }; };
function TDSCascaderComponent_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    const _r20 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "div", 4)(2, "div", 5, 6)(4, "div", 7)(5, "input", 8, 9);
    i0.ɵɵlistener("ngModelChange", function TDSCascaderComponent_ng_container_3_Template_input_ngModelChange_5_listener($event) { i0.ɵɵrestoreView(_r20); const ctx_r19 = i0.ɵɵnextContext(); return ctx_r19.inputValue = $event; })("blur", function TDSCascaderComponent_ng_container_3_Template_input_blur_5_listener() { i0.ɵɵrestoreView(_r20); const ctx_r21 = i0.ɵɵnextContext(); return ctx_r21.handleInputBlur(); })("focus", function TDSCascaderComponent_ng_container_3_Template_input_focus_5_listener() { i0.ɵɵrestoreView(_r20); const ctx_r22 = i0.ɵɵnextContext(); return ctx_r22.handleInputFocus(); })("change", function TDSCascaderComponent_ng_container_3_Template_input_change_5_listener($event) { return $event.stopPropagation(); });
    i0.ɵɵelementEnd()();
    i0.ɵɵtemplate(7, TDSCascaderComponent_ng_container_3_div_7_Template, 4, 3, "div", 10);
    i0.ɵɵtemplate(8, TDSCascaderComponent_ng_container_3_div_8_Template, 3, 6, "div", 11);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(9, TDSCascaderComponent_ng_container_3_div_9_Template, 2, 0, "div", 12);
    i0.ɵɵtemplate(10, TDSCascaderComponent_ng_container_3_div_10_Template, 3, 6, "div", 13);
    i0.ɵɵelementEnd();
    i0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵadvance(1);
    i0.ɵɵclassMap(ctx_r2.tdsClassContainer);
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngClass", i0.ɵɵpureFunction1(14, _c4, !ctx_r2.tdsShowSearch));
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngClass", i0.ɵɵpureFunction2(16, _c5, !ctx_r2.tdsShowSearch, !ctx_r2.tdsShowSearch))("readonly", !ctx_r2.tdsShowSearch)("disabled", ctx_r2.tdsDisabled)("ngModel", ctx_r2.inputValue);
    i0.ɵɵattribute("autoComplete", "off")("expanded", ctx_r2.menuVisible)("autofocus", ctx_r2.tdsAutoFocus ? "autofocus" : null);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", ctx_r2.showLabelRender);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngIf", !ctx_r2.showLabelRender);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngIf", ctx_r2.clearIconVisible);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngIf", ctx_r2.tdsShowArrow);
} }
function TDSCascaderComponent_ng_template_5_ul_3_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "ul", 30)(1, "li", 31);
    i0.ɵɵelement(2, "tds-embed-empty", 32);
    i0.ɵɵelementEnd()();
} if (rf & 2) {
    const ctx_r25 = i0.ɵɵnextContext(2);
    i0.ɵɵstyleProp("width", ctx_r25.dropdownWidthStyle)("height", ctx_r25.dropdownHeightStyle);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("componentName", "cascader")("specificContent", ctx_r25.tdsNotFoundContent);
} }
const _c6 = function (a0, a1, a2, a3, a4, a5, a6) { return { "bg-neutral-3-50 dark:bg-d-neutral-3-300": a0, "cursor-pointer": a1, " cursor-not-allowed": a2, "px-1.5": a3, "px-2": a4, "px-2.5": a5, "px-3": a6 }; };
function TDSCascaderComponent_ng_template_5_ng_template_4_ul_0_li_1_Template(rf, ctx) { if (rf & 1) {
    const _r34 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "li", 36);
    i0.ɵɵlistener("mouseenter", function TDSCascaderComponent_ng_template_5_ng_template_4_ul_0_li_1_Template_li_mouseenter_0_listener($event) { const restoredCtx = i0.ɵɵrestoreView(_r34); const option_r32 = restoredCtx.$implicit; const i_r30 = i0.ɵɵnextContext().index; const ctx_r33 = i0.ɵɵnextContext(3); return ctx_r33.onOptionMouseEnter(option_r32, i_r30, $event); })("mouseleave", function TDSCascaderComponent_ng_template_5_ng_template_4_ul_0_li_1_Template_li_mouseleave_0_listener($event) { const restoredCtx = i0.ɵɵrestoreView(_r34); const option_r32 = restoredCtx.$implicit; const i_r30 = i0.ɵɵnextContext().index; const ctx_r36 = i0.ɵɵnextContext(3); return ctx_r36.onOptionMouseLeave(option_r32, i_r30, $event); })("click", function TDSCascaderComponent_ng_template_5_ng_template_4_ul_0_li_1_Template_li_click_0_listener($event) { const restoredCtx = i0.ɵɵrestoreView(_r34); const option_r32 = restoredCtx.$implicit; const i_r30 = i0.ɵɵnextContext().index; const ctx_r38 = i0.ɵɵnextContext(3); return ctx_r38.onOptionClick(option_r32, i_r30, $event); });
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const option_r32 = ctx.$implicit;
    const i_r30 = i0.ɵɵnextContext().index;
    const ctx_r31 = i0.ɵɵnextContext(3);
    i0.ɵɵproperty("expandIcon", ctx_r31.tdsExpandIcon)("columnIndex", i_r30)("tdsLabelProperty", ctx_r31.tdsLabelProperty)("optionTemplate", ctx_r31.tdsOptionRender)("activated", ctx_r31.isOptionActivated(option_r32, i_r30))("highlightText", ctx_r31.inSearchingMode ? ctx_r31.inputValue : "")("option", option_r32)("dir", ctx_r31.dir)("ngClass", i0.ɵɵpureFunction7(9, _c6, ctx_r31.isOptionActivated(option_r32, i_r30), !option_r32.disabled, option_r32.disabled, ctx_r31.tdsSize == "sm", ctx_r31.tdsSize == "md", ctx_r31.tdsSize == "lg", ctx_r31.tdsSize == "xl"));
} }
function TDSCascaderComponent_ng_template_5_ng_template_4_ul_0_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "ul", 34);
    i0.ɵɵtemplate(1, TDSCascaderComponent_ng_template_5_ng_template_4_ul_0_li_1_Template, 1, 17, "li", 35);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const options_r29 = ctx.$implicit;
    const i_r30 = ctx.index;
    const ctx_r28 = i0.ɵɵnextContext(3);
    i0.ɵɵstyleProp("height", ctx_r28.dropdownHeightStyle)("width", ctx_r28.dropdownWidthStyle);
    i0.ɵɵclassProp("border-l", i_r30 > 0)("border-neutral-200", i_r30 > 0)("dark:border-d-neutral-200", i_r30 > 0);
    i0.ɵɵproperty("ngClass", ctx_r28.menuColumnCls);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngForOf", options_r29);
} }
function TDSCascaderComponent_ng_template_5_ng_template_4_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵtemplate(0, TDSCascaderComponent_ng_template_5_ng_template_4_ul_0_Template, 2, 12, "ul", 33);
} if (rf & 2) {
    const ctx_r27 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("ngForOf", ctx_r27.cascaderService.columns);
} }
function TDSCascaderComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {
    const _r42 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 25);
    i0.ɵɵlistener("mouseleave", function TDSCascaderComponent_ng_template_5_Template_div_mouseleave_0_listener($event) { i0.ɵɵrestoreView(_r42); const ctx_r41 = i0.ɵɵnextContext(); return ctx_r41.onTriggerMouseLeave($event); });
    i0.ɵɵelementStart(1, "div", 26, 27);
    i0.ɵɵtemplate(3, TDSCascaderComponent_ng_template_5_ul_3_Template, 3, 6, "ul", 28);
    i0.ɵɵtemplate(4, TDSCascaderComponent_ng_template_5_ng_template_4_Template, 1, 1, "ng-template", null, 29, i0.ɵɵtemplateRefExtractor);
    i0.ɵɵelementEnd()();
} if (rf & 2) {
    const _r26 = i0.ɵɵreference(5);
    const ctx_r3 = i0.ɵɵnextContext();
    i0.ɵɵclassProp("tds-cascader-dropdown-rtl", ctx_r3.dir === "rtl");
    i0.ɵɵproperty("@slideMotion", "enter")("@.disabled", ctx_r3.noAnimation == null ? null : ctx_r3.noAnimation.noAnimation)("noAnimation", ctx_r3.noAnimation == null ? null : ctx_r3.noAnimation.noAnimation);
    i0.ɵɵadvance(1);
    i0.ɵɵclassProp("tds-cascader-rtl", ctx_r3.dir === "rtl")("tds-cascader-menus-hidden", !ctx_r3.menuVisible)("tds-cascader-menu-empty", ctx_r3.shouldShowEmpty);
    i0.ɵɵproperty("ngClass", ctx_r3.menuCls)("ngStyle", ctx_r3.tdsMenuStyle);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", ctx_r3.shouldShowEmpty)("ngIfElse", _r26);
} }
const _c7 = ["*"];
const TDS_CONFIG_MODULE_NAME = 'cascader';
const defaultDisplayRender = (labels) => labels.join(' / ');
export class TDSCascaderComponent {
    constructor(cascaderService, tdsConfigService, ngZone, cdr, i18nService, elementRef, renderer, directionality, noAnimation) {
        this.cascaderService = cascaderService;
        this.tdsConfigService = tdsConfigService;
        this.ngZone = ngZone;
        this.cdr = cdr;
        this.i18nService = i18nService;
        this.directionality = directionality;
        this.noAnimation = noAnimation;
        this._tdsModuleName = TDS_CONFIG_MODULE_NAME;
        this.tdsOptionRender = null;
        this.tdsShowInput = true;
        this.tdsShowArrow = true;
        this.tdsAllowClear = true;
        this.tdsAutoFocus = false;
        this.tdsChangeOnSelect = false;
        this.tdsDisabled = false;
        this.tdsExpandTrigger = 'click';
        this.tdsValueProperty = 'value';
        this.tdsLabelRender = null;
        this.tdsLabelProperty = 'label';
        this.tdsSize = 'md';
        this.tdsBackdrop = false;
        this.tdsShowSearch = false;
        this.tdsPlaceHolder = '';
        this.tdsMenuStyle = null;
        this.tdsMouseEnterDelay = 150; // ms
        this.tdsMouseLeaveDelay = 150; // ms
        this.tdsTriggerAction = ['click'];
        // TODO: RTL
        this.tdsSuffixIcon = 'tdsi-arrow-down-line';
        this.tdsExpandIcon = '';
        this.tdsVisibleChange = new EventEmitter();
        this.tdsSelectionChange = new EventEmitter();
        this.tdsSelect = new EventEmitter();
        this.tdsClear = new EventEmitter();
        /**
         * If the dropdown should show the empty content.
         * `true` if there's no options.
         */
        this.shouldShowEmpty = false;
        this.menuVisible = false;
        this.isLoading = false;
        this.labelRenderContext = {};
        this.onChange = Function.prototype;
        this.onTouched = Function.prototype;
        this.positions = [...DEFAULT_CASCADER_POSITIONS];
        this.dropdownHeightStyle = '';
        this.isFocused = false;
        this.dir = 'ltr';
        this.tdsClassContainer = "";
        this.tdsClassArrow = '';
        this.destroy$ = new Subject();
        this.inputString = '';
        this.isOpening = false;
        this.delayMenuTimer = null;
        this.delaySelectTimer = null;
        this.el = elementRef.nativeElement;
        this.cascaderService.withComponent(this);
        renderer.addClass(elementRef.nativeElement, 'tds-select');
        renderer.addClass(elementRef.nativeElement, 'tds-cascader');
    }
    get tdsOptions() {
        return this.cascaderService.tdsOptions;
    }
    set tdsOptions(options) {
        this.cascaderService.withOptions(options);
    }
    get inSearchingMode() {
        return this.cascaderService.inSearchingMode;
    }
    set inputValue(inputValue) {
        this.inputString = inputValue;
        this.toggleSearchingMode(!!inputValue);
    }
    get inputValue() {
        return this.inputString;
    }
    get menuCls() {
        return { [`${this.tdsMenuClassName}`]: !!this.tdsMenuClassName };
    }
    get menuColumnCls() {
        return { [`${this.tdsColumnClassName}`]: !!this.tdsColumnClassName };
    }
    get hasInput() {
        return !!this.inputValue;
    }
    get hasValue() {
        return this.cascaderService.values && this.cascaderService.values.length > 0;
    }
    get showLabelRender() {
        return this.hasValue;
    }
    get showPlaceholder() {
        return !(this.hasInput || this.hasValue);
    }
    get clearIconVisible() {
        return this.tdsAllowClear && !this.tdsDisabled && (this.hasValue || this.hasInput);
    }
    get isLabelRenderTemplate() {
        return !!this.tdsLabelRender;
    }
    ngOnInit() {
        const srv = this.cascaderService;
        srv.$redraw.pipe(takeUntil(this.destroy$)).subscribe(() => {
            this.updateClassCss();
            // These operations would not mutate data.
            this.checkChildren();
            this.setDisplayLabel();
            this.reposition();
            this.setDropdownStyles();
            this.cdr.markForCheck();
        });
        srv.$loading.pipe(takeUntil(this.destroy$)).subscribe(loading => {
            this.isLoading = loading;
        });
        srv.$optionSelected.pipe(takeUntil(this.destroy$)).subscribe(data => {
            if (!data) {
                this.onChange([]);
                this.tdsSelect.emit(null);
                this.tdsSelectionChange.emit([]);
            }
            else {
                const { option, index } = data;
                const shouldClose = option.isLeaf || (this.tdsChangeOnSelect && this.tdsExpandTrigger === 'hover');
                if (shouldClose) {
                    this.delaySetMenuVisible(false);
                }
                this.onChange(this.cascaderService.values);
                this.tdsSelectionChange.emit(this.cascaderService.selectedOptions);
                this.tdsSelect.emit({ option, index });
                this.cdr.markForCheck();
            }
        });
        srv.$quitSearching.pipe(takeUntil(this.destroy$)).subscribe(() => {
            this.inputString = '';
            this.dropdownWidthStyle = '';
        });
        this.i18nService.localeChange.pipe(startWith(), takeUntil(this.destroy$)).subscribe(() => {
            this.setLocale();
        });
        this.tdsConfigService
            .getConfigChangeEventForComponent(TDS_CONFIG_MODULE_NAME)
            .pipe(takeUntil(this.destroy$))
            .subscribe(() => {
            this.cdr.markForCheck();
        });
        this.dir = this.directionality.value;
        this.directionality.change.pipe(takeUntil(this.destroy$)).subscribe(() => {
            this.dir = this.directionality.value;
            srv.$redraw.next();
        });
        this.setupKeydownListener();
    }
    ngOnDestroy() {
        this.destroy$.next();
        this.destroy$.complete();
        this.clearDelayMenuTimer();
        this.clearDelaySelectTimer();
    }
    registerOnChange(fn) {
        this.onChange = fn;
    }
    registerOnTouched(fn) {
        this.onTouched = fn;
    }
    writeValue(value) {
        this.cascaderService.values = toArray(value);
        this.cascaderService.syncOptions(true);
    }
    delaySetMenuVisible(visible, delay = 100, setOpening = false) {
        this.clearDelayMenuTimer();
        if (delay) {
            if (visible && setOpening) {
                this.isOpening = true;
            }
            this.delayMenuTimer = setTimeout(() => {
                this.setMenuVisible(visible);
                this.cdr.detectChanges();
                this.clearDelayMenuTimer();
                if (visible) {
                    setTimeout(() => {
                        this.isOpening = false;
                    }, 100);
                }
            }, delay);
        }
        else {
            this.setMenuVisible(visible);
        }
    }
    setMenuVisible(visible) {
        if (this.tdsDisabled || this.menuVisible === visible) {
            return;
        }
        if (visible) {
            this.cascaderService.syncOptions();
            this.scrollToActivatedOptions();
        }
        if (!visible) {
            this.inputValue = '';
        }
        this.menuVisible = visible;
        this.tdsVisibleChange.emit(visible);
        this.updateClassCss();
        this.cdr.detectChanges();
    }
    clearDelayMenuTimer() {
        if (this.delayMenuTimer) {
            clearTimeout(this.delayMenuTimer);
            this.delayMenuTimer = null;
        }
    }
    clearSelection(event) {
        if (event) {
            event.preventDefault();
            event.stopPropagation();
        }
        this.labelRenderText = '';
        this.labelRenderContext = {};
        this.inputValue = '';
        this.setMenuVisible(false);
        this.cascaderService.clear();
        this.tdsClear.emit();
    }
    getSubmitValue() {
        return this.cascaderService.selectedOptions.map(o => this.cascaderService.getOptionValue(o));
    }
    focus() {
        if (!this.isFocused) {
            (this.input ? this.input.nativeElement : this.el).focus();
            this.isFocused = true;
        }
    }
    blur() {
        if (this.isFocused) {
            (this.input ? this.input.nativeElement : this.el).blur();
            this.isFocused = false;
        }
    }
    handleInputBlur() {
        this.menuVisible ? this.focus() : this.blur();
    }
    handleInputFocus() {
        this.focus();
    }
    onTriggerClick() {
        if (this.tdsDisabled) {
            return;
        }
        if (this.tdsShowSearch) {
            this.focus();
        }
        if (this.isActionTrigger('click')) {
            this.delaySetMenuVisible(!this.menuVisible, 100);
        }
        this.onTouched();
    }
    onTriggerMouseEnter() {
        if (this.tdsDisabled || !this.isActionTrigger('hover')) {
            return;
        }
        this.delaySetMenuVisible(true, this.tdsMouseEnterDelay, true);
    }
    onTriggerMouseLeave(event) {
        if (this.tdsDisabled || !this.menuVisible || this.isOpening || !this.isActionTrigger('hover')) {
            event.preventDefault();
            return;
        }
        const mouseTarget = event.relatedTarget;
        const hostEl = this.el;
        const menuEl = this.menu && this.menu.nativeElement;
        if (hostEl.contains(mouseTarget) || (menuEl && menuEl.contains(mouseTarget))) {
            return;
        }
        this.delaySetMenuVisible(false, this.tdsMouseLeaveDelay);
    }
    onOptionMouseEnter(option, columnIndex, event) {
        event.preventDefault();
        if (this.tdsExpandTrigger === 'hover') {
            if (!option.isLeaf) {
                this.delaySetOptionActivated(option, columnIndex, false);
            }
            else {
                this.cascaderService.setOptionDeactivatedSinceColumn(columnIndex);
            }
        }
    }
    onOptionMouseLeave(option, _columnIndex, event) {
        event.preventDefault();
        if (this.tdsExpandTrigger === 'hover' && !option.isLeaf) {
            this.clearDelaySelectTimer();
        }
    }
    onOptionClick(option, columnIndex, event) {
        if (event) {
            event.preventDefault();
        }
        if (option && option.disabled) {
            return;
        }
        this.el.focus();
        this.inSearchingMode
            ? this.cascaderService.setSearchOptionSelected(option)
            : this.cascaderService.setOptionActivated(option, columnIndex, true);
    }
    onClickOutside(event) {
        if (!this.el.contains(event.target)) {
            this.closeMenu();
        }
    }
    isActionTrigger(action) {
        return typeof this.tdsTriggerAction === 'string'
            ? this.tdsTriggerAction === action
            : this.tdsTriggerAction.indexOf(action) !== -1;
    }
    onEnter() {
        const columnIndex = Math.max(this.cascaderService.activatedOptions.length - 1, 0);
        const option = this.cascaderService.activatedOptions[columnIndex];
        if (option && !option.disabled) {
            this.inSearchingMode
                ? this.cascaderService.setSearchOptionSelected(option)
                : this.cascaderService.setOptionActivated(option, columnIndex, true);
        }
    }
    moveUpOrDown(isUp) {
        const columnIndex = Math.max(this.cascaderService.activatedOptions.length - 1, 0);
        const activeOption = this.cascaderService.activatedOptions[columnIndex];
        const options = this.cascaderService.columns[columnIndex] || [];
        const length = options.length;
        let nextIndex = -1;
        if (!activeOption) {
            // Not selected options in this column
            nextIndex = isUp ? length : -1;
        }
        else {
            nextIndex = options.indexOf(activeOption);
        }
        while (true) {
            nextIndex = isUp ? nextIndex - 1 : nextIndex + 1;
            if (nextIndex < 0 || nextIndex >= length) {
                break;
            }
            const nextOption = options[nextIndex];
            if (!nextOption || nextOption.disabled) {
                continue;
            }
            this.cascaderService.setOptionActivated(nextOption, columnIndex);
            break;
        }
    }
    moveLeft() {
        const options = this.cascaderService.activatedOptions;
        if (options.length) {
            options.pop(); // Remove the last one
        }
    }
    moveRight() {
        const length = this.cascaderService.activatedOptions.length;
        const options = this.cascaderService.columns[length];
        if (options && options.length) {
            const nextOpt = options.find(o => !o.disabled);
            if (nextOpt) {
                this.cascaderService.setOptionActivated(nextOpt, length);
            }
        }
    }
    clearDelaySelectTimer() {
        if (this.delaySelectTimer) {
            clearTimeout(this.delaySelectTimer);
            this.delaySelectTimer = null;
        }
    }
    delaySetOptionActivated(option, columnIndex, performSelect) {
        this.clearDelaySelectTimer();
        this.delaySelectTimer = setTimeout(() => {
            this.cascaderService.setOptionActivated(option, columnIndex, performSelect);
            this.delaySelectTimer = null;
        }, 150);
    }
    toggleSearchingMode(toSearching) {
        if (this.inSearchingMode !== toSearching) {
            this.cascaderService.toggleSearchingMode(toSearching);
        }
        if (this.inSearchingMode) {
            this.cascaderService.prepareSearchOptions(this.inputValue);
        }
    }
    isOptionActivated(option, index) {
        const activeOpt = this.cascaderService.activatedOptions[index];
        return activeOpt === option;
    }
    setDisabledState(isDisabled) {
        if (isDisabled) {
            this.closeMenu();
        }
        this.tdsDisabled = isDisabled;
    }
    closeMenu() {
        this.blur();
        this.clearDelayMenuTimer();
        this.setMenuVisible(false);
    }
    /**
     * Reposition the cascader panel. When a menu opens, the cascader expands
     * and may exceed the boundary of browser's window.
     */
    reposition() {
        if (this.overlay && this.overlay.overlayRef && this.menuVisible) {
            Promise.resolve().then(() => {
                this.overlay.overlayRef.updatePosition();
            });
        }
    }
    /**
     * When a cascader options is changed, a child needs to know that it should re-render.
     */
    checkChildren() {
        if (this.cascaderItems) {
            this.cascaderItems.forEach(item => item.markForCheck());
        }
    }
    setDisplayLabel() {
        const selectedOptions = this.cascaderService.selectedOptions;
        const labels = selectedOptions.map(o => this.cascaderService.getOptionLabel(o));
        if (this.isLabelRenderTemplate) {
            this.labelRenderContext = { labels, selectedOptions };
        }
        else {
            this.labelRenderText = defaultDisplayRender.call(this, labels);
        }
    }
    setDropdownStyles() {
        const firstColumn = this.cascaderService.columns[0];
        this.shouldShowEmpty =
            (this.inSearchingMode && (!firstColumn || !firstColumn.length)) || // Should show empty when there's no searching result
                (!(this.tdsOptions && this.tdsOptions.length) && !this.tdsLoadData); // Should show when there's no options and developer does not use tdsLoadData
        this.dropdownHeightStyle = this.shouldShowEmpty ? 'auto' : '';
        if (this.input) {
            this.dropdownWidthStyle =
                this.inSearchingMode || this.shouldShowEmpty ? `${this.selectContainer.nativeElement.offsetWidth}px` : '';
        }
    }
    setLocale() {
        this.locale = this.i18nService.getLocaleData('global');
        this.cdr.markForCheck();
    }
    scrollToActivatedOptions() {
        // The `scrollIntoView` is a native DOM API, which doesn't require Angular to run
        // a change detection when a promise microtask is resolved.
        this.ngZone.runOutsideAngular(() => {
            Promise.resolve().then(() => {
                // scroll only until option menu view is ready
                this.cascaderItems
                    .toArray()
                    .filter(e => e.activated)
                    .forEach(e => {
                    e.nativeElement.scrollIntoView({ block: 'start', inline: 'nearest' });
                });
            });
        });
    }
    setupKeydownListener() {
        this.ngZone.runOutsideAngular(() => {
            fromEvent(this.el, 'keydown')
                .pipe(takeUntil(this.destroy$))
                .subscribe(event => {
                const keyCode = event.keyCode;
                if (keyCode !== DOWN_ARROW &&
                    keyCode !== UP_ARROW &&
                    keyCode !== LEFT_ARROW &&
                    keyCode !== RIGHT_ARROW &&
                    keyCode !== ENTER &&
                    keyCode !== BACKSPACE &&
                    keyCode !== ESCAPE) {
                    return;
                }
                // Press any keys above to reopen menu.
                if (!this.menuVisible && keyCode !== BACKSPACE && keyCode !== ESCAPE) {
                    // The `setMenuVisible` runs `detectChanges()`, so we don't need to run `markForCheck()` additionally.
                    return this.ngZone.run(() => this.setMenuVisible(true));
                }
                // Make these keys work as default in searching mode.
                if (this.inSearchingMode && (keyCode === BACKSPACE || keyCode === LEFT_ARROW || keyCode === RIGHT_ARROW)) {
                    return;
                }
                if (!this.menuVisible) {
                    return;
                }
                event.preventDefault();
                this.ngZone.run(() => {
                    // Interact with the component.
                    if (keyCode === DOWN_ARROW) {
                        this.moveUpOrDown(false);
                    }
                    else if (keyCode === UP_ARROW) {
                        this.moveUpOrDown(true);
                    }
                    else if (keyCode === LEFT_ARROW) {
                        this.moveLeft();
                    }
                    else if (keyCode === RIGHT_ARROW) {
                        this.moveRight();
                    }
                    else if (keyCode === ENTER) {
                        this.onEnter();
                    }
                    // `@HostListener`s run `markForCheck()` internally before calling the actual handler so
                    // we call `markForCheck()` to be backwards-compatible.
                    this.cdr.markForCheck();
                });
            });
        });
    }
    //buildCss
    updateClassCss() {
        this.tdsClassContainer = this.getCssContainer();
        this.tdsClassArrow = this.getCssArrow();
    }
    getCssBySize() {
        let result = '';
        switch (this.tdsSize) {
            case 'sm':
                result = " py-1  pl-2.5 ";
                break;
            case 'md':
                result = " py-1.5  pl-3 ";
                break;
            case 'lg':
                result = " py-2  pl-3.5 ";
                break;
            case 'xl':
                result = " py-2.5 pl-4 ";
                break;
            default:
                result = ' py-1.5  pl-3 ';
        }
        return result;
    }
    getCssArrow() {
        let result = 'text-neutral-1-900 dark:text-d-neutral-1-900 text-base leading-4 flex items-center justify-center ';
        switch (this.tdsSize) {
            case 'sm':
                result += " px-1.5 ";
                break;
            case 'md':
                result += " px-2.5 ";
                break;
            case 'lg':
                result += " px-3 ";
                break;
            case 'xl':
                result += " px-3.5 ";
                break;
            default:
                result += ' px-2.5 ';
        }
        return result;
    }
    getCssContainer() {
        let result = 'dark:bg-d-neutral-3-50 bg-white border rounded dark:group-hover:bg-d-neutral-3-50 group-hover:bg-neutral-3-50';
        if (!this.menuVisible) {
            result += " dark:border-d-neutral-2-200 border-neutral-2-200";
        }
        else {
            result += ' outline-none ring-opacity-20 ring ring-primary-1 border-primary-1';
        }
        result += this.tdsDisabled ? " cursor-not-allowed " : " cursor-pointer ";
        result += this.getCssBySize();
        return result;
    }
}
TDSCascaderComponent.ɵfac = function TDSCascaderComponent_Factory(t) { return new (t || TDSCascaderComponent)(i0.ɵɵdirectiveInject(i1.TDSCascaderService), i0.ɵɵdirectiveInject(i2.TDSConfigService), i0.ɵɵdirectiveInject(i0.NgZone), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i3.TDSI18nService), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i4.Directionality, 8), i0.ɵɵdirectiveInject(i5.TDSNoAnimationDirective, 9)); };
TDSCascaderComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: TDSCascaderComponent, selectors: [["tds-cascader"], ["", "tds-cascader", ""]], viewQuery: function TDSCascaderComponent_Query(rf, ctx) { if (rf & 1) {
        i0.ɵɵviewQuery(_c0, 5);
        i0.ɵɵviewQuery(_c1, 5);
        i0.ɵɵviewQuery(_c2, 5);
        i0.ɵɵviewQuery(CdkConnectedOverlay, 5);
        i0.ɵɵviewQuery(TDSCascaderOptionComponent, 5);
    } if (rf & 2) {
        let _t;
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.selectContainer = _t.first);
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.input = _t.first);
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.menu = _t.first);
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.overlay = _t.first);
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.cascaderItems = _t);
    } }, hostAttrs: [1, "group"], hostVars: 17, hostBindings: function TDSCascaderComponent_HostBindings(rf, ctx) { if (rf & 1) {
        i0.ɵɵlistener("click", function TDSCascaderComponent_click_HostBindingHandler() { return ctx.onTriggerClick(); })("mouseenter", function TDSCascaderComponent_mouseenter_HostBindingHandler() { return ctx.onTriggerMouseEnter(); })("mouseleave", function TDSCascaderComponent_mouseleave_HostBindingHandler($event) { return ctx.onTriggerMouseLeave($event); });
    } if (rf & 2) {
        i0.ɵɵattribute("tabIndex", "0");
        i0.ɵɵclassProp("tds-select-allow-clear", ctx.tdsAllowClear)("tds-select-show-arrow", ctx.tdsShowArrow)("tds-select-show-search", !!ctx.tdsShowSearch)("tds-select-disabled", ctx.tdsDisabled)("tds-select-open", ctx.menuVisible)("tds-select-focused", ctx.isFocused)("tds-select-single", true)("tds-select-rtl", ctx.dir === "rtl");
    } }, inputs: { tdsOptionRender: "tdsOptionRender", tdsShowInput: "tdsShowInput", tdsShowArrow: "tdsShowArrow", tdsAllowClear: "tdsAllowClear", tdsAutoFocus: "tdsAutoFocus", tdsChangeOnSelect: "tdsChangeOnSelect", tdsDisabled: "tdsDisabled", tdsColumnClassName: "tdsColumnClassName", tdsExpandTrigger: "tdsExpandTrigger", tdsValueProperty: "tdsValueProperty", tdsLabelRender: "tdsLabelRender", tdsLabelProperty: "tdsLabelProperty", tdsNotFoundContent: "tdsNotFoundContent", tdsSize: "tdsSize", tdsBackdrop: "tdsBackdrop", tdsShowSearch: "tdsShowSearch", tdsPlaceHolder: "tdsPlaceHolder", tdsMenuClassName: "tdsMenuClassName", tdsMenuStyle: "tdsMenuStyle", tdsMouseEnterDelay: "tdsMouseEnterDelay", tdsMouseLeaveDelay: "tdsMouseLeaveDelay", tdsTriggerAction: "tdsTriggerAction", tdsChangeOn: "tdsChangeOn", tdsLoadData: "tdsLoadData", tdsSuffixIcon: "tdsSuffixIcon", tdsExpandIcon: "tdsExpandIcon", tdsOptions: "tdsOptions" }, outputs: { tdsVisibleChange: "tdsVisibleChange", tdsSelectionChange: "tdsSelectionChange", tdsSelect: "tdsSelect", tdsClear: "tdsClear" }, exportAs: ["tdsCascader"], features: [i0.ɵɵProvidersFeature([
            {
                provide: NG_VALUE_ACCESSOR,
                useExisting: forwardRef(() => TDSCascaderComponent),
                multi: true
            },
            TDSCascaderService
        ])], ngContentSelectors: _c7, decls: 6, vars: 6, consts: [["cdkOverlayOrigin", ""], ["origin", "cdkOverlayOrigin", "trigger", ""], [4, "ngIf"], ["cdkConnectedOverlay", "", "tdsConnectedOverlay", "", 3, "cdkConnectedOverlayHasBackdrop", "cdkConnectedOverlayOrigin", "cdkConnectedOverlayPositions", "cdkConnectedOverlayTransformOriginOn", "cdkConnectedOverlayOpen", "overlayOutsideClick", "detach"], [1, "w-full", "flex", "items-center"], [1, "tds-select-selector", "flex-auto", "relative", "h-5"], ["selectContainer", ""], [1, "tds-select-selection-search", "h-5", 3, "ngClass"], ["type", "search", 1, "tds-select-selection-search-input", "text-body-2", 3, "ngClass", "readonly", "disabled", "ngModel", "ngModelChange", "blur", "focus", "change"], ["input", ""], ["class", "tds-select-selection-item absolute inset-0 truncate text-body-2", 3, "title", 4, "ngIf"], ["class", "tds-select-selection-placeholder absolute inset-0  flex items-center text-body-2 text-neutral-1-400 dark:text-d-neutral-1-400", 3, "class", 4, "ngIf"], ["class", "tds-select-clear flex items-center justify-center pl-2", 4, "ngIf"], ["class", "tds-select-arrow", 3, "class", "tds-select-arrow-loading", 4, "ngIf"], [1, "tds-select-selection-item", "absolute", "inset-0", "truncate", "text-body-2", 3, "title"], [4, "ngIf", "ngIfElse"], ["labelTemplate", ""], [3, "ngTemplateOutlet", "ngTemplateOutletContext"], [1, "tds-select-selection-placeholder", "absolute", "inset-0", "flex", "items-center", "text-body-2", "text-neutral-1-400", "dark:text-d-neutral-1-400"], [1, "truncate", "w-full"], [1, "tds-select-clear", "flex", "items-center", "justify-center", "pl-2"], [1, "tdsi-close-fill", "text-neutral-1-500", "dark:text-d-neutral-1-500", "text-base", "leading-4", 3, "click"], [1, "tds-select-arrow"], [4, "tdsStringTemplateOutlet"], [1, "h-4", "w-4", 3, "color"], [1, "tds-select-dropdown", "tds-cascader-dropdown", "tds-select-dropdown-placement-bottomLeft", 3, "noAnimation", "mouseleave"], [1, "tds-cascader-menus", "flex", "flex-wrap", "items-stretch", "relative", "mt-1", "bg-white", "dark:bg-d-neutral-3-200", "text-neutral-1-900", "dark:text-d-neutral-1-900", "rounded", "shadow-xl", 3, "ngClass", "ngStyle"], ["menu", ""], ["class", "tds-cascader-menu  py-1 min-w-[176px]", 3, "width", "height", 4, "ngIf", "ngIfElse"], ["hasOptionsTemplate", ""], [1, "tds-cascader-menu", "py-1", "min-w-[176px]"], [1, "tds-cascader-menu-item", "tds-cascader-menu-item-disabled"], [1, "tds-cascader-menu-item-content", 3, "componentName", "specificContent"], ["class", "tds-cascader-menu min-w-[176px]  py-1", "role", "menuitemcheckbox", 3, "ngClass", "height", "width", "border-l", "border-neutral-200", "dark:border-d-neutral-200", 4, "ngFor", "ngForOf"], ["role", "menuitemcheckbox", 1, "tds-cascader-menu", "min-w-[176px]", "py-1", 3, "ngClass"], ["tds-cascader-option", "", "class", "py-1.5  dark:hover:bg-d-neutral-3-300 hover:bg-neutral-3-50 flex items-center justify-between", 3, "expandIcon", "columnIndex", "tdsLabelProperty", "optionTemplate", "activated", "highlightText", "option", "dir", "ngClass", "mouseenter", "mouseleave", "click", 4, "ngFor", "ngForOf"], ["tds-cascader-option", "", 1, "py-1.5", "dark:hover:bg-d-neutral-3-300", "hover:bg-neutral-3-50", "flex", "items-center", "justify-between", 3, "expandIcon", "columnIndex", "tdsLabelProperty", "optionTemplate", "activated", "highlightText", "option", "dir", "ngClass", "mouseenter", "mouseleave", "click"]], template: function TDSCascaderComponent_Template(rf, ctx) { if (rf & 1) {
        i0.ɵɵprojectionDef();
        i0.ɵɵelementStart(0, "div", 0, 1);
        i0.ɵɵtemplate(3, TDSCascaderComponent_ng_container_3_Template, 11, 19, "ng-container", 2);
        i0.ɵɵprojection(4);
        i0.ɵɵelementEnd();
        i0.ɵɵtemplate(5, TDSCascaderComponent_ng_template_5_Template, 6, 15, "ng-template", 3);
        i0.ɵɵlistener("overlayOutsideClick", function TDSCascaderComponent_Template_ng_template_overlayOutsideClick_5_listener($event) { return ctx.onClickOutside($event); })("detach", function TDSCascaderComponent_Template_ng_template_detach_5_listener() { return ctx.closeMenu(); });
    } if (rf & 2) {
        const _r0 = i0.ɵɵreference(1);
        i0.ɵɵadvance(3);
        i0.ɵɵproperty("ngIf", ctx.tdsShowInput);
        i0.ɵɵadvance(2);
        i0.ɵɵproperty("cdkConnectedOverlayHasBackdrop", ctx.tdsBackdrop)("cdkConnectedOverlayOrigin", _r0)("cdkConnectedOverlayPositions", ctx.positions)("cdkConnectedOverlayTransformOriginOn", ".tds-cascader-dropdown")("cdkConnectedOverlayOpen", ctx.menuVisible);
    } }, directives: [i6.CdkOverlayOrigin, i7.NgIf, i7.NgClass, i8.DefaultValueAccessor, i8.NgControlStatus, i8.NgModel, i7.NgTemplateOutlet, i9.TDSStringTemplateOutletDirective, i10.TDSProgressSpinnerComponent, i6.CdkConnectedOverlay, i11.TDSConnectedOverlayDirective, i5.TDSNoAnimationDirective, i7.NgStyle, i12.TDSEmbedEmptyComponent, i7.NgForOf, i13.TDSCascaderOptionComponent, i4.Dir], encapsulation: 2, data: { animation: [slideMotion] }, changeDetection: 0 });
__decorate([
    InputBoolean()
], TDSCascaderComponent.prototype, "tdsShowInput", void 0);
__decorate([
    InputBoolean()
], TDSCascaderComponent.prototype, "tdsShowArrow", void 0);
__decorate([
    InputBoolean()
], TDSCascaderComponent.prototype, "tdsAllowClear", void 0);
__decorate([
    InputBoolean()
], TDSCascaderComponent.prototype, "tdsAutoFocus", void 0);
__decorate([
    InputBoolean()
], TDSCascaderComponent.prototype, "tdsChangeOnSelect", void 0);
__decorate([
    InputBoolean()
], TDSCascaderComponent.prototype, "tdsDisabled", void 0);
__decorate([
    WithConfig()
], TDSCascaderComponent.prototype, "tdsSize", void 0);
__decorate([
    WithConfig()
], TDSCascaderComponent.prototype, "tdsBackdrop", void 0);
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(TDSCascaderComponent, [{
        type: Component,
        args: [{ changeDetection: ChangeDetectionStrategy.OnPush, encapsulation: ViewEncapsulation.None, selector: 'tds-cascader, [tds-cascader]', exportAs: 'tdsCascader', preserveWhitespaces: false, animations: [slideMotion], providers: [
                    {
                        provide: NG_VALUE_ACCESSOR,
                        useExisting: forwardRef(() => TDSCascaderComponent),
                        multi: true
                    },
                    TDSCascaderService
                ], host: {
                    '[attr.tabIndex]': '"0"',
                    '[class.tds-select-allow-clear]': 'tdsAllowClear',
                    '[class.tds-select-show-arrow]': 'tdsShowArrow',
                    '[class.tds-select-show-search]': '!!tdsShowSearch',
                    '[class.tds-select-disabled]': 'tdsDisabled',
                    '[class.tds-select-open]': 'menuVisible',
                    '[class.tds-select-focused]': 'isFocused',
                    '[class.tds-select-single]': 'true',
                    '[class.tds-select-rtl]': `dir ==='rtl'`,
                    'class': 'group'
                }, template: "<div cdkOverlayOrigin #origin=\"cdkOverlayOrigin\" #trigger>\r\n    <ng-container *ngIf=\"tdsShowInput\">\r\n        <div class=\"w-full flex items-center \" [class]=\"tdsClassContainer\">\r\n            <div #selectContainer class=\"tds-select-selector flex-auto relative h-5\">\r\n                <div class=\"tds-select-selection-search h-5\" [ngClass]=\"{'opacity-0 w-0 h-0': !tdsShowSearch}\">\r\n                    <input #input type=\"search\" class=\"tds-select-selection-search-input text-body-2\"\r\n                        [ngClass]=\"{'opacity-0 w-0 h-0': !tdsShowSearch,'w-full h-full':!tdsShowSearch}\"\r\n                        [attr.autoComplete]=\"'off'\" [attr.expanded]=\"menuVisible\"\r\n                        [attr.autofocus]=\"tdsAutoFocus ? 'autofocus' : null\" [readonly]=\"!tdsShowSearch\"\r\n                        [disabled]=\"tdsDisabled\" [(ngModel)]=\"inputValue\" (blur)=\"handleInputBlur()\"\r\n                        (focus)=\"handleInputFocus()\" (change)=\"$event.stopPropagation()\" />\r\n                </div>\r\n                <div *ngIf=\"showLabelRender\" class=\"tds-select-selection-item absolute inset-0 truncate text-body-2\"\r\n                    [title]=\"labelRenderText\">\r\n                    <ng-container *ngIf=\"!isLabelRenderTemplate; else labelTemplate\">{{ labelRenderText }}\r\n                    </ng-container>\r\n                    <ng-template #labelTemplate>\r\n                        <ng-template [ngTemplateOutlet]=\"tdsLabelRender\" [ngTemplateOutletContext]=\"labelRenderContext\">\r\n                        </ng-template>\r\n                    </ng-template>\r\n                </div>\r\n                <div *ngIf=\"!showLabelRender\"\r\n                    class=\"tds-select-selection-placeholder absolute inset-0  flex items-center text-body-2 text-neutral-1-400 dark:text-d-neutral-1-400\"\r\n                    [class]=\"{'invisible':inputValue,'visible':!inputValue}\">\r\n                    <div class=\"truncate  w-full\">\r\n                        {{ showPlaceholder ? tdsPlaceHolder || locale.placeholder : null }}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"tds-select-clear flex items-center justify-center pl-2\" *ngIf=\"clearIconVisible\">\r\n                <i class=\"tdsi-close-fill text-neutral-1-500 dark:text-d-neutral-1-500 text-base leading-4 \"\r\n                    (click)=\"clearSelection($event)\"></i>\r\n            </div>\r\n            <div class=\"tds-select-arrow\" [class]=\"tdsClassArrow\" [class.tds-select-arrow-loading]=\"isLoading\"\r\n                *ngIf=\"tdsShowArrow\">\r\n                <ng-container *ngIf=\"!isLoading\">\r\n                    <ng-container *tdsStringTemplateOutlet=\"tdsSuffixIcon\">\r\n                        <span [class]=\"tdsSuffixIcon\"></span>\r\n                    </ng-container>\r\n                </ng-container>\r\n                <!--   <ng-container *ngIf=\"!isLoading && menuVisible\">\r\n                    <ng-container *tdsStringTemplateOutlet=\"tdsExpandIcon\">\r\n                        <span [class]=\"tdsExpandIcon\"></span>\r\n                    </ng-container>\r\n                </ng-container> -->\r\n                <span *ngIf=\"isLoading\">\r\n                    <tds-spinner [color]=\"'primary'\" class=\"h-4 w-4\"></tds-spinner>\r\n                </span>\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n    <ng-content></ng-content>\r\n</div>\r\n<ng-template cdkConnectedOverlay tdsConnectedOverlay [cdkConnectedOverlayHasBackdrop]=\"tdsBackdrop\"\r\n    [cdkConnectedOverlayOrigin]=\"origin\" [cdkConnectedOverlayPositions]=\"positions\"\r\n    [cdkConnectedOverlayTransformOriginOn]=\"'.tds-cascader-dropdown'\" [cdkConnectedOverlayOpen]=\"menuVisible\"\r\n    (overlayOutsideClick)=\"onClickOutside($event)\" (detach)=\"closeMenu()\">\r\n    <div class=\"tds-select-dropdown tds-cascader-dropdown tds-select-dropdown-placement-bottomLeft\"\r\n        [class.tds-cascader-dropdown-rtl]=\"dir === 'rtl'\" [@slideMotion]=\"'enter'\"\r\n        [@.disabled]=\"noAnimation?.noAnimation\" [noAnimation]=\"noAnimation?.noAnimation\"\r\n        (mouseleave)=\"onTriggerMouseLeave($event)\">\r\n        <div #menu\r\n            class=\"tds-cascader-menus flex flex-wrap items-stretch relative mt-1 bg-white dark:bg-d-neutral-3-200 text-neutral-1-900 dark:text-d-neutral-1-900 rounded shadow-xl\"\r\n            [class.tds-cascader-rtl]=\"dir === 'rtl'\" [class.tds-cascader-menus-hidden]=\"!menuVisible\"\r\n            [class.tds-cascader-menu-empty]=\"shouldShowEmpty\" [ngClass]=\"menuCls\" [ngStyle]=\"tdsMenuStyle\">\r\n            <ul *ngIf=\"shouldShowEmpty; else hasOptionsTemplate\" class=\"tds-cascader-menu  py-1 min-w-[176px]\"\r\n                [style.width]=\"dropdownWidthStyle\" [style.height]=\"dropdownHeightStyle\">\r\n                <li class=\"tds-cascader-menu-item tds-cascader-menu-item-disabled\">\r\n                    <tds-embed-empty class=\"tds-cascader-menu-item-content\" [componentName]=\"'cascader'\"\r\n                        [specificContent]=\"tdsNotFoundContent\"></tds-embed-empty>\r\n                </li>\r\n            </ul>\r\n            <ng-template #hasOptionsTemplate>\r\n                <ul *ngFor=\"let options of cascaderService.columns; let i = index\"\r\n                    class=\"tds-cascader-menu min-w-[176px]  py-1\" role=\"menuitemcheckbox\" [ngClass]=\"menuColumnCls\"\r\n                    [style.height]=\"dropdownHeightStyle\" [style.width]=\"dropdownWidthStyle\" [class.border-l]='i > 0'\r\n                    [class.border-neutral-200]='i > 0' [class.dark:border-d-neutral-200]='i > 0'>\r\n                    <li tds-cascader-option *ngFor=\"let option of options\" [expandIcon]=\"tdsExpandIcon\"\r\n                        [columnIndex]=\"i\" [tdsLabelProperty]=\"tdsLabelProperty\" [optionTemplate]=\"tdsOptionRender\"\r\n                        [activated]=\"isOptionActivated(option, i)\" [highlightText]=\"inSearchingMode ? inputValue : ''\"\r\n                        [option]=\"option\" [dir]=\"dir\" (mouseenter)=\"onOptionMouseEnter(option, i, $event)\"\r\n                        (mouseleave)=\"onOptionMouseLeave(option, i, $event)\" (click)=\"onOptionClick(option, i, $event)\"\r\n                        class=\"py-1.5  dark:hover:bg-d-neutral-3-300 hover:bg-neutral-3-50 flex items-center justify-between\"\r\n                        [ngClass]=\"{'bg-neutral-3-50 dark:bg-d-neutral-3-300': isOptionActivated(option, i),\r\n                    'cursor-pointer':!option.disabled,' cursor-not-allowed':option.disabled,\r\n                    'px-1.5':tdsSize == 'sm',\r\n                    'px-2':tdsSize == 'md',\r\n                    'px-2.5':tdsSize == 'lg',\r\n                    'px-3':tdsSize == 'xl'\r\n                \r\n                }\">\r\n                    </li>\r\n                </ul>\r\n            </ng-template>\r\n        </div>\r\n    </div>\r\n</ng-template>" }]
    }], function () { return [{ type: i1.TDSCascaderService }, { type: i2.TDSConfigService }, { type: i0.NgZone }, { type: i0.ChangeDetectorRef }, { type: i3.TDSI18nService }, { type: i0.ElementRef }, { type: i0.Renderer2 }, { type: i4.Directionality, decorators: [{
                type: Optional
            }] }, { type: i5.TDSNoAnimationDirective, decorators: [{
                type: Host
            }, {
                type: Optional
            }] }]; }, { selectContainer: [{
            type: ViewChild,
            args: ['selectContainer', { static: false }]
        }], input: [{
            type: ViewChild,
            args: ['input', { static: false }]
        }], menu: [{
            type: ViewChild,
            args: ['menu', { static: false }]
        }], overlay: [{
            type: ViewChild,
            args: [CdkConnectedOverlay, { static: false }]
        }], cascaderItems: [{
            type: ViewChildren,
            args: [TDSCascaderOptionComponent]
        }], tdsOptionRender: [{
            type: Input
        }], tdsShowInput: [{
            type: Input
        }], tdsShowArrow: [{
            type: Input
        }], tdsAllowClear: [{
            type: Input
        }], tdsAutoFocus: [{
            type: Input
        }], tdsChangeOnSelect: [{
            type: Input
        }], tdsDisabled: [{
            type: Input
        }], tdsColumnClassName: [{
            type: Input
        }], tdsExpandTrigger: [{
            type: Input
        }], tdsValueProperty: [{
            type: Input
        }], tdsLabelRender: [{
            type: Input
        }], tdsLabelProperty: [{
            type: Input
        }], tdsNotFoundContent: [{
            type: Input
        }], tdsSize: [{
            type: Input
        }], tdsBackdrop: [{
            type: Input
        }], tdsShowSearch: [{
            type: Input
        }], tdsPlaceHolder: [{
            type: Input
        }], tdsMenuClassName: [{
            type: Input
        }], tdsMenuStyle: [{
            type: Input
        }], tdsMouseEnterDelay: [{
            type: Input
        }], tdsMouseLeaveDelay: [{
            type: Input
        }], tdsTriggerAction: [{
            type: Input
        }], tdsChangeOn: [{
            type: Input
        }], tdsLoadData: [{
            type: Input
        }], tdsSuffixIcon: [{
            type: Input
        }], tdsExpandIcon: [{
            type: Input
        }], tdsOptions: [{
            type: Input
        }], tdsVisibleChange: [{
            type: Output
        }], tdsSelectionChange: [{
            type: Output
        }], tdsSelect: [{
            type: Output
        }], tdsClear: [{
            type: Output
        }], onTriggerClick: [{
            type: HostListener,
            args: ['click']
        }], onTriggerMouseEnter: [{
            type: HostListener,
            args: ['mouseenter']
        }], onTriggerMouseLeave: [{
            type: HostListener,
            args: ['mouseleave', ['$event']]
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FzY2FkZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvdGRzLXVpL2Nhc2NhZGVyL2Nhc2NhZGVyLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uL3Byb2plY3RzL3Rkcy11aS9jYXNjYWRlci9jYXNjYWRlci5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBSUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsV0FBVyxFQUFFLFFBQVEsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQ2hILE9BQU8sRUFBRSxtQkFBbUIsRUFBMEIsTUFBTSxzQkFBc0IsQ0FBQztBQUNuRixPQUFPLEVBQ0wsdUJBQXVCLEVBRXZCLFNBQVMsRUFFVCxZQUFZLEVBQ1osVUFBVSxFQUNWLElBQUksRUFDSixZQUFZLEVBQ1osS0FBSyxFQUlMLFFBQVEsRUFDUixNQUFNLEVBSU4sU0FBUyxFQUNULFlBQVksRUFDWixpQkFBaUIsRUFDbEIsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUF3QixpQkFBaUIsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3pFLE9BQU8sRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQzFDLE9BQU8sRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDdEQsT0FBTyxFQUFFLFlBQVksRUFBYyxNQUFNLHVCQUF1QixDQUFDO0FBSWpFLE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQ3JFLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBVXhELE9BQU8sRUFBaUUsVUFBVSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDL0csT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQ3BE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QUFnQjtrQkFBbEMsTUFBTTtZQUNZLGtCQUFrQjtrQkFBcEMsTUFBTTtZQUNZLFNBQVM7a0JBQTNCLE1BQU07WUFDWSxRQUFRO2tCQUExQixNQUFNO1lBeVFQLGNBQWM7a0JBRGIsWUFBWTttQkFBQyxPQUFPO1lBZXJCLG1CQUFtQjtrQkFEbEIsWUFBWTttQkFBQyxZQUFZO1lBVTFCLG1CQUFtQjtrQkFEbEIsWUFBWTttQkFBQyxZQUFZLEVBQUUsQ0FBQyxRQUFRLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuXHJcbmltcG9ydCB7IERpcmVjdGlvbiwgRGlyZWN0aW9uYWxpdHkgfSBmcm9tICdAYW5ndWxhci9jZGsvYmlkaSc7XHJcbmltcG9ydCB7IEJvb2xlYW5JbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9jb2VyY2lvbic7XHJcbmltcG9ydCB7IEJBQ0tTUEFDRSwgRE9XTl9BUlJPVywgRU5URVIsIEVTQ0FQRSwgTEVGVF9BUlJPVywgUklHSFRfQVJST1csIFVQX0FSUk9XIH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2tleWNvZGVzJztcclxuaW1wb3J0IHsgQ2RrQ29ubmVjdGVkT3ZlcmxheSwgQ29ubmVjdGlvblBvc2l0aW9uUGFpciB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9vdmVybGF5JztcclxuaW1wb3J0IHtcclxuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcclxuICBDaGFuZ2VEZXRlY3RvclJlZixcclxuICBDb21wb25lbnQsXHJcbiAgRWxlbWVudFJlZixcclxuICBFdmVudEVtaXR0ZXIsXHJcbiAgZm9yd2FyZFJlZixcclxuICBIb3N0LFxyXG4gIEhvc3RMaXN0ZW5lcixcclxuICBJbnB1dCxcclxuICBOZ1pvbmUsXHJcbiAgT25EZXN0cm95LFxyXG4gIE9uSW5pdCxcclxuICBPcHRpb25hbCxcclxuICBPdXRwdXQsXHJcbiAgUXVlcnlMaXN0LFxyXG4gIFJlbmRlcmVyMixcclxuICBUZW1wbGF0ZVJlZixcclxuICBWaWV3Q2hpbGQsXHJcbiAgVmlld0NoaWxkcmVuLFxyXG4gIFZpZXdFbmNhcHN1bGF0aW9uXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBOR19WQUxVRV9BQ0NFU1NPUiB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcclxuaW1wb3J0IHsgZnJvbUV2ZW50LCBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IHN0YXJ0V2l0aCwgdGFrZVVudGlsIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5pbXBvcnQgeyBJbnB1dEJvb2xlYW4sIFREU1NhZmVBbnkgfSBmcm9tICd0ZHMtdWkvc2hhcmVkL3V0aWxpdHknO1xyXG5pbXBvcnQgeyBURFNDYXNjYWRlckkxOG5JbnRlcmZhY2UsIFREU0kxOG5TZXJ2aWNlIH0gZnJvbSAndGRzLXVpL2kxOG4nO1xyXG5cclxuXHJcbmltcG9ydCB7IFREU0Nhc2NhZGVyT3B0aW9uQ29tcG9uZW50IH0gZnJvbSAnLi9jYXNjYWRlci1saS5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBURFNDYXNjYWRlclNlcnZpY2UgfSBmcm9tICcuL2Nhc2NhZGVyLnNlcnZpY2UnO1xyXG5pbXBvcnQge1xyXG4gIFREU0Nhc2NhZGVyQ29tcG9uZW50QXNTb3VyY2UsXHJcbiAgVERTQ2FzY2FkZXJFeHBhbmRUcmlnZ2VyLFxyXG4gIFREU0Nhc2NhZGVyT3B0aW9uLFxyXG4gIFREU0Nhc2NhZGVyU2VhcmNoT3B0aW9uLFxyXG4gIFREU0Nhc2NhZGVyU2l6ZSxcclxuICBURFNDYXNjYWRlclRyaWdnZXJUeXBlLFxyXG4gIFREU1Nob3dTZWFyY2hPcHRpb25zXHJcbn0gZnJvbSAnLi90eXBpbmdzJztcclxuaW1wb3J0IHsgTmdDbGFzc1R5cGUsIE5nU3R5bGVJbnRlcmZhY2UsIFREU0NvbmZpZ0tleSwgVERTQ29uZmlnU2VydmljZSwgV2l0aENvbmZpZyB9IGZyb20gJ3Rkcy11aS9jb3JlL2NvbmZpZyc7XHJcbmltcG9ydCB7IHNsaWRlTW90aW9uIH0gZnJvbSAndGRzLXVpL2NvcmUvYW5pbWF0aW9uJztcclxuaW1wb3J0IHsgREVGQVVMVF9DQVNDQURFUl9QT1NJVElPTlMgfSBmcm9tICd0ZHMtdWkvY29yZS9vdmVybGF5JztcclxuaW1wb3J0IHsgVERTTm9BbmltYXRpb25EaXJlY3RpdmUgfSBmcm9tICd0ZHMtdWkvY29yZS9uby1hbmltYXRpb24nO1xyXG5pbXBvcnQgeyB0b0FycmF5IH0gZnJvbSAndGRzLXVpL2NvcmUvdXRpbCc7XHJcblxyXG5jb25zdCBURFNfQ09ORklHX01PRFVMRV9OQU1FOiBURFNDb25maWdLZXkgPSAnY2FzY2FkZXInO1xyXG5jb25zdCBkZWZhdWx0RGlzcGxheVJlbmRlciA9IChsYWJlbHM6IHN0cmluZ1tdKTogc3RyaW5nID0+IGxhYmVscy5qb2luKCcgLyAnKTtcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxyXG4gIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXHJcbiAgc2VsZWN0b3I6ICd0ZHMtY2FzY2FkZXIsIFt0ZHMtY2FzY2FkZXJdJyxcclxuICBleHBvcnRBczogJ3Rkc0Nhc2NhZGVyJyxcclxuICBwcmVzZXJ2ZVdoaXRlc3BhY2VzOiBmYWxzZSxcclxuICB0ZW1wbGF0ZVVybDogJy4vY2FzY2FkZXIuY29tcG9uZW50Lmh0bWwnLFxyXG4gIGFuaW1hdGlvbnM6IFtzbGlkZU1vdGlvbl0sXHJcbiAgcHJvdmlkZXJzOiBbXHJcbiAgICB7XHJcbiAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxyXG4gICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBURFNDYXNjYWRlckNvbXBvbmVudCksXHJcbiAgICAgIG11bHRpOiB0cnVlXHJcbiAgICB9LFxyXG4gICAgVERTQ2FzY2FkZXJTZXJ2aWNlXHJcbiAgXSxcclxuICBob3N0OiB7XHJcbiAgICAnW2F0dHIudGFiSW5kZXhdJzogJ1wiMFwiJyxcclxuICAgICdbY2xhc3MudGRzLXNlbGVjdC1hbGxvdy1jbGVhcl0nOiAndGRzQWxsb3dDbGVhcicsXHJcbiAgICAnW2NsYXNzLnRkcy1zZWxlY3Qtc2hvdy1hcnJvd10nOiAndGRzU2hvd0Fycm93JyxcclxuICAgICdbY2xhc3MudGRzLXNlbGVjdC1zaG93LXNlYXJjaF0nOiAnISF0ZHNTaG93U2VhcmNoJyxcclxuICAgICdbY2xhc3MudGRzLXNlbGVjdC1kaXNhYmxlZF0nOiAndGRzRGlzYWJsZWQnLFxyXG4gICAgJ1tjbGFzcy50ZHMtc2VsZWN0LW9wZW5dJzogJ21lbnVWaXNpYmxlJyxcclxuICAgICdbY2xhc3MudGRzLXNlbGVjdC1mb2N1c2VkXSc6ICdpc0ZvY3VzZWQnLFxyXG4gICAgJ1tjbGFzcy50ZHMtc2VsZWN0LXNpbmdsZV0nOiAndHJ1ZScsXHJcbiAgICAnW2NsYXNzLnRkcy1zZWxlY3QtcnRsXSc6IGBkaXIgPT09J3J0bCdgLFxyXG4gICAgJ2NsYXNzJzogJ2dyb3VwJ1xyXG4gIH1cclxufSlcclxuZXhwb3J0IGNsYXNzIFREU0Nhc2NhZGVyQ29tcG9uZW50IGltcGxlbWVudHMgVERTQ2FzY2FkZXJDb21wb25lbnRBc1NvdXJjZSwgT25Jbml0LCBPbkRlc3Ryb3ksIENvbnRyb2xWYWx1ZUFjY2Vzc29yIHtcclxuICByZWFkb25seSBfdGRzTW9kdWxlTmFtZTogVERTQ29uZmlnS2V5ID0gVERTX0NPTkZJR19NT0RVTEVfTkFNRTtcclxuICBzdGF0aWMgbmdBY2NlcHRJbnB1dFR5cGVfdGRzU2hvd0lucHV0OiBCb29sZWFuSW5wdXQ7XHJcbiAgc3RhdGljIG5nQWNjZXB0SW5wdXRUeXBlX3Rkc1Nob3dBcnJvdzogQm9vbGVhbklucHV0O1xyXG4gIHN0YXRpYyBuZ0FjY2VwdElucHV0VHlwZV90ZHNBbGxvd0NsZWFyOiBCb29sZWFuSW5wdXQ7XHJcbiAgc3RhdGljIG5nQWNjZXB0SW5wdXRUeXBlX3Rkc0F1dG9Gb2N1czogQm9vbGVhbklucHV0O1xyXG4gIHN0YXRpYyBuZ0FjY2VwdElucHV0VHlwZV90ZHNDaGFuZ2VPblNlbGVjdDogQm9vbGVhbklucHV0O1xyXG4gIHN0YXRpYyBuZ0FjY2VwdElucHV0VHlwZV90ZHNEaXNhYmxlZDogQm9vbGVhbklucHV0O1xyXG5cclxuICBAVmlld0NoaWxkKCdzZWxlY3RDb250YWluZXInLCB7IHN0YXRpYzogZmFsc2UgfSkgc2VsZWN0Q29udGFpbmVyITogRWxlbWVudFJlZjtcclxuICBAVmlld0NoaWxkKCdpbnB1dCcsIHsgc3RhdGljOiBmYWxzZSB9KSBpbnB1dCE6IEVsZW1lbnRSZWY7XHJcbiAgQFZpZXdDaGlsZCgnbWVudScsIHsgc3RhdGljOiBmYWxzZSB9KSBtZW51ITogRWxlbWVudFJlZjtcclxuICBAVmlld0NoaWxkKENka0Nvbm5lY3RlZE92ZXJsYXksIHsgc3RhdGljOiBmYWxzZSB9KSBvdmVybGF5ITogQ2RrQ29ubmVjdGVkT3ZlcmxheTtcclxuICBAVmlld0NoaWxkcmVuKFREU0Nhc2NhZGVyT3B0aW9uQ29tcG9uZW50KSBjYXNjYWRlckl0ZW1zITogUXVlcnlMaXN0PFREU0Nhc2NhZGVyT3B0aW9uQ29tcG9uZW50PjtcclxuXHJcbiAgQElucHV0KCkgdGRzT3B0aW9uUmVuZGVyOiBUZW1wbGF0ZVJlZjx7ICRpbXBsaWNpdDogVERTQ2FzY2FkZXJPcHRpb247IGluZGV4OiBudW1iZXIgfT4gfCBudWxsID0gbnVsbDtcclxuICBASW5wdXQoKSBASW5wdXRCb29sZWFuKCkgdGRzU2hvd0lucHV0ID0gdHJ1ZTtcclxuICBASW5wdXQoKSBASW5wdXRCb29sZWFuKCkgdGRzU2hvd0Fycm93ID0gdHJ1ZTtcclxuICBASW5wdXQoKSBASW5wdXRCb29sZWFuKCkgdGRzQWxsb3dDbGVhciA9IHRydWU7XHJcbiAgQElucHV0KCkgQElucHV0Qm9vbGVhbigpIHRkc0F1dG9Gb2N1cyA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpIEBJbnB1dEJvb2xlYW4oKSB0ZHNDaGFuZ2VPblNlbGVjdCA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpIEBJbnB1dEJvb2xlYW4oKSB0ZHNEaXNhYmxlZCA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpIHRkc0NvbHVtbkNsYXNzTmFtZT86IHN0cmluZztcclxuICBASW5wdXQoKSB0ZHNFeHBhbmRUcmlnZ2VyOiBURFNDYXNjYWRlckV4cGFuZFRyaWdnZXIgPSAnY2xpY2snO1xyXG4gIEBJbnB1dCgpIHRkc1ZhbHVlUHJvcGVydHkgPSAndmFsdWUnO1xyXG4gIEBJbnB1dCgpIHRkc0xhYmVsUmVuZGVyOiBUZW1wbGF0ZVJlZjx2b2lkPiB8IG51bGwgPSBudWxsO1xyXG4gIEBJbnB1dCgpIHRkc0xhYmVsUHJvcGVydHkgPSAnbGFiZWwnO1xyXG4gIEBJbnB1dCgpIHRkc05vdEZvdW5kQ29udGVudD86IHN0cmluZyB8IFRlbXBsYXRlUmVmPHZvaWQ+O1xyXG4gIEBJbnB1dCgpIEBXaXRoQ29uZmlnKCkgdGRzU2l6ZTogVERTQ2FzY2FkZXJTaXplID0gJ21kJztcclxuICBASW5wdXQoKSBAV2l0aENvbmZpZygpIHRkc0JhY2tkcm9wID0gZmFsc2U7XHJcbiAgQElucHV0KCkgdGRzU2hvd1NlYXJjaDogYm9vbGVhbiB8IFREU1Nob3dTZWFyY2hPcHRpb25zID0gZmFsc2U7XHJcbiAgQElucHV0KCkgdGRzUGxhY2VIb2xkZXI6IHN0cmluZyA9ICcnO1xyXG4gIEBJbnB1dCgpIHRkc01lbnVDbGFzc05hbWU/OiBzdHJpbmc7XHJcbiAgQElucHV0KCkgdGRzTWVudVN0eWxlOiBOZ1N0eWxlSW50ZXJmYWNlIHwgbnVsbCA9IG51bGw7XHJcbiAgQElucHV0KCkgdGRzTW91c2VFbnRlckRlbGF5OiBudW1iZXIgPSAxNTA7IC8vIG1zXHJcbiAgQElucHV0KCkgdGRzTW91c2VMZWF2ZURlbGF5OiBudW1iZXIgPSAxNTA7IC8vIG1zXHJcbiAgQElucHV0KCkgdGRzVHJpZ2dlckFjdGlvbjogVERTQ2FzY2FkZXJUcmlnZ2VyVHlwZSB8IFREU0Nhc2NhZGVyVHJpZ2dlclR5cGVbXSA9IFsnY2xpY2snXSBhcyBURFNDYXNjYWRlclRyaWdnZXJUeXBlW107XHJcbiAgQElucHV0KCkgdGRzQ2hhbmdlT24/OiAob3B0aW9uOiBURFNDYXNjYWRlck9wdGlvbiwgbGV2ZWw6IG51bWJlcikgPT4gYm9vbGVhbjtcclxuICBASW5wdXQoKSB0ZHNMb2FkRGF0YT86IChub2RlOiBURFNDYXNjYWRlck9wdGlvbiwgaW5kZXg6IG51bWJlcikgPT4gUHJvbWlzZUxpa2U8VERTU2FmZUFueT47XHJcbiAgLy8gVE9ETzogUlRMXHJcbiAgQElucHV0KCkgdGRzU3VmZml4SWNvbjogc3RyaW5nIHwgVGVtcGxhdGVSZWY8dm9pZD4gPSAndGRzaS1hcnJvdy1kb3duLWxpbmUnO1xyXG4gIEBJbnB1dCgpIHRkc0V4cGFuZEljb246IHN0cmluZyB8IFRlbXBsYXRlUmVmPHZvaWQ+ID0gJyc7XHJcblxyXG4gIEBJbnB1dCgpXHJcbiAgZ2V0IHRkc09wdGlvbnMoKTogVERTQ2FzY2FkZXJPcHRpb25bXSB8IG51bGwge1xyXG4gICAgcmV0dXJuIHRoaXMuY2FzY2FkZXJTZXJ2aWNlLnRkc09wdGlvbnM7XHJcbiAgfVxyXG5cclxuICBzZXQgdGRzT3B0aW9ucyhvcHRpb25zOiBURFNDYXNjYWRlck9wdGlvbltdIHwgbnVsbCkge1xyXG4gICAgdGhpcy5jYXNjYWRlclNlcnZpY2Uud2l0aE9wdGlvbnMob3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICBAT3V0cHV0KCkgcmVhZG9ubHkgdGRzVmlzaWJsZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8Ym9vbGVhbj4oKTtcclxuICBAT3V0cHV0KCkgcmVhZG9ubHkgdGRzU2VsZWN0aW9uQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxURFNDYXNjYWRlck9wdGlvbltdPigpO1xyXG4gIEBPdXRwdXQoKSByZWFkb25seSB0ZHNTZWxlY3QgPSBuZXcgRXZlbnRFbWl0dGVyPHsgb3B0aW9uOiBURFNDYXNjYWRlck9wdGlvbjsgaW5kZXg6IG51bWJlciB9IHwgbnVsbD4oKTtcclxuICBAT3V0cHV0KCkgcmVhZG9ubHkgdGRzQ2xlYXIgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XHJcblxyXG4gIC8qKlxyXG4gICAqIElmIHRoZSBkcm9wZG93biBzaG91bGQgc2hvdyB0aGUgZW1wdHkgY29udGVudC5cclxuICAgKiBgdHJ1ZWAgaWYgdGhlcmUncyBubyBvcHRpb25zLlxyXG4gICAqL1xyXG4gIHNob3VsZFNob3dFbXB0eTogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICBlbDogSFRNTEVsZW1lbnQ7XHJcbiAgbWVudVZpc2libGUgPSBmYWxzZTtcclxuICBpc0xvYWRpbmcgPSBmYWxzZTtcclxuICBsYWJlbFJlbmRlclRleHQ/OiBzdHJpbmc7XHJcbiAgbGFiZWxSZW5kZXJDb250ZXh0ID0ge307XHJcbiAgb25DaGFuZ2UgPSBGdW5jdGlvbi5wcm90b3R5cGU7XHJcbiAgb25Ub3VjaGVkID0gRnVuY3Rpb24ucHJvdG90eXBlO1xyXG4gIHBvc2l0aW9uczogQ29ubmVjdGlvblBvc2l0aW9uUGFpcltdID0gWy4uLkRFRkFVTFRfQ0FTQ0FERVJfUE9TSVRJT05TXTtcclxuXHJcbiAgLyoqXHJcbiAgICogRHJvcGRvd24ncyB3aXRoIGluIHBpeGVsLlxyXG4gICAqL1xyXG4gIGRyb3Bkb3duV2lkdGhTdHlsZT86IHN0cmluZztcclxuICBkcm9wZG93bkhlaWdodFN0eWxlOiAnYXV0bycgfCAnJyA9ICcnO1xyXG4gIGlzRm9jdXNlZCA9IGZhbHNlO1xyXG5cclxuICBsb2NhbGUhOiBURFNDYXNjYWRlckkxOG5JbnRlcmZhY2U7XHJcbiAgZGlyOiBEaXJlY3Rpb24gPSAnbHRyJztcclxuICB0ZHNDbGFzc0NvbnRhaW5lcjogc3RyaW5nID0gXCJcIjtcclxuICB0ZHNDbGFzc0Fycm93OiBzdHJpbmcgPSAnJztcclxuICBwcml2YXRlIGRlc3Ryb3kkID0gbmV3IFN1YmplY3Q8dm9pZD4oKTtcclxuICBwcml2YXRlIGlucHV0U3RyaW5nID0gJyc7XHJcbiAgcHJpdmF0ZSBpc09wZW5pbmcgPSBmYWxzZTtcclxuICBwcml2YXRlIGRlbGF5TWVudVRpbWVyOiBURFNTYWZlQW55IHwgbnVsbCA9IG51bGw7XHJcbiAgcHJpdmF0ZSBkZWxheVNlbGVjdFRpbWVyOiBURFNTYWZlQW55IHwgbnVsbCA9IG51bGw7XHJcblxyXG4gIGdldCBpblNlYXJjaGluZ01vZGUoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5jYXNjYWRlclNlcnZpY2UuaW5TZWFyY2hpbmdNb2RlO1xyXG4gIH1cclxuXHJcbiAgc2V0IGlucHV0VmFsdWUoaW5wdXRWYWx1ZTogc3RyaW5nKSB7XHJcbiAgICB0aGlzLmlucHV0U3RyaW5nID0gaW5wdXRWYWx1ZTtcclxuICAgIHRoaXMudG9nZ2xlU2VhcmNoaW5nTW9kZSghIWlucHV0VmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGlucHV0VmFsdWUoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLmlucHV0U3RyaW5nO1xyXG4gIH1cclxuXHJcbiAgZ2V0IG1lbnVDbHMoKTogTmdDbGFzc1R5cGUge1xyXG4gICAgcmV0dXJuIHsgW2Ake3RoaXMudGRzTWVudUNsYXNzTmFtZX1gXTogISF0aGlzLnRkc01lbnVDbGFzc05hbWUgfTtcclxuICB9XHJcblxyXG4gIGdldCBtZW51Q29sdW1uQ2xzKCk6IE5nQ2xhc3NUeXBlIHtcclxuICAgIHJldHVybiB7IFtgJHt0aGlzLnRkc0NvbHVtbkNsYXNzTmFtZX1gXTogISF0aGlzLnRkc0NvbHVtbkNsYXNzTmFtZSB9O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXQgaGFzSW5wdXQoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gISF0aGlzLmlucHV0VmFsdWU7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldCBoYXNWYWx1ZSgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLmNhc2NhZGVyU2VydmljZS52YWx1ZXMgJiYgdGhpcy5jYXNjYWRlclNlcnZpY2UudmFsdWVzLmxlbmd0aCA+IDA7XHJcbiAgfVxyXG5cclxuICBnZXQgc2hvd0xhYmVsUmVuZGVyKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuaGFzVmFsdWU7XHJcbiAgfVxyXG5cclxuICBnZXQgc2hvd1BsYWNlaG9sZGVyKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuICEodGhpcy5oYXNJbnB1dCB8fCB0aGlzLmhhc1ZhbHVlKTtcclxuICB9XHJcblxyXG4gIGdldCBjbGVhckljb25WaXNpYmxlKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMudGRzQWxsb3dDbGVhciAmJiAhdGhpcy50ZHNEaXNhYmxlZCAmJiAodGhpcy5oYXNWYWx1ZSB8fCB0aGlzLmhhc0lucHV0KTtcclxuICB9XHJcblxyXG4gIGdldCBpc0xhYmVsUmVuZGVyVGVtcGxhdGUoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gISF0aGlzLnRkc0xhYmVsUmVuZGVyO1xyXG4gIH1cclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwdWJsaWMgY2FzY2FkZXJTZXJ2aWNlOiBURFNDYXNjYWRlclNlcnZpY2UsXHJcbiAgICBwdWJsaWMgdGRzQ29uZmlnU2VydmljZTogVERTQ29uZmlnU2VydmljZSxcclxuICAgIHByaXZhdGUgbmdab25lOiBOZ1pvbmUsXHJcbiAgICBwcml2YXRlIGNkcjogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICBwcml2YXRlIGkxOG5TZXJ2aWNlOiBURFNJMThuU2VydmljZSxcclxuICAgIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYsXHJcbiAgICByZW5kZXJlcjogUmVuZGVyZXIyLFxyXG4gICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSBkaXJlY3Rpb25hbGl0eTogRGlyZWN0aW9uYWxpdHksXHJcbiAgICBASG9zdCgpIEBPcHRpb25hbCgpIHB1YmxpYyBub0FuaW1hdGlvbj86IFREU05vQW5pbWF0aW9uRGlyZWN0aXZlXHJcbiAgKSB7XHJcbiAgICB0aGlzLmVsID0gZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50O1xyXG4gICAgdGhpcy5jYXNjYWRlclNlcnZpY2Uud2l0aENvbXBvbmVudCh0aGlzKTtcclxuICAgIHJlbmRlcmVyLmFkZENsYXNzKGVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgJ3Rkcy1zZWxlY3QnKTtcclxuICAgIHJlbmRlcmVyLmFkZENsYXNzKGVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgJ3Rkcy1jYXNjYWRlcicpO1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgICBjb25zdCBzcnYgPSB0aGlzLmNhc2NhZGVyU2VydmljZTtcclxuXHJcbiAgICBzcnYuJHJlZHJhdy5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSkuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgdGhpcy51cGRhdGVDbGFzc0NzcygpO1xyXG4gICAgICAvLyBUaGVzZSBvcGVyYXRpb25zIHdvdWxkIG5vdCBtdXRhdGUgZGF0YS5cclxuICAgICAgdGhpcy5jaGVja0NoaWxkcmVuKCk7XHJcbiAgICAgIHRoaXMuc2V0RGlzcGxheUxhYmVsKCk7XHJcbiAgICAgIHRoaXMucmVwb3NpdGlvbigpO1xyXG4gICAgICB0aGlzLnNldERyb3Bkb3duU3R5bGVzKCk7XHJcblxyXG4gICAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHNydi4kbG9hZGluZy5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSkuc3Vic2NyaWJlKGxvYWRpbmcgPT4ge1xyXG4gICAgICB0aGlzLmlzTG9hZGluZyA9IGxvYWRpbmc7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzcnYuJG9wdGlvblNlbGVjdGVkLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKS5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgIGlmICghZGF0YSkge1xyXG4gICAgICAgIHRoaXMub25DaGFuZ2UoW10pO1xyXG4gICAgICAgIHRoaXMudGRzU2VsZWN0LmVtaXQobnVsbCk7XHJcbiAgICAgICAgdGhpcy50ZHNTZWxlY3Rpb25DaGFuZ2UuZW1pdChbXSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3QgeyBvcHRpb24sIGluZGV4IH0gPSBkYXRhO1xyXG4gICAgICAgIGNvbnN0IHNob3VsZENsb3NlID0gb3B0aW9uLmlzTGVhZiB8fCAodGhpcy50ZHNDaGFuZ2VPblNlbGVjdCAmJiB0aGlzLnRkc0V4cGFuZFRyaWdnZXIgPT09ICdob3ZlcicpO1xyXG4gICAgICAgIGlmIChzaG91bGRDbG9zZSkge1xyXG4gICAgICAgICAgdGhpcy5kZWxheVNldE1lbnVWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vbkNoYW5nZSh0aGlzLmNhc2NhZGVyU2VydmljZS52YWx1ZXMpO1xyXG4gICAgICAgIHRoaXMudGRzU2VsZWN0aW9uQ2hhbmdlLmVtaXQodGhpcy5jYXNjYWRlclNlcnZpY2Uuc2VsZWN0ZWRPcHRpb25zKTtcclxuICAgICAgICB0aGlzLnRkc1NlbGVjdC5lbWl0KHsgb3B0aW9uLCBpbmRleCB9KTtcclxuICAgICAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgc3J2LiRxdWl0U2VhcmNoaW5nLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKS5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICB0aGlzLmlucHV0U3RyaW5nID0gJyc7XHJcbiAgICAgIHRoaXMuZHJvcGRvd25XaWR0aFN0eWxlID0gJyc7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmkxOG5TZXJ2aWNlLmxvY2FsZUNoYW5nZS5waXBlKHN0YXJ0V2l0aCgpLCB0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgIHRoaXMuc2V0TG9jYWxlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnRkc0NvbmZpZ1NlcnZpY2VcclxuICAgICAgLmdldENvbmZpZ0NoYW5nZUV2ZW50Rm9yQ29tcG9uZW50KFREU19DT05GSUdfTU9EVUxFX05BTUUpXHJcbiAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcclxuICAgICAgLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIHRoaXMuZGlyID0gdGhpcy5kaXJlY3Rpb25hbGl0eS52YWx1ZTtcclxuICAgIHRoaXMuZGlyZWN0aW9uYWxpdHkuY2hhbmdlLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKS5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICB0aGlzLmRpciA9IHRoaXMuZGlyZWN0aW9uYWxpdHkudmFsdWU7XHJcbiAgICAgIHNydi4kcmVkcmF3Lm5leHQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuc2V0dXBLZXlkb3duTGlzdGVuZXIoKTtcclxuICB9XHJcblxyXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xyXG4gICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XHJcbiAgICB0aGlzLmRlc3Ryb3kkLmNvbXBsZXRlKCk7XHJcbiAgICB0aGlzLmNsZWFyRGVsYXlNZW51VGltZXIoKTtcclxuICAgIHRoaXMuY2xlYXJEZWxheVNlbGVjdFRpbWVyKCk7XHJcbiAgfVxyXG5cclxuICByZWdpc3Rlck9uQ2hhbmdlKGZuOiAoKSA9PiB7fSk6IHZvaWQge1xyXG4gICAgdGhpcy5vbkNoYW5nZSA9IGZuO1xyXG4gIH1cclxuXHJcbiAgcmVnaXN0ZXJPblRvdWNoZWQoZm46ICgpID0+IHt9KTogdm9pZCB7XHJcbiAgICB0aGlzLm9uVG91Y2hlZCA9IGZuO1xyXG4gIH1cclxuXHJcbiAgd3JpdGVWYWx1ZSh2YWx1ZTogVERTU2FmZUFueSk6IHZvaWQge1xyXG4gICAgdGhpcy5jYXNjYWRlclNlcnZpY2UudmFsdWVzID0gdG9BcnJheSh2YWx1ZSk7XHJcbiAgICB0aGlzLmNhc2NhZGVyU2VydmljZS5zeW5jT3B0aW9ucyh0cnVlKTtcclxuICB9XHJcblxyXG4gIGRlbGF5U2V0TWVudVZpc2libGUodmlzaWJsZTogYm9vbGVhbiwgZGVsYXk6IG51bWJlciA9IDEwMCwgc2V0T3BlbmluZzogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XHJcbiAgICB0aGlzLmNsZWFyRGVsYXlNZW51VGltZXIoKTtcclxuICAgIGlmIChkZWxheSkge1xyXG4gICAgICBpZiAodmlzaWJsZSAmJiBzZXRPcGVuaW5nKSB7XHJcbiAgICAgICAgdGhpcy5pc09wZW5pbmcgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuZGVsYXlNZW51VGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICB0aGlzLnNldE1lbnVWaXNpYmxlKHZpc2libGUpO1xyXG4gICAgICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICB0aGlzLmNsZWFyRGVsYXlNZW51VGltZXIoKTtcclxuICAgICAgICBpZiAodmlzaWJsZSkge1xyXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNPcGVuaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICB9LCAxMDApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSwgZGVsYXkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zZXRNZW51VmlzaWJsZSh2aXNpYmxlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldE1lbnVWaXNpYmxlKHZpc2libGU6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLnRkc0Rpc2FibGVkIHx8IHRoaXMubWVudVZpc2libGUgPT09IHZpc2libGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHZpc2libGUpIHtcclxuICAgICAgdGhpcy5jYXNjYWRlclNlcnZpY2Uuc3luY09wdGlvbnMoKTtcclxuICAgICAgdGhpcy5zY3JvbGxUb0FjdGl2YXRlZE9wdGlvbnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXZpc2libGUpIHtcclxuICAgICAgdGhpcy5pbnB1dFZhbHVlID0gJyc7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5tZW51VmlzaWJsZSA9IHZpc2libGU7XHJcbiAgICB0aGlzLnRkc1Zpc2libGVDaGFuZ2UuZW1pdCh2aXNpYmxlKTtcclxuICAgIHRoaXMudXBkYXRlQ2xhc3NDc3MoKTtcclxuICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY2xlYXJEZWxheU1lbnVUaW1lcigpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLmRlbGF5TWVudVRpbWVyKSB7XHJcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmRlbGF5TWVudVRpbWVyKTtcclxuICAgICAgdGhpcy5kZWxheU1lbnVUaW1lciA9IG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjbGVhclNlbGVjdGlvbihldmVudD86IEV2ZW50KTogdm9pZCB7XHJcbiAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5sYWJlbFJlbmRlclRleHQgPSAnJztcclxuICAgIHRoaXMubGFiZWxSZW5kZXJDb250ZXh0ID0ge307XHJcbiAgICB0aGlzLmlucHV0VmFsdWUgPSAnJztcclxuICAgIHRoaXMuc2V0TWVudVZpc2libGUoZmFsc2UpO1xyXG4gICAgdGhpcy5jYXNjYWRlclNlcnZpY2UuY2xlYXIoKTtcclxuICAgIHRoaXMudGRzQ2xlYXIuZW1pdCgpO1xyXG4gIH1cclxuXHJcbiAgZ2V0U3VibWl0VmFsdWUoKTogVERTU2FmZUFueVtdIHtcclxuICAgIHJldHVybiB0aGlzLmNhc2NhZGVyU2VydmljZS5zZWxlY3RlZE9wdGlvbnMubWFwKG8gPT4gdGhpcy5jYXNjYWRlclNlcnZpY2UuZ2V0T3B0aW9uVmFsdWUobykpO1xyXG4gIH1cclxuXHJcbiAgZm9jdXMoKTogdm9pZCB7XHJcbiAgICBpZiAoIXRoaXMuaXNGb2N1c2VkKSB7XHJcbiAgICAgICh0aGlzLmlucHV0ID8gdGhpcy5pbnB1dC5uYXRpdmVFbGVtZW50IDogdGhpcy5lbCkuZm9jdXMoKTtcclxuICAgICAgdGhpcy5pc0ZvY3VzZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYmx1cigpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLmlzRm9jdXNlZCkge1xyXG4gICAgICAodGhpcy5pbnB1dCA/IHRoaXMuaW5wdXQubmF0aXZlRWxlbWVudCA6IHRoaXMuZWwpLmJsdXIoKTtcclxuICAgICAgdGhpcy5pc0ZvY3VzZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGhhbmRsZUlucHV0Qmx1cigpOiB2b2lkIHtcclxuICAgIHRoaXMubWVudVZpc2libGUgPyB0aGlzLmZvY3VzKCkgOiB0aGlzLmJsdXIoKTtcclxuICB9XHJcblxyXG4gIGhhbmRsZUlucHV0Rm9jdXMoKTogdm9pZCB7XHJcbiAgICB0aGlzLmZvY3VzKCk7XHJcbiAgfVxyXG5cclxuICBASG9zdExpc3RlbmVyKCdjbGljaycpXHJcbiAgb25UcmlnZ2VyQ2xpY2soKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy50ZHNEaXNhYmxlZCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy50ZHNTaG93U2VhcmNoKSB7XHJcbiAgICAgIHRoaXMuZm9jdXMoKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmlzQWN0aW9uVHJpZ2dlcignY2xpY2snKSkge1xyXG4gICAgICB0aGlzLmRlbGF5U2V0TWVudVZpc2libGUoIXRoaXMubWVudVZpc2libGUsIDEwMCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLm9uVG91Y2hlZCgpO1xyXG4gIH1cclxuXHJcbiAgQEhvc3RMaXN0ZW5lcignbW91c2VlbnRlcicpXHJcbiAgb25UcmlnZ2VyTW91c2VFbnRlcigpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLnRkc0Rpc2FibGVkIHx8ICF0aGlzLmlzQWN0aW9uVHJpZ2dlcignaG92ZXInKSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5kZWxheVNldE1lbnVWaXNpYmxlKHRydWUsIHRoaXMudGRzTW91c2VFbnRlckRlbGF5LCB0cnVlKTtcclxuICB9XHJcblxyXG4gIEBIb3N0TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBbJyRldmVudCddKVxyXG4gIG9uVHJpZ2dlck1vdXNlTGVhdmUoZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLnRkc0Rpc2FibGVkIHx8ICF0aGlzLm1lbnVWaXNpYmxlIHx8IHRoaXMuaXNPcGVuaW5nIHx8ICF0aGlzLmlzQWN0aW9uVHJpZ2dlcignaG92ZXInKSkge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBtb3VzZVRhcmdldCA9IGV2ZW50LnJlbGF0ZWRUYXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICBjb25zdCBob3N0RWwgPSB0aGlzLmVsO1xyXG4gICAgY29uc3QgbWVudUVsID0gdGhpcy5tZW51ICYmICh0aGlzLm1lbnUubmF0aXZlRWxlbWVudCBhcyBIVE1MRWxlbWVudCk7XHJcbiAgICBpZiAoaG9zdEVsLmNvbnRhaW5zKG1vdXNlVGFyZ2V0KSB8fCAobWVudUVsICYmIG1lbnVFbC5jb250YWlucyhtb3VzZVRhcmdldCkpKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuZGVsYXlTZXRNZW51VmlzaWJsZShmYWxzZSwgdGhpcy50ZHNNb3VzZUxlYXZlRGVsYXkpO1xyXG4gIH1cclxuXHJcbiAgb25PcHRpb25Nb3VzZUVudGVyKG9wdGlvbjogVERTQ2FzY2FkZXJPcHRpb24sIGNvbHVtbkluZGV4OiBudW1iZXIsIGV2ZW50OiBFdmVudCk6IHZvaWQge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGlmICh0aGlzLnRkc0V4cGFuZFRyaWdnZXIgPT09ICdob3ZlcicpIHtcclxuICAgICAgaWYgKCFvcHRpb24uaXNMZWFmKSB7XHJcbiAgICAgICAgdGhpcy5kZWxheVNldE9wdGlvbkFjdGl2YXRlZChvcHRpb24sIGNvbHVtbkluZGV4LCBmYWxzZSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5jYXNjYWRlclNlcnZpY2Uuc2V0T3B0aW9uRGVhY3RpdmF0ZWRTaW5jZUNvbHVtbihjb2x1bW5JbmRleCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uT3B0aW9uTW91c2VMZWF2ZShvcHRpb246IFREU0Nhc2NhZGVyT3B0aW9uLCBfY29sdW1uSW5kZXg6IG51bWJlciwgZXZlbnQ6IEV2ZW50KTogdm9pZCB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaWYgKHRoaXMudGRzRXhwYW5kVHJpZ2dlciA9PT0gJ2hvdmVyJyAmJiAhb3B0aW9uLmlzTGVhZikge1xyXG4gICAgICB0aGlzLmNsZWFyRGVsYXlTZWxlY3RUaW1lcigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25PcHRpb25DbGljayhvcHRpb246IFREU0Nhc2NhZGVyT3B0aW9uLCBjb2x1bW5JbmRleDogbnVtYmVyLCBldmVudDogRXZlbnQpOiB2b2lkIHtcclxuICAgIGlmIChldmVudCkge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfVxyXG4gICAgaWYgKG9wdGlvbiAmJiBvcHRpb24uZGlzYWJsZWQpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5lbC5mb2N1cygpO1xyXG4gICAgdGhpcy5pblNlYXJjaGluZ01vZGVcclxuICAgICAgPyB0aGlzLmNhc2NhZGVyU2VydmljZS5zZXRTZWFyY2hPcHRpb25TZWxlY3RlZChvcHRpb24gYXMgVERTQ2FzY2FkZXJTZWFyY2hPcHRpb24pXHJcbiAgICAgIDogdGhpcy5jYXNjYWRlclNlcnZpY2Uuc2V0T3B0aW9uQWN0aXZhdGVkKG9wdGlvbiwgY29sdW1uSW5kZXgsIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgb25DbGlja091dHNpZGUoZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcclxuICAgIGlmICghdGhpcy5lbC5jb250YWlucyhldmVudC50YXJnZXQgYXMgTm9kZSkpIHtcclxuICAgICAgdGhpcy5jbG9zZU1lbnUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgaXNBY3Rpb25UcmlnZ2VyKGFjdGlvbjogJ2NsaWNrJyB8ICdob3ZlcicpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0eXBlb2YgdGhpcy50ZHNUcmlnZ2VyQWN0aW9uID09PSAnc3RyaW5nJ1xyXG4gICAgICA/IHRoaXMudGRzVHJpZ2dlckFjdGlvbiA9PT0gYWN0aW9uXHJcbiAgICAgIDogdGhpcy50ZHNUcmlnZ2VyQWN0aW9uLmluZGV4T2YoYWN0aW9uKSAhPT0gLTE7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG9uRW50ZXIoKTogdm9pZCB7XHJcbiAgICBjb25zdCBjb2x1bW5JbmRleCA9IE1hdGgubWF4KHRoaXMuY2FzY2FkZXJTZXJ2aWNlLmFjdGl2YXRlZE9wdGlvbnMubGVuZ3RoIC0gMSwgMCk7XHJcbiAgICBjb25zdCBvcHRpb24gPSB0aGlzLmNhc2NhZGVyU2VydmljZS5hY3RpdmF0ZWRPcHRpb25zW2NvbHVtbkluZGV4XTtcclxuICAgIGlmIChvcHRpb24gJiYgIW9wdGlvbi5kaXNhYmxlZCkge1xyXG4gICAgICB0aGlzLmluU2VhcmNoaW5nTW9kZVxyXG4gICAgICAgID8gdGhpcy5jYXNjYWRlclNlcnZpY2Uuc2V0U2VhcmNoT3B0aW9uU2VsZWN0ZWQob3B0aW9uIGFzIFREU0Nhc2NhZGVyU2VhcmNoT3B0aW9uKVxyXG4gICAgICAgIDogdGhpcy5jYXNjYWRlclNlcnZpY2Uuc2V0T3B0aW9uQWN0aXZhdGVkKG9wdGlvbiwgY29sdW1uSW5kZXgsIHRydWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBtb3ZlVXBPckRvd24oaXNVcDogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgY29uc3QgY29sdW1uSW5kZXggPSBNYXRoLm1heCh0aGlzLmNhc2NhZGVyU2VydmljZS5hY3RpdmF0ZWRPcHRpb25zLmxlbmd0aCAtIDEsIDApO1xyXG4gICAgY29uc3QgYWN0aXZlT3B0aW9uID0gdGhpcy5jYXNjYWRlclNlcnZpY2UuYWN0aXZhdGVkT3B0aW9uc1tjb2x1bW5JbmRleF07XHJcbiAgICBjb25zdCBvcHRpb25zID0gdGhpcy5jYXNjYWRlclNlcnZpY2UuY29sdW1uc1tjb2x1bW5JbmRleF0gfHwgW107XHJcbiAgICBjb25zdCBsZW5ndGggPSBvcHRpb25zLmxlbmd0aDtcclxuICAgIGxldCBuZXh0SW5kZXggPSAtMTtcclxuICAgIGlmICghYWN0aXZlT3B0aW9uKSB7XHJcbiAgICAgIC8vIE5vdCBzZWxlY3RlZCBvcHRpb25zIGluIHRoaXMgY29sdW1uXHJcbiAgICAgIG5leHRJbmRleCA9IGlzVXAgPyBsZW5ndGggOiAtMTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG5leHRJbmRleCA9IG9wdGlvbnMuaW5kZXhPZihhY3RpdmVPcHRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgIG5leHRJbmRleCA9IGlzVXAgPyBuZXh0SW5kZXggLSAxIDogbmV4dEluZGV4ICsgMTtcclxuICAgICAgaWYgKG5leHRJbmRleCA8IDAgfHwgbmV4dEluZGV4ID49IGxlbmd0aCkge1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IG5leHRPcHRpb24gPSBvcHRpb25zW25leHRJbmRleF07XHJcbiAgICAgIGlmICghbmV4dE9wdGlvbiB8fCBuZXh0T3B0aW9uLmRpc2FibGVkKSB7XHJcbiAgICAgICAgY29udGludWU7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5jYXNjYWRlclNlcnZpY2Uuc2V0T3B0aW9uQWN0aXZhdGVkKG5leHRPcHRpb24sIGNvbHVtbkluZGV4KTtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG1vdmVMZWZ0KCk6IHZvaWQge1xyXG4gICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMuY2FzY2FkZXJTZXJ2aWNlLmFjdGl2YXRlZE9wdGlvbnM7XHJcbiAgICBpZiAob3B0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgb3B0aW9ucy5wb3AoKTsgLy8gUmVtb3ZlIHRoZSBsYXN0IG9uZVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBtb3ZlUmlnaHQoKTogdm9pZCB7XHJcbiAgICBjb25zdCBsZW5ndGggPSB0aGlzLmNhc2NhZGVyU2VydmljZS5hY3RpdmF0ZWRPcHRpb25zLmxlbmd0aDtcclxuICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLmNhc2NhZGVyU2VydmljZS5jb2x1bW5zW2xlbmd0aF07XHJcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmxlbmd0aCkge1xyXG4gICAgICBjb25zdCBuZXh0T3B0ID0gb3B0aW9ucy5maW5kKG8gPT4gIW8uZGlzYWJsZWQpO1xyXG4gICAgICBpZiAobmV4dE9wdCkge1xyXG4gICAgICAgIHRoaXMuY2FzY2FkZXJTZXJ2aWNlLnNldE9wdGlvbkFjdGl2YXRlZChuZXh0T3B0LCBsZW5ndGgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNsZWFyRGVsYXlTZWxlY3RUaW1lcigpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLmRlbGF5U2VsZWN0VGltZXIpIHtcclxuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZGVsYXlTZWxlY3RUaW1lcik7XHJcbiAgICAgIHRoaXMuZGVsYXlTZWxlY3RUaW1lciA9IG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGRlbGF5U2V0T3B0aW9uQWN0aXZhdGVkKG9wdGlvbjogVERTQ2FzY2FkZXJPcHRpb24sIGNvbHVtbkluZGV4OiBudW1iZXIsIHBlcmZvcm1TZWxlY3Q6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgIHRoaXMuY2xlYXJEZWxheVNlbGVjdFRpbWVyKCk7XHJcbiAgICB0aGlzLmRlbGF5U2VsZWN0VGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdGhpcy5jYXNjYWRlclNlcnZpY2Uuc2V0T3B0aW9uQWN0aXZhdGVkKG9wdGlvbiwgY29sdW1uSW5kZXgsIHBlcmZvcm1TZWxlY3QpO1xyXG4gICAgICB0aGlzLmRlbGF5U2VsZWN0VGltZXIgPSBudWxsO1xyXG4gICAgfSwgMTUwKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgdG9nZ2xlU2VhcmNoaW5nTW9kZSh0b1NlYXJjaGluZzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuaW5TZWFyY2hpbmdNb2RlICE9PSB0b1NlYXJjaGluZykge1xyXG4gICAgICB0aGlzLmNhc2NhZGVyU2VydmljZS50b2dnbGVTZWFyY2hpbmdNb2RlKHRvU2VhcmNoaW5nKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5pblNlYXJjaGluZ01vZGUpIHtcclxuICAgICAgdGhpcy5jYXNjYWRlclNlcnZpY2UucHJlcGFyZVNlYXJjaE9wdGlvbnModGhpcy5pbnB1dFZhbHVlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlzT3B0aW9uQWN0aXZhdGVkKG9wdGlvbjogVERTQ2FzY2FkZXJPcHRpb24sIGluZGV4OiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgIGNvbnN0IGFjdGl2ZU9wdCA9IHRoaXMuY2FzY2FkZXJTZXJ2aWNlLmFjdGl2YXRlZE9wdGlvbnNbaW5kZXhdO1xyXG4gICAgcmV0dXJuIGFjdGl2ZU9wdCA9PT0gb3B0aW9uO1xyXG4gIH1cclxuXHJcbiAgc2V0RGlzYWJsZWRTdGF0ZShpc0Rpc2FibGVkOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICBpZiAoaXNEaXNhYmxlZCkge1xyXG4gICAgICB0aGlzLmNsb3NlTWVudSgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy50ZHNEaXNhYmxlZCA9IGlzRGlzYWJsZWQ7XHJcbiAgfVxyXG5cclxuICBjbG9zZU1lbnUoKTogdm9pZCB7XHJcbiAgICB0aGlzLmJsdXIoKTtcclxuICAgIHRoaXMuY2xlYXJEZWxheU1lbnVUaW1lcigpO1xyXG4gICAgdGhpcy5zZXRNZW51VmlzaWJsZShmYWxzZSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXBvc2l0aW9uIHRoZSBjYXNjYWRlciBwYW5lbC4gV2hlbiBhIG1lbnUgb3BlbnMsIHRoZSBjYXNjYWRlciBleHBhbmRzXHJcbiAgICogYW5kIG1heSBleGNlZWQgdGhlIGJvdW5kYXJ5IG9mIGJyb3dzZXIncyB3aW5kb3cuXHJcbiAgICovXHJcbiAgcHJpdmF0ZSByZXBvc2l0aW9uKCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMub3ZlcmxheSAmJiB0aGlzLm92ZXJsYXkub3ZlcmxheVJlZiAmJiB0aGlzLm1lbnVWaXNpYmxlKSB7XHJcbiAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIHRoaXMub3ZlcmxheS5vdmVybGF5UmVmLnVwZGF0ZVBvc2l0aW9uKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogV2hlbiBhIGNhc2NhZGVyIG9wdGlvbnMgaXMgY2hhbmdlZCwgYSBjaGlsZCBuZWVkcyB0byBrbm93IHRoYXQgaXQgc2hvdWxkIHJlLXJlbmRlci5cclxuICAgKi9cclxuICBwcml2YXRlIGNoZWNrQ2hpbGRyZW4oKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5jYXNjYWRlckl0ZW1zKSB7XHJcbiAgICAgIHRoaXMuY2FzY2FkZXJJdGVtcy5mb3JFYWNoKGl0ZW0gPT4gaXRlbS5tYXJrRm9yQ2hlY2soKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNldERpc3BsYXlMYWJlbCgpOiB2b2lkIHtcclxuICAgIGNvbnN0IHNlbGVjdGVkT3B0aW9ucyA9IHRoaXMuY2FzY2FkZXJTZXJ2aWNlLnNlbGVjdGVkT3B0aW9ucztcclxuICAgIGNvbnN0IGxhYmVsczogc3RyaW5nW10gPSBzZWxlY3RlZE9wdGlvbnMubWFwKG8gPT4gdGhpcy5jYXNjYWRlclNlcnZpY2UuZ2V0T3B0aW9uTGFiZWwobykpO1xyXG5cclxuICAgIGlmICh0aGlzLmlzTGFiZWxSZW5kZXJUZW1wbGF0ZSkge1xyXG4gICAgICB0aGlzLmxhYmVsUmVuZGVyQ29udGV4dCA9IHsgbGFiZWxzLCBzZWxlY3RlZE9wdGlvbnMgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMubGFiZWxSZW5kZXJUZXh0ID0gZGVmYXVsdERpc3BsYXlSZW5kZXIuY2FsbCh0aGlzLCBsYWJlbHMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZXREcm9wZG93blN0eWxlcygpOiB2b2lkIHtcclxuICAgIGNvbnN0IGZpcnN0Q29sdW1uID0gdGhpcy5jYXNjYWRlclNlcnZpY2UuY29sdW1uc1swXTtcclxuXHJcbiAgICB0aGlzLnNob3VsZFNob3dFbXB0eSA9XHJcbiAgICAgICh0aGlzLmluU2VhcmNoaW5nTW9kZSAmJiAoIWZpcnN0Q29sdW1uIHx8ICFmaXJzdENvbHVtbi5sZW5ndGgpKSB8fCAvLyBTaG91bGQgc2hvdyBlbXB0eSB3aGVuIHRoZXJlJ3Mgbm8gc2VhcmNoaW5nIHJlc3VsdFxyXG4gICAgICAoISh0aGlzLnRkc09wdGlvbnMgJiYgdGhpcy50ZHNPcHRpb25zLmxlbmd0aCkgJiYgIXRoaXMudGRzTG9hZERhdGEpOyAvLyBTaG91bGQgc2hvdyB3aGVuIHRoZXJlJ3Mgbm8gb3B0aW9ucyBhbmQgZGV2ZWxvcGVyIGRvZXMgbm90IHVzZSB0ZHNMb2FkRGF0YVxyXG4gICAgdGhpcy5kcm9wZG93bkhlaWdodFN0eWxlID0gdGhpcy5zaG91bGRTaG93RW1wdHkgPyAnYXV0bycgOiAnJztcclxuXHJcbiAgICBpZiAodGhpcy5pbnB1dCkge1xyXG4gICAgICB0aGlzLmRyb3Bkb3duV2lkdGhTdHlsZSA9XHJcbiAgICAgICAgdGhpcy5pblNlYXJjaGluZ01vZGUgfHwgdGhpcy5zaG91bGRTaG93RW1wdHkgPyBgJHt0aGlzLnNlbGVjdENvbnRhaW5lci5uYXRpdmVFbGVtZW50Lm9mZnNldFdpZHRofXB4YCA6ICcnO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZXRMb2NhbGUoKTogdm9pZCB7XHJcbiAgICB0aGlzLmxvY2FsZSA9IHRoaXMuaTE4blNlcnZpY2UuZ2V0TG9jYWxlRGF0YSgnZ2xvYmFsJyk7XHJcbiAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2Nyb2xsVG9BY3RpdmF0ZWRPcHRpb25zKCk6IHZvaWQge1xyXG4gICAgLy8gVGhlIGBzY3JvbGxJbnRvVmlld2AgaXMgYSBuYXRpdmUgRE9NIEFQSSwgd2hpY2ggZG9lc24ndCByZXF1aXJlIEFuZ3VsYXIgdG8gcnVuXHJcbiAgICAvLyBhIGNoYW5nZSBkZXRlY3Rpb24gd2hlbiBhIHByb21pc2UgbWljcm90YXNrIGlzIHJlc29sdmVkLlxyXG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHtcclxuICAgICAgICAvLyBzY3JvbGwgb25seSB1bnRpbCBvcHRpb24gbWVudSB2aWV3IGlzIHJlYWR5XHJcbiAgICAgICAgdGhpcy5jYXNjYWRlckl0ZW1zXHJcbiAgICAgICAgICAudG9BcnJheSgpXHJcbiAgICAgICAgICAuZmlsdGVyKGUgPT4gZS5hY3RpdmF0ZWQpXHJcbiAgICAgICAgICAuZm9yRWFjaChlID0+IHtcclxuICAgICAgICAgICAgZS5uYXRpdmVFbGVtZW50LnNjcm9sbEludG9WaWV3KHsgYmxvY2s6ICdzdGFydCcsIGlubGluZTogJ25lYXJlc3QnIH0pO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNldHVwS2V5ZG93bkxpc3RlbmVyKCk6IHZvaWQge1xyXG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICBmcm9tRXZlbnQ8S2V5Ym9hcmRFdmVudD4odGhpcy5lbCwgJ2tleWRvd24nKVxyXG4gICAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcclxuICAgICAgICAuc3Vic2NyaWJlKGV2ZW50ID0+IHtcclxuICAgICAgICAgIGNvbnN0IGtleUNvZGUgPSBldmVudC5rZXlDb2RlO1xyXG5cclxuICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAga2V5Q29kZSAhPT0gRE9XTl9BUlJPVyAmJlxyXG4gICAgICAgICAgICBrZXlDb2RlICE9PSBVUF9BUlJPVyAmJlxyXG4gICAgICAgICAgICBrZXlDb2RlICE9PSBMRUZUX0FSUk9XICYmXHJcbiAgICAgICAgICAgIGtleUNvZGUgIT09IFJJR0hUX0FSUk9XICYmXHJcbiAgICAgICAgICAgIGtleUNvZGUgIT09IEVOVEVSICYmXHJcbiAgICAgICAgICAgIGtleUNvZGUgIT09IEJBQ0tTUEFDRSAmJlxyXG4gICAgICAgICAgICBrZXlDb2RlICE9PSBFU0NBUEVcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gUHJlc3MgYW55IGtleXMgYWJvdmUgdG8gcmVvcGVuIG1lbnUuXHJcbiAgICAgICAgICBpZiAoIXRoaXMubWVudVZpc2libGUgJiYga2V5Q29kZSAhPT0gQkFDS1NQQUNFICYmIGtleUNvZGUgIT09IEVTQ0FQRSkge1xyXG4gICAgICAgICAgICAvLyBUaGUgYHNldE1lbnVWaXNpYmxlYCBydW5zIGBkZXRlY3RDaGFuZ2VzKClgLCBzbyB3ZSBkb24ndCBuZWVkIHRvIHJ1biBgbWFya0ZvckNoZWNrKClgIGFkZGl0aW9uYWxseS5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubmdab25lLnJ1bigoKSA9PiB0aGlzLnNldE1lbnVWaXNpYmxlKHRydWUpKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBNYWtlIHRoZXNlIGtleXMgd29yayBhcyBkZWZhdWx0IGluIHNlYXJjaGluZyBtb2RlLlxyXG4gICAgICAgICAgaWYgKHRoaXMuaW5TZWFyY2hpbmdNb2RlICYmIChrZXlDb2RlID09PSBCQUNLU1BBQ0UgfHwga2V5Q29kZSA9PT0gTEVGVF9BUlJPVyB8fCBrZXlDb2RlID09PSBSSUdIVF9BUlJPVykpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmICghdGhpcy5tZW51VmlzaWJsZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBJbnRlcmFjdCB3aXRoIHRoZSBjb21wb25lbnQuXHJcbiAgICAgICAgICAgIGlmIChrZXlDb2RlID09PSBET1dOX0FSUk9XKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5tb3ZlVXBPckRvd24oZmFsc2UpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGtleUNvZGUgPT09IFVQX0FSUk9XKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5tb3ZlVXBPckRvd24odHJ1ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5Q29kZSA9PT0gTEVGVF9BUlJPVykge1xyXG4gICAgICAgICAgICAgIHRoaXMubW92ZUxlZnQoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChrZXlDb2RlID09PSBSSUdIVF9BUlJPVykge1xyXG4gICAgICAgICAgICAgIHRoaXMubW92ZVJpZ2h0KCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5Q29kZSA9PT0gRU5URVIpIHtcclxuICAgICAgICAgICAgICB0aGlzLm9uRW50ZXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBgQEhvc3RMaXN0ZW5lcmBzIHJ1biBgbWFya0ZvckNoZWNrKClgIGludGVybmFsbHkgYmVmb3JlIGNhbGxpbmcgdGhlIGFjdHVhbCBoYW5kbGVyIHNvXHJcbiAgICAgICAgICAgIC8vIHdlIGNhbGwgYG1hcmtGb3JDaGVjaygpYCB0byBiZSBiYWNrd2FyZHMtY29tcGF0aWJsZS5cclxuICAgICAgICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuICAvL2J1aWxkQ3NzXHJcbiAgdXBkYXRlQ2xhc3NDc3MoKSB7XHJcbiAgICB0aGlzLnRkc0NsYXNzQ29udGFpbmVyID0gdGhpcy5nZXRDc3NDb250YWluZXIoKTtcclxuICAgIHRoaXMudGRzQ2xhc3NBcnJvdyA9IHRoaXMuZ2V0Q3NzQXJyb3coKTtcclxuICB9XHJcbiAgcHJpdmF0ZSBnZXRDc3NCeVNpemUoKSB7XHJcbiAgICBsZXQgcmVzdWx0ID0gJyc7XHJcbiAgICBzd2l0Y2ggKHRoaXMudGRzU2l6ZSkge1xyXG4gICAgICBjYXNlICdzbSc6XHJcbiAgICAgICAgcmVzdWx0ID0gXCIgcHktMSAgcGwtMi41IFwiXHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ21kJzpcclxuICAgICAgICByZXN1bHQgPSBcIiBweS0xLjUgIHBsLTMgXCJcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnbGcnOlxyXG4gICAgICAgIHJlc3VsdCA9IFwiIHB5LTIgIHBsLTMuNSBcIlxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICd4bCc6XHJcbiAgICAgICAgcmVzdWx0ID0gXCIgcHktMi41IHBsLTQgXCJcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICByZXN1bHQgPSAnIHB5LTEuNSAgcGwtMyAnXHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuICBwcml2YXRlIGdldENzc0Fycm93KCkge1xyXG4gICAgbGV0IHJlc3VsdCA9ICd0ZXh0LW5ldXRyYWwtMS05MDAgZGFyazp0ZXh0LWQtbmV1dHJhbC0xLTkwMCB0ZXh0LWJhc2UgbGVhZGluZy00IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyICc7XHJcblxyXG4gICAgc3dpdGNoICh0aGlzLnRkc1NpemUpIHtcclxuICAgICAgY2FzZSAnc20nOlxyXG4gICAgICAgIHJlc3VsdCArPSBcIiBweC0xLjUgXCJcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnbWQnOlxyXG4gICAgICAgIHJlc3VsdCArPSBcIiBweC0yLjUgXCJcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnbGcnOlxyXG4gICAgICAgIHJlc3VsdCArPSBcIiBweC0zIFwiXHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ3hsJzpcclxuICAgICAgICByZXN1bHQgKz0gXCIgcHgtMy41IFwiXHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmVzdWx0ICs9ICcgcHgtMi41ICdcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuICBwcml2YXRlIGdldENzc0NvbnRhaW5lcigpIHtcclxuICAgIGxldCByZXN1bHQgPSAnZGFyazpiZy1kLW5ldXRyYWwtMy01MCBiZy13aGl0ZSBib3JkZXIgcm91bmRlZCBkYXJrOmdyb3VwLWhvdmVyOmJnLWQtbmV1dHJhbC0zLTUwIGdyb3VwLWhvdmVyOmJnLW5ldXRyYWwtMy01MCc7XHJcbiAgICBpZiAoIXRoaXMubWVudVZpc2libGUpIHtcclxuICAgICAgcmVzdWx0ICs9IFwiIGRhcms6Ym9yZGVyLWQtbmV1dHJhbC0yLTIwMCBib3JkZXItbmV1dHJhbC0yLTIwMFwiXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXN1bHQgKz0gJyBvdXRsaW5lLW5vbmUgcmluZy1vcGFjaXR5LTIwIHJpbmcgcmluZy1wcmltYXJ5LTEgYm9yZGVyLXByaW1hcnktMSc7XHJcbiAgICB9XHJcbiAgICByZXN1bHQgKz0gdGhpcy50ZHNEaXNhYmxlZCA/IFwiIGN1cnNvci1ub3QtYWxsb3dlZCBcIiA6IFwiIGN1cnNvci1wb2ludGVyIFwiO1xyXG4gICAgcmVzdWx0ICs9IHRoaXMuZ2V0Q3NzQnlTaXplKCk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxufVxyXG4iLCI8ZGl2IGNka092ZXJsYXlPcmlnaW4gI29yaWdpbj1cImNka092ZXJsYXlPcmlnaW5cIiAjdHJpZ2dlcj5cclxuICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJ0ZHNTaG93SW5wdXRcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwidy1mdWxsIGZsZXggaXRlbXMtY2VudGVyIFwiIFtjbGFzc109XCJ0ZHNDbGFzc0NvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICA8ZGl2ICNzZWxlY3RDb250YWluZXIgY2xhc3M9XCJ0ZHMtc2VsZWN0LXNlbGVjdG9yIGZsZXgtYXV0byByZWxhdGl2ZSBoLTVcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZHMtc2VsZWN0LXNlbGVjdGlvbi1zZWFyY2ggaC01XCIgW25nQ2xhc3NdPVwieydvcGFjaXR5LTAgdy0wIGgtMCc6ICF0ZHNTaG93U2VhcmNofVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCAjaW5wdXQgdHlwZT1cInNlYXJjaFwiIGNsYXNzPVwidGRzLXNlbGVjdC1zZWxlY3Rpb24tc2VhcmNoLWlucHV0IHRleHQtYm9keS0yXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgW25nQ2xhc3NdPVwieydvcGFjaXR5LTAgdy0wIGgtMCc6ICF0ZHNTaG93U2VhcmNoLCd3LWZ1bGwgaC1mdWxsJzohdGRzU2hvd1NlYXJjaH1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbYXR0ci5hdXRvQ29tcGxldGVdPVwiJ29mZidcIiBbYXR0ci5leHBhbmRlZF09XCJtZW51VmlzaWJsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFthdHRyLmF1dG9mb2N1c109XCJ0ZHNBdXRvRm9jdXMgPyAnYXV0b2ZvY3VzJyA6IG51bGxcIiBbcmVhZG9ubHldPVwiIXRkc1Nob3dTZWFyY2hcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbZGlzYWJsZWRdPVwidGRzRGlzYWJsZWRcIiBbKG5nTW9kZWwpXT1cImlucHV0VmFsdWVcIiAoYmx1cik9XCJoYW5kbGVJbnB1dEJsdXIoKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChmb2N1cyk9XCJoYW5kbGVJbnB1dEZvY3VzKClcIiAoY2hhbmdlKT1cIiRldmVudC5zdG9wUHJvcGFnYXRpb24oKVwiIC8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgKm5nSWY9XCJzaG93TGFiZWxSZW5kZXJcIiBjbGFzcz1cInRkcy1zZWxlY3Qtc2VsZWN0aW9uLWl0ZW0gYWJzb2x1dGUgaW5zZXQtMCB0cnVuY2F0ZSB0ZXh0LWJvZHktMlwiXHJcbiAgICAgICAgICAgICAgICAgICAgW3RpdGxlXT1cImxhYmVsUmVuZGVyVGV4dFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCIhaXNMYWJlbFJlbmRlclRlbXBsYXRlOyBlbHNlIGxhYmVsVGVtcGxhdGVcIj57eyBsYWJlbFJlbmRlclRleHQgfX1cclxuICAgICAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cclxuICAgICAgICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgI2xhYmVsVGVtcGxhdGU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdUZW1wbGF0ZU91dGxldF09XCJ0ZHNMYWJlbFJlbmRlclwiIFtuZ1RlbXBsYXRlT3V0bGV0Q29udGV4dF09XCJsYWJlbFJlbmRlckNvbnRleHRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cclxuICAgICAgICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2ICpuZ0lmPVwiIXNob3dMYWJlbFJlbmRlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJ0ZHMtc2VsZWN0LXNlbGVjdGlvbi1wbGFjZWhvbGRlciBhYnNvbHV0ZSBpbnNldC0wICBmbGV4IGl0ZW1zLWNlbnRlciB0ZXh0LWJvZHktMiB0ZXh0LW5ldXRyYWwtMS00MDAgZGFyazp0ZXh0LWQtbmV1dHJhbC0xLTQwMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgW2NsYXNzXT1cInsnaW52aXNpYmxlJzppbnB1dFZhbHVlLCd2aXNpYmxlJzohaW5wdXRWYWx1ZX1cIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidHJ1bmNhdGUgIHctZnVsbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7eyBzaG93UGxhY2Vob2xkZXIgPyB0ZHNQbGFjZUhvbGRlciB8fCBsb2NhbGUucGxhY2Vob2xkZXIgOiBudWxsIH19XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZHMtc2VsZWN0LWNsZWFyIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHBsLTJcIiAqbmdJZj1cImNsZWFySWNvblZpc2libGVcIj5cclxuICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwidGRzaS1jbG9zZS1maWxsIHRleHQtbmV1dHJhbC0xLTUwMCBkYXJrOnRleHQtZC1uZXV0cmFsLTEtNTAwIHRleHQtYmFzZSBsZWFkaW5nLTQgXCJcclxuICAgICAgICAgICAgICAgICAgICAoY2xpY2spPVwiY2xlYXJTZWxlY3Rpb24oJGV2ZW50KVwiPjwvaT5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZHMtc2VsZWN0LWFycm93XCIgW2NsYXNzXT1cInRkc0NsYXNzQXJyb3dcIiBbY2xhc3MudGRzLXNlbGVjdC1hcnJvdy1sb2FkaW5nXT1cImlzTG9hZGluZ1wiXHJcbiAgICAgICAgICAgICAgICAqbmdJZj1cInRkc1Nob3dBcnJvd1wiPlxyXG4gICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIiFpc0xvYWRpbmdcIj5cclxuICAgICAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyICp0ZHNTdHJpbmdUZW1wbGF0ZU91dGxldD1cInRkc1N1ZmZpeEljb25cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gW2NsYXNzXT1cInRkc1N1ZmZpeEljb25cIj48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XHJcbiAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cclxuICAgICAgICAgICAgICAgIDwhLS0gICA8bmctY29udGFpbmVyICpuZ0lmPVwiIWlzTG9hZGluZyAmJiBtZW51VmlzaWJsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXIgKnRkc1N0cmluZ1RlbXBsYXRlT3V0bGV0PVwidGRzRXhwYW5kSWNvblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBbY2xhc3NdPVwidGRzRXhwYW5kSWNvblwiPjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cclxuICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPiAtLT5cclxuICAgICAgICAgICAgICAgIDxzcGFuICpuZ0lmPVwiaXNMb2FkaW5nXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkcy1zcGlubmVyIFtjb2xvcl09XCIncHJpbWFyeSdcIiBjbGFzcz1cImgtNCB3LTRcIj48L3Rkcy1zcGlubmVyPlxyXG4gICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIDwvbmctY29udGFpbmVyPlxyXG4gICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxyXG48L2Rpdj5cclxuPG5nLXRlbXBsYXRlIGNka0Nvbm5lY3RlZE92ZXJsYXkgdGRzQ29ubmVjdGVkT3ZlcmxheSBbY2RrQ29ubmVjdGVkT3ZlcmxheUhhc0JhY2tkcm9wXT1cInRkc0JhY2tkcm9wXCJcclxuICAgIFtjZGtDb25uZWN0ZWRPdmVybGF5T3JpZ2luXT1cIm9yaWdpblwiIFtjZGtDb25uZWN0ZWRPdmVybGF5UG9zaXRpb25zXT1cInBvc2l0aW9uc1wiXHJcbiAgICBbY2RrQ29ubmVjdGVkT3ZlcmxheVRyYW5zZm9ybU9yaWdpbk9uXT1cIicudGRzLWNhc2NhZGVyLWRyb3Bkb3duJ1wiIFtjZGtDb25uZWN0ZWRPdmVybGF5T3Blbl09XCJtZW51VmlzaWJsZVwiXHJcbiAgICAob3ZlcmxheU91dHNpZGVDbGljayk9XCJvbkNsaWNrT3V0c2lkZSgkZXZlbnQpXCIgKGRldGFjaCk9XCJjbG9zZU1lbnUoKVwiPlxyXG4gICAgPGRpdiBjbGFzcz1cInRkcy1zZWxlY3QtZHJvcGRvd24gdGRzLWNhc2NhZGVyLWRyb3Bkb3duIHRkcy1zZWxlY3QtZHJvcGRvd24tcGxhY2VtZW50LWJvdHRvbUxlZnRcIlxyXG4gICAgICAgIFtjbGFzcy50ZHMtY2FzY2FkZXItZHJvcGRvd24tcnRsXT1cImRpciA9PT0gJ3J0bCdcIiBbQHNsaWRlTW90aW9uXT1cIidlbnRlcidcIlxyXG4gICAgICAgIFtALmRpc2FibGVkXT1cIm5vQW5pbWF0aW9uPy5ub0FuaW1hdGlvblwiIFtub0FuaW1hdGlvbl09XCJub0FuaW1hdGlvbj8ubm9BbmltYXRpb25cIlxyXG4gICAgICAgIChtb3VzZWxlYXZlKT1cIm9uVHJpZ2dlck1vdXNlTGVhdmUoJGV2ZW50KVwiPlxyXG4gICAgICAgIDxkaXYgI21lbnVcclxuICAgICAgICAgICAgY2xhc3M9XCJ0ZHMtY2FzY2FkZXItbWVudXMgZmxleCBmbGV4LXdyYXAgaXRlbXMtc3RyZXRjaCByZWxhdGl2ZSBtdC0xIGJnLXdoaXRlIGRhcms6YmctZC1uZXV0cmFsLTMtMjAwIHRleHQtbmV1dHJhbC0xLTkwMCBkYXJrOnRleHQtZC1uZXV0cmFsLTEtOTAwIHJvdW5kZWQgc2hhZG93LXhsXCJcclxuICAgICAgICAgICAgW2NsYXNzLnRkcy1jYXNjYWRlci1ydGxdPVwiZGlyID09PSAncnRsJ1wiIFtjbGFzcy50ZHMtY2FzY2FkZXItbWVudXMtaGlkZGVuXT1cIiFtZW51VmlzaWJsZVwiXHJcbiAgICAgICAgICAgIFtjbGFzcy50ZHMtY2FzY2FkZXItbWVudS1lbXB0eV09XCJzaG91bGRTaG93RW1wdHlcIiBbbmdDbGFzc109XCJtZW51Q2xzXCIgW25nU3R5bGVdPVwidGRzTWVudVN0eWxlXCI+XHJcbiAgICAgICAgICAgIDx1bCAqbmdJZj1cInNob3VsZFNob3dFbXB0eTsgZWxzZSBoYXNPcHRpb25zVGVtcGxhdGVcIiBjbGFzcz1cInRkcy1jYXNjYWRlci1tZW51ICBweS0xIG1pbi13LVsxNzZweF1cIlxyXG4gICAgICAgICAgICAgICAgW3N0eWxlLndpZHRoXT1cImRyb3Bkb3duV2lkdGhTdHlsZVwiIFtzdHlsZS5oZWlnaHRdPVwiZHJvcGRvd25IZWlnaHRTdHlsZVwiPlxyXG4gICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwidGRzLWNhc2NhZGVyLW1lbnUtaXRlbSB0ZHMtY2FzY2FkZXItbWVudS1pdGVtLWRpc2FibGVkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkcy1lbWJlZC1lbXB0eSBjbGFzcz1cInRkcy1jYXNjYWRlci1tZW51LWl0ZW0tY29udGVudFwiIFtjb21wb25lbnROYW1lXT1cIidjYXNjYWRlcidcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbc3BlY2lmaWNDb250ZW50XT1cInRkc05vdEZvdW5kQ29udGVudFwiPjwvdGRzLWVtYmVkLWVtcHR5PlxyXG4gICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgPC91bD5cclxuICAgICAgICAgICAgPG5nLXRlbXBsYXRlICNoYXNPcHRpb25zVGVtcGxhdGU+XHJcbiAgICAgICAgICAgICAgICA8dWwgKm5nRm9yPVwibGV0IG9wdGlvbnMgb2YgY2FzY2FkZXJTZXJ2aWNlLmNvbHVtbnM7IGxldCBpID0gaW5kZXhcIlxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPVwidGRzLWNhc2NhZGVyLW1lbnUgbWluLXctWzE3NnB4XSAgcHktMVwiIHJvbGU9XCJtZW51aXRlbWNoZWNrYm94XCIgW25nQ2xhc3NdPVwibWVudUNvbHVtbkNsc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgW3N0eWxlLmhlaWdodF09XCJkcm9wZG93bkhlaWdodFN0eWxlXCIgW3N0eWxlLndpZHRoXT1cImRyb3Bkb3duV2lkdGhTdHlsZVwiIFtjbGFzcy5ib3JkZXItbF09J2kgPiAwJ1xyXG4gICAgICAgICAgICAgICAgICAgIFtjbGFzcy5ib3JkZXItbmV1dHJhbC0yMDBdPSdpID4gMCcgW2NsYXNzLmRhcms6Ym9yZGVyLWQtbmV1dHJhbC0yMDBdPSdpID4gMCc+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxpIHRkcy1jYXNjYWRlci1vcHRpb24gKm5nRm9yPVwibGV0IG9wdGlvbiBvZiBvcHRpb25zXCIgW2V4cGFuZEljb25dPVwidGRzRXhwYW5kSWNvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtjb2x1bW5JbmRleF09XCJpXCIgW3Rkc0xhYmVsUHJvcGVydHldPVwidGRzTGFiZWxQcm9wZXJ0eVwiIFtvcHRpb25UZW1wbGF0ZV09XCJ0ZHNPcHRpb25SZW5kZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbYWN0aXZhdGVkXT1cImlzT3B0aW9uQWN0aXZhdGVkKG9wdGlvbiwgaSlcIiBbaGlnaGxpZ2h0VGV4dF09XCJpblNlYXJjaGluZ01vZGUgPyBpbnB1dFZhbHVlIDogJydcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbb3B0aW9uXT1cIm9wdGlvblwiIFtkaXJdPVwiZGlyXCIgKG1vdXNlZW50ZXIpPVwib25PcHRpb25Nb3VzZUVudGVyKG9wdGlvbiwgaSwgJGV2ZW50KVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChtb3VzZWxlYXZlKT1cIm9uT3B0aW9uTW91c2VMZWF2ZShvcHRpb24sIGksICRldmVudClcIiAoY2xpY2spPVwib25PcHRpb25DbGljayhvcHRpb24sIGksICRldmVudClcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cInB5LTEuNSAgZGFyazpob3ZlcjpiZy1kLW5ldXRyYWwtMy0zMDAgaG92ZXI6YmctbmV1dHJhbC0zLTUwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtuZ0NsYXNzXT1cInsnYmctbmV1dHJhbC0zLTUwIGRhcms6YmctZC1uZXV0cmFsLTMtMzAwJzogaXNPcHRpb25BY3RpdmF0ZWQob3B0aW9uLCBpKSxcclxuICAgICAgICAgICAgICAgICAgICAnY3Vyc29yLXBvaW50ZXInOiFvcHRpb24uZGlzYWJsZWQsJyBjdXJzb3Itbm90LWFsbG93ZWQnOm9wdGlvbi5kaXNhYmxlZCxcclxuICAgICAgICAgICAgICAgICAgICAncHgtMS41Jzp0ZHNTaXplID09ICdzbScsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3B4LTInOnRkc1NpemUgPT0gJ21kJyxcclxuICAgICAgICAgICAgICAgICAgICAncHgtMi41Jzp0ZHNTaXplID09ICdsZycsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3B4LTMnOnRkc1NpemUgPT0gJ3hsJ1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuPC9uZy10ZW1wbGF0ZT4iXX0=