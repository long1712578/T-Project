import { ChangeDetectionStrategy, Component, Directive, EventEmitter, Input, Optional, Output, ViewEncapsulation } from '@angular/core';
import { isTooltipEmpty, TDSTooltipBaseComponent, TDSTooltipBaseDirective } from './base';
import { zoomBigMotion } from 'tds-ui/core/animation';
import { TDSHelperObject } from 'tds-ui/shared/utility';
import * as i0 from "@angular/core";
import * as i1 from "@angular/cdk/bidi";
import * as i2 from "@angular/cdk/overlay";
import * as i3 from "@angular/common";
import * as i4 from "tds-ui/core/outlet";
function TDSToolTipComponent_ng_template_0_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtext(1);
    i0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(1);
    i0.ɵɵtextInterpolate(ctx_r2.title);
} }
function TDSToolTipComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 2)(1, "div", 3)(2, "div", 4);
    i0.ɵɵelement(3, "span", 5);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div", 6);
    i0.ɵɵtemplate(5, TDSToolTipComponent_ng_template_0_ng_container_5_Template, 2, 1, "ng-container", 7);
    i0.ɵɵelementEnd()()();
} if (rf & 2) {
    const ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵproperty("ngClass", ctx_r1._classMap)("ngStyle", ctx_r1.overlayStyle)("@zoomBigMotion", "active");
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngStyle", ctx_r1._contentStyleArrow);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngClass", ctx_r1._tooltipArrowCss)("ngStyle", ctx_r1._contentStyleArrowContent);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngClass", ctx_r1._tooltipCss);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("tdsStringTemplateOutlet", ctx_r1.title);
} }
export class TDSTooltipDirective extends TDSTooltipBaseDirective {
    constructor(elementRef, hostView, resolver, renderer) {
        super(elementRef, hostView, resolver, renderer);
        this.trigger = 'hover';
        this.placement = 'top';
        // tslint:disable-next-line:no-output-rename
        this.visibleChange = new EventEmitter();
        this.componentRef = this.hostView.createComponent(TDSToolTipComponent);
    }
    getProxyPropertyMap() {
        return {
            tooltipCss: ['tooltipContentCss', () => this.tooltipContentCss],
            tooltipArrowCss: ['tooltipArrowCss', () => this.tooltipArrowCss],
            tooltipColor: ['color', () => this.tooltipColor]
        };
    }
}
TDSTooltipDirective.ɵfac = function TDSTooltipDirective_Factory(t) { return new (t || TDSTooltipDirective)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.ViewContainerRef), i0.ɵɵdirectiveInject(i0.ComponentFactoryResolver), i0.ɵɵdirectiveInject(i0.Renderer2)); };
TDSTooltipDirective.ɵdir = /*@__PURE__*/ i0.ɵɵdefineDirective({ type: TDSTooltipDirective, selectors: [["", "tds-tooltip", ""]], hostVars: 2, hostBindings: function TDSTooltipDirective_HostBindings(rf, ctx) { if (rf & 2) {
        i0.ɵɵclassProp("tds-tooltip-open", ctx.visible);
    } }, inputs: { title: ["tooltipTitle", "title"], directiveTitle: ["tds-tooltip", "directiveTitle"], trigger: ["tooltipTrigger", "trigger"], placement: ["tooltipPlacement", "placement"], origin: ["tooltipOrigin", "origin"], visible: ["tooltipVisible", "visible"], mouseEnterDelay: ["tooltipMouseEnterDelay", "mouseEnterDelay"], mouseLeaveDelay: ["tooltipMouseLeaveDelay", "mouseLeaveDelay"], overlayClassName: ["tooltipOverlayClassName", "overlayClassName"], overlayStyle: ["tooltipOverlayStyle", "overlayStyle"], tooltipColor: "tooltipColor", tooltipContentCss: "tooltipContentCss", tooltipArrowCss: "tooltipArrowCss" }, outputs: { visibleChange: "tooltipVisibleChange" }, exportAs: ["tdsTooltip"], features: [i0.ɵɵInheritDefinitionFeature] });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(TDSTooltipDirective, [{
        type: Directive,
        args: [{
                selector: '[tds-tooltip]',
                exportAs: 'tdsTooltip',
                host: {
                    '[class.tds-tooltip-open]': 'visible'
                }
            }]
    }], function () { return [{ type: i0.ElementRef }, { type: i0.ViewContainerRef }, { type: i0.ComponentFactoryResolver }, { type: i0.Renderer2 }]; }, { title: [{
            type: Input,
            args: ['tooltipTitle']
        }], directiveTitle: [{
            type: Input,
            args: ['tds-tooltip']
        }], trigger: [{
            type: Input,
            args: ['tooltipTrigger']
        }], placement: [{
            type: Input,
            args: ['tooltipPlacement']
        }], origin: [{
            type: Input,
            args: ['tooltipOrigin']
        }], visible: [{
            type: Input,
            args: ['tooltipVisible']
        }], mouseEnterDelay: [{
            type: Input,
            args: ['tooltipMouseEnterDelay']
        }], mouseLeaveDelay: [{
            type: Input,
            args: ['tooltipMouseLeaveDelay']
        }], overlayClassName: [{
            type: Input,
            args: ['tooltipOverlayClassName']
        }], overlayStyle: [{
            type: Input,
            args: ['tooltipOverlayStyle']
        }], tooltipColor: [{
            type: Input
        }], tooltipContentCss: [{
            type: Input
        }], tooltipArrowCss: [{
            type: Input
        }], visibleChange: [{
            type: Output,
            args: ['tooltipVisibleChange']
        }] }); })();
export class TDSToolTipComponent extends TDSTooltipBaseComponent {
    constructor(cdr, directionality) {
        super(cdr);
        this.title = null;
        this.tooltipContentCss = null;
        this.tooltipArrowCss = null;
        this._tooltipCss = {};
        this._tooltipArrowCss = {};
        this._contentStyleMap = {};
        this._contentStyleArrowContent = {};
        this._contentStyleArrow = {};
    }
    isEmpty() {
        return isTooltipEmpty(this.title);
    }
    updateStyles() {
        const isColorPreset = this.color;
        this._classMap = {
            [this.overlayClassName]: true,
            [`${this._prefix}-placement-${this.preferredPlacement}`]: true,
        };
        if (TDSHelperObject.hasValue(this.color)) {
            this.getCssByColor();
        }
        else {
            //lấy mặc định or custom
            this._tooltipCss = this.tooltipContentCss || {
                ['bg-black bg-opacity-80 dark:bg-d-neutral-3-500 dark:bg-opacity-100 rounded p-2']: true,
            };
            this._tooltipArrowCss = this.tooltipArrowCss || {
                ' border-black  border-opacity-80 dark:border-d-neutral-3-500 dark:border-opacity-100 border-4': true
            };
        }
        this.p_StyleArrow();
    }
    p_StyleArrow() {
        let borderTransparent = '4px solid transparent';
        // let borderColor = '4px solid';
        if (this.preferredPlacement.indexOf("top") > -1) {
            this._contentStyleArrowContent = {
                width: '0',
                height: '0',
                borderLeft: borderTransparent,
                borderRight: borderTransparent,
                borderBottom: 0
                // borderTop: borderColor,
            };
        }
        if (this.preferredPlacement.indexOf("bottom") > -1) {
            this._contentStyleArrowContent = {
                width: '0',
                height: '0',
                borderLeft: borderTransparent,
                borderRight: borderTransparent,
                borderTop: 0
                // borderBottom: borderColor,        
            };
        }
        if (this.preferredPlacement.indexOf("left") > -1) {
            this._contentStyleArrowContent = {
                width: '0',
                height: '0',
                borderTop: borderTransparent,
                // borderLeft : borderColor,
                borderBottom: borderTransparent,
                borderRight: 0
            };
        }
        if (this.preferredPlacement.indexOf("right") > -1) {
            this._contentStyleArrowContent = {
                width: '0',
                height: '0',
                borderTop: borderTransparent,
                // borderRight : borderColor,
                borderBottom: borderTransparent,
                borderLeft: 0
            };
        }
        switch (this.preferredPlacement) {
            //#region top
            case "top":
                this._contentStyleArrow = {
                    bottom: '0',
                    left: '50%',
                    transform: 'translateX(-50%)',
                };
                break;
            case "topLeft":
                this._contentStyleArrow = {
                    bottom: '0',
                    left: '10px',
                };
                break;
            case "topRight":
                this._contentStyleArrow = {
                    bottom: '0',
                    right: '10px',
                };
                break;
            //#endregion
            //#region bottom
            case "bottom":
                this._contentStyleArrow = {
                    top: '0',
                    left: '50%',
                    transform: 'translateX(-50%)',
                };
                break;
            case "bottomLeft":
                this._contentStyleArrow = {
                    top: '0',
                    left: '10px',
                };
                break;
            case "bottomRight":
                this._contentStyleArrow = {
                    top: '0',
                    right: '10px',
                };
                break;
            //#endregion
            //#region left
            case "left":
                this._contentStyleArrow = {
                    right: '0px',
                    top: '50%',
                    transform: 'translateY(-50%)',
                };
                break;
            case "leftTop":
                this._contentStyleArrow = {
                    right: '0px',
                    top: '10px'
                };
                break;
            case "leftBottom":
                this._contentStyleArrow = {
                    right: '0px',
                    bottom: '10px'
                };
                break;
            //#endregion
            //#region right
            case "right":
                this._contentStyleArrow = {
                    left: '0px',
                    top: '50%',
                    transform: 'translateY(-50%)',
                };
                break;
            case "rightTop":
                this._contentStyleArrow = {
                    left: '0px',
                    top: '10px'
                };
                break;
            case "rightBottom":
                this._contentStyleArrow = {
                    left: '0px',
                    bottom: '10px'
                };
                break;
            ////#endregion
            default:
                this._contentStyleArrow = {
                    bottom: '0',
                    left: '50%',
                    transform: 'translateX(-50%)',
                };
                break;
        }
    }
    getCssByColor() {
        let contentCss = '';
        let arrowContent = '';
        switch (this.color) {
            case 'info':
                contentCss = "bg-info-400 dark:bg-d-info-400 p-2 rounded";
                arrowContent = 'border-4 border-info-400 dark:border-d-info-400';
                break;
            case 'success':
                contentCss = "bg-success-400 dark:bg-d-success-400 p-2 rounded";
                arrowContent = 'border-4 border-success-400 dark:border-d-success-400';
                break;
            case 'error':
                contentCss = "bg-error-400 dark:bg-d-error-400 p-2 rounded";
                arrowContent = 'border-4 border-error-400 dark:border-d-error-400';
                break;
            case 'warning':
                contentCss = "bg-warning-400 dark:bg-d-warning-400 p-2 rounded";
                arrowContent = 'border-4 border-warning-400 dark:border-d-warning-400';
                break;
        }
        this._tooltipCss = {
            [contentCss]: true
        };
        this._tooltipArrowCss = {
            [arrowContent]: true
        };
    }
}
TDSToolTipComponent.ɵfac = function TDSToolTipComponent_Factory(t) { return new (t || TDSToolTipComponent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i1.Directionality, 8)); };
TDSToolTipComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: TDSToolTipComponent, selectors: [["tds-tooltip"]], exportAs: ["TDSTooltipComponent"], features: [i0.ɵɵInheritDefinitionFeature], decls: 2, vars: 4, consts: [["cdkConnectedOverlay", "", 3, "cdkConnectedOverlayOrigin", "cdkConnectedOverlayOpen", "cdkConnectedOverlayPositions", "cdkConnectedOverlayPush", "overlayOutsideClick", "detach", "positionChange"], ["overlay", "cdkConnectedOverlay"], [1, "tds-tooltip", "p-1.5", "relative", "text-white", "text-body-2", "font-regular", 3, "ngClass", "ngStyle"], [1, "tds-tooltip-content", "p-1", "relative"], [1, "tds-tooltip-arrow", "absolute", "block", "bg-transparent", "pointer-events-none", 3, "ngStyle"], [1, "tds-tooltip-arrow-content", "block", 3, "ngClass", "ngStyle"], [1, "tds-tooltip-inner", 3, "ngClass"], [4, "tdsStringTemplateOutlet"]], template: function TDSToolTipComponent_Template(rf, ctx) { if (rf & 1) {
        i0.ɵɵtemplate(0, TDSToolTipComponent_ng_template_0_Template, 6, 8, "ng-template", 0, 1, i0.ɵɵtemplateRefExtractor);
        i0.ɵɵlistener("overlayOutsideClick", function TDSToolTipComponent_Template_ng_template_overlayOutsideClick_0_listener($event) { return ctx.onClickOutside($event); })("detach", function TDSToolTipComponent_Template_ng_template_detach_0_listener() { return ctx.hide(); })("positionChange", function TDSToolTipComponent_Template_ng_template_positionChange_0_listener($event) { return ctx.onPositionChange($event); });
    } if (rf & 2) {
        i0.ɵɵproperty("cdkConnectedOverlayOrigin", ctx.origin)("cdkConnectedOverlayOpen", ctx._visible)("cdkConnectedOverlayPositions", ctx._positions)("cdkConnectedOverlayPush", true);
    } }, directives: [i2.CdkConnectedOverlay, i3.NgClass, i3.NgStyle, i4.TDSStringTemplateOutletDirective], encapsulation: 2, data: { animation: [zoomBigMotion] }, changeDetection: 0 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(TDSToolTipComponent, [{
        type: Component,
        args: [{
                selector: 'tds-tooltip',
                exportAs: 'TDSTooltipComponent',
                changeDetection: ChangeDetectionStrategy.OnPush,
                encapsulation: ViewEncapsulation.None,
                animations: [zoomBigMotion],
                template: `
    <ng-template
      #overlay="cdkConnectedOverlay"
      cdkConnectedOverlay
      [cdkConnectedOverlayOrigin]="origin"
      [cdkConnectedOverlayOpen]="_visible"
      [cdkConnectedOverlayPositions]="_positions"
      [cdkConnectedOverlayPush]="true"
      (overlayOutsideClick)="onClickOutside($event)"
      (detach)="hide()"
      (positionChange)="onPositionChange($event)"
    >
      <div
        class="tds-tooltip  p-1.5 relative text-white text-body-2 font-regular"        
        [ngClass]="_classMap"
        [ngStyle]="overlayStyle"     
        [@zoomBigMotion]="'active'"
      >
        <div class="tds-tooltip-content p-1 relative">
          <div class="tds-tooltip-arrow absolute block bg-transparent pointer-events-none"
          [ngStyle]="_contentStyleArrow" >
            <span class="tds-tooltip-arrow-content block" [ngClass]='_tooltipArrowCss' [ngStyle]="_contentStyleArrowContent"></span>
          </div>
          <div class="tds-tooltip-inner" [ngClass]="_tooltipCss">
            <ng-container *tdsStringTemplateOutlet="title">{{ title }}</ng-container>
          </div>
        </div>
      </div>
    </ng-template>
  `,
                preserveWhitespaces: false
            }]
    }], function () { return [{ type: i0.ChangeDetectorRef }, { type: i1.Directionality, decorators: [{
                type: Optional
            }] }]; }, null); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9vbHRpcC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL3Rkcy11aS90b29sdGlwL3Rvb2x0aXAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsT0FBTyxFQUNMLHVCQUF1QixFQUV2QixTQUFTLEVBSVQsU0FBUyxFQUVULFlBQVksRUFFWixLQUFLLEVBQ0wsUUFBUSxFQUNSLE1BQU0sRUFHTixpQkFBaUIsRUFDbEIsTUFBTSxlQUFlLENBQUM7QUFHdkIsT0FBTyxFQUFFLGNBQWMsRUFBRSx1QkFBdUIsRUFBRSx1QkFBdUIsRUFBeUMsTUFBTSxRQUFRLENBQUM7QUFFakksT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQ3RELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQzs7Ozs7OztJQTZFNUMsNkJBQStDO0lBQUEsWUFBVztJQUFBLDBCQUFlOzs7SUFBMUIsZUFBVztJQUFYLGtDQUFXOzs7SUFaaEUsOEJBS0MsYUFBQSxhQUFBO0lBSUssMEJBQXdIO0lBQzFILGlCQUFNO0lBQ04sOEJBQXVEO0lBQ3JELG9HQUF5RTtJQUMzRSxpQkFBTSxFQUFBLEVBQUE7OztJQVhSLDBDQUFxQixnQ0FBQSw0QkFBQTtJQU1uQixlQUE4QjtJQUE5QixtREFBOEI7SUFDa0IsZUFBNEI7SUFBNUIsaURBQTRCLDZDQUFBO0lBRTdDLGVBQXVCO0lBQXZCLDRDQUF1QjtJQUNyQyxlQUE4QjtJQUE5QixzREFBOEI7O0FBcEV6RCxNQUFNLE9BQU8sbUJBQW9CLFNBQVEsdUJBQXVCO0lBbUI5RCxZQUNFLFVBQXNCLEVBQ3RCLFFBQTBCLEVBQzFCLFFBQWtDLEVBQ2xDLFFBQW1CO1FBR25CLEtBQUssQ0FBQyxVQUFVLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxRQUFRLENBQUMsQ0FBQztRQXZCekIsWUFBTyxHQUF1QixPQUFPLENBQUM7UUFDcEMsY0FBUyxHQUF1QixLQUFLLENBQUM7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QUUscUJBQXFCO2dCQUMvQixlQUFlLEVBQUUsdUJBQXVCLENBQUMsTUFBTTtnQkFDL0MsYUFBYSxFQUFFLGlCQUFpQixDQUFDLElBQUk7Z0JBQ3JDLFVBQVUsRUFBRSxDQUFDLGFBQWEsQ0FBQztnQkFDM0IsUUFBUSxFQUFFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQTZCVDtnQkFDRCxtQkFBbUIsRUFBRSxLQUFLO2FBQzNCOztzQkFjSSxRQUFRIiwic291cmNlc0NvbnRlbnQiOlsiXHJcblxyXG5pbXBvcnQge1xyXG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxyXG4gIENoYW5nZURldGVjdG9yUmVmLFxyXG4gIENvbXBvbmVudCxcclxuICBDb21wb25lbnRGYWN0b3J5LFxyXG4gIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcclxuICBDb21wb25lbnRSZWYsXHJcbiAgRGlyZWN0aXZlLFxyXG4gIEVsZW1lbnRSZWYsXHJcbiAgRXZlbnRFbWl0dGVyLFxyXG4gIEhvc3QsXHJcbiAgSW5wdXQsXHJcbiAgT3B0aW9uYWwsXHJcbiAgT3V0cHV0LFxyXG4gIFJlbmRlcmVyMixcclxuICBWaWV3Q29udGFpbmVyUmVmLFxyXG4gIFZpZXdFbmNhcHN1bGF0aW9uXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5pbXBvcnQgeyBEaXJlY3Rpb25hbGl0eSB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9iaWRpJztcclxuaW1wb3J0IHsgaXNUb29sdGlwRW1wdHksIFREU1Rvb2x0aXBCYXNlQ29tcG9uZW50LCBURFNUb29sdGlwQmFzZURpcmVjdGl2ZSwgVERTVG9vbHRpcFRyaWdnZXIsIFREU1Byb3BlcnR5TWFwcGluZyB9IGZyb20gJy4vYmFzZSc7XHJcbmltcG9ydCB7IE5nQ2xhc3NJbnRlcmZhY2UsIE5nU3R5bGVJbnRlcmZhY2UsIFREU1RTVHlwZSB9IGZyb20gJ3Rkcy11aS9jb3JlL2NvbmZpZyc7XHJcbmltcG9ydCB7IHpvb21CaWdNb3Rpb24gfSBmcm9tICd0ZHMtdWkvY29yZS9hbmltYXRpb24nO1xyXG5pbXBvcnQgeyBURFNIZWxwZXJPYmplY3QgfSBmcm9tICd0ZHMtdWkvc2hhcmVkL3V0aWxpdHknO1xyXG5cclxuQERpcmVjdGl2ZSh7XHJcbiAgc2VsZWN0b3I6ICdbdGRzLXRvb2x0aXBdJyxcclxuICBleHBvcnRBczogJ3Rkc1Rvb2x0aXAnLFxyXG4gIGhvc3Q6IHtcclxuICAgICdbY2xhc3MudGRzLXRvb2x0aXAtb3Blbl0nOiAndmlzaWJsZSdcclxuICB9XHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBURFNUb29sdGlwRGlyZWN0aXZlIGV4dGVuZHMgVERTVG9vbHRpcEJhc2VEaXJlY3RpdmUge1xyXG4gIEBJbnB1dCgndG9vbHRpcFRpdGxlJykgdGl0bGU/OiBURFNUU1R5cGUgfCBudWxsO1xyXG4gIEBJbnB1dCgndGRzLXRvb2x0aXAnKSBkaXJlY3RpdmVUaXRsZT86IFREU1RTVHlwZSB8IG51bGw7XHJcbiAgQElucHV0KCd0b29sdGlwVHJpZ2dlcicpIHRyaWdnZXI/OiBURFNUb29sdGlwVHJpZ2dlciA9ICdob3Zlcic7XHJcbiAgQElucHV0KCd0b29sdGlwUGxhY2VtZW50JykgcGxhY2VtZW50Pzogc3RyaW5nIHwgc3RyaW5nW10gPSAndG9wJztcclxuICBASW5wdXQoJ3Rvb2x0aXBPcmlnaW4nKSBvcmlnaW4/OiBFbGVtZW50UmVmPEhUTUxFbGVtZW50PjtcclxuICBASW5wdXQoJ3Rvb2x0aXBWaXNpYmxlJykgdmlzaWJsZT86IGJvb2xlYW47XHJcbiAgQElucHV0KCd0b29sdGlwTW91c2VFbnRlckRlbGF5JykgbW91c2VFbnRlckRlbGF5PzogbnVtYmVyO1xyXG4gIEBJbnB1dCgndG9vbHRpcE1vdXNlTGVhdmVEZWxheScpIG1vdXNlTGVhdmVEZWxheT86IG51bWJlcjtcclxuICBASW5wdXQoJ3Rvb2x0aXBPdmVybGF5Q2xhc3NOYW1lJykgb3ZlcmxheUNsYXNzTmFtZT86IHN0cmluZztcclxuICBASW5wdXQoJ3Rvb2x0aXBPdmVybGF5U3R5bGUnKSBvdmVybGF5U3R5bGU/OiBOZ1N0eWxlSW50ZXJmYWNlO1xyXG4gIEBJbnB1dCgpIHRvb2x0aXBDb2xvcj8gOiAnaW5mbycgfCAnc3VjY2VzcycgfCAnZXJyb3InIHwgJ3dhcm5pbmcnO1xyXG4gIEBJbnB1dCgpIHRvb2x0aXBDb250ZW50Q3NzPzogTmdDbGFzc0ludGVyZmFjZSB8c3RyaW5nIDtcclxuICBASW5wdXQoKSB0b29sdGlwQXJyb3dDc3M/OiBOZ0NsYXNzSW50ZXJmYWNlfHN0cmluZyA7XHJcbiAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLW91dHB1dC1yZW5hbWVcclxuICBAT3V0cHV0KCd0b29sdGlwVmlzaWJsZUNoYW5nZScpIHJlYWRvbmx5IHZpc2libGVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPGJvb2xlYW4+KCk7XHJcblxyXG4gIG92ZXJyaWRlIGNvbXBvbmVudFJlZjogQ29tcG9uZW50UmVmPFREU1Rvb2xUaXBDb21wb25lbnQ+ID0gdGhpcy5ob3N0Vmlldy5jcmVhdGVDb21wb25lbnQoVERTVG9vbFRpcENvbXBvbmVudCk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgZWxlbWVudFJlZjogRWxlbWVudFJlZixcclxuICAgIGhvc3RWaWV3OiBWaWV3Q29udGFpbmVyUmVmLFxyXG4gICAgcmVzb2x2ZXI6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcclxuICAgIHJlbmRlcmVyOiBSZW5kZXJlcjIsXHJcbiAgICAvLyBASG9zdCgpIEBPcHRpb25hbCgpIG5vQW5pbWF0aW9uPzogVERTTm9BbmltYXRpb25EaXJlY3RpdmVcclxuICApIHtcclxuICAgIHN1cGVyKGVsZW1lbnRSZWYsIGhvc3RWaWV3LCByZXNvbHZlciwgcmVuZGVyZXIpO1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIGdldFByb3h5UHJvcGVydHlNYXAoKTogVERTUHJvcGVydHlNYXBwaW5nIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHRvb2x0aXBDc3M6IFsndG9vbHRpcENvbnRlbnRDc3MnLCAoKSA9PiB0aGlzLnRvb2x0aXBDb250ZW50Q3NzXSxcclxuICAgICAgdG9vbHRpcEFycm93Q3NzOiBbJ3Rvb2x0aXBBcnJvd0NzcycsICgpID0+IHRoaXMudG9vbHRpcEFycm93Q3NzXSxcclxuICAgICAgdG9vbHRpcENvbG9yOlsnY29sb3InLCAoKSA9PiB0aGlzLnRvb2x0aXBDb2xvcl1cclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ3Rkcy10b29sdGlwJyxcclxuICBleHBvcnRBczogJ1REU1Rvb2x0aXBDb21wb25lbnQnLFxyXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxyXG4gIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXHJcbiAgYW5pbWF0aW9uczogW3pvb21CaWdNb3Rpb25dLFxyXG4gIHRlbXBsYXRlOiBgXHJcbiAgICA8bmctdGVtcGxhdGVcclxuICAgICAgI292ZXJsYXk9XCJjZGtDb25uZWN0ZWRPdmVybGF5XCJcclxuICAgICAgY2RrQ29ubmVjdGVkT3ZlcmxheVxyXG4gICAgICBbY2RrQ29ubmVjdGVkT3ZlcmxheU9yaWdpbl09XCJvcmlnaW5cIlxyXG4gICAgICBbY2RrQ29ubmVjdGVkT3ZlcmxheU9wZW5dPVwiX3Zpc2libGVcIlxyXG4gICAgICBbY2RrQ29ubmVjdGVkT3ZlcmxheVBvc2l0aW9uc109XCJfcG9zaXRpb25zXCJcclxuICAgICAgW2Nka0Nvbm5lY3RlZE92ZXJsYXlQdXNoXT1cInRydWVcIlxyXG4gICAgICAob3ZlcmxheU91dHNpZGVDbGljayk9XCJvbkNsaWNrT3V0c2lkZSgkZXZlbnQpXCJcclxuICAgICAgKGRldGFjaCk9XCJoaWRlKClcIlxyXG4gICAgICAocG9zaXRpb25DaGFuZ2UpPVwib25Qb3NpdGlvbkNoYW5nZSgkZXZlbnQpXCJcclxuICAgID5cclxuICAgICAgPGRpdlxyXG4gICAgICAgIGNsYXNzPVwidGRzLXRvb2x0aXAgIHAtMS41IHJlbGF0aXZlIHRleHQtd2hpdGUgdGV4dC1ib2R5LTIgZm9udC1yZWd1bGFyXCIgICAgICAgIFxyXG4gICAgICAgIFtuZ0NsYXNzXT1cIl9jbGFzc01hcFwiXHJcbiAgICAgICAgW25nU3R5bGVdPVwib3ZlcmxheVN0eWxlXCIgICAgIFxyXG4gICAgICAgIFtAem9vbUJpZ01vdGlvbl09XCInYWN0aXZlJ1wiXHJcbiAgICAgID5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwidGRzLXRvb2x0aXAtY29udGVudCBwLTEgcmVsYXRpdmVcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZHMtdG9vbHRpcC1hcnJvdyBhYnNvbHV0ZSBibG9jayBiZy10cmFuc3BhcmVudCBwb2ludGVyLWV2ZW50cy1ub25lXCJcclxuICAgICAgICAgIFtuZ1N0eWxlXT1cIl9jb250ZW50U3R5bGVBcnJvd1wiID5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0ZHMtdG9vbHRpcC1hcnJvdy1jb250ZW50IGJsb2NrXCIgW25nQ2xhc3NdPSdfdG9vbHRpcEFycm93Q3NzJyBbbmdTdHlsZV09XCJfY29udGVudFN0eWxlQXJyb3dDb250ZW50XCI+PC9zcGFuPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidGRzLXRvb2x0aXAtaW5uZXJcIiBbbmdDbGFzc109XCJfdG9vbHRpcENzc1wiPlxyXG4gICAgICAgICAgICA8bmctY29udGFpbmVyICp0ZHNTdHJpbmdUZW1wbGF0ZU91dGxldD1cInRpdGxlXCI+e3sgdGl0bGUgfX08L25nLWNvbnRhaW5lcj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvbmctdGVtcGxhdGU+XHJcbiAgYCxcclxuICBwcmVzZXJ2ZVdoaXRlc3BhY2VzOiBmYWxzZVxyXG59KVxyXG5leHBvcnQgY2xhc3MgVERTVG9vbFRpcENvbXBvbmVudCBleHRlbmRzIFREU1Rvb2x0aXBCYXNlQ29tcG9uZW50IHtcclxuICB0aXRsZTogVERTVFNUeXBlIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gIGNvbG9yPzogJ2luZm8nIHwgJ3N1Y2Nlc3MnIHwgJ2Vycm9yJyB8ICd3YXJuaW5nJztcclxuICB0b29sdGlwQ29udGVudENzczogTmdDbGFzc0ludGVyZmFjZSB8IG51bGwgPSBudWxsO1xyXG4gIHRvb2x0aXBBcnJvd0NzczogTmdDbGFzc0ludGVyZmFjZSB8IG51bGwgPSBudWxsO1xyXG4gIF90b29sdGlwQ3NzOiBOZ0NsYXNzSW50ZXJmYWNlID0ge307XHJcbiAgX3Rvb2x0aXBBcnJvd0NzczogTmdDbGFzc0ludGVyZmFjZSA9IHt9O1xyXG4gIF9jb250ZW50U3R5bGVNYXA6IE5nU3R5bGVJbnRlcmZhY2UgPSB7fTtcclxuICBfY29udGVudFN0eWxlQXJyb3dDb250ZW50OiBOZ1N0eWxlSW50ZXJmYWNlID0ge307XHJcbiAgX2NvbnRlbnRTdHlsZUFycm93OiBOZ1N0eWxlSW50ZXJmYWNlID0ge31cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGNkcjogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICBAT3B0aW9uYWwoKSBkaXJlY3Rpb25hbGl0eTogRGlyZWN0aW9uYWxpdHksXHJcbiAgICAvLyBASG9zdCgpIEBPcHRpb25hbCgpIHB1YmxpYyBub0FuaW1hdGlvbj86IFREU05vQW5pbWF0aW9uRGlyZWN0aXZlXHJcbiAgKSB7XHJcbiAgICBzdXBlcihjZHIpO1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIGlzRW1wdHkoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gaXNUb29sdGlwRW1wdHkodGhpcy50aXRsZSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVTdHlsZXMoKTogdm9pZCB7XHJcbiAgICBjb25zdCBpc0NvbG9yUHJlc2V0ID0gdGhpcy5jb2xvcjtcclxuXHJcbiAgICB0aGlzLl9jbGFzc01hcCA9IHtcclxuICAgICAgW3RoaXMub3ZlcmxheUNsYXNzTmFtZV06IHRydWUsXHJcbiAgICAgIFtgJHt0aGlzLl9wcmVmaXh9LXBsYWNlbWVudC0ke3RoaXMucHJlZmVycmVkUGxhY2VtZW50fWBdOiB0cnVlLFxyXG5cclxuICAgIH07XHJcbiAgICBpZiAoVERTSGVscGVyT2JqZWN0Lmhhc1ZhbHVlKHRoaXMuY29sb3IpKSB7XHJcbiAgICAgIHRoaXMuZ2V0Q3NzQnlDb2xvcigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy9s4bqleSBt4bq3YyDEkeG7i25oIG9yIGN1c3RvbVxyXG4gICAgICB0aGlzLl90b29sdGlwQ3NzID0gdGhpcy50b29sdGlwQ29udGVudENzcyB8fCB7XHJcbiAgICAgICAgWydiZy1ibGFjayBiZy1vcGFjaXR5LTgwIGRhcms6YmctZC1uZXV0cmFsLTMtNTAwIGRhcms6Ymctb3BhY2l0eS0xMDAgcm91bmRlZCBwLTInXTogdHJ1ZSxcclxuXHJcbiAgICAgIH07XHJcbiAgICAgIHRoaXMuX3Rvb2x0aXBBcnJvd0NzcyA9IHRoaXMudG9vbHRpcEFycm93Q3NzIHx8IHtcclxuICAgICAgICAnIGJvcmRlci1ibGFjayAgYm9yZGVyLW9wYWNpdHktODAgZGFyazpib3JkZXItZC1uZXV0cmFsLTMtNTAwIGRhcms6Ym9yZGVyLW9wYWNpdHktMTAwIGJvcmRlci00JzogdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLnBfU3R5bGVBcnJvdygpO1xyXG4gIH1cclxuICBwcml2YXRlIHBfU3R5bGVBcnJvdygpIHtcclxuICAgIGxldCBib3JkZXJUcmFuc3BhcmVudCA9ICc0cHggc29saWQgdHJhbnNwYXJlbnQnO1xyXG4gICAgLy8gbGV0IGJvcmRlckNvbG9yID0gJzRweCBzb2xpZCc7XHJcbiAgICBpZiAodGhpcy5wcmVmZXJyZWRQbGFjZW1lbnQuaW5kZXhPZihcInRvcFwiKSA+IC0xKSB7XHJcbiAgICAgIHRoaXMuX2NvbnRlbnRTdHlsZUFycm93Q29udGVudCA9IHtcclxuICAgICAgICB3aWR0aDogJzAnLFxyXG4gICAgICAgIGhlaWdodDogJzAnLFxyXG4gICAgICAgIGJvcmRlckxlZnQ6IGJvcmRlclRyYW5zcGFyZW50LFxyXG4gICAgICAgIGJvcmRlclJpZ2h0OiBib3JkZXJUcmFuc3BhcmVudCxcclxuICAgICAgICBib3JkZXJCb3R0b206IDBcclxuICAgICAgICAvLyBib3JkZXJUb3A6IGJvcmRlckNvbG9yLFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5wcmVmZXJyZWRQbGFjZW1lbnQuaW5kZXhPZihcImJvdHRvbVwiKSA+IC0xKSB7XHJcbiAgICAgIHRoaXMuX2NvbnRlbnRTdHlsZUFycm93Q29udGVudCA9IHtcclxuICAgICAgICB3aWR0aDogJzAnLFxyXG4gICAgICAgIGhlaWdodDogJzAnLFxyXG4gICAgICAgIGJvcmRlckxlZnQ6IGJvcmRlclRyYW5zcGFyZW50LFxyXG4gICAgICAgIGJvcmRlclJpZ2h0OiBib3JkZXJUcmFuc3BhcmVudCxcclxuICAgICAgICBib3JkZXJUb3A6IDBcclxuICAgICAgICAvLyBib3JkZXJCb3R0b206IGJvcmRlckNvbG9yLCAgICAgICAgXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICh0aGlzLnByZWZlcnJlZFBsYWNlbWVudC5pbmRleE9mKFwibGVmdFwiKSA+IC0xKSB7XHJcbiAgICAgIHRoaXMuX2NvbnRlbnRTdHlsZUFycm93Q29udGVudCA9IHtcclxuICAgICAgICB3aWR0aDogJzAnLFxyXG4gICAgICAgIGhlaWdodDogJzAnLFxyXG4gICAgICAgIGJvcmRlclRvcDogYm9yZGVyVHJhbnNwYXJlbnQsXHJcbiAgICAgICAgLy8gYm9yZGVyTGVmdCA6IGJvcmRlckNvbG9yLFxyXG4gICAgICAgIGJvcmRlckJvdHRvbTogYm9yZGVyVHJhbnNwYXJlbnQsXHJcbiAgICAgICAgYm9yZGVyUmlnaHQ6IDBcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMucHJlZmVycmVkUGxhY2VtZW50LmluZGV4T2YoXCJyaWdodFwiKSA+IC0xKSB7XHJcbiAgICAgIHRoaXMuX2NvbnRlbnRTdHlsZUFycm93Q29udGVudCA9IHtcclxuICAgICAgICB3aWR0aDogJzAnLFxyXG4gICAgICAgIGhlaWdodDogJzAnLFxyXG4gICAgICAgIGJvcmRlclRvcDogYm9yZGVyVHJhbnNwYXJlbnQsXHJcbiAgICAgICAgLy8gYm9yZGVyUmlnaHQgOiBib3JkZXJDb2xvcixcclxuICAgICAgICBib3JkZXJCb3R0b206IGJvcmRlclRyYW5zcGFyZW50LFxyXG4gICAgICAgIGJvcmRlckxlZnQ6IDBcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgc3dpdGNoICh0aGlzLnByZWZlcnJlZFBsYWNlbWVudCkge1xyXG4gICAgICAvLyNyZWdpb24gdG9wXHJcbiAgICAgIGNhc2UgXCJ0b3BcIjpcclxuICAgICAgICB0aGlzLl9jb250ZW50U3R5bGVBcnJvdyA9IHtcclxuICAgICAgICAgIGJvdHRvbTogJzAnLFxyXG4gICAgICAgICAgbGVmdDogJzUwJScsXHJcbiAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKC01MCUpJyxcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJ0b3BMZWZ0XCI6XHJcbiAgICAgICAgdGhpcy5fY29udGVudFN0eWxlQXJyb3cgPSB7XHJcbiAgICAgICAgICBib3R0b206ICcwJyxcclxuICAgICAgICAgIGxlZnQ6ICcxMHB4JyxcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJ0b3BSaWdodFwiOlxyXG4gICAgICAgIHRoaXMuX2NvbnRlbnRTdHlsZUFycm93ID0ge1xyXG4gICAgICAgICAgYm90dG9tOiAnMCcsXHJcbiAgICAgICAgICByaWdodDogJzEwcHgnLFxyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgLy8jZW5kcmVnaW9uXHJcbiAgICAgIC8vI3JlZ2lvbiBib3R0b21cclxuICAgICAgY2FzZSBcImJvdHRvbVwiOlxyXG4gICAgICAgIHRoaXMuX2NvbnRlbnRTdHlsZUFycm93ID0ge1xyXG4gICAgICAgICAgdG9wOiAnMCcsXHJcbiAgICAgICAgICBsZWZ0OiAnNTAlJyxcclxuICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoLTUwJSknLFxyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcImJvdHRvbUxlZnRcIjpcclxuICAgICAgICB0aGlzLl9jb250ZW50U3R5bGVBcnJvdyA9IHtcclxuICAgICAgICAgIHRvcDogJzAnLFxyXG4gICAgICAgICAgbGVmdDogJzEwcHgnLFxyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcImJvdHRvbVJpZ2h0XCI6XHJcbiAgICAgICAgdGhpcy5fY29udGVudFN0eWxlQXJyb3cgPSB7XHJcbiAgICAgICAgICB0b3A6ICcwJyxcclxuICAgICAgICAgIHJpZ2h0OiAnMTBweCcsXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICAvLyNlbmRyZWdpb25cclxuICAgICAgLy8jcmVnaW9uIGxlZnRcclxuICAgICAgY2FzZSBcImxlZnRcIjpcclxuICAgICAgICB0aGlzLl9jb250ZW50U3R5bGVBcnJvdyA9IHtcclxuICAgICAgICAgIHJpZ2h0OiAnMHB4JyxcclxuICAgICAgICAgIHRvcDogJzUwJScsXHJcbiAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVZKC01MCUpJyxcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJsZWZ0VG9wXCI6XHJcbiAgICAgICAgdGhpcy5fY29udGVudFN0eWxlQXJyb3cgPSB7XHJcbiAgICAgICAgICByaWdodDogJzBweCcsXHJcbiAgICAgICAgICB0b3A6ICcxMHB4J1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcImxlZnRCb3R0b21cIjpcclxuICAgICAgICB0aGlzLl9jb250ZW50U3R5bGVBcnJvdyA9IHtcclxuICAgICAgICAgIHJpZ2h0OiAnMHB4JyxcclxuICAgICAgICAgIGJvdHRvbTogJzEwcHgnXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICAvLyNlbmRyZWdpb25cclxuICAgICAgLy8jcmVnaW9uIHJpZ2h0XHJcbiAgICAgIGNhc2UgXCJyaWdodFwiOlxyXG4gICAgICAgIHRoaXMuX2NvbnRlbnRTdHlsZUFycm93ID0ge1xyXG4gICAgICAgICAgbGVmdDogJzBweCcsXHJcbiAgICAgICAgICB0b3A6ICc1MCUnLFxyXG4gICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlWSgtNTAlKScsXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwicmlnaHRUb3BcIjpcclxuICAgICAgICB0aGlzLl9jb250ZW50U3R5bGVBcnJvdyA9IHtcclxuICAgICAgICAgIGxlZnQ6ICcwcHgnLFxyXG4gICAgICAgICAgdG9wOiAnMTBweCdcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJyaWdodEJvdHRvbVwiOlxyXG4gICAgICAgIHRoaXMuX2NvbnRlbnRTdHlsZUFycm93ID0ge1xyXG4gICAgICAgICAgbGVmdDogJzBweCcsXHJcbiAgICAgICAgICBib3R0b206ICcxMHB4J1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgLy8vLyNlbmRyZWdpb25cclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICB0aGlzLl9jb250ZW50U3R5bGVBcnJvdyA9IHtcclxuICAgICAgICAgIGJvdHRvbTogJzAnLFxyXG4gICAgICAgICAgbGVmdDogJzUwJScsXHJcbiAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKC01MCUpJyxcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcblxyXG4gIH1cclxuICBwcml2YXRlIGdldENzc0J5Q29sb3IoKSB7XHJcbiAgICBsZXQgY29udGVudENzczogc3RyaW5nID0gJyc7XHJcbiAgICBsZXQgYXJyb3dDb250ZW50OiBzdHJpbmcgPSAnJztcclxuXHJcbiAgICBzd2l0Y2ggKHRoaXMuY29sb3IpIHtcclxuICAgICAgY2FzZSAnaW5mbyc6XHJcbiAgICAgICAgY29udGVudENzcyA9IFwiYmctaW5mby00MDAgZGFyazpiZy1kLWluZm8tNDAwIHAtMiByb3VuZGVkXCI7XHJcbiAgICAgICAgYXJyb3dDb250ZW50ID0gJ2JvcmRlci00IGJvcmRlci1pbmZvLTQwMCBkYXJrOmJvcmRlci1kLWluZm8tNDAwJztcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdzdWNjZXNzJzpcclxuICAgICAgICBjb250ZW50Q3NzID0gXCJiZy1zdWNjZXNzLTQwMCBkYXJrOmJnLWQtc3VjY2Vzcy00MDAgcC0yIHJvdW5kZWRcIjtcclxuICAgICAgICBhcnJvd0NvbnRlbnQgPSAnYm9yZGVyLTQgYm9yZGVyLXN1Y2Nlc3MtNDAwIGRhcms6Ym9yZGVyLWQtc3VjY2Vzcy00MDAnO1xyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ2Vycm9yJzpcclxuICAgICAgICBjb250ZW50Q3NzID0gXCJiZy1lcnJvci00MDAgZGFyazpiZy1kLWVycm9yLTQwMCBwLTIgcm91bmRlZFwiO1xyXG4gICAgICAgIGFycm93Q29udGVudCA9ICdib3JkZXItNCBib3JkZXItZXJyb3ItNDAwIGRhcms6Ym9yZGVyLWQtZXJyb3ItNDAwJztcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICd3YXJuaW5nJzpcclxuICAgICAgICBjb250ZW50Q3NzID0gXCJiZy13YXJuaW5nLTQwMCBkYXJrOmJnLWQtd2FybmluZy00MDAgcC0yIHJvdW5kZWRcIjtcclxuICAgICAgICBhcnJvd0NvbnRlbnQgPSAnYm9yZGVyLTQgYm9yZGVyLXdhcm5pbmctNDAwIGRhcms6Ym9yZGVyLWQtd2FybmluZy00MDAnO1xyXG4gICAgICAgIGJyZWFrXHJcbiAgICB9XHJcbiAgICB0aGlzLl90b29sdGlwQ3NzID0ge1xyXG4gICAgICBbY29udGVudENzc106IHRydWVcclxuICAgIH07XHJcbiAgICB0aGlzLl90b29sdGlwQXJyb3dDc3MgPSB7XHJcbiAgICAgIFthcnJvd0NvbnRlbnRdOiB0cnVlXHJcbiAgICB9XHJcblxyXG5cclxuICB9XHJcbn1cclxuIl19