import { ChangeDetectionStrategy, Component, EventEmitter, Input, Optional, Output, ViewChild, ViewEncapsulation } from '@angular/core';
import { Subject } from 'rxjs';
import { takeUntil } from 'rxjs/operators';
import { toNumber } from 'tds-ui/shared/utility';
import * as i0 from "@angular/core";
import * as i1 from "@angular/cdk/bidi";
import * as i2 from "./pagination-item.component";
import * as i3 from "@angular/common";
import * as i4 from "tds-ui/form-field";
import * as i5 from "tds-ui/tds-input";
const _c0 = ["containerTemplate"];
const _c1 = function (a0, a1) { return { "cursor-pointer": a0, "cursor-not-allowed text-neutral-1-500 dark:text-d-neutral-1-500": a1 }; };
function TDSPaginationSimpleComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {
    const _r3 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 1)(1, "ul", 2)(2, "li", 3);
    i0.ɵɵlistener("click", function TDSPaginationSimpleComponent_ng_template_0_Template_li_click_2_listener() { i0.ɵɵrestoreView(_r3); const ctx_r2 = i0.ɵɵnextContext(); return ctx_r2.prePage(); });
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "li", 4)(4, "div", 5)(5, "tds-form-field", 6)(6, "input", 7);
    i0.ɵɵlistener("keydown.enter", function TDSPaginationSimpleComponent_ng_template_0_Template_input_keydown_enter_6_listener($event) { i0.ɵɵrestoreView(_r3); const ctx_r4 = i0.ɵɵnextContext(); return ctx_r4.jumpToPageViaInput($event); });
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(7, "div", 8)(8, "span", 9);
    i0.ɵɵtext(9, "/");
    i0.ɵɵelementEnd();
    i0.ɵɵtext(10);
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(11, "li", 10);
    i0.ɵɵlistener("click", function TDSPaginationSimpleComponent_ng_template_0_Template_li_click_11_listener() { i0.ɵɵrestoreView(_r3); const ctx_r5 = i0.ɵɵnextContext(); return ctx_r5.nextPage(); });
    i0.ɵɵelementEnd()()();
} if (rf & 2) {
    const ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("disabled", ctx_r1.isFirstIndex)("direction", ctx_r1.dir)("itemRender", ctx_r1.itemRender)("ngClass", i0.ɵɵpureFunction2(15, _c1, !ctx_r1.isFirstIndex, ctx_r1.isFirstIndex));
    i0.ɵɵattribute("title", ctx_r1.locale.prev_page);
    i0.ɵɵadvance(1);
    i0.ɵɵattribute("title", ctx_r1.pageIndex + "/" + ctx_r1.lastIndex);
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("disabled", ctx_r1.disabled)("value", ctx_r1.pageIndex)("size", ctx_r1.size);
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.lastIndex, " ");
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("disabled", ctx_r1.isLastIndex)("direction", ctx_r1.dir)("ngClass", i0.ɵɵpureFunction2(18, _c1, !ctx_r1.isLastIndex, ctx_r1.isLastIndex))("itemRender", ctx_r1.itemRender);
    i0.ɵɵattribute("title", ctx_r1.locale == null ? null : ctx_r1.locale.next_page);
} }
export class TDSPaginationSimpleComponent {
    constructor(cdr, renderer, elementRef, directionality) {
        this.cdr = cdr;
        this.renderer = renderer;
        this.elementRef = elementRef;
        this.directionality = directionality;
        this.itemRender = null;
        this.disabled = false;
        this.total = 0;
        this.pageIndex = 1;
        this.pageSize = 10;
        this.size = 'md';
        this.pageIndexChange = new EventEmitter();
        this.lastIndex = 0;
        this.isFirstIndex = false;
        this.isLastIndex = false;
        this.dir = 'ltr';
        this.destroy$ = new Subject();
        renderer.removeChild(renderer.parentNode(elementRef.nativeElement), elementRef.nativeElement);
    }
    ngOnInit() {
        this.directionality.change?.pipe(takeUntil(this.destroy$)).subscribe((direction) => {
            this.dir = direction;
            this.updateRtlStyle();
            this.cdr.detectChanges();
        });
        this.dir = this.directionality.value;
        this.updateRtlStyle();
    }
    updateRtlStyle() {
        if (this.dir === 'rtl') {
            this.renderer.addClass(this.elementRef.nativeElement, 'tds-pagination-rtl');
        }
        else {
            this.renderer.removeClass(this.elementRef.nativeElement, 'tds-pagination-rtl');
        }
    }
    ngOnDestroy() {
        this.destroy$.next();
        this.destroy$.complete();
    }
    jumpToPageViaInput($event) {
        const target = $event.target;
        const index = toNumber(target.value, this.pageIndex);
        this.onPageIndexChange(index);
        target.value = `${this.pageIndex}`;
    }
    prePage() {
        this.onPageIndexChange(this.pageIndex - 1);
    }
    nextPage() {
        this.onPageIndexChange(this.pageIndex + 1);
    }
    onPageIndexChange(index) {
        this.pageIndexChange.next(index);
    }
    updateBindingValue() {
        this.lastIndex = Math.ceil(this.total / this.pageSize);
        this.isFirstIndex = this.pageIndex === 1;
        this.isLastIndex = this.pageIndex === this.lastIndex;
    }
    ngOnChanges(changes) {
        const { pageIndex, total, pageSize } = changes;
        if (pageIndex || total || pageSize) {
            this.updateBindingValue();
        }
    }
}
TDSPaginationSimpleComponent.ɵfac = function TDSPaginationSimpleComponent_Factory(t) { return new (t || TDSPaginationSimpleComponent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.Directionality, 8)); };
TDSPaginationSimpleComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: TDSPaginationSimpleComponent, selectors: [["tds-pagination-simple"]], viewQuery: function TDSPaginationSimpleComponent_Query(rf, ctx) { if (rf & 1) {
        i0.ɵɵviewQuery(_c0, 7);
    } if (rf & 2) {
        let _t;
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.template = _t.first);
    } }, inputs: { itemRender: "itemRender", disabled: "disabled", locale: "locale", total: "total", pageIndex: "pageIndex", pageSize: "pageSize", size: "size" }, outputs: { pageIndexChange: "pageIndexChange" }, features: [i0.ɵɵNgOnChangesFeature], decls: 2, vars: 0, consts: [["containerTemplate", ""], [1, "flex", "items-center", "w-full", "select-none"], [1, "flex", "items-center"], ["tds-pagination-item", "", "type", "prev", 1, "min-w-7", "min-h-7", "text-sm", "text-center", "align-middle", "mx-0.5", "leading-7", "box-content", "select-auto", "group", "border", "border-transparent", "hover:bg-neutral-3-50", "dark:hover:bg-d-neutral-3-300", "rounded-md", "flex", "items-center", "justify-center", 3, "disabled", "direction", "itemRender", "ngClass", "click"], [1, "tds-pagination-simple-pager", "mx-3"], [1, "flex", "items-center", "justify-center"], [1, "w-12"], ["autocomplete", "off", "tdsInput", "", "autocomplete", "off", 1, "text-center", "text-body-2", "font-regular", 3, "disabled", "value", "size", "keydown.enter"], [1, "ml-2", "text-caption-1", "font-regular", "text-neutral-1-900", "dark:text-d-neutral-1-900"], [1, "tds-pagination-slash"], ["tds-pagination-item", "", "type", "next", 1, "min-w-7", "min-h-7", "text-sm", "text-center", "align-middle", "mx-0.5", "leading-7", "box-content", "select-auto", "group", "border", "border-transparent", "hover:bg-neutral-3-50", "dark:hover:bg-d-neutral-3-300", "rounded-md", "flex", "items-center", "justify-center", 3, "disabled", "direction", "ngClass", "itemRender", "click"]], template: function TDSPaginationSimpleComponent_Template(rf, ctx) { if (rf & 1) {
        i0.ɵɵtemplate(0, TDSPaginationSimpleComponent_ng_template_0_Template, 12, 21, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    } }, directives: [i2.TDSPaginationItemComponent, i3.NgClass, i4.TDSFormField, i5.TDSInput], encapsulation: 2, changeDetection: 0 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(TDSPaginationSimpleComponent, [{
        type: Component,
        args: [{ selector: 'tds-pagination-simple', preserveWhitespaces: false, encapsulation: ViewEncapsulation.None, changeDetection: ChangeDetectionStrategy.OnPush, template: "<ng-template #containerTemplate>\r\n    <div class=\"flex items-center w-full select-none\">\r\n        <ul class=\"flex items-center\">\r\n            <li tds-pagination-item [attr.title]=\"locale.prev_page\" [disabled]=\"isFirstIndex\" [direction]=\"dir\"\r\n                (click)=\"prePage()\" type=\"prev\" [itemRender]=\"itemRender\"\r\n                class=\"min-w-7 min-h-7 text-sm text-center align-middle mx-0.5 leading-7 box-content select-auto group border border-transparent hover:bg-neutral-3-50 dark:hover:bg-d-neutral-3-300  rounded-md flex items-center justify-center\"\r\n                [ngClass]=\"{'cursor-pointer':!isFirstIndex,'cursor-not-allowed text-neutral-1-500 dark:text-d-neutral-1-500':isFirstIndex}\"></li>\r\n            <li [attr.title]=\"pageIndex + '/' + lastIndex\" class=\"tds-pagination-simple-pager mx-3\">\r\n                <div class=\"flex items-center justify-center\">\r\n                    <tds-form-field class=\"w-12\">\r\n                        <input autocomplete=\"off\" class=\"text-center text-body-2 font-regular\" tdsInput autocomplete=\"off\" [disabled]=\"disabled\"\r\n                            [value]=\"pageIndex\" (keydown.enter)=\"jumpToPageViaInput($event)\" [size]=\"size\" />\r\n                    </tds-form-field>\r\n                    <div class=\"ml-2 text-caption-1 font-regular text-neutral-1-900 dark:text-d-neutral-1-900\">\r\n                        <span class=\"tds-pagination-slash\">/</span>\r\n                        {{ lastIndex }}\r\n                    </div>\r\n\r\n                </div>\r\n            </li>\r\n            <li tds-pagination-item [attr.title]=\"locale?.next_page\" [disabled]=\"isLastIndex\" [direction]=\"dir\"\r\n                class=\"min-w-7 min-h-7 text-sm text-center align-middle mx-0.5 leading-7 box-content select-auto group border border-transparent hover:bg-neutral-3-50 dark:hover:bg-d-neutral-3-300 rounded-md flex items-center justify-center\"\r\n                [ngClass]=\"{'cursor-pointer':!isLastIndex,'cursor-not-allowed text-neutral-1-500 dark:text-d-neutral-1-500':isLastIndex}\"\r\n                (click)=\"nextPage()\" type=\"next\" [itemRender]=\"itemRender\"></li>\r\n        </ul>\r\n    </div>\r\n\r\n</ng-template>" }]
    }], function () { return [{ type: i0.ChangeDetectorRef }, { type: i0.Renderer2 }, { type: i0.ElementRef }, { type: i1.Directionality, decorators: [{
                type: Optional
            }] }]; }, { template: [{
            type: ViewChild,
            args: ['containerTemplate', { static: true }]
        }], itemRender: [{
            type: Input
        }], disabled: [{
            type: Input
        }], locale: [{
            type: Input
        }], total: [{
            type: Input
        }], pageIndex: [{
            type: Input
        }], pageSize: [{
            type: Input
        }], size: [{
            type: Input
        }], pageIndexChange: [{
            type: Output
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnaW5hdGlvbi1zaW1wbGUuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvdGRzLXVpL3BhZ2luYXRpb24vcGFnaW5hdGlvbi1zaW1wbGUuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vcHJvamVjdHMvdGRzLXVpL3BhZ2luYXRpb24vcGFnaW5hdGlvbi1zaW1wbGUuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBR0EsT0FBTyxFQUNMLHVCQUF1QixFQUV2QixTQUFTLEVBRVQsWUFBWSxFQUNaLEtBQUssRUFJTCxRQUFRLEVBQ1IsTUFBTSxFQUlOLFNBQVMsRUFDVCxpQkFBaUIsRUFDbEIsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMvQixPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFNM0MsT0FBTyxFQUFjLFFBQVEsRUFBRSxNQUFNLHVCQUF1QixDQUFDOzs7Ozs7Ozs7OztJQzNCekQsOEJBQWtELFlBQUEsWUFBQTtJQUd0Qyw2S0FBUyxnQkFBUyxJQUFDO0lBRXlHLGlCQUFLO0lBQ3JJLDZCQUF3RixhQUFBLHdCQUFBLGVBQUE7SUFJcEQsc01BQWlCLGlDQUEwQixJQUFDO0lBRHBFLGlCQUNxRixFQUFBO0lBRXpGLDhCQUEyRixjQUFBO0lBQ3BELGlCQUFDO0lBQUEsaUJBQU87SUFDM0MsYUFDSjtJQUFBLGlCQUFNLEVBQUEsRUFBQTtJQUlkLCtCQUcrRDtJQUEzRCw4S0FBUyxpQkFBVSxJQUFDO0lBQXVDLGlCQUFLLEVBQUEsRUFBQTs7O0lBcEJaLGVBQXlCO0lBQXpCLDhDQUF5Qix5QkFBQSxpQ0FBQSxtRkFBQTtJQUF6RCxnREFBK0I7SUFJbkQsZUFBMEM7SUFBMUMsa0VBQTBDO0lBR2lFLGVBQXFCO0lBQXJCLDBDQUFxQiwyQkFBQSxxQkFBQTtJQUt4SCxlQUNKO0lBREks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Q29udGVudCI6WyJcclxuXHJcbmltcG9ydCB7IERpcmVjdGlvbiwgRGlyZWN0aW9uYWxpdHkgfSBmcm9tICdAYW5ndWxhci9jZGsvYmlkaSc7XHJcbmltcG9ydCB7XHJcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXHJcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgQ29tcG9uZW50LFxyXG4gIEVsZW1lbnRSZWYsXHJcbiAgRXZlbnRFbWl0dGVyLFxyXG4gIElucHV0LFxyXG4gIE9uQ2hhbmdlcyxcclxuICBPbkRlc3Ryb3ksXHJcbiAgT25Jbml0LFxyXG4gIE9wdGlvbmFsLFxyXG4gIE91dHB1dCxcclxuICBSZW5kZXJlcjIsXHJcbiAgU2ltcGxlQ2hhbmdlcyxcclxuICBUZW1wbGF0ZVJlZixcclxuICBWaWV3Q2hpbGQsXHJcbiAgVmlld0VuY2Fwc3VsYXRpb25cclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyB0YWtlVW50aWwgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcbmltcG9ydCB7IEJ1dHRvblNpemUgfSBmcm9tIFwidGRzLXVpL2NvcmUvY29uZmlnXCI7XHJcblxyXG5cclxuaW1wb3J0IHsgUGFnaW5hdGlvbkl0ZW1SZW5kZXJDb250ZXh0IH0gZnJvbSAnLi9wYWdpbmF0aW9uLnR5cGVzJztcclxuaW1wb3J0IHsgVERTUGFnaW5hdGlvbkkxOG5JbnRlcmZhY2UgfSBmcm9tICd0ZHMtdWkvaTE4bic7XHJcbmltcG9ydCB7IFREU1NhZmVBbnksIHRvTnVtYmVyIH0gZnJvbSAndGRzLXVpL3NoYXJlZC91dGlsaXR5JztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAndGRzLXBhZ2luYXRpb24tc2ltcGxlJyxcclxuICBwcmVzZXJ2ZVdoaXRlc3BhY2VzOiBmYWxzZSxcclxuICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxyXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9wYWdpbmF0aW9uLXNpbXBsZS5jb21wb25lbnQuaHRtbCcsXHJcbiAgLy8gdGVtcGxhdGU6IGBcclxuICAvLyAgIDxuZy10ZW1wbGF0ZSAjY29udGFpbmVyVGVtcGxhdGU+XHJcbiAgLy8gICAgIDxsaVxyXG4gIC8vICAgICAgIHRkcy1wYWdpbmF0aW9uLWl0ZW1cclxuICAvLyAgICAgICBbYXR0ci50aXRsZV09XCJsb2NhbGUucHJldl9wYWdlXCJcclxuICAvLyAgICAgICBbZGlzYWJsZWRdPVwiaXNGaXJzdEluZGV4XCJcclxuICAvLyAgICAgICBbZGlyZWN0aW9uXT1cImRpclwiXHJcbiAgLy8gICAgICAgKGNsaWNrKT1cInByZVBhZ2UoKVwiXHJcbiAgLy8gICAgICAgdHlwZT1cInByZXZcIlxyXG4gIC8vICAgICAgIFtpdGVtUmVuZGVyXT1cIml0ZW1SZW5kZXJcIlxyXG4gIC8vICAgICA+PC9saT5cclxuICAvLyAgICAgPGxpIFthdHRyLnRpdGxlXT1cInBhZ2VJbmRleCArICcvJyArIGxhc3RJbmRleFwiIGNsYXNzPVwidGRzLXBhZ2luYXRpb24tc2ltcGxlLXBhZ2VyXCI+XHJcbiAgLy8gICAgICAgPGlucHV0IFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiIFt2YWx1ZV09XCJwYWdlSW5kZXhcIiAoa2V5ZG93bi5lbnRlcik9XCJqdW1wVG9QYWdlVmlhSW5wdXQoJGV2ZW50KVwiIHNpemU9XCIzXCIgLz5cclxuICAvLyAgICAgICA8c3BhbiBjbGFzcz1cInRkcy1wYWdpbmF0aW9uLXNsYXNoXCI+Lzwvc3Bhbj5cclxuICAvLyAgICAgICB7eyBsYXN0SW5kZXggfX1cclxuICAvLyAgICAgPC9saT5cclxuICAvLyAgICAgPGxpXHJcbiAgLy8gICAgICAgdGRzLXBhZ2luYXRpb24taXRlbVxyXG4gIC8vICAgICAgIFthdHRyLnRpdGxlXT1cImxvY2FsZT8ubmV4dF9wYWdlXCJcclxuICAvLyAgICAgICBbZGlzYWJsZWRdPVwiaXNMYXN0SW5kZXhcIlxyXG4gIC8vICAgICAgIFtkaXJlY3Rpb25dPVwiZGlyXCJcclxuICAvLyAgICAgICAoY2xpY2spPVwibmV4dFBhZ2UoKVwiXHJcbiAgLy8gICAgICAgdHlwZT1cIm5leHRcIlxyXG4gIC8vICAgICAgIFtpdGVtUmVuZGVyXT1cIml0ZW1SZW5kZXJcIlxyXG4gIC8vICAgICA+PC9saT5cclxuICAvLyAgIDwvbmctdGVtcGxhdGU+XHJcbiAgLy8gYFxyXG59KVxyXG5leHBvcnQgY2xhc3MgVERTUGFnaW5hdGlvblNpbXBsZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uQ2hhbmdlcywgT25EZXN0cm95LCBPbkluaXQge1xyXG4gIEBWaWV3Q2hpbGQoJ2NvbnRhaW5lclRlbXBsYXRlJywgeyBzdGF0aWM6IHRydWUgfSkgdGVtcGxhdGUhOiBUZW1wbGF0ZVJlZjxURFNTYWZlQW55PjtcclxuICBASW5wdXQoKSBpdGVtUmVuZGVyOiBUZW1wbGF0ZVJlZjxQYWdpbmF0aW9uSXRlbVJlbmRlckNvbnRleHQ+IHwgbnVsbCA9IG51bGw7XHJcbiAgQElucHV0KCkgZGlzYWJsZWQgPSBmYWxzZTtcclxuICBASW5wdXQoKSBsb2NhbGUhOiBURFNQYWdpbmF0aW9uSTE4bkludGVyZmFjZTtcclxuICBASW5wdXQoKSB0b3RhbCA9IDA7XHJcbiAgQElucHV0KCkgcGFnZUluZGV4ID0gMTtcclxuICBASW5wdXQoKSBwYWdlU2l6ZSA9IDEwO1xyXG4gIEBJbnB1dCgpIHNpemU6IEJ1dHRvblNpemUgPSAnbWQnO1xyXG4gIEBPdXRwdXQoKSByZWFkb25seSBwYWdlSW5kZXhDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPG51bWJlcj4oKTtcclxuICBsYXN0SW5kZXggPSAwO1xyXG4gIGlzRmlyc3RJbmRleCA9IGZhbHNlO1xyXG4gIGlzTGFzdEluZGV4ID0gZmFsc2U7XHJcblxyXG4gIGRpcjogRGlyZWN0aW9uID0gJ2x0cic7XHJcbiAgcHJpdmF0ZSBkZXN0cm95JCA9IG5ldyBTdWJqZWN0PHZvaWQ+KCk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHJpdmF0ZSBjZHI6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgcHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIyLFxyXG4gICAgcHJpdmF0ZSBlbGVtZW50UmVmOiBFbGVtZW50UmVmLFxyXG4gICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSBkaXJlY3Rpb25hbGl0eTogRGlyZWN0aW9uYWxpdHlcclxuICApIHtcclxuICAgIHJlbmRlcmVyLnJlbW92ZUNoaWxkKHJlbmRlcmVyLnBhcmVudE5vZGUoZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50KSwgZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50KTtcclxuICB9XHJcbiAgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLmRpcmVjdGlvbmFsaXR5LmNoYW5nZT8ucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpLnN1YnNjcmliZSgoZGlyZWN0aW9uOiBEaXJlY3Rpb24pID0+IHtcclxuICAgICAgdGhpcy5kaXIgPSBkaXJlY3Rpb247XHJcbiAgICAgIHRoaXMudXBkYXRlUnRsU3R5bGUoKTtcclxuICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLmRpciA9IHRoaXMuZGlyZWN0aW9uYWxpdHkudmFsdWU7XHJcbiAgICB0aGlzLnVwZGF0ZVJ0bFN0eWxlKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHVwZGF0ZVJ0bFN0eWxlKCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuZGlyID09PSAncnRsJykge1xyXG4gICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LCAndGRzLXBhZ2luYXRpb24tcnRsJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LCAndGRzLXBhZ2luYXRpb24tcnRsJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcclxuICAgIHRoaXMuZGVzdHJveSQubmV4dCgpO1xyXG4gICAgdGhpcy5kZXN0cm95JC5jb21wbGV0ZSgpO1xyXG4gIH1cclxuXHJcbiAganVtcFRvUGFnZVZpYUlucHV0KCRldmVudDogRXZlbnQpOiB2b2lkIHtcclxuICAgIGNvbnN0IHRhcmdldCA9ICRldmVudC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgIGNvbnN0IGluZGV4ID0gdG9OdW1iZXIodGFyZ2V0LnZhbHVlLCB0aGlzLnBhZ2VJbmRleCk7XHJcbiAgICB0aGlzLm9uUGFnZUluZGV4Q2hhbmdlKGluZGV4KTtcclxuICAgIHRhcmdldC52YWx1ZSA9IGAke3RoaXMucGFnZUluZGV4fWA7XHJcbiAgfVxyXG5cclxuICBwcmVQYWdlKCk6IHZvaWQge1xyXG4gICAgdGhpcy5vblBhZ2VJbmRleENoYW5nZSh0aGlzLnBhZ2VJbmRleCAtIDEpO1xyXG4gIH1cclxuICBuZXh0UGFnZSgpOiB2b2lkIHtcclxuICAgIHRoaXMub25QYWdlSW5kZXhDaGFuZ2UodGhpcy5wYWdlSW5kZXggKyAxKTtcclxuICB9XHJcblxyXG4gIG9uUGFnZUluZGV4Q2hhbmdlKGluZGV4OiBudW1iZXIpOiB2b2lkIHtcclxuICAgIHRoaXMucGFnZUluZGV4Q2hhbmdlLm5leHQoaW5kZXgpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlQmluZGluZ1ZhbHVlKCk6IHZvaWQge1xyXG4gICAgdGhpcy5sYXN0SW5kZXggPSBNYXRoLmNlaWwodGhpcy50b3RhbCAvIHRoaXMucGFnZVNpemUpO1xyXG4gICAgdGhpcy5pc0ZpcnN0SW5kZXggPSB0aGlzLnBhZ2VJbmRleCA9PT0gMTtcclxuICAgIHRoaXMuaXNMYXN0SW5kZXggPSB0aGlzLnBhZ2VJbmRleCA9PT0gdGhpcy5sYXN0SW5kZXg7XHJcbiAgfVxyXG5cclxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XHJcbiAgICBjb25zdCB7IHBhZ2VJbmRleCwgdG90YWwsIHBhZ2VTaXplIH0gPSBjaGFuZ2VzO1xyXG4gICAgaWYgKHBhZ2VJbmRleCB8fCB0b3RhbCB8fCBwYWdlU2l6ZSkge1xyXG4gICAgICB0aGlzLnVwZGF0ZUJpbmRpbmdWYWx1ZSgpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCI8bmctdGVtcGxhdGUgI2NvbnRhaW5lclRlbXBsYXRlPlxyXG4gICAgPGRpdiBjbGFzcz1cImZsZXggaXRlbXMtY2VudGVyIHctZnVsbCBzZWxlY3Qtbm9uZVwiPlxyXG4gICAgICAgIDx1bCBjbGFzcz1cImZsZXggaXRlbXMtY2VudGVyXCI+XHJcbiAgICAgICAgICAgIDxsaSB0ZHMtcGFnaW5hdGlvbi1pdGVtIFthdHRyLnRpdGxlXT1cImxvY2FsZS5wcmV2X3BhZ2VcIiBbZGlzYWJsZWRdPVwiaXNGaXJzdEluZGV4XCIgW2RpcmVjdGlvbl09XCJkaXJcIlxyXG4gICAgICAgICAgICAgICAgKGNsaWNrKT1cInByZVBhZ2UoKVwiIHR5cGU9XCJwcmV2XCIgW2l0ZW1SZW5kZXJdPVwiaXRlbVJlbmRlclwiXHJcbiAgICAgICAgICAgICAgICBjbGFzcz1cIm1pbi13LTcgbWluLWgtNyB0ZXh0LXNtIHRleHQtY2VudGVyIGFsaWduLW1pZGRsZSBteC0wLjUgbGVhZGluZy03IGJveC1jb250ZW50IHNlbGVjdC1hdXRvIGdyb3VwIGJvcmRlciBib3JkZXItdHJhbnNwYXJlbnQgaG92ZXI6YmctbmV1dHJhbC0zLTUwIGRhcms6aG92ZXI6YmctZC1uZXV0cmFsLTMtMzAwICByb3VuZGVkLW1kIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCJcclxuICAgICAgICAgICAgICAgIFtuZ0NsYXNzXT1cInsnY3Vyc29yLXBvaW50ZXInOiFpc0ZpcnN0SW5kZXgsJ2N1cnNvci1ub3QtYWxsb3dlZCB0ZXh0LW5ldXRyYWwtMS01MDAgZGFyazp0ZXh0LWQtbmV1dHJhbC0xLTUwMCc6aXNGaXJzdEluZGV4fVwiPjwvbGk+XHJcbiAgICAgICAgICAgIDxsaSBbYXR0ci50aXRsZV09XCJwYWdlSW5kZXggKyAnLycgKyBsYXN0SW5kZXhcIiBjbGFzcz1cInRkcy1wYWdpbmF0aW9uLXNpbXBsZS1wYWdlciBteC0zXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8dGRzLWZvcm0tZmllbGQgY2xhc3M9XCJ3LTEyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBhdXRvY29tcGxldGU9XCJvZmZcIiBjbGFzcz1cInRleHQtY2VudGVyIHRleHQtYm9keS0yIGZvbnQtcmVndWxhclwiIHRkc0lucHV0IGF1dG9jb21wbGV0ZT1cIm9mZlwiIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbdmFsdWVdPVwicGFnZUluZGV4XCIgKGtleWRvd24uZW50ZXIpPVwianVtcFRvUGFnZVZpYUlucHV0KCRldmVudClcIiBbc2l6ZV09XCJzaXplXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L3Rkcy1mb3JtLWZpZWxkPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtbC0yIHRleHQtY2FwdGlvbi0xIGZvbnQtcmVndWxhciB0ZXh0LW5ldXRyYWwtMS05MDAgZGFyazp0ZXh0LWQtbmV1dHJhbC0xLTkwMFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRkcy1wYWdpbmF0aW9uLXNsYXNoXCI+Lzwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFzdEluZGV4IH19XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgIDxsaSB0ZHMtcGFnaW5hdGlvbi1pdGVtIFthdHRyLnRpdGxlXT1cImxvY2FsZT8ubmV4dF9wYWdlXCIgW2Rpc2FibGVkXT1cImlzTGFzdEluZGV4XCIgW2RpcmVjdGlvbl09XCJkaXJcIlxyXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJtaW4tdy03IG1pbi1oLTcgdGV4dC1zbSB0ZXh0LWNlbnRlciBhbGlnbi1taWRkbGUgbXgtMC41IGxlYWRpbmctNyBib3gtY29udGVudCBzZWxlY3QtYXV0byBncm91cCBib3JkZXIgYm9yZGVyLXRyYW5zcGFyZW50IGhvdmVyOmJnLW5ldXRyYWwtMy01MCBkYXJrOmhvdmVyOmJnLWQtbmV1dHJhbC0zLTMwMCByb3VuZGVkLW1kIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCJcclxuICAgICAgICAgICAgICAgIFtuZ0NsYXNzXT1cInsnY3Vyc29yLXBvaW50ZXInOiFpc0xhc3RJbmRleCwnY3Vyc29yLW5vdC1hbGxvd2VkIHRleHQtbmV1dHJhbC0xLTUwMCBkYXJrOnRleHQtZC1uZXV0cmFsLTEtNTAwJzppc0xhc3RJbmRleH1cIlxyXG4gICAgICAgICAgICAgICAgKGNsaWNrKT1cIm5leHRQYWdlKClcIiB0eXBlPVwibmV4dFwiIFtpdGVtUmVuZGVyXT1cIml0ZW1SZW5kZXJcIj48L2xpPlxyXG4gICAgICAgIDwvdWw+XHJcbiAgICA8L2Rpdj5cclxuXHJcbjwvbmctdGVtcGxhdGU+Il19