import { ChangeDetectionStrategy, Component, ViewEncapsulation } from '@angular/core';
import { CandyDate } from 'tds-ui/core/time';
import { AbstractPanelHeader } from './abstract-panel-header';
import { transCompatFormat } from './util';
import * as i0 from "@angular/core";
import * as i1 from "tds-ui/i18n";
import * as i2 from "@angular/common";
import * as i3 from "tds-ui/select";
import * as i4 from "@angular/forms";
function MonthHeaderComponent_button_1_Template(rf, ctx) { if (rf & 1) {
    const _r4 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 2);
    i0.ɵɵlistener("click", function MonthHeaderComponent_button_1_Template_button_click_0_listener() { i0.ɵɵrestoreView(_r4); const ctx_r3 = i0.ɵɵnextContext(); return ctx_r3.superPrevious(); });
    i0.ɵɵelement(1, "span", 6);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵclassMapInterpolate1("", ctx_r0.prefixCls, "-super-prev-btn text-xl text-neutral-1-500 dark:text-d-neutral-1-500 p-1.5 flex items-center justify-center border border-transparent");
    i0.ɵɵstyleProp("visibility", ctx_r0.showSuperPreBtn ? "visible" : "hidden");
    i0.ɵɵpropertyInterpolate("title", ctx_r0.superPreviousTitle());
} }
function MonthHeaderComponent_ng_container_5_button_1_Template(rf, ctx) { if (rf & 1) {
    const _r11 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 9);
    i0.ɵɵlistener("click", function MonthHeaderComponent_ng_container_5_button_1_Template_button_click_0_listener($event) { i0.ɵɵrestoreView(_r11); const selector_r5 = i0.ɵɵnextContext().$implicit; return selector_r5.onClick($event); });
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const selector_r5 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵclassMap(selector_r5.className);
    i0.ɵɵpropertyInterpolate("title", selector_r5.title || null);
    i0.ɵɵadvance(1);
    i0.ɵɵtextInterpolate1(" ", selector_r5.label, " \u00A0 ");
} }
function MonthHeaderComponent_ng_container_5_div_2_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵtext(0);
} if (rf & 2) {
    const item_r15 = ctx.item;
    i0.ɵɵtextInterpolate1(" ", item_r15.name, " ");
} }
const _c0 = function (a0, a1) { return { "w-[85px]": a0, "flex-auto": a1 }; };
function MonthHeaderComponent_ng_container_5_div_2_Template(rf, ctx) { if (rf & 1) {
    const _r20 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 10)(1, "tds-select", 11);
    i0.ɵɵlistener("ngModelChange", function MonthHeaderComponent_ng_container_5_div_2_Template_tds_select_ngModelChange_1_listener($event) { i0.ɵɵrestoreView(_r20); const selector_r5 = i0.ɵɵnextContext().$implicit; return selector_r5.onClick($event); });
    i0.ɵɵtemplate(2, MonthHeaderComponent_ng_container_5_div_2_ng_template_2_Template, 1, 1, "ng-template", 12);
    i0.ɵɵelementEnd()();
} if (rf & 2) {
    const ctx_r21 = i0.ɵɵnextContext();
    const indx_r6 = ctx_r21.index;
    const selector_r5 = ctx_r21.$implicit;
    const ctx_r8 = i0.ɵɵnextContext();
    i0.ɵɵclassMap(i0.ɵɵpureFunction2(6, _c0, ctx_r8.selectors.length == 1, ctx_r8.selectors.length > 1 && indx_r6 == 0));
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("placeholder", selector_r5.title)("ngModel", selector_r5.value)("data", selector_r5.data)("allowSearch", false);
} }
function MonthHeaderComponent_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, MonthHeaderComponent_ng_container_5_button_1_Template, 2, 5, "button", 7);
    i0.ɵɵtemplate(2, MonthHeaderComponent_ng_container_5_div_2_Template, 3, 9, "div", 8);
    i0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const selector_r5 = ctx.$implicit;
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngIf", !selector_r5.data);
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngIf", selector_r5.data);
} }
function MonthHeaderComponent_button_8_Template(rf, ctx) { if (rf & 1) {
    const _r23 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 2);
    i0.ɵɵlistener("click", function MonthHeaderComponent_button_8_Template_button_click_0_listener() { i0.ɵɵrestoreView(_r23); const ctx_r22 = i0.ɵɵnextContext(); return ctx_r22.superNext(); });
    i0.ɵɵelement(1, "span", 13);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵclassMapInterpolate1("", ctx_r2.prefixCls, "-super-next-btn text-xl text-neutral-1-500 dark:text-d-neutral-1-500 p-1.5 flex items-center justify-center border border-transparent");
    i0.ɵɵstyleProp("visibility", ctx_r2.showSuperNextBtn ? "visible" : "hidden");
    i0.ɵɵpropertyInterpolate("title", ctx_r2.superNextTitle());
} }
export class MonthHeaderComponent extends AbstractPanelHeader {
    constructor(dateHelper) {
        super();
        this.dateHelper = dateHelper;
    }
    getSelectors() {
        let that = this;
        let year = this.getYears();
        const labelyear = this.dateHelper.format(this.value.nativeDate, transCompatFormat(this.locale.yearFormat));
        const valueYear = year.find(f => { return f.name === labelyear; })?.id;
        return [
            {
                className: `${this.prefixCls}-year-btn`,
                title: this.locale.yearSelect,
                onClick: (data) => {
                    that.changeValue(that.value.setYear(data)); // this.changeMode('year')
                },
                label: labelyear,
                value: valueYear,
                data: year,
            },
        ];
    }
    getYears() {
        let result = [];
        const activeDate = new CandyDate(this.value.nativeDate);
        for (let year = 50; year > 0; year--) {
            result.push({ id: activeDate.getYear() - year, name: `${activeDate.getYear() - year}` });
        }
        result.push({ id: activeDate.getYear(), name: `${activeDate.getYear()}` });
        for (let year = 1; year <= 50; year++) {
            result.push({ id: activeDate.getYear() + year, name: `${activeDate.getYear() + year}` });
        }
        return result;
    }
}
MonthHeaderComponent.ɵfac = function MonthHeaderComponent_Factory(t) { return new (t || MonthHeaderComponent)(i0.ɵɵdirectiveInject(i1.DateHelperService)); };
MonthHeaderComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: MonthHeaderComponent, selectors: [["month-header"]], exportAs: ["monthHeader"], features: [i0.ɵɵInheritDefinitionFeature], decls: 9, vars: 19, consts: [[1, "flex", "py-2", "px-0.5", "w-full", 3, "ngClass"], ["role", "button", "tabindex", "-1", 3, "visibility", "class", "title", "click", 4, "ngIf"], ["role", "button", "tabindex", "-1", 3, "title", "click"], [1, "tdsi-arrow-left-line"], [4, "ngFor", "ngForOf"], [1, "tdsi-arrow-right-line"], [1, "tdsi-arrow-previous-fill"], ["role", "button", "type", "button", 3, "class", "title", "click", 4, "ngIf"], ["class", "px-0.5", 3, "class", 4, "ngIf"], ["role", "button", "type", "button", 3, "title", "click"], [1, "px-0.5"], ["valueField", "id", "textField", "name", 3, "placeholder", "ngModel", "data", "allowSearch", "ngModelChange"], ["tds-option-tmp", ""], [1, "tdsi-arrow-next-fill"]], template: function MonthHeaderComponent_Template(rf, ctx) { if (rf & 1) {
        i0.ɵɵelementStart(0, "div", 0);
        i0.ɵɵtemplate(1, MonthHeaderComponent_button_1_Template, 2, 6, "button", 1);
        i0.ɵɵelementStart(2, "button", 2);
        i0.ɵɵlistener("click", function MonthHeaderComponent_Template_button_click_2_listener() { return ctx.previous(); });
        i0.ɵɵelement(3, "span", 3);
        i0.ɵɵelementEnd();
        i0.ɵɵelementStart(4, "div");
        i0.ɵɵtemplate(5, MonthHeaderComponent_ng_container_5_Template, 3, 2, "ng-container", 4);
        i0.ɵɵelementEnd();
        i0.ɵɵelementStart(6, "button", 2);
        i0.ɵɵlistener("click", function MonthHeaderComponent_Template_button_click_6_listener() { return ctx.next(); });
        i0.ɵɵelement(7, "span", 5);
        i0.ɵɵelementEnd();
        i0.ɵɵtemplate(8, MonthHeaderComponent_button_8_Template, 2, 6, "button", 1);
        i0.ɵɵelementEnd();
    } if (rf & 2) {
        i0.ɵɵproperty("ngClass", ctx.prefixCls);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngIf", ctx.showSuperPreBtn);
        i0.ɵɵadvance(1);
        i0.ɵɵclassMapInterpolate1("", ctx.prefixCls, "-prev-btn p-1.5 text-xl text-neutral-1-500 dark:text-d-neutral-1-500 flex items-center justify-center border border-transparent");
        i0.ɵɵstyleProp("visibility", ctx.showPreBtn ? "visible" : "hidden");
        i0.ɵɵpropertyInterpolate("title", ctx.previousTitle());
        i0.ɵɵadvance(2);
        i0.ɵɵclassMapInterpolate1("", ctx.prefixCls, "-view flex-auto flex items-center justify-center font-semibold text-title-1 text-neutral-1-900 dark:text-d-neutral-1-900");
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngForOf", ctx.selectors);
        i0.ɵɵadvance(1);
        i0.ɵɵclassMapInterpolate1("", ctx.prefixCls, "-next-btn text-xl text-neutral-1-500 dark:text-d-neutral-1-500 p-1.5 flex items-center justify-center border border-transparent");
        i0.ɵɵstyleProp("visibility", ctx.showNextBtn ? "visible" : "hidden");
        i0.ɵɵpropertyInterpolate("title", ctx.nextTitle());
        i0.ɵɵadvance(2);
        i0.ɵɵproperty("ngIf", ctx.showSuperNextBtn);
    } }, directives: [i2.NgClass, i2.NgIf, i2.NgForOf, i3.TDSSelect, i4.NgControlStatus, i4.NgModel, i3.TDSOptionTemplateDirective], encapsulation: 2, changeDetection: 0 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(MonthHeaderComponent, [{
        type: Component,
        args: [{ encapsulation: ViewEncapsulation.None, changeDetection: ChangeDetectionStrategy.OnPush, selector: 'month-header', exportAs: 'monthHeader', template: "<div class=\"flex py-2 px-0.5 w-full\" [ngClass]=\"prefixCls\">\r\n  <button *ngIf=\"showSuperPreBtn\" [style.visibility]=\"showSuperPreBtn ? 'visible' : 'hidden'\"\r\n    class=\"{{ prefixCls }}-super-prev-btn text-xl text-neutral-1-500 dark:text-d-neutral-1-500 p-1.5 flex items-center justify-center border border-transparent\"\r\n    role=\"button\" tabindex=\"-1\" title=\"{{ superPreviousTitle() }}\" (click)=\"superPrevious()\">\r\n    <span class=\"tdsi-arrow-previous-fill\"></span>\r\n  </button>\r\n  <button [style.visibility]=\"showPreBtn ? 'visible' : 'hidden'\"\r\n    class=\"{{ prefixCls }}-prev-btn p-1.5 text-xl text-neutral-1-500 dark:text-d-neutral-1-500 flex items-center justify-center border border-transparent\"\r\n    role=\"button\" title=\"{{ previousTitle() }}\" tabindex=\"-1\" (click)=\"previous()\">\r\n    <span class=\"tdsi-arrow-left-line\"></span>\r\n  </button>\r\n\r\n  <div\r\n    class=\"{{ prefixCls }}-view flex-auto flex items-center justify-center font-semibold text-title-1 text-neutral-1-900 dark:text-d-neutral-1-900\">\r\n    <ng-container *ngFor=\"let selector of selectors; let indx= index\">\r\n      <button *ngIf=\"!selector.data\" class=\"{{ selector.className }}\" role=\"button\" type=\"button\"\r\n        title=\"{{ selector.title || null }}\" (click)=\"selector.onClick($event)\">\r\n        {{ selector.label }} &nbsp;\r\n      </button>\r\n      <div *ngIf=\"selector.data\" class=\"px-0.5\"\r\n        [class]=\"{'w-[85px]':selectors.length == 1,'flex-auto':selectors.length > 1 && indx == 0}\">\r\n        <tds-select valueField=\"id\" textField=\"name\" [placeholder]='selector.title!' [ngModel]=\"selector.value\"\r\n          (ngModelChange)=\"selector.onClick($event)\" [data]=\"selector.data\" [allowSearch]=\"false\" >\r\n          <ng-template tds-option-tmp let-label='label' let-item=\"item\" let-value='value' let-selected=\"selected\">\r\n            {{item.name}}\r\n          </ng-template>\r\n        </tds-select>\r\n      </div>\r\n    </ng-container>\r\n  </div>\r\n  <button [style.visibility]=\"showNextBtn ? 'visible' : 'hidden'\"\r\n    class=\"{{ prefixCls }}-next-btn text-xl text-neutral-1-500 dark:text-d-neutral-1-500 p-1.5 flex items-center justify-center border border-transparent\"\r\n    role=\"button\" tabindex=\"-1\" title=\"{{ nextTitle() }}\" (click)=\"next()\">\r\n    <span class=\"tdsi-arrow-right-line\"></span>\r\n  </button>\r\n  <button *ngIf=\"showSuperNextBtn\" [style.visibility]=\"showSuperNextBtn ? 'visible' : 'hidden'\"\r\n    class=\"{{ prefixCls }}-super-next-btn text-xl text-neutral-1-500 dark:text-d-neutral-1-500 p-1.5 flex items-center justify-center border border-transparent\"\r\n    role=\"button\" tabindex=\"-1\" title=\"{{ superNextTitle() }}\" (click)=\"superNext()\">\r\n    <span class=\"tdsi-arrow-next-fill\"></span>\r\n  </button>\r\n</div>" }]
    }], function () { return [{ type: i1.DateHelperService }]; }, null); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9udGgtaGVhZGVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3Rkcy11aS9kYXRlLXBpY2tlci9saWIvbW9udGgtaGVhZGVyLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3Rkcy11aS9kYXRlLXBpY2tlci9saWIvYWJzdHJhY3QtcGFuZWwtaGVhZGVyLmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsT0FBTyxFQUFFLHVCQUF1QixFQUFFLFNBQVMsRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN0RixPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFJN0MsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFFOUQsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sUUFBUSxDQUFDOzs7Ozs7OztJQ1J6QyxpQ0FFMkY7SUFBMUIsb0tBQVMsc0JBQWUsSUFBQztJQUN4RiwwQkFBOEM7SUFDaEQsaUJBQVM7OztJQUhQLHdMQUE0SjtJQUQ5SCwyRUFBMkQ7SUFFN0QsOERBQWtDOzs7O0lBWTVELGlDQUMwRTtJQUFuQyx5TUFBUywyQkFBd0IsSUFBQztJQUN2RSxZQUNGO0lBQUEsaUJBQVM7OztJQUhzQixvQ0FBZ0M7SUFDN0QsNERBQW9DO0lBQ3BDLGVBQ0Y7SUFERSx5REFDRjs7O0lBTU0sWUFDRjs7O0lBREUsOENBQ0Y7Ozs7O0lBTkosK0JBQzZGLHFCQUFBO0lBRXpGLDBOQUFpQiwyQkFBd0IsSUFBQztJQUMxQywyR0FFYztJQUNoQixpQkFBYSxFQUFBOzs7Ozs7SUFOYixvSEFBMEY7SUFDN0MsZUFBK0I7SUFBL0IsK0NBQStCLDhCQUFBLDBCQUFBLHNCQUFBOzs7SUFQaEYsNkJBQWtFO0lBQ2hFLDBGQUdTO0lBQ1Qsb0ZBUU07SUFDUiwwQkFBZTs7O0lBYkosZUFBb0I7SUFBcEIsd0NBQW9C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QUN0RSwwQkFBMkM7UUFDN0MsaUJBQVM7UUFDVCwyRUFJUztRQUNYLGlCQUFNOztRQXhDK0IsdUNBQXFCO1FBQy9DLGVBQXFCO1FBQXJCLDBDQUFxQjtRQU01QixlQUFzSjtRQUF0SiwrS0FBc0o7UUFEaEosbUVBQXNEO1FBRTlDLHNEQUE2QjtRQUszQyxlQUErSTtRQUEvSSx3S0FBK0k7UUFDNUcsZUFBYztRQUFkLHVDQUFjO1FBaUJqRCxlQUFzSjtRQUF0SiwrS0FBc0o7UUFEaEosb0VBQXVEO1FBRWpDLGtEQUF5QjtRQUc5QyxlQUFzQjtRQUF0QiwyQ0FBc0I7O3VGRGpCcEIsb0JBQW9CO2NBUGhDLFNBQVM7Z0NBQ08saUJBQWlCLENBQUMsSUFBSSxtQkFDcEIsdUJBQXVCLENBQUMsTUFBTSxZQUNyQyxjQUFjLFlBQ2QsYUFBYSIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5cclxuaW1wb3J0IHsgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENvbXBvbmVudCwgVmlld0VuY2Fwc3VsYXRpb24gfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQ2FuZHlEYXRlIH0gZnJvbSAndGRzLXVpL2NvcmUvdGltZSc7XHJcbmltcG9ydCB7IERhdGVIZWxwZXJTZXJ2aWNlIH0gZnJvbSAndGRzLXVpL2kxOG4nO1xyXG5pbXBvcnQgeyBURFNTYWZlQW55IH0gZnJvbSAndGRzLXVpL3NoYXJlZC91dGlsaXR5JztcclxuXHJcbmltcG9ydCB7IEFic3RyYWN0UGFuZWxIZWFkZXIgfSBmcm9tICcuL2Fic3RyYWN0LXBhbmVsLWhlYWRlcic7XHJcbmltcG9ydCB7IFBhbmVsU2VsZWN0b3IgfSBmcm9tICcuL2ludGVyZmFjZSc7XHJcbmltcG9ydCB7IHRyYW5zQ29tcGF0Rm9ybWF0IH0gZnJvbSAnLi91dGlsJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXHJcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXHJcbiAgc2VsZWN0b3I6ICdtb250aC1oZWFkZXInLCAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lOmNvbXBvbmVudC1zZWxlY3RvclxyXG4gIGV4cG9ydEFzOiAnbW9udGhIZWFkZXInLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9hYnN0cmFjdC1wYW5lbC1oZWFkZXIuaHRtbCdcclxufSlcclxuZXhwb3J0IGNsYXNzIE1vbnRoSGVhZGVyQ29tcG9uZW50IGV4dGVuZHMgQWJzdHJhY3RQYW5lbEhlYWRlciB7XHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBkYXRlSGVscGVyOiBEYXRlSGVscGVyU2VydmljZSkge1xyXG4gICAgc3VwZXIoKTtcclxuICB9XHJcblxyXG4gIGdldFNlbGVjdG9ycygpOiBQYW5lbFNlbGVjdG9yW10ge1xyXG5cclxuXHJcbiAgICBsZXQgdGhhdCA9IHRoaXM7XHJcbiAgICBsZXQgeWVhciA9IHRoaXMuZ2V0WWVhcnMoKTtcclxuICAgIGNvbnN0IGxhYmVseWVhciA9IHRoaXMuZGF0ZUhlbHBlci5mb3JtYXQodGhpcy52YWx1ZS5uYXRpdmVEYXRlLCB0cmFuc0NvbXBhdEZvcm1hdCh0aGlzLmxvY2FsZS55ZWFyRm9ybWF0KSk7XHJcbiAgICBjb25zdCB2YWx1ZVllYXIgPSB5ZWFyLmZpbmQoZiA9PiB7IHJldHVybiBmLm5hbWUgPT09IGxhYmVseWVhciB9KT8uaWQ7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICB7XHJcbiAgICAgICAgY2xhc3NOYW1lOiBgJHt0aGlzLnByZWZpeENsc30teWVhci1idG5gLFxyXG4gICAgICAgIHRpdGxlOiB0aGlzLmxvY2FsZS55ZWFyU2VsZWN0LFxyXG4gICAgICAgIG9uQ2xpY2s6IChkYXRhOiBURFNTYWZlQW55KSA9PiB7XHJcbiAgICAgICAgICB0aGF0LmNoYW5nZVZhbHVlKHRoYXQudmFsdWUuc2V0WWVhcihkYXRhKSk7Ly8gdGhpcy5jaGFuZ2VNb2RlKCd5ZWFyJylcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxhYmVsOiBsYWJlbHllYXIsXHJcbiAgICAgICAgdmFsdWU6IHZhbHVlWWVhcixcclxuICAgICAgICBkYXRhOiB5ZWFyLFxyXG4gICAgICB9LFxyXG5cclxuICAgIF07XHJcbiAgfVxyXG4gIHByaXZhdGUgZ2V0WWVhcnMoKSB7XHJcbiAgICBsZXQgcmVzdWx0ID0gW107XHJcbiAgICBjb25zdCBhY3RpdmVEYXRlID0gbmV3IENhbmR5RGF0ZSh0aGlzLnZhbHVlLm5hdGl2ZURhdGUpO1xyXG4gICAgZm9yIChsZXQgeWVhciA9IDUwOyB5ZWFyID4gMDsgeWVhci0tKSB7XHJcbiAgICAgIHJlc3VsdC5wdXNoKHsgaWQ6IGFjdGl2ZURhdGUuZ2V0WWVhcigpIC0geWVhciwgbmFtZTogYCR7YWN0aXZlRGF0ZS5nZXRZZWFyKCkgLSB5ZWFyfWAgfSk7XHJcbiAgICB9XHJcbiAgICByZXN1bHQucHVzaCh7IGlkOiBhY3RpdmVEYXRlLmdldFllYXIoKSwgbmFtZTogYCR7YWN0aXZlRGF0ZS5nZXRZZWFyKCl9YCB9KTtcclxuICAgIGZvciAobGV0IHllYXIgPSAxOyB5ZWFyIDw9IDUwOyB5ZWFyKyspIHtcclxuICAgICAgcmVzdWx0LnB1c2goeyBpZDogYWN0aXZlRGF0ZS5nZXRZZWFyKCkgKyB5ZWFyLCBuYW1lOiBgJHthY3RpdmVEYXRlLmdldFllYXIoKSArIHllYXJ9YCB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG59XHJcbiIsIjxkaXYgY2xhc3M9XCJmbGV4IHB5LTIgcHgtMC41IHctZnVsbFwiIFtuZ0NsYXNzXT1cInByZWZpeENsc1wiPlxyXG4gIDxidXR0b24gKm5nSWY9XCJzaG93U3VwZXJQcmVCdG5cIiBbc3R5bGUudmlzaWJpbGl0eV09XCJzaG93U3VwZXJQcmVCdG4gPyAndmlzaWJsZScgOiAnaGlkZGVuJ1wiXHJcbiAgICBjbGFzcz1cInt7IHByZWZpeENscyB9fS1zdXBlci1wcmV2LWJ0biB0ZXh0LXhsIHRleHQtbmV1dHJhbC0xLTUwMCBkYXJrOnRleHQtZC1uZXV0cmFsLTEtNTAwIHAtMS41IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGJvcmRlciBib3JkZXItdHJhbnNwYXJlbnRcIlxyXG4gICAgcm9sZT1cImJ1dHRvblwiIHRhYmluZGV4PVwiLTFcIiB0aXRsZT1cInt7IHN1cGVyUHJldmlvdXNUaXRsZSgpIH19XCIgKGNsaWNrKT1cInN1cGVyUHJldmlvdXMoKVwiPlxyXG4gICAgPHNwYW4gY2xhc3M9XCJ0ZHNpLWFycm93LXByZXZpb3VzLWZpbGxcIj48L3NwYW4+XHJcbiAgPC9idXR0b24+XHJcbiAgPGJ1dHRvbiBbc3R5bGUudmlzaWJpbGl0eV09XCJzaG93UHJlQnRuID8gJ3Zpc2libGUnIDogJ2hpZGRlbidcIlxyXG4gICAgY2xhc3M9XCJ7eyBwcmVmaXhDbHMgfX0tcHJldi1idG4gcC0xLjUgdGV4dC14bCB0ZXh0LW5ldXRyYWwtMS01MDAgZGFyazp0ZXh0LWQtbmV1dHJhbC0xLTUwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBib3JkZXIgYm9yZGVyLXRyYW5zcGFyZW50XCJcclxuICAgIHJvbGU9XCJidXR0b25cIiB0aXRsZT1cInt7IHByZXZpb3VzVGl0bGUoKSB9fVwiIHRhYmluZGV4PVwiLTFcIiAoY2xpY2spPVwicHJldmlvdXMoKVwiPlxyXG4gICAgPHNwYW4gY2xhc3M9XCJ0ZHNpLWFycm93LWxlZnQtbGluZVwiPjwvc3Bhbj5cclxuICA8L2J1dHRvbj5cclxuXHJcbiAgPGRpdlxyXG4gICAgY2xhc3M9XCJ7eyBwcmVmaXhDbHMgfX0tdmlldyBmbGV4LWF1dG8gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZm9udC1zZW1pYm9sZCB0ZXh0LXRpdGxlLTEgdGV4dC1uZXV0cmFsLTEtOTAwIGRhcms6dGV4dC1kLW5ldXRyYWwtMS05MDBcIj5cclxuICAgIDxuZy1jb250YWluZXIgKm5nRm9yPVwibGV0IHNlbGVjdG9yIG9mIHNlbGVjdG9yczsgbGV0IGluZHg9IGluZGV4XCI+XHJcbiAgICAgIDxidXR0b24gKm5nSWY9XCIhc2VsZWN0b3IuZGF0YVwiIGNsYXNzPVwie3sgc2VsZWN0b3IuY2xhc3NOYW1lIH19XCIgcm9sZT1cImJ1dHRvblwiIHR5cGU9XCJidXR0b25cIlxyXG4gICAgICAgIHRpdGxlPVwie3sgc2VsZWN0b3IudGl0bGUgfHwgbnVsbCB9fVwiIChjbGljayk9XCJzZWxlY3Rvci5vbkNsaWNrKCRldmVudClcIj5cclxuICAgICAgICB7eyBzZWxlY3Rvci5sYWJlbCB9fSAmbmJzcDtcclxuICAgICAgPC9idXR0b24+XHJcbiAgICAgIDxkaXYgKm5nSWY9XCJzZWxlY3Rvci5kYXRhXCIgY2xhc3M9XCJweC0wLjVcIlxyXG4gICAgICAgIFtjbGFzc109XCJ7J3ctWzg1cHhdJzpzZWxlY3RvcnMubGVuZ3RoID09IDEsJ2ZsZXgtYXV0byc6c2VsZWN0b3JzLmxlbmd0aCA+IDEgJiYgaW5keCA9PSAwfVwiPlxyXG4gICAgICAgIDx0ZHMtc2VsZWN0IHZhbHVlRmllbGQ9XCJpZFwiIHRleHRGaWVsZD1cIm5hbWVcIiBbcGxhY2Vob2xkZXJdPSdzZWxlY3Rvci50aXRsZSEnIFtuZ01vZGVsXT1cInNlbGVjdG9yLnZhbHVlXCJcclxuICAgICAgICAgIChuZ01vZGVsQ2hhbmdlKT1cInNlbGVjdG9yLm9uQ2xpY2soJGV2ZW50KVwiIFtkYXRhXT1cInNlbGVjdG9yLmRhdGFcIiBbYWxsb3dTZWFyY2hdPVwiZmFsc2VcIiA+XHJcbiAgICAgICAgICA8bmctdGVtcGxhdGUgdGRzLW9wdGlvbi10bXAgbGV0LWxhYmVsPSdsYWJlbCcgbGV0LWl0ZW09XCJpdGVtXCIgbGV0LXZhbHVlPSd2YWx1ZScgbGV0LXNlbGVjdGVkPVwic2VsZWN0ZWRcIj5cclxuICAgICAgICAgICAge3tpdGVtLm5hbWV9fVxyXG4gICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cclxuICAgICAgICA8L3Rkcy1zZWxlY3Q+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9uZy1jb250YWluZXI+XHJcbiAgPC9kaXY+XHJcbiAgPGJ1dHRvbiBbc3R5bGUudmlzaWJpbGl0eV09XCJzaG93TmV4dEJ0biA/ICd2aXNpYmxlJyA6ICdoaWRkZW4nXCJcclxuICAgIGNsYXNzPVwie3sgcHJlZml4Q2xzIH19LW5leHQtYnRuIHRleHQteGwgdGV4dC1uZXV0cmFsLTEtNTAwIGRhcms6dGV4dC1kLW5ldXRyYWwtMS01MDAgcC0xLjUgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYm9yZGVyIGJvcmRlci10cmFuc3BhcmVudFwiXHJcbiAgICByb2xlPVwiYnV0dG9uXCIgdGFiaW5kZXg9XCItMVwiIHRpdGxlPVwie3sgbmV4dFRpdGxlKCkgfX1cIiAoY2xpY2spPVwibmV4dCgpXCI+XHJcbiAgICA8c3BhbiBjbGFzcz1cInRkc2ktYXJyb3ctcmlnaHQtbGluZVwiPjwvc3Bhbj5cclxuICA8L2J1dHRvbj5cclxuICA8YnV0dG9uICpuZ0lmPVwic2hvd1N1cGVyTmV4dEJ0blwiIFtzdHlsZS52aXNpYmlsaXR5XT1cInNob3dTdXBlck5leHRCdG4gPyAndmlzaWJsZScgOiAnaGlkZGVuJ1wiXHJcbiAgICBjbGFzcz1cInt7IHByZWZpeENscyB9fS1zdXBlci1uZXh0LWJ0biB0ZXh0LXhsIHRleHQtbmV1dHJhbC0xLTUwMCBkYXJrOnRleHQtZC1uZXV0cmFsLTEtNTAwIHAtMS41IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGJvcmRlciBib3JkZXItdHJhbnNwYXJlbnRcIlxyXG4gICAgcm9sZT1cImJ1dHRvblwiIHRhYmluZGV4PVwiLTFcIiB0aXRsZT1cInt7IHN1cGVyTmV4dFRpdGxlKCkgfX1cIiAoY2xpY2spPVwic3VwZXJOZXh0KClcIj5cclxuICAgIDxzcGFuIGNsYXNzPVwidGRzaS1hcnJvdy1uZXh0LWZpbGxcIj48L3NwYW4+XHJcbiAgPC9idXR0b24+XHJcbjwvZGl2PiJdfQ==